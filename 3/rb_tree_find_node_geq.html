<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
       $NetBSD: rbtree.3,v 1.12 2016/08/30 05:12:00 dholland Exp $
  
   Copyright (c) 2010 The NetBSD Foundation, Inc.
   All rights reserved.
  
   Portions Copyright (c) 2012 Apple Inc. All rights reserved.
  
   This code is derived from software contributed to The NetBSD Foundation
   by Matt Thomas, Niels Provos, and David Young.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
  
   THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
   ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
   TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
   PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
   BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
   POSSIBILITY OF SUCH DAMAGE.
   -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>RBTREE(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">RBTREE(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">RBTREE(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">rbtree</code>,
    <code class="Nm">rb_tree_init</code>,
    <code class="Nm">rb_tree_insert_node</code>,
    <code class="Nm">rb_tree_remove_node</code>,
    <code class="Nm">rb_tree_find_node</code>,
    <code class="Nm">rb_tree_find_node_geq</code>,
    <code class="Nm">rb_tree_find_node_leq</code>,
    <code class="Nm">rb_tree_iterate</code>,
    <code class="Nm">rb_tree_count</code>, <code class="Nm">RB_TREE_MIN</code>,
    <code class="Nm">RB_TREE_MAX</code>,
    <code class="Nm">RB_TREE_FOREACH</code>,
    <code class="Nm">RB_TREE_FOREACH_SAFE</code>,
    <code class="Nm">RB_TREE_FOREACH_REVERSE</code>,
    <code class="Nm">RB_TREE_FOREACH_REVERSE_SAFE</code> &#x2014;
    <span class="Nd">red-black tree</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
<p class="Pp"><span class="Lb">Standard C&#x00A0;Library (libc, -lc)</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><code class="In">#include
    &lt;<a class="In">sys/rbtree.h</a>&gt;</code></p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">rb_tree_init</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>, <var class="Fa" style="white-space: nowrap;">const rb_tree_ops_t
    *ops</var>);</p>
<p class="Pp"><var class="Ft">void *</var>
  <br/>
  <code class="Fn">rb_tree_insert_node</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>, <var class="Fa" style="white-space: nowrap;">void
  *rb</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">rb_tree_remove_node</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>, <var class="Fa" style="white-space: nowrap;">void
  *rb</var>);</p>
<p class="Pp"><var class="Ft">void *</var>
  <br/>
  <code class="Fn">rb_tree_find_node</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>, <var class="Fa" style="white-space: nowrap;">const void
    *key</var>);</p>
<p class="Pp"><var class="Ft">void *</var>
  <br/>
  <code class="Fn">rb_tree_find_node_geq</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>, <var class="Fa" style="white-space: nowrap;">const void
    *key</var>);</p>
<p class="Pp"><var class="Ft">void *</var>
  <br/>
  <code class="Fn">rb_tree_find_node_leq</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>, <var class="Fa" style="white-space: nowrap;">const void
    *key</var>);</p>
<p class="Pp"><var class="Ft">void *</var>
  <br/>
  <code class="Fn">rb_tree_iterate</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>, <var class="Fa" style="white-space: nowrap;">void *rb</var>,
    <var class="Fa" style="white-space: nowrap;">const unsigned int
    direction</var>);</p>
<p class="Pp"><var class="Ft">size_t</var>
  <br/>
  <code class="Fn">rb_tree_count</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>);</p>
<p class="Pp"><var class="Ft">void *</var>
  <br/>
  <code class="Fn">RB_TREE_MIN</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>);</p>
<p class="Pp"><var class="Ft">void *</var>
  <br/>
  <code class="Fn">RB_TREE_MAX</code>(<var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>);</p>
<p class="Pp"><code class="Fn">RB_TREE_FOREACH</code>(<var class="Fa" style="white-space: nowrap;">void
    *rb</var>, <var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>);</p>
<p class="Pp"><code class="Fn">RB_TREE_FOREACH_SAFE</code>(<var class="Fa" style="white-space: nowrap;">void
    *rb</var>, <var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>, <var class="Fa" style="white-space: nowrap;">void
  *tmp</var>);</p>
<p class="Pp"><code class="Fn">RB_TREE_FOREACH_REVERSE</code>(<var class="Fa" style="white-space: nowrap;">void
    *rb</var>, <var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>);</p>
<p class="Pp"><code class="Fn">RB_TREE_FOREACH_REVERSE_SAFE</code>(<var class="Fa" style="white-space: nowrap;">void
    *rb</var>, <var class="Fa" style="white-space: nowrap;">rb_tree_t
    *rbt</var>, <var class="Fa" style="white-space: nowrap;">void
  *tmp</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><code class="Nm">rbtree</code> provides red-black trees. A
    red-black tree is a binary search tree with the node color as an extra
    attribute. It fulfills a set of conditions:</p>
<ol class="Bl-enum Bd-indent">
  <li>Every search path from the root to a leaf consists of the same number of
      black nodes.</li>
  <li>Each red node (except for the root) has a black parent.</li>
  <li>Each leaf node is black.</li>
</ol>
<p class="Pp">Every operation on a red-black tree is bounded as O(lg n). The
    maximum height of a red-black tree is 2lg (n+1).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="TYPES"><a class="permalink" href="#TYPES">TYPES</a></h1>
<dl class="Bl-tag">
  <dt><var class="Vt">rb_tree_t</var></dt>
  <dd>A red-black tree.</dd>
  <dt><var class="Vt">typedef signed int (* rbto_compare_nodes_fn)(void
    *context, const void *node1, const void *node2);</var></dt>
  <dd>The node-comparison function. Defines an ordering on nodes. Returns a
      negative value if the first node <var class="Ar">node1</var> precedes the
      second node <var class="Ar">node2</var>. Returns a positive value if the
      first node <var class="Ar">node1</var> follows the second node
      <var class="Ar">node2</var>. Returns 0 if the first node
      <var class="Ar">node1</var> and the second node
      <var class="Ar">node2</var> are identical according to the ordering.</dd>
  <dt><var class="Vt">typedef signed int (* rbto_compare_key_fn)(void *context,
    const void *node, const void *key);</var></dt>
  <dd>The node-key comparison function. Defines the order of nodes and keys.
      Returns a negative value if the node <var class="Ar">node</var> precedes
      the key <var class="Ar">key</var>. Returns a positive value if the node
      <var class="Ar">node</var> follows the key <var class="Ar">key</var>.
      Returns 0 if the node <var class="Ar">node</var> is identical to the key
      <var class="Ar">key</var> according to the ordering.</dd>
  <dt><var class="Vt">rb_tree_ops_t</var></dt>
  <dd>Defines the function for comparing two nodes in the same tree, the
      function for comparing a node in the tree with a key, the offset of member
      <var class="Vt">rb_node_t</var> within the node type, and the opaque
      context pointer passed to the comparison functions. Members of
      <var class="Vt">rb_tree_ops_t</var> are
    <div class="Bd Pp">
    <pre>
        rbto_compare_nodes_fn rbto_compare_nodes;
        rbto_compare_key_fn rbto_compare_key;
        size_t rbto_node_offset;
        void *rbto_context;
    </pre>
    </div>
  </dd>
  <dt><var class="Vt">rb_node_t</var></dt>
  <dd>A node in a red-black tree has this structure as a member. The offset of
      the <var class="Vt">rb_node_t</var> member in the caller's node structure
      should be provided as <var class="Va">rbto_node_offset</var>. (None of the
      functions in the <code class="Nm">rbtree</code> interface are meant to
      take pointers directly to the <var class="Vt">rb_node_t</var>
    member.)</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FUNCTIONS"><a class="permalink" href="#FUNCTIONS">FUNCTIONS</a></h1>
<dl class="Bl-tag">
  <dt id="rb_tree_init"><a class="permalink" href="#rb_tree_init"><code class="Fn">rb_tree_init</code></a>(<var class="Fa">rbt</var>,
    <var class="Fa">ops</var>)</dt>
  <dd>Initialize the red-black tree <var class="Fa">rbt</var>. Let the
      comparison functions given by <var class="Fa">ops</var> define the order
      of nodes in the tree for the purposes of insertion, search, and iteration.
      <code class="Fn">rb_tree_init</code>() always succeeds.</dd>
  <dt id="rb_tree_insert_node"><a class="permalink" href="#rb_tree_insert_node"><code class="Fn">rb_tree_insert_node</code></a>(<var class="Fa">rbt</var>,
    <var class="Fa">rb</var>)</dt>
  <dd>Insert the node <var class="Fa">rb</var> into the tree
      <var class="Fa">rbt</var>. Return inserted node on success, already
      existing node on failure.</dd>
  <dt id="rb_tree_remove_node"><a class="permalink" href="#rb_tree_remove_node"><code class="Fn">rb_tree_remove_node</code></a>(<var class="Fa">rbt</var>,
    <var class="Fa">rb</var>)</dt>
  <dd>Remove the node <var class="Fa">rb</var> from the tree
      <var class="Fa">rbt</var>.</dd>
  <dt id="rb_tree_find_node"><a class="permalink" href="#rb_tree_find_node"><code class="Fn">rb_tree_find_node</code></a>(<var class="Fa">rbt</var>,
    <var class="Fa">key</var>)</dt>
  <dd>Search the tree <var class="Fa">rbt</var> for a node exactly matching
      <var class="Fa">key</var>. If no such node is in the tree, return
      <code class="Dv">NULL</code>. Otherwise, return the matching node.</dd>
  <dt id="rb_tree_find_node_geq"><a class="permalink" href="#rb_tree_find_node_geq"><code class="Fn">rb_tree_find_node_geq</code></a>(<var class="Fa">rbt</var>,
    <var class="Fa">key</var>)</dt>
  <dd>Search the tree <var class="Fa">rbt</var> for a node that exactly matches
      <var class="Fa">key</var> and return it. If no such node is present,
      return the first node following <var class="Fa">key</var> or, if no such
      node is in the tree, return <code class="Dv">NULL</code>.</dd>
  <dt id="rb_tree_find_node_leq"><a class="permalink" href="#rb_tree_find_node_leq"><code class="Fn">rb_tree_find_node_leq</code></a>(<var class="Fa">rbt</var>,
    <var class="Fa">key</var>)</dt>
  <dd>Search the tree <var class="Fa">rbt</var> for a node that exactly matches
      <var class="Fa">key</var> and return it. If no such node is present,
      return the first node preceding <var class="Fa">key</var> or, if no such
      node is in the tree, return <code class="Dv">NULL</code>.</dd>
  <dt id="rb_tree_iterate"><a class="permalink" href="#rb_tree_iterate"><code class="Fn">rb_tree_iterate</code></a>(<var class="Fa">rbt</var>,
    <var class="Fa">rb</var>, <var class="Fa">direction</var>)</dt>
  <dd>If <var class="Fa">direction</var> is <code class="Dv">RB_DIR_LEFT</code>,
      return the node in the tree <var class="Fa">rbt</var> immediately
      preceding the node <var class="Fa">rb</var> or, if
      <var class="Fa">rb</var> is <code class="Dv">NULL</code>, return the first
      node in <var class="Fa">rbt</var> or, if the tree is empty, return
      <code class="Dv">NULL</code>.
    <p class="Pp">If <var class="Fa">direction</var> is
        <code class="Dv">RB_DIR_RIGHT</code>, return the node in the tree
        <var class="Fa">rbt</var> immediately following the node
        <var class="Fa">rb</var> or, if <var class="Fa">rb</var> is
        <code class="Dv">NULL</code>, return the last node in
        <var class="Fa">rbt</var> or, if the tree is empty, return
        <code class="Dv">NULL</code>.</p>
  </dd>
  <dt id="rb_tree_count"><a class="permalink" href="#rb_tree_count"><code class="Fn">rb_tree_count</code></a>(<var class="Fa">rbt</var>)</dt>
  <dd>Return the number of nodes in the tree <var class="Fa">rbt</var>. If
      <var class="Fa">rbt</var> is <code class="Dv">NULL</code>, 0 is
    returned.</dd>
  <dt id="RB_TREE_MIN"><a class="permalink" href="#RB_TREE_MIN"><code class="Fn">RB_TREE_MIN</code></a>(<var class="Fa">rbt</var>)</dt>
  <dd>Return the first node in <var class="Fa">rbt</var>, i.e. the node with the
      least key, or <code class="Dv">NULL</code> if <var class="Fa">rbt</var> is
      empty.</dd>
  <dt id="RB_TREE_MAX"><a class="permalink" href="#RB_TREE_MAX"><code class="Fn">RB_TREE_MAX</code></a>(<var class="Fa">rbt</var>)</dt>
  <dd>Return the last node in <var class="Fa">rbt</var>, i.e. the node with the
      greatest key, or <code class="Dv">NULL</code> if <var class="Fa">rbt</var>
      is empty.</dd>
  <dt id="RB_TREE_FOREACH"><a class="permalink" href="#RB_TREE_FOREACH"><code class="Fn">RB_TREE_FOREACH</code></a>(<var class="Fa">rb</var>,
    <var class="Fa">rbt</var>)</dt>
  <dd><code class="Nm">RB_TREE_FOREACH</code> is a macro to be used in the place
      of a <code class="Dv">for</code> header preceding a statement to traverse
      the nodes in <var class="Fa">rbt</var> from least to greatest, assigning
      <var class="Fa">rb</var> to each node in turn and executing the
    statement.</dd>
  <dt id="RB_TREE_FOREACH_SAFE"><a class="permalink" href="#RB_TREE_FOREACH_SAFE"><code class="Fn">RB_TREE_FOREACH_SAFE</code></a>(<var class="Fa">rb</var>,
    <var class="Fa">rbt</var>, <var class="Fa">tmp</var>)</dt>
  <dd><code class="Nm">RB_TREE_FOREACH_SAFE</code> is a macro to be used like
      <code class="Nm">RB_TREE_FOREACH</code> but which uses a temporary
      variable to permit safe modification or deletion of
      <var class="Fa">rb</var> in the body of the loop.</dd>
  <dt id="RB_TREE_FOREACH_REVERSE"><a class="permalink" href="#RB_TREE_FOREACH_REVERSE"><code class="Fn">RB_TREE_FOREACH_REVERSE</code></a>(<var class="Fa">rb</var>,
    <var class="Fa">rbt</var>)</dt>
  <dd><code class="Nm">RB_TREE_FOREACH_REVERSE</code> is a macro to be used in
      the place of a <code class="Dv">for</code> header preceding a statement to
      traverse the nodes in <var class="Fa">rbt</var> from greatest to least,
      assigning <var class="Fa">rb</var> to each node in turn and executing the
      statement.</dd>
  <dt id="RB_TREE_FOREACH_REVERSE_SAFE"><a class="permalink" href="#RB_TREE_FOREACH_REVERSE_SAFE"><code class="Fn">RB_TREE_FOREACH_REVERSE_SAFE</code></a>(<var class="Fa">rb</var>,
    <var class="Fa">rbt</var>, <var class="Fa">tmp</var>)</dt>
  <dd><code class="Nm">RB_TREE_FOREACH_REVERSE_SAFE</code> is a macro to be used
      like <code class="Nm">RB_TREE_FOREACH_REVERSE</code> but which uses a
      temporary variable to permit safe modification or deletion of
      <var class="Fa">rb</var> in the body of the loop.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="../3/queue">queue(3)</a>,
    <a class="Xr" href="../3/tree">tree(3)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">The <code class="Nm">rbtree</code> interface first appeared in
    <span class="Ux">NetBSD 6.0</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp"><span class="An">Matt Thomas</span>
    &lt;<a class="Mt" href="mailto:matt@NetBSD.org">matt@NetBSD.org</a>&gt;
    wrote <code class="Nm">rbtree</code>.</p>
<p class="Pp">
  <br/>
  <span class="An">Niels Provos</span>
    &lt;<a class="Mt" href="mailto:provos@citi.umich.edu">provos@citi.umich.edu</a>&gt;
    wrote the <a class="Xr" href="../3/tree">tree(3)</a> manual page. Portions
    of this page derive from that page.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 29, 2016</td>
    <td class="foot-os">macOS 12.5</td>
  </tr>
</table>
</body>
</html>
