<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2002 Mike Barcroft <mike@FreeBSD.org>
   All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
  
   THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
   $FreeBSD: src/lib/libc/gen/fmtmsg.3,v 1.4 2002/12/04 18:57:44 ru Exp $
   -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>FMTMSG(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">FMTMSG(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">FMTMSG(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">fmtmsg</code> &#x2014; <span class="Nd">display a
    detailed diagnostic message</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
<p class="Pp"><span class="Lb">Standard C&#x00A0;Library (libc, -lc)</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><code class="In">#include
    &lt;<a class="In">fmtmsg.h</a>&gt;</code></p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">fmtmsg</code>(<var class="Fa">long classification</var>,
    <var class="Fa">const char *label</var>, <var class="Fa">int severity</var>,
    <var class="Fa">const char *text</var>, <var class="Fa">const char
    *action</var>, <var class="Fa">const char *tag</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The
    <a class="permalink" href="#fmtmsg"><code class="Fn" id="fmtmsg">fmtmsg</code></a>()
    function displays a detailed diagnostic message, based on the supplied
    arguments, to <code class="Dv">stderr</code> and/or the system console.</p>
<p class="Pp">The <var class="Fa">classification</var> argument is the bitwise
    inclusive OR of zero or one of the manifest constants from each of the
    classification groups below. The Output classification group is an exception
    since both <code class="Dv">MM_PRINT</code> and
    <code class="Dv">MM_CONSOLE</code> may be specified.</p>
<dl class="Bl-tag">
  <dt>Output</dt>
  <dd>
    <dl class="Bl-tag">
      <dt id="MM_PRINT"><a class="permalink" href="#MM_PRINT"><code class="Dv">MM_PRINT</code></a></dt>
      <dd>Output should take place on <code class="Dv">stderr</code>.</dd>
      <dt id="MM_CONSOLE"><a class="permalink" href="#MM_CONSOLE"><code class="Dv">MM_CONSOLE</code></a></dt>
      <dd>Output should take place on the system console.</dd>
    </dl>
  </dd>
  <dt>Source of Condition (Major)</dt>
  <dd>
    <dl class="Bl-tag">
      <dt id="MM_HARD"><a class="permalink" href="#MM_HARD"><code class="Dv">MM_HARD</code></a></dt>
      <dd>The source of the condition is hardware related.</dd>
      <dt id="MM_SOFT"><a class="permalink" href="#MM_SOFT"><code class="Dv">MM_SOFT</code></a></dt>
      <dd>The source of the condition is software related.</dd>
      <dt id="MM_FIRM"><a class="permalink" href="#MM_FIRM"><code class="Dv">MM_FIRM</code></a></dt>
      <dd>The source of the condition is firmware related.</dd>
    </dl>
  </dd>
  <dt>Source of Condition (Minor)</dt>
  <dd>
    <dl class="Bl-tag">
      <dt id="MM_APPL"><a class="permalink" href="#MM_APPL"><code class="Dv">MM_APPL</code></a></dt>
      <dd>The condition was detected at the application level.</dd>
      <dt id="MM_UTIL"><a class="permalink" href="#MM_UTIL"><code class="Dv">MM_UTIL</code></a></dt>
      <dd>The condition was detected at the utility level.</dd>
      <dt id="MM_OPSYS"><a class="permalink" href="#MM_OPSYS"><code class="Dv">MM_OPSYS</code></a></dt>
      <dd>The condition was detected at the operating system level.</dd>
    </dl>
  </dd>
  <dt>Status</dt>
  <dd>
    <dl class="Bl-tag">
      <dt id="MM_RECOVER"><a class="permalink" href="#MM_RECOVER"><code class="Dv">MM_RECOVER</code></a></dt>
      <dd>The application can recover from the condition.</dd>
      <dt id="MM_NRECOV"><a class="permalink" href="#MM_NRECOV"><code class="Dv">MM_NRECOV</code></a></dt>
      <dd>The application is unable to recover from the condition.</dd>
    </dl>
  </dd>
</dl>
<p class="Pp">Alternatively, the <code class="Dv">MM_NULLMC</code> manifest
    constant may be used to specify no classification.</p>
<p class="Pp">The <var class="Fa">label</var> argument indicates the source of
    the message. It is made up of two fields separated by a colon
    (&#x2018;<code class="Li">:</code>&#x2019;). The first field can be up to 10
    bytes, and the second field can be up to 14 bytes. The
    <code class="Dv">MM_NULLLBL</code> manifest constant may be used to specify
    no label.</p>
<p class="Pp">The <var class="Fa">severity</var> argument identifies the
    importance of the condition. One of the following manifest constants should
    be used for this argument.</p>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="MM_HALT"><a class="permalink" href="#MM_HALT"><code class="Dv">MM_HALT</code></a></dt>
  <dd>The application has confronted a serious fault and is halting.</dd>
  <dt id="MM_ERROR"><a class="permalink" href="#MM_ERROR"><code class="Dv">MM_ERROR</code></a></dt>
  <dd>The application has detected a fault.</dd>
  <dt id="MM_WARNING"><a class="permalink" href="#MM_WARNING"><code class="Dv">MM_WARNING</code></a></dt>
  <dd>The application has detected an unusual condition, that could be
      indicative of a problem.</dd>
  <dt id="MM_INFO"><a class="permalink" href="#MM_INFO"><code class="Dv">MM_INFO</code></a></dt>
  <dd>The application is providing information about a non-error condition.</dd>
  <dt id="MM_NOSEV"><a class="permalink" href="#MM_NOSEV"><code class="Dv">MM_NOSEV</code></a></dt>
  <dd>No severity level supplied.</dd>
</dl>
</div>
<p class="Pp">The <var class="Fa">text</var> argument details the error
    condition that caused the message. There is no limit on the size of this
    character string. The <code class="Dv">MM_NULLTXT</code> manifest constant
    may be used to specify no text.</p>
<p class="Pp" id="fmtmsg~2">The <var class="Fa">action</var> argument details
    how the error-recovery process should begin. Upon output,
    <a class="permalink" href="#fmtmsg~2"><code class="Fn">fmtmsg</code></a>()
    will prefix &quot;<code class="Li">TO FIX:</code>&quot; to the beginning of
    the <var class="Fa">action</var> argument. The
    <code class="Dv">MM_NULLACT</code> manifest constant may be used to specify
    no action.</p>
<p class="Pp">The <var class="Fa">tag</var> argument should reference online
    documentation for the message. This usually includes the
    <var class="Fa">label</var> and a unique identifying number. An example tag
    is &quot;<code class="Li">BSD:ls:168</code>&quot;. The
    <code class="Dv">MM_NULLTAG</code> manifest constant may be used to specify
    no tag.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN_VALUES"><a class="permalink" href="#RETURN_VALUES">RETURN
  VALUES</a></h1>
<p class="Pp">The <code class="Fn">fmtmsg</code>() function returns
    <code class="Dv">MM_OK</code> upon success, <code class="Dv">MM_NOMSG</code>
    to indicate output to <code class="Dv">stderr</code> failed,
    <code class="Dv">MM_NOCON</code> to indicate output to the system console
    failed, or <code class="Dv">MM_NOTOK</code> to indicate output to
    <code class="Dv">stderr</code> and the system console failed.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<p class="Pp">The <code class="Ev">MSGVERB</code> (message verbosity)
    environment variable specifies which arguments to
    <code class="Fn">fmtmsg</code>() will be output to
    <code class="Dv">stderr</code>, and in which order.
    <code class="Ev">MSGVERB</code> should be a colon
    (&#x2018;<code class="Li">:</code>&#x2019;) separated list of identifiers.
    Valid identifiers include: <code class="Li">label</code>,
    <code class="Li">severity</code>, <code class="Li">text</code>,
    <code class="Li">action</code>, and <code class="Li">tag</code>. If invalid
    identifiers are specified or incorrectly separated, the default message
    verbosity and ordering will be used. The default ordering is equivalent to a
    <code class="Ev">MSGVERB</code> with a value of
    &quot;<code class="Li">label:severity:text:action:tag</code>&quot;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">The code:</p>
<div class="Bd Pp Bd-indent Li">
<pre>fmtmsg(MM_UTIL | MM_PRINT, &quot;BSD:ls&quot;, MM_ERROR,
    &quot;illegal option -- z&quot;, &quot;refer to manual&quot;, &quot;BSD:ls:001&quot;);</pre>
</div>
<p class="Pp">will output:</p>
<div class="Bd Pp Bd-indent Li">
<pre>BSD:ls: ERROR: illegal option -- z
TO FIX: refer to manual BSD:ls:001</pre>
</div>
<p class="Pp">to <code class="Dv">stderr</code>.</p>
<p class="Pp">The same code, with <code class="Ev">MSGVERB</code> set to
    &quot;<code class="Li">text:severity:action:tag</code>&quot;, produces:</p>
<div class="Bd Pp Bd-indent Li">
<pre>illegal option -- z: ERROR
TO FIX: refer to manual BSD:ls:001</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="../3/err">err(3)</a>,
    <a class="Xr" href="../3/exit">exit(3)</a>,
    <a class="Xr" href="../3/strerror">strerror(3)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="STANDARDS"><a class="permalink" href="#STANDARDS">STANDARDS</a></h1>
<p class="Pp">The <code class="Fn">fmtmsg</code>() function conforms to
    <span class="St">IEEE Std 1003.1-2001 (&#x201C;POSIX.1&#x201D;)</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">The <code class="Fn">fmtmsg</code>() function first appeared in
    <span class="Ux">FreeBSD 5.0</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Specifying <code class="Dv">MM_NULLMC</code> for the
    <var class="Fa">classification</var> argument makes little sense, since
    without an output specified, <code class="Fn">fmtmsg</code>() is unable to
    do anything useful.</p>
<p class="Pp">In order for <code class="Fn">fmtmsg</code>() to output to the
    system console, the effective user must have appropriate permission to write
    to <span class="Pa">/dev/console</span>. This means that on most systems
    <code class="Fn">fmtmsg</code>() will return
    <code class="Dv">MM_NOCON</code> unless the effective user is root.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 5, 2002</td>
    <td class="foot-os">macOS 15.0</td>
  </tr>
</table>
</body>
</html>
