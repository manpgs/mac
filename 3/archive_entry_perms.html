<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2003-2007 Tim Kientzle
   Copyright (c) 2010 Joerg Sonnenberger
   All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
  
   THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
   -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>ARCHIVE_ENTRY_PERMS(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ARCHIVE_ENTRY_PERMS(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">ARCHIVE_ENTRY_PERMS(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">archive_entry_gid</code>,
    <code class="Nm">archive_entry_set_gid</code>,
    <code class="Nm">archive_entry_uid</code>,
    <code class="Nm">archive_entry_set_uid</code>,
    <code class="Nm">archive_entry_perm</code>,
    <code class="Nm">archive_entry_set_perm</code>,
    <code class="Nm">archive_entry_strmode</code>,
    <code class="Nm">archive_entry_uname</code>,
    <code class="Nm">archive_entry_uname_w</code>,
    <code class="Nm">archive_entry_set_uname</code>,
    <code class="Nm">archive_entry_copy_uname</code>,
    <code class="Nm">archive_entry_copy_uname_w</code>,
    <code class="Nm">archive_entry_update_uname_utf8</code>,
    <code class="Nm">archive_entry_gname</code>,
    <code class="Nm">archive_entry_gname_w</code>,
    <code class="Nm">archive_entry_set_gname</code>,
    <code class="Nm">archive_entry_copy_gname</code>,
    <code class="Nm">archive_entry_copy_gname_w</code>,
    <code class="Nm">archive_entry_update_gname_utf8</code>,
    <code class="Nm">archive_entry_fflags</code>,
    <code class="Nm">archive_entry_fflags_text</code>,
    <code class="Nm">archive_entry_set_fflags</code>,
    <code class="Nm">archive_entry_copy_fflags_text</code>,
    <code class="Nm">archive_entry_copy_fflags_text_w</code> &#x2014;
    <span class="Nd">functions for manipulating ownership and permissions in
    archive entry descriptions</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
<p class="Pp">Streaming Archive Library (libarchive, -larchive)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><code class="In">#include
    &lt;<a class="In">archive_entry.h</a>&gt;</code></p>
<p class="Pp"><var class="Ft">gid_t</var>
  <br/>
  <code class="Fn">archive_entry_gid</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_set_gid</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">gid_t
    gid</var>);</p>
<p class="Pp"><var class="Ft">uid_t</var>
  <br/>
  <code class="Fn">archive_entry_uid</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_set_uid</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">uid_t
    uid</var>);</p>
<p class="Pp"><var class="Ft">mode_t</var>
  <br/>
  <code class="Fn">archive_entry_perm</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_set_perm</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">mode_t
    mode</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">archive_entry_strmode</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">archive_entry_gname</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">const wchar_t *</var>
  <br/>
  <code class="Fn">archive_entry_gname_w</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_set_gname</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    char *a</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_copy_gname</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    char *name</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_copy_gname_w</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    wchar_t *name</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_entry_update_gname_utf8</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    char *name</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">archive_entry_uname</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">const wchar_t *</var>
  <br/>
  <code class="Fn">archive_entry_uname_w</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_set_uname</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    char *name</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_copy_uname</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    char *name</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_copy_uname_w</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    wchar_t *name</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">archive_entry_update_uname_utf8</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    char *name</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_fflags</code>(<var class="Fa">struct
    archive_entry *a</var>, <var class="Fa">unsigned long *set_bits</var>,
    <var class="Fa">unsigned long *clear_bits</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">archive_entry_fflags_text</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">archive_entry_set_fflags</code>(<var class="Fa">struct
    archive_entry *a</var>, <var class="Fa">unsigned long set_bits</var>,
    <var class="Fa">unsigned long clear_bits</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">archive_entry_copy_fflags_text</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    char *text</var>);</p>
<p class="Pp"><var class="Ft">const wchar_t *</var>
  <br/>
  <code class="Fn">archive_entry_copy_fflags_text_w</code>(<var class="Fa" style="white-space: nowrap;">struct
    archive_entry *a</var>, <var class="Fa" style="white-space: nowrap;">const
    wchar_t *text</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<section class="Ss">
<h2 class="Ss" id="User_id,_group_id_and_mode"><a class="permalink" href="#User_id,_group_id_and_mode">User
  id, group id and mode</a></h2>
<p class="Pp">The functions
    <a class="permalink" href="#archive_entry_uid"><code class="Fn" id="archive_entry_uid">archive_entry_uid</code></a>(),
    <a class="permalink" href="#archive_entry_gid"><code class="Fn" id="archive_entry_gid">archive_entry_gid</code></a>(),
    and
    <a class="permalink" href="#archive_entry_perm"><code class="Fn" id="archive_entry_perm">archive_entry_perm</code></a>()
    can be used to extract the user id, group id and permission from the given
    entry. The corresponding functions
    <a class="permalink" href="#archive_entry_set_uid"><code class="Fn" id="archive_entry_set_uid">archive_entry_set_uid</code></a>(),
    <a class="permalink" href="#archive_entry_set_gid"><code class="Fn" id="archive_entry_set_gid">archive_entry_set_gid</code></a>(),
    and
    <a class="permalink" href="#archive_entry_set_perm"><code class="Fn" id="archive_entry_set_perm">archive_entry_set_perm</code></a>()
    store the given user id, group id and permission in the entry. The
    permission is also set as a side effect of calling
    <a class="permalink" href="#archive_entry_set_mode"><code class="Fn" id="archive_entry_set_mode">archive_entry_set_mode</code></a>().</p>
<p class="Pp" id="archive_entry_strmode"><a class="permalink" href="#archive_entry_strmode"><code class="Fn">archive_entry_strmode</code></a>()
    returns a string representation of the permission as used by the long mode
    of <a class="Xr" href="../1/ls">ls(1)</a>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="User_and_group_name"><a class="permalink" href="#User_and_group_name">User
  and group name</a></h2>
<p class="Pp">User and group names can be provided in one of three different
    ways:</p>
<dl class="Bl-tag">
  <dt>char *</dt>
  <dd>Multibyte strings in the current locale.</dd>
  <dt id="XXX_w">wchar_t *</dt>
  <dd>Wide character strings in the current locale. The accessor functions are
      named
      <a class="permalink" href="#XXX_w"><code class="Fn">XXX_w</code></a>().</dd>
  <dt>UTF-8</dt>
  <dd>Unicode strings encoded as UTF-8. These are convenience functions to
      update both the multibyte and wide character strings at the same
    time.</dd>
</dl>
<p class="Pp" id="archive_entry_set_XXX"><a class="permalink" href="#archive_entry_set_XXX"><code class="Fn">archive_entry_set_XXX</code></a>()
    is an alias for
    <a class="permalink" href="#archive_entry_copy_XXX"><code class="Fn" id="archive_entry_copy_XXX">archive_entry_copy_XXX</code></a>().</p>
</section>
<section class="Ss">
<h2 class="Ss" id="File_Flags"><a class="permalink" href="#File_Flags">File
  Flags</a></h2>
<p class="Pp">File flags are transparently converted between a bitmap
    representation and a textual format. For example, if you set the bitmap and
    ask for text, the library will build a canonical text format. However, if
    you set a text format and request a text format, you will get back the same
    text, even if it is ill-formed. If you need to canonicalize a textual flags
    string, you should first set the text form, then request the bitmap form,
    then use that to set the bitmap form. Setting the bitmap format will clear
    the internal text representation and force it to be reconstructed when you
    next request the text form.</p>
<p class="Pp">The bitmap format consists of two integers, one containing bits
    that should be set, the other specifying bits that should be cleared. Bits
    not mentioned in either bitmap will be ignored. Usually, the bitmap of bits
    to be cleared will be set to zero. In unusual circumstances, you can force a
    fully-specified set of file flags by setting the bitmap of flags to clear to
    the complement of the bitmap of flags to set. (This differs from
    <a class="Xr" href="../3/fflagstostr">fflagstostr(3)</a>, which only
    includes names for set bits.) Converting a bitmap to a textual string is a
    platform-specific operation; bits that are not meaningful on the current
    platform will be ignored.</p>
<p class="Pp" id="archive_entry_copy_fflags_text">The canonical text format is a
    comma-separated list of flag names. The
    <a class="permalink" href="#archive_entry_copy_fflags_text"><code class="Fn">archive_entry_copy_fflags_text</code></a>()
    and
    <a class="permalink" href="#archive_entry_copy_fflags_text_w"><code class="Fn" id="archive_entry_copy_fflags_text_w">archive_entry_copy_fflags_text_w</code></a>()
    functions parse the provided text and set the internal bitmap values. This
    is a platform-specific operation; names that are not meaningful on the
    current platform will be ignored. The function returns a pointer to the
    start of the first name that was not recognized, or NULL if every name was
    recognized. Note that every name &#x2014; including names that follow an
    unrecognized name &#x2014; will be evaluated, and the bitmaps will be set to
    reflect every name that is recognized. (In particular, this differs from
    <a class="Xr" href="../3/strtofflags">strtofflags(3)</a>, which stops
    parsing at the first unrecognized name.)</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="../3/archive_entry">archive_entry(3)</a>,
    <a class="Xr" href="../3/archive_entry_acl">archive_entry_acl(3)</a>,
    <a class="Xr" href="../3/archive_read_disk">archive_read_disk(3)</a>,
    <a class="Xr" href="../3/archive_write_disk">archive_write_disk(3)</a>,
    <a class="Xr" href="../3/libarchive">libarchive(3)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">The platform types <var class="Vt">uid_t</var> and
    <var class="Vt">gid_t</var> are often 16 or 32 bit wide. In this case it is
    possible that the ids can not be correctly restored from archives and get
    truncated.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 2, 2012</td>
    <td class="foot-os">macOS 14.2</td>
  </tr>
</table>
</body>
</html>
