<!DOCTYPE html>
<html lang="en">
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 1983, 1987, 1991, 1993
  	The Regents of the University of California.  All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
   4. Neither the name of the University nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
  
   THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
       From: @(#)gethostbyname.3	8.4 (Berkeley) 5/25/95
   $FreeBSD: src/lib/libc/net/gethostbyname.3,v 1.38 2007/01/09 00:28:02 imp Exp $
   -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>GETHOSTBYNAME(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GETHOSTBYNAME(3)</td>
    <td class="head-vol"><a href=".">Library Functions Manual</a></td>
    <td class="head-rtitle">GETHOSTBYNAME(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">gethostbyname</code>,
    <code class="Nm">gethostbyname2</code>,
    <code class="Nm">gethostbyaddr</code>, <code class="Nm">gethostent</code>,
    <code class="Nm">sethostent</code>, <code class="Nm">endhostent</code>,
    <code class="Nm">herror</code>, <code class="Nm">hstrerror</code> &#x2014;
    <span class="Nd">get network host entry</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
<p class="Pp"><span class="Lb">Standard C&#x00A0;Library (libc, -lc)</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><code class="In">#include
  &lt;<a class="In">netdb.h</a>&gt;</code></p>
<p class="Pp"><var class="Vt">int h_errno</var>;</p>
<p class="Pp"><var class="Ft">struct hostent *</var>
  <br/>
  <code class="Fn">gethostbyname</code>(<var class="Fa" style="white-space: nowrap;">const
    char *name</var>);</p>
<p class="Pp"><var class="Ft">struct hostent *</var>
  <br/>
  <code class="Fn">gethostbyname2</code>(<var class="Fa" style="white-space: nowrap;">const
    char *name</var>, <var class="Fa" style="white-space: nowrap;">int
    af</var>);</p>
<p class="Pp"><var class="Ft">struct hostent *</var>
  <br/>
  <code class="Fn">gethostbyaddr</code>(<var class="Fa" style="white-space: nowrap;">const
    void *addr</var>, <var class="Fa" style="white-space: nowrap;">socklen_t
    len</var>, <var class="Fa" style="white-space: nowrap;">int type</var>);</p>
<p class="Pp"><var class="Ft">struct hostent *</var>
  <br/>
  <code class="Fn">gethostent</code>(<var class="Fa" style="white-space: nowrap;">void</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">sethostent</code>(<var class="Fa" style="white-space: nowrap;">int
    stayopen</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">endhostent</code>(<var class="Fa" style="white-space: nowrap;">void</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">herror</code>(<var class="Fa" style="white-space: nowrap;">const
    char *string</var>);</p>
<p class="Pp"><var class="Ft">const char *</var>
  <br/>
  <code class="Fn">hstrerror</code>(<var class="Fa" style="white-space: nowrap;">int
    err</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<div class="Bf Sy">The <a class="Xr" href="../3/getaddrinfo">getaddrinfo(3)</a>
  and <a class="Xr" href="../3/getnameinfo">getnameinfo(3)</a> functions are
  preferred over the
  <a class="permalink" href="#gethostbyname"><code class="Fn" id="gethostbyname">gethostbyname</code></a>(),
  <code class="Fn">gethostbyname2</code>(), and
  <a class="permalink" href="#gethostbyaddr"><code class="Fn" id="gethostbyaddr">gethostbyaddr</code></a>()
  functions.</div>
<p class="Pp" id="gethostbyname~2">The
    <a class="permalink" href="#gethostbyname~2"><code class="Fn">gethostbyname</code></a>(),
    <code class="Fn">gethostbyname2</code>() and
    <a class="permalink" href="#gethostbyaddr~2"><code class="Fn" id="gethostbyaddr~2">gethostbyaddr</code></a>()
    functions each return a pointer to an object with the following structure
    describing an internet host referenced by name or by address,
  respectively.</p>
<p class="Pp" id="gethostbyname~3">The <var class="Fa">name</var> argument
    passed to
    <a class="permalink" href="#gethostbyname~3"><code class="Fn">gethostbyname</code></a>()
    or <code class="Fn">gethostbyname2</code>() should point to a
    <code class="Dv">NUL</code>-terminated hostname. The
    <var class="Fa">addr</var> argument passed to
    <a class="permalink" href="#gethostbyaddr~3"><code class="Fn" id="gethostbyaddr~3">gethostbyaddr</code></a>()
    should point to an address which is <var class="Fa">len</var> bytes long, in
    binary form (i.e., not an IP address in human readable ASCII form). The
    <var class="Fa">type</var> argument specifies the address family (e.g.
    <code class="Dv">AF_INET</code>, <code class="Dv">AF_INET6</code>, etc.) of
    this address.</p>
<p class="Pp">The structure returned contains information obtained from
    <a class="Xr" href="../8/mDNSResponder">mDNSResponder(8)</a>, including
    records in <span class="Pa">/etc/hosts</span>.</p>
<div class="Bd Pp Li">
<pre>struct	hostent {
	char	*h_name;	/* official name of host */
	char	**h_aliases;	/* alias list */
	int	h_addrtype;	/* host address type */
	int	h_length;	/* length of address */
	char	**h_addr_list;	/* list of addresses from name server */
};
#define	h_addr  h_addr_list[0]	/* address, for backward compatibility */</pre>
</div>
<p class="Pp">The members of this structure are:</p>
<dl class="Bl-tag">
  <dt id="h_name"><var class="Va">h_name</var></dt>
  <dd>Official name of the host.</dd>
  <dt id="h_aliases"><var class="Va">h_aliases</var></dt>
  <dd>A <code class="Dv">NULL</code>-terminated array of alternate names for the
      host.</dd>
  <dt id="h_addrtype"><var class="Va">h_addrtype</var></dt>
  <dd>The type of address being returned; usually
      <code class="Dv">AF_INET</code>.</dd>
  <dt id="h_length"><var class="Va">h_length</var></dt>
  <dd>The length, in bytes, of the address.</dd>
  <dt id="h_addr_list"><var class="Va">h_addr_list</var></dt>
  <dd>A <code class="Dv">NULL</code>-terminated array of network addresses for
      the host. Host addresses are returned in network byte order.</dd>
  <dt id="h_addr"><var class="Va">h_addr</var></dt>
  <dd>The first address in <var class="Va">h_addr_list</var>; this is for
      backward compatibility.</dd>
</dl>
<p class="Pp" id="gethostbyname~4">When using the nameserver,
    <a class="permalink" href="#gethostbyname~4"><code class="Fn">gethostbyname</code></a>()
    and <code class="Fn">gethostbyname2</code>() will search for the named host
    in the current domain and its parents unless the name ends in a dot.</p>
<p class="Pp" id="gethostbyname2">The
    <a class="permalink" href="#gethostbyname2"><code class="Fn">gethostbyname2</code></a>()
    function is an evolution of <code class="Fn">gethostbyname</code>() which is
    intended to allow lookups in address families other than
    <code class="Dv">AF_INET</code>, for example
    <code class="Dv">AF_INET6</code>.</p>
<p class="Pp" id="herror">The
    <a class="permalink" href="#herror"><code class="Fn">herror</code></a>()
    function writes a message to the diagnostic output consisting of the string
    argument <var class="Fa">string</var>, the constant string
    &quot;<code class="Li">:&#x00A0;</code>&quot;, and a message corresponding
    to the value of <var class="Va">h_errno</var>.</p>
<p class="Pp" id="hstrerror">The
    <a class="permalink" href="#hstrerror"><code class="Fn">hstrerror</code></a>()
    function returns a string which is the message text corresponding to the
    value of the <var class="Fa">err</var> argument.</p>
<p class="Pp" id="gethostbyname~5">Historically, passing a host's own hostname
    to
    <a class="permalink" href="#gethostbyname~5"><code class="Fn">gethostbyname</code></a>()
    or <code class="Fn">gethostbyname2</code>() has been a popular technique for
    determining that host's IP address(es), but this is fragile, and doesn't
    work reliably in all cases. The appropriate way for software to discover the
    IP address(es) of the host it is running on is to use
    <a class="Xr" href="../3/getifaddrs">getifaddrs(3)</a>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag Bl-compact">
  <dt><span class="Pa">/etc/hosts</span></dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt><span class="Pa">/etc/resolv.conf</span></dt>
  <dd style="width: auto;">&#x00A0;</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">Print out the hostname associated with a specific IP address:</p>
<div class="Bd Pp Bd-indent Li">
<pre>const char *ipstr = &quot;127.0.0.1&quot;;
struct in_addr ip;
struct hostent *hp;

if (!inet_aton(ipstr, &amp;ip))
	errx(1, &quot;can't parse IP address %s&quot;, ipstr);

if ((hp = gethostbyaddr((const void *)&amp;ip,
    sizeof ip, AF_INET)) == NULL)
	errx(1, &quot;no name associated with %s&quot;, ipstr);

printf(&quot;name associated with %s is %s\n&quot;, ipstr, hp-&gt;h_name);</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<p class="Pp">Error return status from <code class="Fn">gethostbyname</code>(),
    <code class="Fn">gethostbyname2</code>() and
    <code class="Fn">gethostbyaddr</code>() is indicated by return of a
    <code class="Dv">NULL</code> pointer. The integer
    <var class="Va">h_errno</var> may then be checked to see whether this is a
    temporary failure or an invalid or unknown host. The routine
    <code class="Fn">herror</code>() can be used to print an error message
    describing the failure. If its argument <var class="Fa">string</var> is
    non-<code class="Dv">NULL</code>, it is printed, followed by a colon and a
    space. The error message is printed with a trailing newline.</p>
<p class="Pp">The variable <var class="Va">h_errno</var> can have the following
    values:</p>
<dl class="Bl-tag">
  <dt id="HOST_NOT_FOUND"><a class="permalink" href="#HOST_NOT_FOUND"><code class="Dv">HOST_NOT_FOUND</code></a></dt>
  <dd>No such host is known.</dd>
  <dt id="TRY_AGAIN"><a class="permalink" href="#TRY_AGAIN"><code class="Dv">TRY_AGAIN</code></a></dt>
  <dd>This is usually a temporary error and means that the local server did not
      receive a response from an authoritative server. A retry at some later
      time may succeed.</dd>
  <dt id="NO_RECOVERY"><a class="permalink" href="#NO_RECOVERY"><code class="Dv">NO_RECOVERY</code></a></dt>
  <dd>Some unexpected server failure was encountered. This is a non-recoverable
      error.</dd>
  <dt id="NO_DATA"><a class="permalink" href="#NO_DATA"><code class="Dv">NO_DATA</code></a></dt>
  <dd>The requested name is valid but does not have an IP address; this is not a
      temporary error. This means that the name is known to the name server but
      there is no address associated with this name. Another type of request to
      the name server using this domain name will result in an answer; for
      example, a mail-forwarder may be registered for this domain.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="../3/getaddrinfo">getaddrinfo(3)</a>,
    <a class="Xr" href="../3/getnameinfo">getnameinfo(3)</a>,
    <a class="Xr" href="../3/inet_aton">inet_aton(3)</a>,
    <a class="Xr" href="../3/resolver">resolver(3)</a>,
    <a class="Xr" href="../5/hosts">hosts(5)</a>,
    <a class="Xr" href="../7/hostname">hostname(7)</a>,
    <a class="Xr" href="../8/mDNSResponder">mDNSResponder(8)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="CAVEAT"><a class="permalink" href="#CAVEAT">CAVEAT</a></h1>
<p class="Pp">The
    <a class="permalink" href="#gethostent"><code class="Fn" id="gethostent">gethostent</code></a>()
    function is defined, and <code class="Fn">sethostent</code>() and
    <code class="Fn">endhostent</code>() are redefined, when
    <span class="Lb">Standard C&#x00A0;Library (libc, -lc)</span> is built to
    use only the routines to lookup in <span class="Pa">/etc/hosts</span> and
    not the name server.</p>
<p class="Pp" id="gethostent~2">The
    <a class="permalink" href="#gethostent~2"><code class="Fn">gethostent</code></a>()
    function reads the next line of <span class="Pa">/etc/hosts</span>, opening
    the file if necessary.</p>
<p class="Pp" id="sethostent">The
    <a class="permalink" href="#sethostent"><code class="Fn">sethostent</code></a>()
    function opens and/or rewinds the file <span class="Pa">/etc/hosts</span>.
    If the <var class="Fa">stayopen</var> argument is non-zero, the file will
    not be closed after each call to <code class="Fn">gethostbyname</code>(),
    <code class="Fn">gethostbyname2</code>() or
    <code class="Fn">gethostbyaddr</code>().</p>
<p class="Pp" id="endhostent">The
    <a class="permalink" href="#endhostent"><code class="Fn">endhostent</code></a>()
    function closes the file.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">The <code class="Fn">herror</code>() function appeared in
    <span class="Ux">4.3BSD</span>. The <code class="Fn">endhostent</code>(),
    <code class="Fn">gethostbyaddr</code>(),
    <code class="Fn">gethostbyname</code>(),
    <code class="Fn">gethostent</code>(), and
    <code class="Fn">sethostent</code>() functions appeared in
    <span class="Ux">4.2BSD</span>. The <code class="Fn">gethostbyname2</code>()
    function first appeared in BIND version 4.9.4.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">These functions use a thread-specific data storage; if the data is
    needed for future use, it should be copied before any subsequent calls
    overwrite it.</p>
<p class="Pp">Though these functions are thread-safe, still it is recommended to
    use the <a class="Xr" href="../3/getaddrinfo">getaddrinfo(3)</a> family of
    functions, instead.</p>
<p class="Pp">Only the Internet address format is currently understood.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 12, 2006</td>
    <td class="foot-os"><a href="..">macOS 15.4</a></td>
  </tr>
</table>
</body>
</html>
