<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 1992, 1993, 1994 Henry Spencer.
   Copyright (c) 1992, 1993, 1994
  	The Regents of the University of California.  All rights reserved.
  
   This code is derived from software contributed to Berkeley by
   Henry Spencer.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
   4. Neither the name of the University nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
  
   THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
  	@(#)regex.3	8.4 (Berkeley) 3/20/94
   $FreeBSD: src/lib/libc/regex/regex.3,v 1.21 2007/01/09 00:28:04 imp Exp $
   -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>REGEX(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">REGEX(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">REGEX(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">regcomp</code>,
    <code class="Nm">regcomp_l</code>, <code class="Nm">regerror</code>,
    <code class="Nm">regexec</code>, <code class="Nm">regfree</code>,
    <code class="Nm">regncomp</code>, <code class="Nm">regncomp_l</code>,
    <code class="Nm">regnexec</code>, <code class="Nm">regnwcomp</code>,
    <code class="Nm">regnwcomp_l</code>, <code class="Nm">regnwexec</code>,
    <code class="Nm">regwcomp</code>, <code class="Nm">regwcomp_l</code>,
    <code class="Nm">regwexec</code> &#x2014;
    <span class="Nd">regular-expression library</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><a class="permalink" href="#(Standards-compliant"><b class="Sy" id="(Standards-compliant">(Standards-compliant
    APIs)</b></a></p>
<p class="Pp">
  <br/>
  <code class="In">#include &lt;<a class="In">regex.h</a>&gt;</code></p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regcomp</code>(<var class="Fa">regex_t *restrict preg</var>,
    <var class="Fa">const char *restrict pattern</var>, <var class="Fa">int
    cflags</var>);</p>
<p class="Pp"><var class="Ft">size_t</var>
  <br/>
  <code class="Fn">regerror</code>(<var class="Fa">int errcode</var>,
    <var class="Fa">const regex_t *restrict preg</var>, <var class="Fa">char
    *restrict errbuf</var>, <var class="Fa">size_t errbuf_size</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regexec</code>(<var class="Fa">const regex_t *restrict
    preg</var>, <var class="Fa">const char *restrict string</var>,
    <var class="Fa">size_t nmatch</var>, <var class="Fa">regmatch_t
    pmatch[restrict]</var>, <var class="Fa">int eflags</var>);</p>
<p class="Pp"><var class="Ft">void</var>
  <br/>
  <code class="Fn">regfree</code>(<var class="Fa">regex_t *preg</var>);</p>
<p class="Pp" id="(Non-portable"><a class="permalink" href="#(Non-portable"><b class="Sy">(Non-portable
    extensions)</b></a>
  <br/>
  <var class="Ft">int</var>
  <br/>
  <code class="Fn">regncomp</code>(<var class="Fa">regex_t *restrict preg</var>,
    <var class="Fa">const char *restrict pattern</var>, <var class="Fa">size_t
    len</var>, <var class="Fa">int cflags</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regnexec</code>(<var class="Fa">const regex_t *restrict
    preg</var>, <var class="Fa">const char *restrict string</var>,
    <var class="Fa">size_t len</var>, <var class="Fa">size_t nmatch</var>,
    <var class="Fa">regmatch_t pmatch[restrict]</var>, <var class="Fa">int
    eflags</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regwcomp</code>(<var class="Fa">regex_t *restrict preg</var>,
    <var class="Fa">const wchar_t *restrict widepat</var>, <var class="Fa">int
    cflags</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regwexec</code>(<var class="Fa">const regex_t *restrict
    preg</var>, <var class="Fa">const wchar_t *restrict widestr</var>,
    <var class="Fa">size_t nmatch</var>, <var class="Fa">regmatch_t
    pmatch[restrict]</var>, <var class="Fa">int eflags</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regwncomp</code>(<var class="Fa">regex_t *restrict
    preg</var>, <var class="Fa">const wchar_t *restrict widepat</var>,
    <var class="Fa">size_t len</var>, <var class="Fa">int cflags</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regwnexec</code>(<var class="Fa">const regex_t *restrict
    preg</var>, <var class="Fa">const wchar_t *restrict widestr</var>,
    <var class="Fa">size_t len</var>, <var class="Fa">size_t nmatch</var>,
    <var class="Fa">regmatch_t pmatch[restrict]</var>, <var class="Fa">int
    eflags</var>);</p>
<p class="Pp"><code class="In">#include &lt;<a class="In">regex.h</a>&gt;</code>
  <br/>
  <code class="In">#include &lt;<a class="In">xlocale.h</a>&gt;</code></p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regcomp_l</code>(<var class="Fa">regex_t *restrict
    preg</var>, <var class="Fa">const char *restrict pattern</var>,
    <var class="Fa">int cflags</var>, <var class="Fa">locale_t
  restrict</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regncomp_l</code>(<var class="Fa">regex_t *restrict
    preg</var>, <var class="Fa">const char *restrict pattern</var>,
    <var class="Fa">size_t len</var>, <var class="Fa">int cflags</var>,
    <var class="Fa">locale_t restrict</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regwcomp_l</code>(<var class="Fa">regex_t *restrict
    preg</var>, <var class="Fa">const wchar_t *restrict widepat</var>,
    <var class="Fa">int cflags</var>, <var class="Fa">locale_t
  restrict</var>);</p>
<p class="Pp"><var class="Ft">int</var>
  <br/>
  <code class="Fn">regwncomp_l</code>(<var class="Fa">regex_t *restrict
    preg</var>, <var class="Fa">const wchar_t *restrict widepat</var>,
    <var class="Fa">size_t len</var>, <var class="Fa">int cflags</var>,
    <var class="Fa">locale_t restrict</var>);</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">These routines implement <span class="St">IEEE Std 1003.2
    (&#x201C;POSIX.2&#x201D;)</span> regular expressions (&#x201C;RE&#x201D;s);
    see <a class="Xr" href="../7/re_format">re_format(7)</a>. The
    <a class="permalink" href="#regcomp"><code class="Fn" id="regcomp">regcomp</code></a>()
    function compiles an RE, written as a string, into an internal form.
    <code class="Fn">regexec</code>() matches that internal form against a
    string and reports results. <code class="Fn">regerror</code>() transforms
    error codes from either into human-readable messages.
    <code class="Fn">regfree</code>() frees any dynamically-allocated storage
    used by the internal form of an RE.</p>
<p class="Pp">The header
    <code class="In">&lt;<a class="In">regex.h</a>&gt;</code> declares two
    structure types, <var class="Ft">regex_t</var> and
    <var class="Ft">regmatch_t</var>, the former for compiled internal forms and
    the latter for match reporting. It also declares the four functions, a type
    <var class="Ft">regoff_t</var>, and a number of constants with names
    starting with &#x201C;<code class="Dv">REG_</code>&#x201D;.</p>
<p class="Pp" id="regcomp~2">The
    <a class="permalink" href="#regcomp~2"><code class="Fn">regcomp</code></a>()
    function compiles the regular expression contained in the
    <var class="Fa">pattern</var> string, subject to the flags in
    <var class="Fa">cflags</var>, and places the results in the
    <var class="Ft">regex_t</var> structure pointed to by
    <var class="Fa">preg</var>. The <var class="Fa">cflags</var> argument is the
    bitwise OR of zero or more of the following flags:</p>
<dl class="Bl-tag">
  <dt id="REG_EXTENDED"><a class="permalink" href="#REG_EXTENDED"><code class="Dv">REG_EXTENDED</code></a></dt>
  <dd>Compile modern (&#x201C;extended&#x201D;) REs, rather than the obsolete
      (&#x201C;basic&#x201D;) REs that are the default.</dd>
  <dt id="REG_BASIC"><a class="permalink" href="#REG_BASIC"><code class="Dv">REG_BASIC</code></a></dt>
  <dd>This is a synonym for 0, provided as a counterpart to
      <code class="Dv">REG_EXTENDED</code> to improve readability.</dd>
  <dt id="REG_NOSPEC"><a class="permalink" href="#REG_NOSPEC"><code class="Dv">REG_NOSPEC</code></a></dt>
  <dd>Compile with recognition of all special characters turned off. All
      characters are thus considered ordinary, so the &#x201C;RE&#x201D; is a
      literal string. This is an extension, compatible with but not specified by
      <span class="St">IEEE Std 1003.2 (&#x201C;POSIX.2&#x201D;)</span>, and
      should be used with caution in software intended to be portable to other
      systems. <code class="Dv">REG_EXTENDED</code> and
      <code class="Dv">REG_NOSPEC</code> may not be used in the same call to
      <code class="Fn">regcomp</code>().</dd>
  <dt id="REG_LITERAL"><a class="permalink" href="#REG_LITERAL"><code class="Dv">REG_LITERAL</code></a></dt>
  <dd>An alias of <code class="Dv">REG_NOSPEC</code>.</dd>
  <dt id="REG_ICASE"><a class="permalink" href="#REG_ICASE"><code class="Dv">REG_ICASE</code></a></dt>
  <dd>Compile for matching that ignores upper/lower case distinctions. See
      <a class="Xr" href="../7/re_format">re_format(7)</a>.</dd>
  <dt id="REG_NOSUB"><a class="permalink" href="#REG_NOSUB"><code class="Dv">REG_NOSUB</code></a></dt>
  <dd>Compile for matching that need only report success or failure, not what
      was matched.</dd>
  <dt id="REG_NEWLINE"><a class="permalink" href="#REG_NEWLINE"><code class="Dv">REG_NEWLINE</code></a></dt>
  <dd>Compile for newline-sensitive matching. By default, newline is a
      completely ordinary character with no special meaning in either REs or
      strings. With this flag, &#x2018;<code class="Li">[^</code>&#x2019;
      bracket expressions and &#x2018;<code class="Li">.</code>&#x2019; never
      match newline, a &#x2018;<code class="Li">^</code>&#x2019; anchor matches
      the null string after any newline in the string in addition to its normal
      function, and the &#x2018;<code class="Li">$</code>&#x2019; anchor matches
      the null string before any newline in the string in addition to its normal
      function.</dd>
  <dt id="REG_PEND"><a class="permalink" href="#REG_PEND"><code class="Dv">REG_PEND</code></a></dt>
  <dd>(Note that <code class="Dv">REG_PEND</code> is not recognized by any of
      the wide character or &#x201C;<code class="Nm">n</code>&#x201D; variants.
      Besides, the &#x201C;<code class="Nm">n</code>&#x201D; variants can be
      used instead of <code class="Dv">REG_PEND</code>; see EXTENDED APIS
      below.) The regular expression ends, not at the first NUL, but just before
      the character pointed to by the <var class="Va">re_endp</var> member of
      the structure pointed to by <var class="Fa">preg</var>. The
      <var class="Va">re_endp</var> member is of type <var class="Ft">const char
      *</var>. This flag permits inclusion of NULs in the RE; they are
      considered ordinary characters. This is an extension, compatible with but
      not specified by <span class="St">IEEE Std 1003.2
      (&#x201C;POSIX.2&#x201D;)</span>, and should be used with caution in
      software intended to be portable to other systems.</dd>
  <dt id="REG_ENHANCED"><a class="permalink" href="#REG_ENHANCED"><code class="Dv">REG_ENHANCED</code></a></dt>
  <dd>Recognized enhanced regular expression features; see
      <a class="Xr" href="../7/re_format">re_format(7)</a> for details. This is
      an extension not specified by <span class="St">IEEE Std 1003.2
      (&#x201C;POSIX.2&#x201D;)</span>, and should be used with caution in
      software intended to be portable to other systems.</dd>
  <dt id="REG_MINIMAL"><a class="permalink" href="#REG_MINIMAL"><code class="Dv">REG_MINIMAL</code></a></dt>
  <dd>Use minimal (non-greedy) repetitions instead of the normal greedy ones;
      see <a class="Xr" href="../7/re_format">re_format(7)</a> for details.
      (This only applies when both <code class="Dv">REG_ENHANCED</code> and
      <code class="Dv">REG_EXTENDED</code> are also set.) This is an extension
      not specified by <span class="St">IEEE Std 1003.2
      (&#x201C;POSIX.2&#x201D;)</span>, and should be used with caution in
      software intended to be portable to other systems.</dd>
  <dt id="REG_UNGREEDY"><a class="permalink" href="#REG_UNGREEDY"><code class="Dv">REG_UNGREEDY</code></a></dt>
  <dd>Alias of <code class="Dv">REG_MINIMAL</code>.</dd>
</dl>
<p class="Pp" id="regcomp~3">When successful,
    <a class="permalink" href="#regcomp~3"><code class="Fn">regcomp</code></a>()
    returns 0 and fills in the structure pointed to by
    <var class="Fa">preg</var>. One member of that structure (other than
    <var class="Va">re_endp</var>) is publicized: <var class="Va">re_nsub</var>,
    of type <var class="Ft">size_t</var>, contains the number of parenthesized
    subexpressions within the RE (except that the value of this member is
    undefined if the <code class="Dv">REG_NOSUB</code> flag was used). If
    <code class="Fn">regcomp</code>() fails, it returns a non-zero error code;
    see <a class="Sx" href="#DIAGNOSTICS">DIAGNOSTICS</a>.</p>
<p class="Pp" id="regexec">The
    <a class="permalink" href="#regexec"><code class="Fn">regexec</code></a>()
    function matches the compiled RE pointed to by <var class="Fa">preg</var>
    against the <var class="Fa">string</var>, subject to the flags in
    <var class="Fa">eflags</var>, and reports results using
    <var class="Fa">nmatch</var>, <var class="Fa">pmatch</var>, and the returned
    value. The RE must have been compiled by a previous invocation of
    <code class="Fn">regcomp</code>(). The compiled form is not altered during
    execution of <code class="Fn">regexec</code>(), so a single compiled RE can
    be used simultaneously by multiple threads.</p>
<p class="Pp">By default, the NUL-terminated string pointed to by
    <var class="Fa">string</var> is considered to be the text of an entire line,
    minus any terminating newline. The <var class="Fa">eflags</var> argument is
    the bitwise OR of zero or more of the following flags:</p>
<dl class="Bl-tag">
  <dt id="REG_NOTBOL"><a class="permalink" href="#REG_NOTBOL"><code class="Dv">REG_NOTBOL</code></a></dt>
  <dd>The first character of the string is not the beginning of a line, so the
      &#x2018;<code class="Li">^</code>&#x2019; anchor should not match before
      it. This does not affect the behavior of newlines under
      <code class="Dv">REG_NEWLINE</code>.</dd>
  <dt id="REG_NOTEOL"><a class="permalink" href="#REG_NOTEOL"><code class="Dv">REG_NOTEOL</code></a></dt>
  <dd>The NUL terminating the string does not end a line, so the
      &#x2018;<code class="Li">$</code>&#x2019; anchor should not match before
      it. This does not affect the behavior of newlines under
      <code class="Dv">REG_NEWLINE</code>.</dd>
  <dt id="REG_STARTEND"><a class="permalink" href="#REG_STARTEND"><code class="Dv">REG_STARTEND</code></a></dt>
  <dd>The string is considered to start at <var class="Fa">string</var> +
      <var class="Fa">pmatch</var>[0].<var class="Va">rm_so</var> and to have a
      terminating NUL located at <var class="Fa">string</var> +
      <var class="Fa">pmatch</var>[0].<var class="Va">rm_eo</var> (there need
      not actually be a NUL at that location), regardless of the value of
      <var class="Fa">nmatch</var>. See below for the definition of
      <var class="Fa">pmatch</var> and <var class="Fa">nmatch</var>. This is an
      extension, compatible with but not specified by <span class="St">IEEE Std
      1003.2 (&#x201C;POSIX.2&#x201D;)</span>, and should be used with caution
      in software intended to be portable to other systems. Note that a non-zero
      <var class="Va">rm_so</var> does not imply
      <code class="Dv">REG_NOTBOL</code>; <code class="Dv">REG_STARTEND</code>
      affects only the location of the string, not how it is matched.</dd>
</dl>
<p class="Pp">See <a class="Xr" href="../7/re_format">re_format(7)</a> for a
    discussion of what is matched in situations where an RE or a portion thereof
    could match any of several substrings of <var class="Fa">string</var>.</p>
<p class="Pp" id="regexec~2">Normally,
    <a class="permalink" href="#regexec~2"><code class="Fn">regexec</code></a>()
    returns 0 for success and the non-zero code
    <code class="Dv">REG_NOMATCH</code> for failure. Other non-zero error codes
    may be returned in exceptional situations; see
    <a class="Sx" href="#DIAGNOSTICS">DIAGNOSTICS</a>.</p>
<p class="Pp" id="regexec~3">If <code class="Dv">REG_NOSUB</code> was specified
    in the compilation of the RE, or if <var class="Fa">nmatch</var> is 0,
    <a class="permalink" href="#regexec~3"><code class="Fn">regexec</code></a>()
    ignores the <var class="Fa">pmatch</var> argument (but see below for the
    case where <code class="Dv">REG_STARTEND</code> is specified). Otherwise,
    <var class="Fa">pmatch</var> points to an array of
    <var class="Fa">nmatch</var> structures of type
    <var class="Ft">regmatch_t</var>. Such a structure has at least the members
    <var class="Va">rm_so</var> and <var class="Va">rm_eo</var>, both of type
    <var class="Ft">regoff_t</var> (a signed arithmetic type at least as large
    as an <var class="Ft">off_t</var> and a <var class="Ft">ssize_t</var>),
    containing respectively the offset of the first character of a substring and
    the offset of the first character after the end of the substring. Offsets
    are measured from the beginning of the <var class="Fa">string</var> argument
    given to <code class="Fn">regexec</code>(). An empty substring is denoted by
    equal offsets, both indicating the character following the empty
  substring.</p>
<p class="Pp">The 0th member of the <var class="Fa">pmatch</var> array is filled
    in to indicate what substring of <var class="Fa">string</var> was matched by
    the entire RE. Remaining members report what substring was matched by
    parenthesized subexpressions within the RE; member <var class="Va">i</var>
    reports subexpression <var class="Va">i</var>, with subexpressions counted
    (starting at 1) by the order of their opening parentheses in the RE, left to
    right. Unused entries in the array (corresponding either to subexpressions
    that did not participate in the match at all, or to subexpressions that do
    not exist in the RE (that is, <var class="Va">i</var> &gt;
    <var class="Fa">preg</var>-&gt;<var class="Va">re_nsub</var>)) have both
    <var class="Va">rm_so</var> and <var class="Va">rm_eo</var> set to -1. If a
    subexpression participated in the match several times, the reported
    substring is the last one it matched. (Note, as an example in particular,
    that when the RE &#x2018;<code class="Li">(b*)+</code>&#x2019; matches
    &#x2018;<code class="Li">bbb</code>&#x2019;, the parenthesized subexpression
    matches each of the three &#x2018;<code class="Li">b</code>&#x2019;s and
    then an infinite number of empty strings following the last
    &#x2018;<code class="Li">b</code>&#x2019;, so the reported substring is one
    of the empties.)</p>
<p class="Pp" id="regexec~4">If <code class="Dv">REG_STARTEND</code> is
    specified, <var class="Fa">pmatch</var> must point to at least one
    <var class="Ft">regmatch_t</var> (even if <var class="Fa">nmatch</var> is 0
    or <code class="Dv">REG_NOSUB</code> was specified), to hold the input
    offsets for <code class="Dv">REG_STARTEND</code>. Use for output is still
    entirely controlled by <var class="Fa">nmatch</var>; if
    <var class="Fa">nmatch</var> is 0 or <code class="Dv">REG_NOSUB</code> was
    specified, the value of <var class="Fa">pmatch</var>[0] will not be changed
    by a successful
    <a class="permalink" href="#regexec~4"><code class="Fn">regexec</code></a>().</p>
<p class="Pp" id="regerror">The
    <a class="permalink" href="#regerror"><code class="Fn">regerror</code></a>()
    function maps a non-zero <var class="Fa">errcode</var> from either
    <code class="Fn">regcomp</code>() or <code class="Fn">regexec</code>() to a
    human-readable, printable message. If <var class="Fa">preg</var> is
    <span class="No">non-</span><code class="Dv">NULL</code>, the error code
    should have arisen from use of the <var class="Ft">regex_t</var> pointed to
    by <var class="Fa">preg</var>, and if the error code came from
    <code class="Fn">regcomp</code>(), it should have been the result from the
    most recent <code class="Fn">regcomp</code>() using that
    <var class="Ft">regex_t</var>. The (<code class="Fn">regerror</code>() may
    be able to supply a more detailed message using information from the
    <var class="Ft">regex_t</var>.) The <code class="Fn">regerror</code>()
    function places the NUL-terminated message into the buffer pointed to by
    <var class="Fa">errbuf</var>, limiting the length (including the NUL) to at
    most <var class="Fa">errbuf_size</var> bytes. If the whole message will not
    fit, as much of it as will fit before the terminating NUL is supplied. In
    any case, the returned value is the size of buffer needed to hold the whole
    message (including terminating NUL). If <var class="Fa">errbuf_size</var> is
    0, <var class="Fa">errbuf</var> is ignored but the return value is still
    correct.</p>
<p class="Pp" id="regerror~2">If the <var class="Fa">errcode</var> given to
    <a class="permalink" href="#regerror~2"><code class="Fn">regerror</code></a>()
    is first ORed with <code class="Dv">REG_ITOA</code>, the
    &#x201C;message&#x201D; that results is the printable name of the error
    code, e.g. &#x201C;<code class="Dv">REG_NOMATCH</code>&#x201D;, rather than
    an explanation thereof. If <var class="Fa">errcode</var> is
    <code class="Dv">REG_ATOI</code>, then <var class="Fa">preg</var> shall be
    <span class="No">non-</span><code class="Dv">NULL</code> and the
    <var class="Va">re_endp</var> member of the structure it points to must
    point to the printable name of an error code; in this case, the result in
    <var class="Fa">errbuf</var> is the decimal digits of the numeric value of
    the error code (0 if the name is not recognized).
    <code class="Dv">REG_ITOA</code> and <code class="Dv">REG_ATOI</code> are
    intended primarily as debugging facilities; they are extensions, compatible
    with but not specified by <span class="St">IEEE Std 1003.2
    (&#x201C;POSIX.2&#x201D;)</span>, and should be used with caution in
    software intended to be portable to other systems. Be warned also that they
    are considered experimental and changes are possible.</p>
<p class="Pp" id="regfree">The
    <a class="permalink" href="#regfree"><code class="Fn">regfree</code></a>()
    function frees any dynamically-allocated storage associated with the
    compiled RE pointed to by <var class="Fa">preg</var>. The remaining
    <var class="Ft">regex_t</var> is no longer a valid compiled RE and the
    effect of supplying it to <code class="Fn">regexec</code>() or
    <code class="Fn">regerror</code>() is undefined.</p>
<p class="Pp">None of these functions references global variables except for
    tables of constants; all are safe for use from multiple threads if the
    arguments are safe.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXTENDED_APIS"><a class="permalink" href="#EXTENDED_APIS">EXTENDED
  APIS</a></h1>
<p class="Pp">These extended APIs are available in Mac OS X 10.8 and beyond,
    when the deployment target is 10.8 or later. It should also be noted that
    any of the
    <a class="permalink" href="#regcomp~4"><code class="Fn" id="regcomp~4">regcomp</code></a>()
    variants may be used to initialize a <var class="Ft">regex_t</var>
    structure, that can then be passed to any of the
    <code class="Fn">regexec</code>() variants. So it is quite legal to compile
    a wide character RE and use it to match a multibyte character string, or
    vice versa.</p>
<p class="Pp" id="regncomp">The
    <a class="permalink" href="#regncomp"><code class="Fn">regncomp</code></a>()
    routine compiles regular expressions like <code class="Fn">regcomp</code>(),
    but the length of the regular expression string is specified, allowing a
    string that is not NUL terminated and/or contains NUL characters. This is a
    modern replacement for using <code class="Fn">regcomp</code>() with the
    <code class="Dv">REG_PEND</code> option.</p>
<p class="Pp" id="regnexec">Similarly, the
    <a class="permalink" href="#regnexec"><code class="Fn">regnexec</code></a>()
    routine is like <code class="Fn">regexec</code>(), but the length of the
    string to match is specified, allowing a string that is not NUL terminated
    and/or contains NUL characters.</p>
<p class="Pp" id="regwcomp">The
    <a class="permalink" href="#regwcomp"><code class="Fn">regwcomp</code></a>()
    and
    <a class="permalink" href="#regwexec"><code class="Fn" id="regwexec">regwexec</code></a>()
    variants take a wide-character (<var class="Vt">wchar_t</var>) string for
    the regular expression and string to match. And
    <a class="permalink" href="#regwncomp"><code class="Fn" id="regwncomp">regwncomp</code></a>()
    and
    <a class="permalink" href="#regwnexec"><code class="Fn" id="regwnexec">regwnexec</code></a>()
    are variants that allow specifying the wide character string length, and so
    allows wide character strings that are not NUL terminated and/or contains
    NUL characters.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="INTERACTION_WITH_THE_LOCALE"><a class="permalink" href="#INTERACTION_WITH_THE_LOCALE">INTERACTION
  WITH THE LOCALE</a></h1>
<p class="Pp">When <code class="Fn">regcomp</code>() or one of its variants is
    run, the regular expression is compiled into an internal form, which may
    include specific information about the locale currently in effect, such as
    equivalence classes or multi-character collation symbols. So a reference to
    the current locale is also stored with the internal form, so that when
    <code class="Fn">regexec</code>() is run, it can use the same locale (even
    if the locale is changed in-between the calls to
    <code class="Fn">regcomp</code>() and
  <code class="Fn">regexec</code>()).</p>
<p class="Pp" id="regcomp~5">To provide more direct control over which locale is
    used, routines with &#x201C;<code class="Nm">_l</code>&#x201D; appended to
    their names are provided that work just like the variants without the
    &#x201C;<code class="Nm">_l</code>&#x201D;, except that a locale (via a
    <var class="Vt">locale_t</var> variable type) is specified directly. Note
    that only variants of
    <a class="permalink" href="#regcomp~5"><code class="Fn">regcomp</code></a>()
    have &#x201C;<code class="Nm">_l</code>&#x201D; variants, since the
    <code class="Fn">regexec</code>() variants just use the reference to the
    locale stored in the internal form.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="IMPLEMENTATION_CHOICES"><a class="permalink" href="#IMPLEMENTATION_CHOICES">IMPLEMENTATION
  CHOICES</a></h1>
<p class="Pp">The <code class="Nm">regex</code> implementation in Mac OS X 10.8
    and later is based on a heavily modified subset of TRE
    (http://laurikari.net/tre/). This provides improved performance, better
    conformance and additional features. However, both API and binary
    compatibility have been maintained with previous releases, so binaries built
    on previous releases should work on 10.8 and later, and binaries built on
    10.8 and later should be able to run on previous releases (as long as none
    of the new variants or new features are used.</p>
<p class="Pp">There are a number of decisions that <span class="St">IEEE Std
    1003.2 (&#x201C;POSIX.2&#x201D;)</span> leaves up to the implementor, either
    by explicitly saying &#x201C;undefined&#x201D; or by virtue of them being
    forbidden by the RE grammar. This implementation treats them as follows.</p>
<p class="Pp">See <a class="Xr" href="../7/re_format">re_format(7)</a> for a
    discussion of the definition of case-independent matching.</p>
<p class="Pp">There is no particular limit on the length of REs, except insofar
    as memory is limited. Memory usage is approximately linear in RE size, and
    largely insensitive to RE complexity, except for bounded repetitions. See
    <a class="Sx" href="#BUGS">BUGS</a> for one short RE using them that will
    run almost any system out of memory.</p>
<p class="Pp">A backslashed character other than one specifically given a magic
    meaning by <span class="St">IEEE Std 1003.2 (&#x201C;POSIX.2&#x201D;)</span>
    (such magic meanings occur only in obsolete [&#x201C;basic&#x201D;] REs) is
    taken as an ordinary character.</p>
<p class="Pp">Any unmatched &#x2018;<code class="Li">[</code>&#x2019; is a
    <code class="Dv">REG_EBRACK</code> error.</p>
<p class="Pp">Equivalence classes cannot begin or end bracket-expression ranges.
    The endpoint of one range cannot begin another.</p>
<p class="Pp"><code class="Dv">RE_DUP_MAX</code>, the limit on repetition counts
    in bounded repetitions, is 255.</p>
<p class="Pp">A repetition operator (&#x2018;<code class="Li">?</code>&#x2019;,
    &#x2018;<code class="Li">*</code>&#x2019;,
    &#x2018;<code class="Li">+</code>&#x2019;, or bounds) cannot follow another
    repetition operator, except for the use of
    &#x2018;<code class="Li">?</code>&#x2019; for minimal repetition (for
    enhanced extended REs; see
    <a class="Xr" href="../7/re_format">re_format(7)</a> for details). A
    repetition operator cannot begin an expression or subexpression or follow
    &#x2018;<code class="Li">^</code>&#x2019; or
    &#x2018;<code class="Li">|</code>&#x2019;.</p>
<p class="Pp">&#x2018;<code class="Li">|</code>&#x2019; cannot appear first or
    last in a (sub)expression or after another
    &#x2018;<code class="Li">|</code>&#x2019;, i.e., an operand of
    &#x2018;<code class="Li">|</code>&#x2019; cannot be an empty subexpression.
    An empty parenthesized subexpression,
    &#x2018;<code class="Li">()</code>&#x2019;, is legal and matches an empty
    (sub)string. An empty string is not a legal RE.</p>
<p class="Pp" id="not">A &#x2018;<code class="Li">{</code>&#x2019; followed by a
    digit is considered the beginning of bounds for a bounded repetition, which
    must then follow the syntax for bounds. A
    &#x2018;<code class="Li">{</code>&#x2019;
    <a class="permalink" href="#not"><i class="Em">not</i></a> followed by a
    digit is considered an ordinary character.</p>
<p class="Pp">&#x2018;<code class="Li">^</code>&#x2019; and
    &#x2018;<code class="Li">$</code>&#x2019; beginning and ending
    subexpressions in obsolete (&#x201C;basic&#x201D;) REs are anchors, not
    ordinary characters.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<p class="Pp">Non-zero error codes from <code class="Fn">regcomp</code>() and
    <code class="Fn">regexec</code>() include the following:</p>
<p class="Pp"></p>
<dl class="Bl-tag Bl-compact">
  <dt id="REG_NOMATCH"><a class="permalink" href="#REG_NOMATCH"><code class="Dv">REG_NOMATCH</code></a></dt>
  <dd>The <code class="Fn">regexec</code>() function failed to match</dd>
  <dt id="REG_BADPAT"><a class="permalink" href="#REG_BADPAT"><code class="Dv">REG_BADPAT</code></a></dt>
  <dd>invalid regular expression</dd>
  <dt id="REG_ECOLLATE"><a class="permalink" href="#REG_ECOLLATE"><code class="Dv">REG_ECOLLATE</code></a></dt>
  <dd>invalid collating element</dd>
  <dt id="REG_ECTYPE"><a class="permalink" href="#REG_ECTYPE"><code class="Dv">REG_ECTYPE</code></a></dt>
  <dd>invalid character class</dd>
  <dt id="REG_EESCAPE"><a class="permalink" href="#REG_EESCAPE"><code class="Dv">REG_EESCAPE</code></a></dt>
  <dd>&#x2018;<code class="Li">\</code>&#x2019; applied to unescapable
    character</dd>
  <dt id="REG_ESUBREG"><a class="permalink" href="#REG_ESUBREG"><code class="Dv">REG_ESUBREG</code></a></dt>
  <dd>invalid backreference number</dd>
  <dt id="REG_EBRACK"><a class="permalink" href="#REG_EBRACK"><code class="Dv">REG_EBRACK</code></a></dt>
  <dd>brackets &#x2018;<code class="Li">[ ]</code>&#x2019; not balanced</dd>
  <dt id="REG_EPAREN"><a class="permalink" href="#REG_EPAREN"><code class="Dv">REG_EPAREN</code></a></dt>
  <dd>parentheses &#x2018;<code class="Li">( )</code>&#x2019; not balanced</dd>
  <dt id="REG_EBRACE"><a class="permalink" href="#REG_EBRACE"><code class="Dv">REG_EBRACE</code></a></dt>
  <dd>braces &#x2018;<code class="Li">{ }</code>&#x2019; not balanced</dd>
  <dt id="REG_BADBR"><a class="permalink" href="#REG_BADBR"><code class="Dv">REG_BADBR</code></a></dt>
  <dd>invalid repetition count(s) in &#x2018;<code class="Li">{
    }</code>&#x2019;</dd>
  <dt id="REG_ERANGE"><a class="permalink" href="#REG_ERANGE"><code class="Dv">REG_ERANGE</code></a></dt>
  <dd>invalid character range in &#x2018;<code class="Li">[
    ]</code>&#x2019;</dd>
  <dt id="REG_ESPACE"><a class="permalink" href="#REG_ESPACE"><code class="Dv">REG_ESPACE</code></a></dt>
  <dd>ran out of memory</dd>
  <dt id="REG_BADRPT"><a class="permalink" href="#REG_BADRPT"><code class="Dv">REG_BADRPT</code></a></dt>
  <dd>&#x2018;<code class="Li">?</code>&#x2019;,
      &#x2018;<code class="Li">*</code>&#x2019;, or
      &#x2018;<code class="Li">+</code>&#x2019; operand invalid</dd>
  <dt id="REG_EMPTY"><a class="permalink" href="#REG_EMPTY"><code class="Dv">REG_EMPTY</code></a></dt>
  <dd>empty (sub)expression</dd>
  <dt id="REG_ASSERT"><a class="permalink" href="#REG_ASSERT"><code class="Dv">REG_ASSERT</code></a></dt>
  <dd>cannot happen - you found a bug</dd>
  <dt id="REG_INVARG"><a class="permalink" href="#REG_INVARG"><code class="Dv">REG_INVARG</code></a></dt>
  <dd>invalid argument, e.g. negative-length string</dd>
  <dt id="REG_ILLSEQ"><a class="permalink" href="#REG_ILLSEQ"><code class="Dv">REG_ILLSEQ</code></a></dt>
  <dd>illegal byte sequence (bad multibyte character)</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="../1/grep">grep(1)</a>,
    <a class="Xr" href="../7/re_format">re_format(7)</a></p>
<p class="Pp"><span class="St">IEEE Std 1003.2 (&#x201C;POSIX.2&#x201D;)</span>,
    sections 2.8 (Regular Expression Notation) and B.5 (C Binding for Regular
    Expression Matching).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">The <code class="Nm">regex</code> implementation is based on a
    heavily modified subset of TRE (http://laurikari.net/tre/), originally
    written by Ville Laurikari. Previous releases used an implementation
    originally written by <span class="An">Henry Spencer</span>, and altered for
    inclusion in the <span class="Ux">4.4BSD</span> distribution.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">The beginning-of-line and end-of-line anchors ( &#x201C;^&#x201D;
    and &#x201C;$&#x201D;) are currently implemented so that repetitions can not
    be applied to them. The standards are unclear about whether this is legal,
    but other <code class="Nm">regex</code> packages do support this case. It is
    best to avoid this non-portable (and not really very useful) case.</p>
<p class="Pp">The back-reference code is subtle and doubts linger about its
    correctness in complex cases.</p>
<p class="Pp">The <code class="Fn">regexec</code>() variants use one of two
    internal matching engines. The normal one is linear worst-case time in the
    length of the text being searched, and quadratic worst-case time in the
    length of the used regular expression. When back-references are used, a
    slower, backtracking engine is used. While all backtracking matching engines
    suffer from extreme slowness for certain pathological cases, the normal
    engines doesn't suffer from these cases. It is advised to avoid
    back-references whenever possible.</p>
<p class="Pp">The <code class="Fn">regcomp</code>() variants implements bounded
    repetitions by macro expansion, which is costly in time and space if counts
    are large or bounded repetitions are nested. An RE like, say,
    &#x2018;<code class="Li">((((a{1,100}){1,100}){1,100}){1,100}){1,100}</code>&#x2019;
    will (eventually) run almost any existing machine out of swap space.</p>
<p class="Pp">Due to a mistake in <span class="St">IEEE Std 1003.2
    (&#x201C;POSIX.2&#x201D;)</span>, things like
    &#x2018;<code class="Li">a)b</code>&#x2019; are legal REs because
    &#x2018;<code class="Li">)</code>&#x2019; is a special character only in the
    presence of a previous unmatched &#x2018;<code class="Li">(</code>&#x2019;.
    This cannot be fixed until the spec is fixed.</p>
<p class="Pp">The standard's definition of back references is vague. For
    example, does &#x2018;<code class="Li">a\(\(b\)*\2\)*d</code>&#x2019; match
    &#x2018;<code class="Li">abbbd</code>&#x2019;? Until the standard is
    clarified, behavior in such cases should not be relied on.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">Sept 29, 2011</td>
    <td class="foot-os">macOS 13.4</td>
  </tr>
</table>
</body>
</html>
