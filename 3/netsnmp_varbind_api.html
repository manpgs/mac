<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>NETSNMP_VARBIND_API(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">NETSNMP_VARBIND_API(3)</td>
    <td class="head-vol"><a href=".">Net-SNMP</a></td>
    <td class="head-rtitle">NETSNMP_VARBIND_API(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">snmp_pdu_add_variable, snmp_varlist_add_variable,
    snmp_add_null_var, snmp_clone_varbind, snmp_set_var_objid,
    snmp_set_var_value, snmp_set_var_typed_value, snmp_set_var_typed_integer,
    print_variable, fprint_variable, snprint_variable, print_value,
    fprint_value, snprint_value, snmp_free_var, snmp_free_varbind -
    netsnmp_varbind_api functions</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>#include &lt;net-snmp/varbind_api.h&gt;</b></p>
<section class="Ss">
<h2 class="Ss" id="Creation"><a class="permalink" href="#Creation">Creation</a></h2>
<p class="Pp"><b>netsnmp_variable_list *snmp_pdu_add_variable(</b>
  <br/>
  <b> netsnmp_pdu *</b><i>pdu</i><b>,</b>
  <br/>
  <b> const oid *</b><i>objid</i><b>, size_t </b><i>objidlen</i><b>,</b>
  <br/>
  <b> u_char </b><i>type</i><b>, const void *</b><i>value</i><b>, size_t
    </b><i>len</i><b>);</b>
  <br/>
  <b>netsnmp_variable_list *snmp_varlist_add_variable(</b>
  <br/>
  <b> netsnmp_variable_list *</b><i>varlist</i><b>,</b>
  <br/>
  <b> const oid *</b><i>objid</i><b>, size_t </b><i>objidlen</i><b>,</b>
  <br/>
  <b> u_char </b><i>type</i><b>, const void *</b><i>value</i><b>, size_t
    </b><i>len</i><b>);</b>
  <br/>
  <b>netsnmp_variable_list *snmp_add_null_var(</b>
  <br/>
  <b> netsnmp_pdu *</b><i>pdu</i><b>,</b>
  <br/>
  <b> const oid *</b><i>objid</i><b>, size_t </b><i>objidlen</i><b>);</b></p>
<p class="Pp"><b>netsnmp_variable_list *snmp_clone_varbind(</b>
  <br/>
  <b> netsnmp_variable_list *</b><i>varlist</i><b>);</b></p>
</section>
<section class="Ss">
<h2 class="Ss" id="Setting_Values"><a class="permalink" href="#Setting_Values">Setting
  Values</a></h2>
<p class="Pp"><b>int snmp_set_var_objid( netsnmp_variable_list*
    </b><i>variable</i><b>,</b>
  <br/>
  <b> const oid * </b><i>objid</i><b>, size_t </b><i>objidlen</i><b>);</b>
  <br/>
  <b>int snmp_set_var_value( netsnmp_variable_list* </b><i>variable</i><b>,</b>
  <br/>
  <b> const void * </b><i>value</i><b>, size_t </b><i>vallen</i><b>);</b>
  <br/>
  <b>int snmp_set_var_typed_value( netsnmp_variable_list*
    </b><i>variable</i><b>,</b>
  <br/>
  <b> u_char </b><i>type</i><b>,</b>
  <br/>
  <b> const void * </b><i>value</i><b>, size_t </b><i>vallen</i><b>);</b>
  <br/>
  <b>int snmp_set_var_typed_integer( netsnmp_variable_list*
    </b><i>variable</i><b>,</b>
  <br/>
  <b> u_char </b><i>type</i><b>, long </b><i>value</i><b>);</b></p>
</section>
<section class="Ss">
<h2 class="Ss" id="Output"><a class="permalink" href="#Output">Output</a></h2>
<p class="Pp"><b>void print_variable(const oid *</b><i>objid</i><b>, size_t
    </b><i>objidlen</i><b>,</b>
  <br/>
  <b> const netsnmp_variable_list *</b><i>variable</i><b>);</b>
  <br/>
  <b>void fprint_variable(FILE *</b><i>fp</i><b>,</b>
  <br/>
  <b> const oid *</b><i>objid</i><b>, size_t </b><i>objidlen</i><b>,</b>
  <br/>
  <b> const netsnmp_variable_list *</b><i>variable</i><b>);</b>
  <br/>
  <b>int snprint_variable(char *</b><i>buf</i><b>, size_t </b><i>len</i><b>,</b>
  <br/>
  <b> const oid *</b><i>objid</i><b>, size_t </b><i>objidlen</i><b>,</b>
  <br/>
  <b> const netsnmp_variable_list *</b><i>variable</i><b>);</b></p>
<p class="Pp"><b>void print_value(const oid *</b><i>objid</i><b>, size_t
    </b><i>objidlen</i><b>,</b>
  <br/>
  <b> const netsnmp_variable_list *</b><i>variable</i><b>);</b>
  <br/>
  <b>void fprint_value(FILE *</b><i>fp</i><b>,</b>
  <br/>
  <b> const oid *</b><i>objid</i><b>, size_t </b><i>objidlen</i><b>,</b>
  <br/>
  <b> const netsnmp_variable_list *</b><i>variable</i><b>);</b>
  <br/>
  <b>int snprint_value(char *</b><i>buf</i><b>, size_t </b><i>len</i><b>,</b>
  <br/>
  <b> const oid *</b><i>objid</i><b>, size_t </b><i>objidlen</i><b>,</b>
  <br/>
  <b> const netsnmp_variable_list *</b><i>variable</i><b>);</b>
  <br/>
</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Deletion"><a class="permalink" href="#Deletion">Deletion</a></h2>
<p class="Pp"><b>void snmp_free_var( netsnmp_variable_list
    *</b><i>variable</i><b>);</b>
  <br/>
  <b>void snmp_free_varbind( netsnmp_variable_list
    *</b><i>variables</i><b>);</b></p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The functions dealing with variable bindings fall into four groups
    - dealing with the creation, setting of values, output and deletion of
    varbinds.</p>
<section class="Ss">
<h2 class="Ss" id="Creation~2"><a class="permalink" href="#Creation~2">Creation</a></h2>
<p class="Pp"><b>snmp_pdu_add_variable</b> will create a new varbind structure,
    initialised with the name ( <i>objid</i>, <i>objidlen</i> ), syntax (
    <i>type</i> ) and value ( <i>value , len</i> ) provided. This varbind is
    then added to the end of the varbind list in the given PDU.</p>
<p class="Pp"><b>snmp_varlist_add_variable</b> is similar, but appends the new
    varbind to the end of the varbind list provided. When adding the first
    varbind to an empty list, simply pass the address of the head of the
  list:</p>
<dl class="Bl-tag">
  <dt></dt>
  <dd>
    <br/>
     netsnmp_variable_list *vl = NULL;
    <br/>
     snmp_varlist_add_variable(
    <br/>
     &amp;vl, name1, name1_len,
    <br/>
     ASN_<i>TYPE</i>, &amp;val1, val1_len);
    <br/>
     snmp_varlist_add_variable(
    <br/>
     &amp;vl, name2, name2_len,
    <br/>
     ASN_<i>TYPE</i>, &amp;val2, val2_len);</dd>
</dl>
<p class="Pp">In both cases, the routine will return a pointer to the new
    varbind structure (or NULL if the varbind creation fails).</p>
<p class="Pp"><b>snmp_add_null_var</b> is a convenience function to add an empty
    varbind to the PDU. without needing to specify the NULL value explicitly.
    This is the normal mechanism for constructing a GET (or similar) information
    retrieval request.
  <br/>
  Again, this returns a pointer to the new varbind, or NULL.</p>
<p class="Pp"><b>snmp_clone_varbind</b> creates a copy of each varbind in the
    specified list, returning a pointer to the head of the new list (or NULL if
    the cloning fails).
  <br/>
</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Setting_of_values"><a class="permalink" href="#Setting_of_values">Setting
  of values</a></h2>
<p class="Pp"><b>snmp_set_var_objid</b> sets the name of the varbind structure
    to the specified OID.
  <br/>
  <b>snmp_set_var_typed_value</b> sets the syntax type and value of the varbind
    structure.
  <br/>
  <b>snmp_set_var_value</b> sets the value of the varbind structure, leaving the
    syntax type unchanged.
  <br/>
  <b>snmp_set_var_typed_integer</b> is a convenience function to set the syntax
    type and value for a 32-bit integer-based varbind.</p>
<p class="Pp">All four of these return 0 if the assignment is successful, or 1
    if it is not.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Output~2"><a class="permalink" href="#Output~2">Output</a></h2>
<p class="Pp"><b>print_variable</b> will take an object identifier (as returned
    by <b>read_objid</b>, <b>snmp_parse_oid</b> or <b>get_module_node</b>) and
    an instance of such a variable, and prints to the standard output the
    textual form of the object identifier together with the value of the
    variable.</p>
<p class="Pp"><b>fprint_variable</b> does the same, but prints to the FILE
    pointer specified by the initial parameter.</p>
<p class="Pp"><b>snprint_variable</b> prints the same information into the
    buffer pointed to by <i>buf</i> which is of length <i>len</i>. It returns
    the number of characters printed, or -1 if the buffer was not large enough.
    In the latter case, <i>buf</i> will typically contained a truncated version
    of the information (but this behaviour is not guaranteed). This function
    replaces the obsolete function <b>sprint_variable</b>.</p>
<p class="Pp"><b>print_value</b>, <b>fprint_value</b>, and <b>snprint_value</b>
    do the same as the equivalent <b>print_variable</b> routines, but only
    displaying the value of the variable, without the corresponding object
    identifier.</p>
<p class="Pp">For displaying the OID of a varbind, see <b>min_api</b>(3).
  <br/>
</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Deletion~2"><a class="permalink" href="#Deletion~2">Deletion</a></h2>
<p class="Pp"><b>snmp_free_var</b> releases all memory used by the given varbind
    structure.
  <br/>
  <b>snmp_free_varbind</b> releases all memory used by each varbind structure in
    the varbind list provided.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>pdu_api</b>(3) <b>mib_api</b>(3)</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">13 Aug 2010</td>
    <td class="foot-os"><a href="..">V5.6.2.1</a></td>
  </tr>
</table>
</body>
</html>
