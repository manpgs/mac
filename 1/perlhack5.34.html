<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>PERLHACK(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PERLHACK(1)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">PERLHACK(1)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">perlhack - How to hack on Perl</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This document explains how Perl development works. It includes
    details about the Perl 5 Porters email list, the Perl repository, the Perl
    bug tracker, patch guidelines, and commentary on Perl development
    philosophy.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SUPER_QUICK_PATCH_GUIDE"><a class="permalink" href="#SUPER_QUICK_PATCH_GUIDE">SUPER
  QUICK PATCH GUIDE</a></h1>
<p class="Pp">If you just want to submit a single small patch like a pod fix, a
    test for a bug, comment fixes, etc., it's easy! Here's how:</p>
<ul class="Bl-bullet">
  <li>Check out the source repository
    <p class="Pp">The perl source is in a git repository. You can clone the
        repository with the following command:</p>
    <p class="Pp"></p>
    <pre>  % git clone https://github.com/Perl/perl5.git perl
    </pre>
  </li>
  <li>Ensure you're following the latest advice
    <p class="Pp">In case the advice in this guide has been updated recently,
        read the latest version directly from the perl source:</p>
    <p class="Pp"></p>
    <pre>  % perldoc pod/perlhack.pod
    </pre>
  </li>
  <li>Create a branch for your change
    <p class="Pp">Create a branch based on blead to commit your change to, which
        will later be used to send it to the Perl issue tracker.</p>
    <p class="Pp"></p>
    <pre>  % git checkout -b mychange
    </pre>
  </li>
  <li>Make your change
    <p class="Pp">Hack, hack, hack. Keep in mind that Perl runs on many
        different platforms, with different operating systems that have
        different capabilities, different filesystem organizations, and even
        different character sets. perlhacktips gives advice on this.</p>
  </li>
  <li>Test your change
    <p class="Pp">You can run all the tests with the following commands:</p>
    <p class="Pp"></p>
    <pre>  % ./Configure -des -Dusedevel
  % make test
    </pre>
    <p class="Pp">Keep hacking until the tests pass.</p>
  </li>
  <li>Commit your change
    <p class="Pp">Committing your work will save the change <i>on your local
        system</i>:</p>
    <p class="Pp"></p>
    <pre>  % git commit -a -m 'Commit message goes here'
    </pre>
    <p class="Pp">Make sure the commit message describes your change in a single
        sentence. For example, &quot;Fixed spelling errors in
        perlhack.pod&quot;.</p>
  </li>
  <li>Send your change to the Perl issue tracker
    <p class="Pp">The next step is to submit your patch to the Perl core ticket
        system.</p>
    <p class="Pp">Create a GitHub fork of the perl5 repository and add it as a
        remote, if you haven't already, as described in the GitHub documentation
        at &lt;https://help.github.com/en/articles/working-with-forks&gt;.</p>
    <p class="Pp"></p>
    <pre>  % git remote add fork git@github.com:MyUser/perl5.git
    </pre>
    <p class="Pp">For more information, see &quot;Connecting to GitHub with
        SSH&quot;
        &lt;https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh&gt;.</p>
    <p class="Pp">If you'd rather use an HTTPS URL for your
        <span class="Li">&quot;git push&quot;</span> see &quot;Cloning with
        HTTPS URLs&quot;
        &lt;https://docs.github.com/en/free-pro-team@latest/github/using-git/which-remote-url-should-i-use#cloning-with-https-urls&gt;.</p>
    <p class="Pp"></p>
    <pre>  % git remote add fork https://github.com/MyUser/perl5.git
    </pre>
    <p class="Pp">Then, push your new branch to your fork.</p>
    <p class="Pp"></p>
    <pre>  % git push -u fork mychange
    </pre>
    <p class="Pp">Finally, create a Pull Request on GitHub from your branch to
        blead as described in the GitHub documentation at
        &lt;https://help.github.com/en/articles/creating-a-pull-request-from-a-fork&gt;.</p>
  </li>
  <li>Thank you
    <p class="Pp">The porters appreciate the time you spent helping to make Perl
        better. Thank you!</p>
  </li>
  <li>Acknowledgement
    <p class="Pp">All contributors are credited (by name and email address) in
        the AUTHORS file, which is part of the perl distribution, as well as the
        Git commit history.</p>
    <p class="Pp">If you donXt want to be included in the AUTHORS file, just let
        us know. Otherwise we will take your submission of a patch as permission
        to credit you in the AUTHORS file.</p>
  </li>
  <li>Next time
    <p class="Pp">The next time you wish to make a patch, you need to start from
        the latest perl in a pristine state. Check you don't have any local
        changes or added files in your perl check-out which you wish to keep,
        then run these commands:</p>
    <p class="Pp"></p>
    <pre>  % git checkout blead
  % git pull
  % git reset --hard origin/blead
  % git clean -dxf
    </pre>
  </li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="BUG_REPORTING"><a class="permalink" href="#BUG_REPORTING">BUG
  REPORTING</a></h1>
<p class="Pp">If you want to report a bug in Perl, or browse existing Perl bugs
    and patches, use the GitHub issue tracker at
    &lt;https://github.com/perl/perl5/issues&gt;.</p>
<p class="Pp">Please check the archive of the perl5-porters list (see below)
    and/or the bug tracking system before submitting a bug report. Often, you'll
    find that the bug has been reported already.</p>
<p class="Pp">You can log in to the bug tracking system and comment on existing
    bug reports. If you have additional information regarding an existing bug,
    please add it. This will help the porters fix the bug.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="PERL_5_PORTERS"><a class="permalink" href="#PERL_5_PORTERS">PERL
  5 PORTERS</a></h1>
<p class="Pp">The perl5-porters (p5p) mailing list is where the Perl standard
    distribution is maintained and developed. The people who maintain Perl are
    also referred to as the &quot;Perl 5 Porters&quot;, &quot;p5p&quot; or just
    the &quot;porters&quot;.</p>
<p class="Pp">A searchable archive of the list is available at
    &lt;https://markmail.org/search/?q=perl5-porters&gt;. There is also an
    archive at
  &lt;https://archive.develooper.com/perl5-porters@perl.org/&gt;.</p>
<section class="Ss">
<h2 class="Ss" id="perl-changes_mailing_list"><a class="permalink" href="#perl-changes_mailing_list">perl-changes
  mailing list</a></h2>
<p class="Pp">The perl5-changes mailing list receives a copy of each patch that
    gets submitted to the maintenance and development branches of the perl
    repository. See &lt;https://lists.perl.org/list/perl5-changes.html&gt; for
    subscription and archive information.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_p5p_on_"><a class="permalink" href="#_p5p_on_">#p5p on
  IRC</a></h2>
<p class="Pp">Many porters are also active on the
    &lt;irc://irc.perl.org/#p5p&gt; channel. Feel free to join the channel and
    ask questions about hacking on the Perl core.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="GETTING_THE_PERL_SOURCE"><a class="permalink" href="#GETTING_THE_PERL_SOURCE">GETTING
  THE PERL SOURCE</a></h1>
<p class="Pp">All of Perl's source code is kept centrally in a Git repository at
    <i>github.com</i>. The repository contains many Perl revisions from Perl 1
    onwards and all the revisions from Perforce, the previous version control
    system.</p>
<p class="Pp">For much more detail on using git with the Perl repository, please
    see perlgit.</p>
<section class="Ss">
<h2 class="Ss" id="Read_access_via_Git"><a class="permalink" href="#Read_access_via_Git">Read
  access via Git</a></h2>
<p class="Pp">You will need a copy of Git for your computer. You can fetch a
    copy of the repository using the git protocol:</p>
<p class="Pp"></p>
<pre>  % git clone git://github.com/Perl/perl5.git perl
</pre>
<p class="Pp">This clones the repository and makes a local copy in the
    <i>perl</i> directory.</p>
<p class="Pp">If you cannot use the git protocol for firewall reasons, you can
    also clone via http:</p>
<p class="Pp"></p>
<pre>  % git clone https://github.com/Perl/perl5.git perl
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Read_access_via_the_web"><a class="permalink" href="#Read_access_via_the_web">Read
  access via the web</a></h2>
<p class="Pp">You may access the repository over the web. This allows you to
    browse the tree, see recent commits, subscribe to repository notifications,
    search for particular commits and more. You may access it at
    &lt;https://github.com/Perl/perl5&gt;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Read_access_via_rsync"><a class="permalink" href="#Read_access_via_rsync">Read
  access via rsync</a></h2>
<p class="Pp">You can also choose to use rsync to get a copy of the current
    source tree for the bleadperl branch and all maintenance branches:</p>
<p class="Pp"></p>
<pre>  % rsync -avz rsync://perl5.git.perl.org/perl-current .
  % rsync -avz rsync://perl5.git.perl.org/perl-5.12.x .
  % rsync -avz rsync://perl5.git.perl.org/perl-5.10.x .
  % rsync -avz rsync://perl5.git.perl.org/perl-5.8.x .
  % rsync -avz rsync://perl5.git.perl.org/perl-5.6.x .
  % rsync -avz rsync://perl5.git.perl.org/perl-5.005xx .
</pre>
<p class="Pp">(Add the <span class="Li">&quot;--delete&quot;</span> option to
    remove leftover files.)</p>
<p class="Pp">To get a full list of the available sync points:</p>
<p class="Pp"></p>
<pre>  % rsync perl5.git.perl.org::
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Write_access_via_git"><a class="permalink" href="#Write_access_via_git">Write
  access via git</a></h2>
<p class="Pp">If you have a commit bit, please see perlgit for more details on
    using git.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="PATCHING_PERL"><a class="permalink" href="#PATCHING_PERL">PATCHING
  PERL</a></h1>
<p class="Pp">If you're planning to do more extensive work than a single small
    fix, we encourage you to read the documentation below. This will help you
    focus your work and make your patches easier to incorporate into the Perl
    source.</p>
<section class="Ss">
<h2 class="Ss" id="Submitting_patches"><a class="permalink" href="#Submitting_patches">Submitting
  patches</a></h2>
<p class="Pp">If you have a small patch to submit, please submit it via the
    GitHub Pull Request workflow. You may also send patches to the p5p list.</p>
<p class="Pp">Patches are reviewed and discussed on GitHub or the p5p list.
    Simple, uncontroversial patches will usually be applied without any
    discussion. When the patch is applied, the ticket will be updated and you
    will receive email.</p>
<p class="Pp">In other cases, the patch will need more work or discussion. You
    are encouraged to participate in the discussion and advocate for your patch.
    Sometimes your patch may get lost in the shuffle. It's appropriate to send a
    reminder email to p5p if no action has been taken in a month. Please
    remember that the Perl 5 developers are all volunteers, and be polite.</p>
<p class="Pp">Changes are always applied directly to the main development
    branch, called &quot;blead&quot;. Some patches may be backported to a
    maintenance branch. If you think your patch is appropriate for the
    maintenance branch (see &quot;MAINTENANCE BRANCHES&quot; in perlpolicy),
    please explain why when you submit it.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Getting_your_patch_accepted"><a class="permalink" href="#Getting_your_patch_accepted">Getting
  your patch accepted</a></h2>
<p class="Pp">If you are submitting a code patch there are several things that
    you can do to help the Perl 5 Porters accept your patch.</p>
<p class="Pp"><i>Patch style</i></p>
<p class="Pp">Using the GitHub Pull Request workflow, your patch will
    automatically be available in a suitable format. If you wish to submit a
    patch to the p5p list for review, make sure to create it appropriately.</p>
<p class="Pp">If you used git to check out the Perl source, then using
    <span class="Li">&quot;git</span> <span class="Li">format-patch&quot;</span>
    will produce a patch in a style suitable for Perl. The
    <span class="Li">&quot;format-patch&quot;</span> command produces one patch
    file for each commit you made. If you prefer to send a single patch for all
    commits, you can use <span class="Li">&quot;git diff&quot;</span>.</p>
<p class="Pp"></p>
<pre>  % git checkout blead
  % git pull
  % git diff blead my-branch-name
</pre>
<p class="Pp">This produces a patch based on the difference between blead and
    your current branch. It's important to make sure that blead is up to date
    before producing the diff, that's why we call <span class="Li">&quot;git
    pull&quot;</span> first.</p>
<p class="Pp">We strongly recommend that you use git if possible. It will make
    your life easier, and ours as well.</p>
<p class="Pp">However, if you're not using git, you can still produce a suitable
    patch. You'll need a pristine copy of the Perl source to diff against. The
    porters prefer unified diffs. Using GNU
    <span class="Li">&quot;diff&quot;</span>, you can produce a diff like
  this:</p>
<p class="Pp"></p>
<pre>  % diff -Npurd perl.pristine perl.mine
</pre>
<p class="Pp">Make sure that you <span class="Li">&quot;make
    realclean&quot;</span> in your copy of Perl to remove any build artifacts,
    or you may get a confusing result.</p>
<p class="Pp"><i>Commit message</i></p>
<p class="Pp">As you craft each patch you intend to submit to the Perl core,
    it's important to write a good commit message. This is especially important
    if your submission will consist of a series of commits.</p>
<p class="Pp">The first line of the commit message should be a short description
    without a period. It should be no longer than the subject line of an email,
    50 characters being a good rule of thumb.</p>
<p class="Pp">A lot of Git tools (Gitweb, GitHub, git log --pretty=oneline, ...)
    will only display the first line (cut off at 50 characters) when presenting
    commit summaries.</p>
<p class="Pp">The commit message should include a description of the problem
    that the patch corrects or new functionality that the patch adds.</p>
<p class="Pp">As a general rule of thumb, your commit message should help a
    programmer who knows the Perl core quickly understand what you were trying
    to do, how you were trying to do it, and why the change matters to Perl.</p>
<ul class="Bl-bullet">
  <li>Why
    <p class="Pp">Your commit message should describe why the change you are
        making is important. When someone looks at your change in six months or
        six years, your intent should be clear.</p>
    <p class="Pp">If you're deprecating a feature with the intent of later
        simplifying another bit of code, say so. If you're fixing a performance
        problem or adding a new feature to support some other bit of the core,
        mention that.</p>
  </li>
  <li>What
    <p class="Pp">Your commit message should describe what part of the Perl core
        you're changing and what you expect your patch to do.</p>
  </li>
  <li>How
    <p class="Pp">While it's not necessary for documentation changes, new tests
        or trivial patches, it's often worth explaining how your change works.
        Even if it's clear to you today, it may not be clear to a porter next
        month or next year.</p>
  </li>
</ul>
<p class="Pp">A commit message isn't intended to take the place of comments in
    your code. Commit messages should describe the change you made, while code
    comments should describe the current state of the code.</p>
<p class="Pp">If you've just implemented a new feature, complete with doc, tests
    and well-commented code, a brief commit message will often suffice. If,
    however, you've just changed a single character deep in the parser or lexer,
    you might need to write a small novel to ensure that future readers
    understand what you did and why you did it.</p>
<p class="Pp"><i>Comments, Comments, Comments</i></p>
<p class="Pp">Be sure to adequately comment your code. While commenting every
    line is unnecessary, anything that takes advantage of side effects of
    operators, that creates changes that will be felt outside of the function
    being patched, or that others may find confusing should be documented. If
    you are going to err, it is better to err on the side of adding too many
    comments than too few.</p>
<p class="Pp">The best comments explain <i>why</i> the code does what it does,
    not <i>what</i> <i>it does</i>.</p>
<p class="Pp"><i>Style</i></p>
<p class="Pp">In general, please follow the particular style of the code you are
    patching.</p>
<p class="Pp">In particular, follow these general guidelines for patching Perl
    sources:</p>
<ul class="Bl-bullet">
  <li>4-wide indents for code, 2-wide indents for nested CPP
      <span class="Li">&quot;#define&quot;</span>s, with 8-wide tabstops.</li>
  <li>Use spaces for indentation, not tab characters.
    <p class="Pp">The codebase is a mixture of tabs and spaces for indentation,
        and we are moving to spaces only. Converting lines you're patching from
        8-wide tabs to spaces will help this migration.</p>
  </li>
  <li>Try hard not to exceed 79-columns</li>
  <li>ANSI C prototypes</li>
  <li>Uncuddled elses and &quot;K&amp;R&quot; style for indenting control
      constructs</li>
  <li>No C++ style (//) comments</li>
  <li>Mark places that need to be revisited with XXX (and revisit often!)</li>
  <li>Opening brace lines up with &quot;if&quot; when conditional spans multiple
      lines; should be at end-of-line otherwise</li>
  <li>In function definitions, name starts in column 0 (return value-type is on
      previous line)</li>
  <li>Single space after keywords that are followed by parens, no space between
      function name and following paren</li>
  <li>Avoid assignments in conditionals, but if they're unavoidable, use extra
      paren, e.g. &quot;if (a &amp;&amp; (b = c)) ...&quot;</li>
  <li>&quot;return foo;&quot; rather than &quot;return(foo);&quot;</li>
  <li>&quot;if (!foo) ...&quot; rather than &quot;if (foo == FALSE) ...&quot;
      etc.</li>
  <li>Do not declare variables using &quot;register&quot;. It may be
      counterproductive with modern compilers, and is deprecated in C++, under
      which the Perl source is regularly compiled.</li>
  <li>In-line functions that are in headers that are accessible to XS code need
      to be able to compile without warnings with commonly used extra
      compilation flags, such as gcc's
      <span class="Li">&quot;-Wswitch-default&quot;</span> which warns whenever
      a switch statement does not have a &quot;default&quot; case. The use of
      these extra flags is to catch potential problems in legal C code, and is
      often used by Perl aggregators, such as Linux distributors.</li>
</ul>
<p class="Pp"><i>Test suite</i></p>
<p class="Pp">If your patch changes code (rather than just changing
    documentation), you should also include one or more test cases which
    illustrate the bug you're fixing or validate the new functionality you're
    adding. In general, you should update an existing test file rather than
    create a new one.</p>
<p class="Pp">Your test suite additions should generally follow these guidelines
    (courtesy of Gurusamy Sarathy &lt;gsar@activestate.com&gt;):</p>
<ul class="Bl-bullet">
  <li>Know what you're testing. Read the docs, and the source.</li>
  <li>Tend to fail, not succeed.</li>
  <li>Interpret results strictly.</li>
  <li>Use unrelated features (this will flush out bizarre interactions).</li>
  <li>Use non-standard idioms (otherwise you are not testing TIMTOWTDI).</li>
  <li>Avoid using hardcoded test numbers whenever possible (the EXPECTED/GOT
      found in t/op/tie.t is much more maintainable, and gives better failure
      reports).</li>
  <li>Give meaningful error messages when a test fails.</li>
  <li>Avoid using qx// and <b>system()</b> unless you are testing for them. If
      you do use them, make sure that you cover _all_ perl platforms.</li>
  <li>Unlink any temporary files you create.</li>
  <li>Promote unforeseen warnings to errors with
      <span class="Li">$SIG</span>{__WARN__}.</li>
  <li>Be sure to use the libraries and modules shipped with the version being
      tested, not those that were already installed.</li>
  <li>Add comments to the code explaining what you are testing for.</li>
  <li>Make updating the '1..42' string unnecessary. Or make sure that you update
      it.</li>
  <li>Test _all_ behaviors of a given operator, library, or function.
    <p class="Pp">Test all optional arguments.</p>
    <p class="Pp">Test return values in various contexts (boolean, scalar, list,
        lvalue).</p>
    <p class="Pp">Use both global and lexical variables.</p>
    <p class="Pp">Don't forget the exceptional, pathological cases.</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Patching_a_core_module"><a class="permalink" href="#Patching_a_core_module">Patching
  a core module</a></h2>
<p class="Pp">This works just like patching anything else, with one extra
    consideration.</p>
<p class="Pp">Modules in the <i>cpan/</i> directory of the source tree are
    maintained outside of the Perl core. When the author updates the module, the
    updates are simply copied into the core. See that module's documentation or
    its listing on &lt;https://metacpan.org/&gt; for more information on
    reporting bugs and submitting patches.</p>
<p class="Pp">In most cases, patches to modules in <i>cpan/</i> should be sent
    upstream and should not be applied to the Perl core individually. If a patch
    to a file in <i>cpan/</i> absolutely cannot wait for the fix to be made
    upstream, released to CPAN and copied to blead, you must add (or update) a
    <span class="Li">&quot;CUSTOMIZED&quot;</span> entry in the
    <i>&quot;Porting/Maintainers.pl&quot;</i> file to flag that a local
    modification has been made. See <i>&quot;Porting/Maintainers.pl&quot;</i>
    for more details.</p>
<p class="Pp">In contrast, modules in the <i>dist/</i> directory are maintained
    in the core.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Updating_perldelta"><a class="permalink" href="#Updating_perldelta">Updating
  perldelta</a></h2>
<p class="Pp">For changes significant enough to warrant a
    <i>pod/perldelta.pod</i> entry, the porters will greatly appreciate it if
    you submit a delta entry along with your actual change. Significant changes
    include, but are not limited to:</p>
<ul class="Bl-bullet">
  <li>Adding, deprecating, or removing core features</li>
  <li>Adding, deprecating, removing, or upgrading core or dual-life modules</li>
  <li>Adding new core tests</li>
  <li>Fixing security issues and user-visible bugs in the core</li>
  <li>Changes that might break existing code, either on the perl or C level</li>
  <li>Significant performance improvements</li>
  <li>Adding, removing, or significantly changing documentation in the
      <i>pod/</i> directory</li>
  <li>Important platform-specific changes</li>
</ul>
<p class="Pp">Please make sure you add the perldelta entry to the right section
    within <i>pod/perldelta.pod</i>. More information on how to write good
    perldelta entries is available in the
    <span class="Li">&quot;Style&quot;</span> section of
    <i>Porting/how_to_write_a_perldelta.pod</i>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_makes_for_a_good_patch?"><a class="permalink" href="#What_makes_for_a_good_patch?">What
  makes for a good patch?</a></h2>
<p class="Pp">New features and extensions to the language can be contentious.
    There is no specific set of criteria which determine what features get
    added, but here are some questions to consider when developing a patch:</p>
<p class="Pp"><i>Does the concept match the general goals of Perl?</i></p>
<p class="Pp">Our goals include, but are not limited to:</p>
<dl class="Bl-tag">
  <dt>1.</dt>
  <dd>Keep it fast, simple, and useful.</dd>
  <dt>2.</dt>
  <dd>Keep features/concepts as orthogonal as possible.</dd>
  <dt>3.</dt>
  <dd>No arbitrary limits (platforms, data sizes, cultures).</dd>
  <dt>4.</dt>
  <dd>Keep it open and exciting to use/patch/advocate Perl everywhere.</dd>
  <dt>5.</dt>
  <dd>Either assimilate new technologies, or build bridges to them.</dd>
</dl>
<p class="Pp"><i>Where is the implementation?</i></p>
<p class="Pp">All the talk in the world is useless without an implementation. In
    almost every case, the person or people who argue for a new feature will be
    expected to be the ones who implement it. Porters capable of coding new
    features have their own agendas, and are not available to implement your
    (possibly good) idea.</p>
<p class="Pp"><i>Backwards compatibility</i></p>
<p class="Pp">It's a cardinal sin to break existing Perl programs. New warnings
    can be contentious--some say that a program that emits warnings is not
    broken, while others say it is. Adding keywords has the potential to break
    programs, changing the meaning of existing token sequences or functions
    might break programs.</p>
<p class="Pp">The Perl 5 core includes mechanisms to help porters make backwards
    incompatible changes more compatible such as the feature and deprecate
    modules. Please use them when appropriate.</p>
<p class="Pp"><i>Could it be a module instead?</i></p>
<p class="Pp">Perl 5 has extension mechanisms, modules and XS, specifically to
    avoid the need to keep changing the Perl interpreter. You can write modules
    that export functions, you can give those functions prototypes so they can
    be called like built-in functions, you can even write XS code to mess with
    the runtime data structures of the Perl interpreter if you want to implement
    really complicated things.</p>
<p class="Pp">Whenever possible, new features should be prototyped in a CPAN
    module before they will be considered for the core.</p>
<p class="Pp"><i>Is the feature generic enough?</i></p>
<p class="Pp">Is this something that only the submitter wants added to the
    language, or is it broadly useful? Sometimes, instead of adding a feature
    with a tight focus, the porters might decide to wait until someone
    implements the more generalized feature.</p>
<p class="Pp"><i>Does it potentially introduce new bugs?</i></p>
<p class="Pp">Radical rewrites of large chunks of the Perl interpreter have the
    potential to introduce new bugs.</p>
<p class="Pp"><i>How big is it?</i></p>
<p class="Pp">The smaller and more localized the change, the better. Similarly,
    a series of small patches is greatly preferred over a single large
  patch.</p>
<p class="Pp"><i>Does it preclude other desirable features?</i></p>
<p class="Pp">A patch is likely to be rejected if it closes off future avenues
    of development. For instance, a patch that placed a true and final
    interpretation on prototypes is likely to be rejected because there are
    still options for the future of prototypes that haven't been addressed.</p>
<p class="Pp"><i>Is the implementation robust?</i></p>
<p class="Pp">Good patches (tight code, complete, correct) stand more chance of
    going in. Sloppy or incorrect patches might be placed on the back burner
    until fixes can be made, or they might be discarded altogether without
    further notice.</p>
<p class="Pp"><i>Is the implementation generic enough to be portable?</i></p>
<p class="Pp">The worst patches make use of system-specific features. It's
    highly unlikely that non-portable additions to the Perl language will be
    accepted.</p>
<p class="Pp"><i>Is the implementation tested?</i></p>
<p class="Pp">Patches which change behaviour (fixing bugs or introducing new
    features) must include regression tests to verify that everything works as
    expected.</p>
<p class="Pp">Without tests provided by the original author, how can anyone else
    changing perl in the future be sure that they haven't unwittingly broken the
    behaviour the patch implements? And without tests, how can the patch's
    author be confident that his/her hard work put into the patch won't be
    accidentally thrown away by someone in the future?</p>
<p class="Pp"><i>Is there enough documentation?</i></p>
<p class="Pp">Patches without documentation are probably ill-thought out or
    incomplete. No features can be added or changed without documentation, so
    submitting a patch for the appropriate pod docs as well as the source code
    is important.</p>
<p class="Pp"><i>Is there another way to do it?</i></p>
<p class="Pp">Larry said &quot;Although the Perl Slogan is <i>There's More Than
    One Way to</i> <i>Do It</i>, I hesitate to make 10 ways to do
    something&quot;. This is a tricky heuristic to navigate, though--one man's
    essential addition is another man's pointless cruft.</p>
<p class="Pp"><i>Does it create too much work?</i></p>
<p class="Pp">Work for the committers, work for Perl programmers, work for
    module authors, ... Perl is supposed to be easy.</p>
<p class="Pp"><i>Patches speak louder than words</i></p>
<p class="Pp">Working code is always preferred to pie-in-the-sky ideas. A patch
    to add a feature stands a much higher chance of making it to the language
    than does a random feature request, no matter how fervently argued the
    request might be. This ties into &quot;Will it be useful?&quot;, as the fact
    that someone took the time to make the patch demonstrates a strong desire
    for the feature.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="TESTING"><a class="permalink" href="#TESTING">TESTING</a></h1>
<p class="Pp">The core uses the same testing style as the rest of Perl, a simple
    &quot;ok/not ok&quot; run through Test::Harness, but there are a few special
    considerations.</p>
<p class="Pp">There are three ways to write a test in the core: Test::More,
    <i>t/test.pl</i> and ad hoc <span class="Li">&quot;print $test ? &quot;ok
    42\n&quot; : &quot;not ok 42\n&quot;&quot;</span>. The decision of which to
    use depends on what part of the test suite you're working on. This is a
    measure to prevent a high-level failure (such as Config.pm breaking) from
    causing basic functionality tests to fail.</p>
<p class="Pp">The <i>t/test.pl</i> library provides some of the features of
    Test::More, but avoids loading most modules and uses as few core features as
    possible.</p>
<p class="Pp">If you write your own test, use the Test Anything Protocol
    &lt;https://testanything.org&gt;.</p>
<ul class="Bl-bullet">
  <li><i>t/base</i>, <i>t/comp</i> and <i>t/opbasic</i>
    <p class="Pp">Since we don't know if
        <span class="Li">&quot;require&quot;</span> works, or even subroutines,
        use ad hoc tests for these three. Step carefully to avoid using the
        feature being tested. Tests in <i>t/opbasic</i>, for instance, have been
        placed there rather than in <i>t/op</i> because they test functionality
        which <i>t/test.pl</i> presumes has already been demonstrated to
      work.</p>
  </li>
  <li>All other subdirectories of <i>t/</i>
    <p class="Pp">Now that basic <b>require()</b> and subroutines are tested,
        you can use the <i>t/test.pl</i> library.</p>
    <p class="Pp">You can also use certain libraries like Config conditionally,
        but be sure to skip the test gracefully if it's not there.</p>
  </li>
  <li>Test files not found under <i>t/</i>
    <p class="Pp">This category includes <i>.t</i> files underneath directories
        such as <i>dist</i>, <i>ext</i> and <i>lib</i>. Since the core of Perl
        has now been tested, Test::More can and now should be used. You can also
        use the full suite of core modules in the tests. (As noted in
        &quot;Patching a core module&quot; above, changes to <i>.t</i> files
        found under <i>cpan/</i> should be submitted to the upstream maintainers
        of those modules.)</p>
  </li>
</ul>
<p class="Pp">When you say &quot;make test&quot;, Perl uses the <i>t/TEST</i>
    program to run the test suite (except under Win32 where it uses
    <i>t/harness</i> instead). All tests are run from the <i>t/</i> directory,
    <b>not</b> the directory which contains the test. This causes some problems
    with the tests in <i>lib/</i>, so here's some opportunity for some
  patching.</p>
<p class="Pp">You must be triply conscious of cross-platform concerns. This
    usually boils down to using File::Spec, avoiding things like
    <span class="Li">&quot;fork()&quot;</span> and
    <span class="Li">&quot;system()&quot;</span> unless absolutely necessary,
    and not assuming that a given character has a particular ordinal value (code
    point) or that its UTF-8 representation is composed of particular bytes.</p>
<p class="Pp">There are several functions available to specify characters and
    code points portably in tests. The always-preloaded functions
    <span class="Li">&quot;utf8::unicode_to_native()&quot;</span> and its
    inverse <span class="Li">&quot;utf8::native_to_unicode()&quot;</span> take
    code points and translate appropriately. The file <i>t/charset_tools.pl</i>
    has several functions that can be useful. It has versions of the previous
    two functions that take strings as inputs -- not single numeric code points:
    <span class="Li">&quot;uni_to_native()&quot;</span> and
    <span class="Li">&quot;native_to_uni()&quot;</span>. If you must look at the
    individual bytes comprising a UTF-8 encoded string,
    <span class="Li">&quot;byte_utf8a_to_utf8n()&quot;</span> takes as input a
    string of those bytes encoded for an ASCII platform, and returns the
    equivalent string in the native platform. For example,
    <span class="Li">&quot;byte_utf8a_to_utf8n(&quot;\xC2\xA0&quot;)&quot;</span>
    returns the byte sequence on the current platform that form the UTF-8 for
    <span class="Li">&quot;U+00A0&quot;</span>, since
    <span class="Li">&quot;\xC2\xA0&quot;</span> are the UTF-8 bytes on an ASCII
    platform for that code point. This function returns
    <span class="Li">&quot;\xC2\xA0&quot;</span> on an ASCII platform, and
    <span class="Li">&quot;\x80\x41&quot;</span> on an EBCDIC 1047 one.</p>
<p class="Pp">But easiest is, if the character is specifiable as a literal, like
    <span class="Li">&quot;A&quot;</span> or
    <span class="Li">&quot;%&quot;</span>, to use that; if not so specificable,
    you can use <span class="Li">&quot;\N{}&quot;</span> , if the side effects
    aren't troublesome. Simply specify all your characters in hex, using
    <span class="Li">&quot;\N{U+ZZ}&quot;</span> instead of
    <span class="Li">&quot;\xZZ&quot;</span>.
    <span class="Li">&quot;\N{}&quot;</span> is the Unicode name, and so it
    always gives you the Unicode character.
    <span class="Li">&quot;\N{U+41}&quot;</span> is the character whose Unicode
    code point is <span class="Li">0x41</span>, hence is
    <span class="Li">'A'</span> on all platforms. The side effects are:</p>
<ul class="Bl-bullet">
  <li>These select Unicode rules. That means that in double-quotish strings, the
      string is always converted to UTF-8 to force a Unicode interpretation (you
      can <span class="Li">&quot;utf8::downgrade()&quot;</span> afterwards to
      convert back to non-UTF8, if possible). In regular expression patterns,
      the conversion isn't done, but if the character set modifier would
      otherwise be <span class="Li">&quot;/d&quot;</span>, it is changed to
      <span class="Li">&quot;/u&quot;</span>.</li>
  <li>If you use the form
      <span class="Li">&quot;\N{</span><span class="Li"><i>character
      name</i></span><span class="Li">}&quot;</span>, the charnames module gets
      automatically loaded. This may not be suitable for the test level you are
      doing.</li>
</ul>
<p class="Pp">If you are testing locales (see perllocale), there are helper
    functions in <i>t/loc_tools.pl</i> to enable you to see what locales there
    are on the current platform.</p>
<section class="Ss">
<h2 class="Ss" id="Special__make_test__targets"><a class="permalink" href="#Special__make_test__targets">Special
  &quot;make test&quot; targets</a></h2>
<p class="Pp">There are various special make targets that can be used to test
    Perl slightly differently than the standard &quot;test&quot; target. Not all
    them are expected to give a 100% success rate. Many of them have several
    aliases, and many of them are not available on certain operating
  systems.</p>
<ul class="Bl-bullet">
  <li>test_porting
    <p class="Pp">This runs some basic sanity tests on the source tree and helps
        catch basic errors before you submit a patch.</p>
  </li>
  <li>minitest
    <p class="Pp">Run <i>miniperl</i> on <i>t/base</i>, <i>t/comp</i>,
        <i>t/cmd</i>, <i>t/run</i>, <i>t/io</i>, <i>t/op</i>, <i>t/uni</i> and
        <i>t/mro</i> tests.</p>
    <p class="Pp"><i>miniperl</i> is a minimalistic perl built to bootstrap
        building extensions, utilties, documentation etc. It doesn't support
        dynamic loading and depending on the point in the build process will
        only have access to a limited set of core modules. <i>miniperl</i> is
        not intended for day to day use.</p>
  </li>
  <li>test.valgrind check.valgrind
    <p class="Pp">(Only in Linux) Run all the tests using the memory leak +
        naughty memory access tool &quot;valgrind&quot;. The log files will be
        named <i>testname.valgrind</i>.</p>
  </li>
  <li>test_harness
    <p class="Pp">Run the test suite with the <i>t/harness</i> controlling
        program, instead of <i>t/TEST</i>. <i>t/harness</i> is more
        sophisticated, and uses the Test::Harness module, thus using this test
        target supposes that perl mostly works. The main advantage for our
        purposes is that it prints a detailed summary of failed tests at the
        end. Also, unlike <i>t/TEST</i>, it doesn't redirect stderr to
      stdout.</p>
    <p class="Pp">Note that under Win32 <i>t/harness</i> is always used instead
        of <i>t/TEST</i>, so there is no special &quot;test_harness&quot;
        target.</p>
    <p class="Pp">Under Win32's &quot;test&quot; target you may use the
        TEST_SWITCHES and TEST_FILES environment variables to control the
        behaviour of <i>t/harness</i>. This means you can say</p>
    <p class="Pp"></p>
    <pre>    nmake test TEST_FILES=&quot;op/*.t&quot;
    nmake test TEST_SWITCHES=&quot;-torture&quot; TEST_FILES=&quot;op/*.t&quot;
    </pre>
  </li>
  <li>test-notty test_notty
    <p class="Pp">Sets PERL_SKIP_TTY_TEST to true before running normal
      test.</p>
  </li>
</ul>
</section>
<section class="Ss">
<h2 class="Ss" id="Parallel_tests"><a class="permalink" href="#Parallel_tests">Parallel
  tests</a></h2>
<p class="Pp">The core distribution can now run its regression tests in parallel
    on Unix-like and Windows platforms. On Unix, instead of running
    <span class="Li">&quot;make</span> <span class="Li">test&quot;</span>, set
    <span class="Li">&quot;TEST_JOBS&quot;</span> in your environment to the
    number of tests to run in parallel, and run <span class="Li">&quot;make
    test_harness&quot;</span>. On a Bourne-like shell, this can be done as</p>
<p class="Pp"></p>
<pre>    TEST_JOBS=3 make test_harness  # Run 3 tests in parallel
</pre>
<p class="Pp">An environment variable is used, rather than parallel make itself,
    because TAP::Harness needs to be able to schedule individual non-conflicting
    test scripts itself, and there is no standard interface to
    <span class="Li">&quot;make&quot;</span> utilities to interact with their
    job schedulers.</p>
<p class="Pp">Tests are normally run in a logical order, with the sanity tests
    first, then the main tests of the Perl core functionality, then the tests
    for the non-core modules. On many-core systems, this may not use the
    hardware as effectively as possible. By also specifying</p>
<p class="Pp"></p>
<pre> TEST_JOBS=19 PERL_TEST_HARNESS_ASAP=1 make -j19 test_harness
</pre>
<p class="Pp">you signal that you want the tests to finish in wall-clock time as
    short as possible. After the sanity tests are completed, this causes the
    remaining ones to be packed into the available cores as tightly as we know
    how. This has its greatest effect on slower, many-core systems. Throughput
    was sped up by 20% on an outmoded 24-core system; less on more recent faster
    ones with fewer cores.</p>
<p class="Pp">Note that the command line above added a
    <span class="Li">&quot;-j&quot;</span> parameter to make, so as to cause
    parallel compilation. This may or may not work on your platform.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Running_tests_by_hand"><a class="permalink" href="#Running_tests_by_hand">Running
  tests by hand</a></h2>
<p class="Pp">You can run part of the test suite by hand by using one of the
    following commands from the <i>t/</i> directory:</p>
<p class="Pp"></p>
<pre>    ./perl -I../lib TEST list-of-.t-files
</pre>
<p class="Pp">or</p>
<p class="Pp"></p>
<pre>    ./perl -I../lib harness list-of-.t-files
</pre>
<p class="Pp">(If you don't specify test scripts, the whole test suite will be
    run.)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Using_"><a class="permalink" href="#Using_">Using
  <i>t/harness</i> for testing</a></h2>
<p class="Pp">If you use <span class="Li">&quot;harness&quot;</span> for
    testing, you have several command line options available to you. The
    arguments are as follows, and are in the order that they must appear if used
    together.</p>
<p class="Pp"></p>
<pre>    harness -v -torture -re=pattern LIST OF FILES TO TEST
    harness -v -torture -re LIST OF PATTERNS TO MATCH
</pre>
<p class="Pp">If <span class="Li">&quot;LIST OF FILES TO TEST&quot;</span> is
    omitted, the file list is obtained from the manifest. The file list may
    include shell wildcards which will be expanded out.</p>
<ul class="Bl-bullet">
  <li>-v
    <p class="Pp">Run the tests under verbose mode so you can see what tests
        were run, and debug output.</p>
  </li>
  <li>-torture
    <p class="Pp">Run the torture tests as well as the normal set.</p>
  </li>
  <li>-re=PATTERN
    <p class="Pp">Filter the file list so that all the test files run match
        PATTERN. Note that this form is distinct from the <b>-re LIST OF
        PATTERNS</b> form below in that it allows the file list to be provided
        as well.</p>
  </li>
  <li>-re LIST OF PATTERNS
    <p class="Pp">Filter the file list so that all the test files run match
        /(LIST|OF|PATTERNS)/. Note that with this form the patterns are joined
        by '|' and you cannot supply a list of files, instead the test files are
        obtained from the MANIFEST.</p>
  </li>
</ul>
<p class="Pp">You can run an individual test by a command similar to</p>
<p class="Pp"></p>
<pre>    ./perl -I../lib path/to/foo.t
</pre>
<p class="Pp">except that the harnesses set up some environment variables that
    may affect the execution of the test:</p>
<ul class="Bl-bullet">
  <li>PERL_CORE=1
    <p class="Pp">indicates that we're running this test as part of the perl
        core test suite. This is useful for modules that have a dual life on
        CPAN.</p>
  </li>
  <li>PERL_DESTRUCT_LEVEL=2
    <p class="Pp">is set to 2 if it isn't set already (see
        &quot;PERL_DESTRUCT_LEVEL&quot; in perlhacktips).</p>
  </li>
  <li>PERL
    <p class="Pp">(used only by <i>t/TEST</i>) if set, overrides the path to the
        perl executable that should be used to run the tests (the default being
        <i>./perl</i>).</p>
  </li>
  <li>PERL_SKIP_TTY_TEST
    <p class="Pp">if set, tells to skip the tests that need a terminal. It's
        actually set automatically by the Makefile, but can also be forced
        artificially by running 'make test_notty'.</p>
  </li>
</ul>
<p class="Pp"><i>Other environment variables that may influence tests</i></p>
<ul class="Bl-bullet">
  <li>PERL_TEST_Net_Ping
    <p class="Pp">Setting this variable runs all the Net::Ping modules tests,
        otherwise some tests that interact with the outside world are skipped.
        See perl58delta.</p>
  </li>
  <li>PERL_TEST_NOVREXX
    <p class="Pp">Setting this variable skips the vrexx.t tests for
      OS2::REXX.</p>
  </li>
  <li>PERL_TEST_NUMCONVERTS
    <p class="Pp">This sets a variable in op/numconvert.t.</p>
  </li>
  <li>PERL_TEST_MEMORY
    <p class="Pp">Setting this variable includes the tests in <i>t/bigmem/</i>.
        This should be set to the number of gigabytes of memory available for
        testing, eg. <span class="Li">&quot;PERL_TEST_MEMORY=4&quot;</span>
        indicates that tests that require 4GiB of available memory can be run
        safely.</p>
  </li>
</ul>
<p class="Pp">See also the documentation for the Test and Test::Harness modules,
    for more environment variables that affect testing.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Performance_testing"><a class="permalink" href="#Performance_testing">Performance
  testing</a></h2>
<p class="Pp">The file <i>t/perf/benchmarks</i> contains snippets of perl code
    which are intended to be benchmarked across a range of perls by the
    <i>Porting/bench.pl</i> tool. If you fix or enhance a performance issue, you
    may want to add a representative code sample to the file, then run
    <i>bench.pl</i> against the previous and current perls to see what
    difference it has made, and whether anything else has slowed down as a
    consequence.</p>
<p class="Pp">The file <i>t/perf/opcount.t</i> is designed to test whether a
    particular code snippet has been compiled into an optree containing
    specified numbers of particular op types. This is good for testing whether
    optimisations which alter ops, such as converting an
    <span class="Li">&quot;aelem&quot;</span> op into an
    <span class="Li">&quot;aelemfast&quot;</span> op, are really doing that.</p>
<p class="Pp">The files <i>t/perf/speed.t</i> and <i>t/re/speed.t</i> are
    designed to test things that run thousands of times slower if a particular
    optimisation is broken (for example, the utf8 length cache on long utf8
    strings). Add a test that will take a fraction of a second normally, and
    minutes otherwise, causing the test file to time out on failure.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Building_perl_at_older_commits"><a class="permalink" href="#Building_perl_at_older_commits">Building
  perl at older commits</a></h2>
<p class="Pp">In the course of hacking on the Perl core distribution, you may
    have occasion to configure, build and test perl at an old commit. Sometimes
    <span class="Li">&quot;make&quot;</span> will fail during this process. If
    that happens, you may be able to salvage the situation by using the
    Devel::PatchPerl library from CPAN (not included in the core) to bring the
    source code at that commit to a buildable state.</p>
<p class="Pp">Here's a real world example, taken from work done to resolve perl
    #10118 &lt;https://github.com/Perl/perl5/issues/10118&gt;. Use of
    <i>Porting/bisect.pl</i> had identified commit
    <span class="Li">&quot;ba77e4cc9d1ceebf472c9c5c18b2377ee47062e6&quot;</span>
    as the commit in which a bug was corrected. To confirm, a P5P developer
    wanted to configure and build perl at commit
    <span class="Li">&quot;ba77e4c^&quot;</span> (presumably &quot;bad&quot;)
    and then at <span class="Li">&quot;ba77e4c&quot;</span> (presumably
    &quot;good&quot;). Normal configuration and build was attempted:</p>
<p class="Pp"></p>
<pre>    $ sh ./Configure -des -Dusedevel
    $ make test_prep
</pre>
<p class="Pp"><span class="Li">&quot;make&quot;</span>, however, failed with
    output (excerpted) like this:</p>
<p class="Pp"></p>
<pre>    cc -fstack-protector -L/usr/local/lib -o miniperl \
      gv.o toke.o perly.o pad.o regcomp.o dump.o util.o \
      mg.o reentr.o mro.o hv.o av.o run.o pp_hot.o sv.o \
      pp.o scope.o pp_ctl.o pp_sys.o doop.o doio.o regexec.o \
      utf8.o taint.o deb.o universal.o globals.o perlio.o \
      numeric.o mathoms.o locale.o pp_pack.o pp_sort.o  \
      miniperlmain.o opmini.o perlmini.o
    pp.o: In function `Perl_pp_pow':
    pp.c:(.text+0x2db9): undefined reference to `pow'
    ...
    collect2: error: ld returned 1 exit status
    makefile:348: recipe for target 'miniperl' failed
    make: *** [miniperl] Error 1
</pre>
<p class="Pp">Another P5P contributor recommended installation and use of
    Devel::PatchPerl for this situation, first to determine the version of perl
    at the commit in question, then to patch the source code at that point to
    facilitate a build.</p>
<p class="Pp"></p>
<pre>    $ perl -MDevel::PatchPerl -e \
        'print Devel::PatchPerl-&gt;determine_version(&quot;/path/to/sourcecode&quot;), &quot;\n&quot;;'
    5.11.1
    $ perl -MDevel::PatchPerl -e \
        'Devel::PatchPerl-&gt;patch_source(&quot;5.11.1&quot;, &quot;/path/to/sourcecode&quot;);'
</pre>
<p class="Pp">Once the source was patched,
    <span class="Li">&quot;./Configure&quot;</span> and
    <span class="Li">&quot;make test_prep&quot;</span> were called and completed
    successfully, enabling confirmation of the findings in RT #72414.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="MORE_READING_FOR_GUTS_HACKERS"><a class="permalink" href="#MORE_READING_FOR_GUTS_HACKERS">MORE
  READING FOR GUTS HACKERS</a></h1>
<p class="Pp">To hack on the Perl guts, you'll need to read the following
    things:</p>
<ul class="Bl-bullet">
  <li>perlsource
    <p class="Pp">An overview of the Perl source tree. This will help you find
        the files you're looking for.</p>
  </li>
  <li>perlinterp
    <p class="Pp">An overview of the Perl interpreter source code and some
        details on how Perl does what it does.</p>
  </li>
  <li>perlhacktut
    <p class="Pp">This document walks through the creation of a small patch to
        Perl's C code. If you're just getting started with Perl core hacking,
        this will help you understand how it works.</p>
  </li>
  <li>perlhacktips
    <p class="Pp">More details on hacking the Perl core. This document focuses
        on lower level details such as how to write tests, compilation issues,
        portability, debugging, etc.</p>
    <p class="Pp">If you plan on doing serious C hacking, make sure to read
        this.</p>
  </li>
  <li>perlguts
    <p class="Pp">This is of paramount importance, since it's the documentation
        of what goes where in the Perl source. Read it over a couple of times
        and it might start to make sense - don't worry if it doesn't yet,
        because the best way to study it is to read it in conjunction with
        poking at Perl source, and we'll do that later on.</p>
    <p class="Pp">Gisle Aas's &quot;illustrated perlguts&quot;, also known as
        <i>illguts</i>, has very helpful pictures:</p>
    <p class="Pp">&lt;https://metacpan.org/release/RURBAN/illguts-0.49&gt;</p>
  </li>
  <li>perlxstut and perlxs
    <p class="Pp">A working knowledge of XSUB programming is incredibly useful
        for core hacking; XSUBs use techniques drawn from the PP code, the
        portion of the guts that actually executes a Perl program. It's a lot
        gentler to learn those techniques from simple examples and explanation
        than from the core itself.</p>
  </li>
  <li>perlapi
    <p class="Pp">The documentation for the Perl API explains what some of the
        internal functions do, as well as the many macros used in the
      source.</p>
  </li>
  <li><i>Porting/pumpkin.pod</i>
    <p class="Pp">This is a collection of words of wisdom for a Perl porter;
        some of it is only useful to the pumpkin holders, but most of it applies
        to anyone wanting to go about Perl development.</p>
  </li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="CPAN_TESTERS_AND_PERL_SMOKERS"><a class="permalink" href="#CPAN_TESTERS_AND_PERL_SMOKERS">CPAN
  TESTERS AND PERL SMOKERS</a></h1>
<p class="Pp">The CPAN testers ( &lt;http://cpantesters.org/&gt; ) are a group
    of volunteers who test CPAN modules on a variety of platforms.</p>
<p class="Pp">Perl Smokers (
    &lt;https://www.nntp.perl.org/group/perl.daily-build/&gt; and
    &lt;https://www.nntp.perl.org/group/perl.daily-build.reports/&gt; )
    automatically test Perl source releases on platforms with various
    configurations.</p>
<p class="Pp">Both efforts welcome volunteers. In order to get involved in smoke
    testing of the perl itself visit
    &lt;https://metacpan.org/release/Test-Smoke&gt;. In order to start smoke
    testing CPAN modules visit
    &lt;https://metacpan.org/release/CPANPLUS-YACSmoke&gt; or
    &lt;https://metacpan.org/release/minismokebox&gt; or
    &lt;https://metacpan.org/release/CPAN-Reporter&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="WHAT_NEXT?"><a class="permalink" href="#WHAT_NEXT?">WHAT
  NEXT?</a></h1>
<p class="Pp">If you've read all the documentation in the document and the ones
    listed above, you're more than ready to hack on Perl.</p>
<p class="Pp">Here's some more recommendations</p>
<ul class="Bl-bullet">
  <li>Subscribe to perl5-porters, follow the patches and try and understand
      them; don't be afraid to ask if there's a portion you're not clear on -
      who knows, you may unearth a bug in the patch...</li>
  <li>Do read the README associated with your operating system, e.g. README.aix
      on the IBM AIX OS. Don't hesitate to supply patches to that README if you
      find anything missing or changed over a new OS release.</li>
  <li>Find an area of Perl that seems interesting to you, and see if you can
      work out how it works. Scan through the source, and step over it in the
      debugger. Play, poke, investigate, fiddle! You'll probably get to
      understand not just your chosen area but a much wider range of
      <i>perl</i>'s activity as well, and probably sooner than you'd think.</li>
</ul>
<section class="Ss">
<h2 class="Ss" id="_The_Road_goes_ever_on_and_on,_down_from_the_door_where_it_began._"><a class="permalink" href="#_The_Road_goes_ever_on_and_on,_down_from_the_door_where_it_began._">&quot;The
  Road goes ever on and on, down from the door where it began.&quot;</a></h2>
<p class="Pp">If you can do these things, you've started on the long road to
    Perl porting. Thanks for wanting to help make Perl better - and happy
    hacking!</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Metaphoric_Quotations"><a class="permalink" href="#Metaphoric_Quotations">Metaphoric
  Quotations</a></h2>
<p class="Pp">If you recognized the quote about the Road above, you're in
  luck.</p>
<p class="Pp">Most software projects begin each file with a literal description
    of each file's purpose. Perl instead begins each with a literary allusion to
    that file's purpose.</p>
<p class="Pp">Like chapters in many books, all top-level Perl source files
    (along with a few others here and there) begin with an epigrammatic
    inscription that alludes, indirectly and metaphorically, to the material
    you're about to read.</p>
<p class="Pp">Quotations are taken from writings of J.R.R. Tolkien pertaining to
    his Legendarium, almost always from <i>The Lord of the Rings</i>. Chapters
    and page numbers are given using the following editions:</p>
<ul class="Bl-bullet">
  <li><i>The Hobbit</i>, by J.R.R. Tolkien. The hardcover, 70th-anniversary
      edition of 2007 was used, published in the UK by Harper Collins Publishers
      and in the US by the Houghton Mifflin Company.</li>
  <li><i>The Lord of the Rings</i>, by J.R.R. Tolkien. The hardcover,
      50th-anniversary edition of 2004 was used, published in the UK by Harper
      Collins Publishers and in the US by the Houghton Mifflin Company.</li>
  <li><i>The Lays of Beleriand</i>, by J.R.R. Tolkien and published posthumously
      by his son and literary executor, C.J.R. Tolkien, being the 3rd of the 12
      volumes in Christopher's mammoth <i>History of Middle Earth</i>. Page
      numbers derive from the hardcover edition, first published in 1983 by
      George Allen &amp; Unwin; no page numbers changed for the special 3-volume
      omnibus edition of 2002 or the various trade-paper editions, all again now
      by Harper Collins or Houghton Mifflin.</li>
</ul>
<p class="Pp">Other JRRT books fair game for quotes would thus include
    <i>The</i> <i>Adventures of Tom Bombadil</i>, <i>The Silmarillion</i>,
    <i>Unfinished Tales</i>, and <i>The Tale of the Children of Hurin</i>, all
    but the first posthumously assembled by CJRT. But <i>The Lord of the
    Rings</i> itself is perfectly fine and probably best to quote from, provided
    you can find a suitable quote there.</p>
<p class="Pp">So if you were to supply a new, complete, top-level source file to
    add to Perl, you should conform to this peculiar practice by yourself
    selecting an appropriate quotation from Tolkien, retaining the original
    spelling and punctuation and using the same format the rest of the quotes
    are in. Indirect and oblique is just fine; remember, it's a metaphor, so
    being meta is, after all, what it's for.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">This document was originally written by Nathan Torkington, and is
    maintained by the perl5-porters mailing list.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-02-19</td>
    <td class="foot-os">perl v5.34.1</td>
  </tr>
</table>
</body>
</html>
