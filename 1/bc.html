<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   bc.1 - the *roff document processor source for the bc manual
  
   This file is part of GNU bc.
   Copyright (C) 1991-1994, 1997, 2000 Free Software Foundation, Inc.
  
   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License , or
   (at your option) any later version.
  
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
  
   You should have received a copy of the GNU General Public License
   along with this program; see the file COPYING.  If not, write to:
     The Free Software Foundation, Inc.
     59 Temple Place, Suite 330
     Boston, MA 02111 USA
  
   You may contact the author by:
   e-mail: philnelson@acm.org
   us-mail: Philip A. Nelson
   Computer Science Department, 9062
   Western Washington University
   Bellingham, WA 98226-9062
  
   "Command Manual" v1.06 "Sept 12, 2000"
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>bc(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">bc(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">bc(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">bc - An arbitrary precision calculator language</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNTAX"><a class="permalink" href="#SYNTAX">SYNTAX</a></h1>
<p class="Pp"><b>bc</b> [ <b>-hlwsqv</b> ] [long-options] [ <i> file ...</i>
  ]</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">This man page documents GNU bc version 1.06.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>bc</b> is a language that supports arbitrary precision numbers
    with interactive execution of statements. There are some similarities in the
    syntax to the C programming language. A standard math library is available
    by command line option. If requested, the math library is defined before
    processing any files. <b>bc</b> starts by processing code from all the files
    listed on the command line in the order listed. After all files have been
    processed, <b>bc</b> reads from the standard input. All code is executed as
    it is read. (If a file contains a command to halt the processor, <b>bc</b>
    will never read from the standard input.)</p>
<p class="Pp">This version of <b>bc</b> contains several extensions beyond
    traditional <b>bc</b> implementations and the POSIX draft standard. Command
    line options can cause these extensions to print a warning or to be
    rejected. This document describes the language accepted by this processor.
    Extensions will be identified as such.</p>
<section class="Ss">
<h2 class="Ss" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h2>
<dl class="Bl-tag">
  <dt id="h,"><a class="permalink" href="#h,">-h, --help</a></dt>
  <dd>Print the usage and exit.</dd>
  <dt id="i,"><a class="permalink" href="#i,">-i, --interactive</a></dt>
  <dd>Force interactive mode.</dd>
  <dt id="l,"><a class="permalink" href="#l,">-l, --mathlib</a></dt>
  <dd>Define the standard math library.</dd>
  <dt id="w,"><a class="permalink" href="#w,">-w, --warn</a></dt>
  <dd>Give warnings for extensions to POSIX <b>bc</b>.</dd>
  <dt id="s,"><a class="permalink" href="#s,">-s, --standard</a></dt>
  <dd>Process exactly the POSIX <b>bc</b> language.</dd>
  <dt id="q,"><a class="permalink" href="#q,">-q, --quiet</a></dt>
  <dd>Do not print the normal GNU bc welcome.</dd>
  <dt id="v,"><a class="permalink" href="#v,">-v, --version</a></dt>
  <dd>Print the version number and copyright and quit.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="NUMBERS"><a class="permalink" href="#NUMBERS">NUMBERS</a></h2>
<p class="Pp">The most basic element in <b>bc</b> is the number. Numbers are
    arbitrary precision numbers. This precision is both in the integer part and
    the fractional part. All numbers are represented internally in decimal and
    all computation is done in decimal. (This version truncates results from
    divide and multiply operations.) There are two attributes of numbers, the
    length and the scale. The length is the total number of significant decimal
    digits in a number and the scale is the total number of decimal digits after
    the decimal point. For example:</p>
<div class="Bd-indent">
<pre>
 .000001 has a length of 6 and scale of 6.
 1935.000 has a length of 7 and a scale of 3.
</pre>
</div>
<pre>
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="VARIABLES"><a class="permalink" href="#VARIABLES">VARIABLES</a></h2>
<p class="Pp">Numbers are stored in two types of variables, simple variables and
    arrays. Both simple variables and array variables are named. Names begin
    with a letter followed by any number of letters, digits and underscores. All
    letters must be lower case. (Full alpha-numeric names are an extension. In
    POSIX <b>bc</b> all names are a single lower case letter.) The type of
    variable is clear by the context because all array variable names will be
    followed by brackets ([]).</p>
<p class="Pp">There are four special variables, <b>scale, ibase, obase,</b> and
    <b>last</b>. <b>scale</b> defines how some operations use digits after the
    decimal point. The default value of <b>scale</b> is 0. <b>ibase</b> and
    <b>obase</b> define the conversion base for input and output numbers. The
    default for both input and output is base 10. <b>last</b> (an extension) is
    a variable that has the value of the last printed number. These will be
    discussed in further detail where appropriate. All of these variables may
    have values assigned to them as well as used in expressions.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="COMMENTS"><a class="permalink" href="#COMMENTS">COMMENTS</a></h2>
<p class="Pp">Comments in <b>bc</b> start with the characters <b>/*</b> and end
    with the characters <b>*/</b>. Comments may start anywhere and appear as a
    single space in the input. (This causes comments to delimit other input
    items. For example, a comment can not be found in the middle of a variable
    name.) Comments include any newlines (end of line) between the start and the
    end of the comment.</p>
<p class="Pp">To support the use of scripts for <b>bc</b>, a single line comment
    has been added as an extension. A single line comment starts at a <b>#</b>
    character and continues to the next end of the line. The end of line
    character is not part of the comment and is processed normally.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="EXPRESSIONS"><a class="permalink" href="#EXPRESSIONS">EXPRESSIONS</a></h2>
<p class="Pp">The numbers are manipulated by expressions and statements. Since
    the language was designed to be interactive, statements and expressions are
    executed as soon as possible. There is no &quot;main&quot; program. Instead,
    code is executed as it is encountered. (Functions, discussed in detail
    later, are defined when encountered.)</p>
<p class="Pp">A simple expression is just a constant. <b>bc</b> converts
    constants into internal decimal numbers using the current input base,
    specified by the variable <b>ibase</b>. (There is an exception in
    functions.) The legal values of <b>ibase</b> are 2 through 16. Assigning a
    value outside this range to <b>ibase</b> will result in a value of 2 or 16.
    Input numbers may contain the characters 0-9 and A-F. (Note: They must be
    capitals. Lower case letters are variable names.) Single digit numbers
    always have the value of the digit regardless of the value of <b>ibase</b>.
    (i.e. A = 10.) For multi-digit numbers, <b>bc</b> changes all input digits
    greater or equal to ibase to the value of <b>ibase</b>-1. This makes the
    number <b>FFF</b> always be the largest 3 digit number of the input
  base.</p>
<p class="Pp">Full expressions are similar to many other high level languages.
    Since there is only one kind of number, there are no rules for mixing types.
    Instead, there are rules on the scale of expressions. Every expression has a
    scale. This is derived from the scale of original numbers, the operation
    performed and in many cases, the value of the variable <b>scale</b>. Legal
    values of the variable <b>scale</b> are 0 to the maximum number
    representable by a C integer.</p>
<p class="Pp">In the following descriptions of legal expressions,
    &quot;expr&quot; refers to a complete expression and &quot;var&quot; refers
    to a simple or an array variable. A simple variable is just a</p>
<div class="Bd-indent"><i>name</i></div>
and an array variable is specified as
<div class="Bd-indent"><i>name</i>[<i>expr</i>]</div>
Unless specifically mentioned the scale of the result is the maximum scale of
  the expressions involved.
<dl class="Bl-tag">
  <dt id="expr"><a class="permalink" href="#expr">- expr</a></dt>
  <dd>The result is the negation of the expression.</dd>
  <dt>++ var</dt>
  <dd>The variable is incremented by one and the new value is the result of the
      expression.</dd>
  <dt id="var"><a class="permalink" href="#var">-- var</a></dt>
  <dd>The variable is decremented by one and the new value is the result of the
      expression.</dd>
  <dt id="var~2"><a class="permalink" href="#var~2">var ++</a></dt>
  <dd>
    <br/>
     The result of the expression is the value of the variable and then the
      variable is incremented by one.</dd>
  <dt id="var~3"><a class="permalink" href="#var~3">var --</a></dt>
  <dd>The result of the expression is the value of the variable and then the
      variable is decremented by one.</dd>
  <dt id="expr~2"><a class="permalink" href="#expr~2">expr + expr</a></dt>
  <dd>The result of the expression is the sum of the two expressions.</dd>
  <dt id="expr~3"><a class="permalink" href="#expr~3">expr - expr</a></dt>
  <dd>The result of the expression is the difference of the two
    expressions.</dd>
  <dt id="expr~4"><a class="permalink" href="#expr~4">expr * expr</a></dt>
  <dd>The result of the expression is the product of the two expressions.</dd>
  <dt id="expr~5"><a class="permalink" href="#expr~5">expr / expr</a></dt>
  <dd>The result of the expression is the quotient of the two expressions. The
      scale of the result is the value of the variable <b>scale</b>.</dd>
  <dt id="expr~6"><a class="permalink" href="#expr~6">expr % expr</a></dt>
  <dd>The result of the expression is the &quot;remainder&quot; and it is
      computed in the following way. To compute a%b, first a/b is computed to
      <b>scale</b> digits. That result is used to compute a-(a/b)*b to the scale
      of the maximum of <b>scale</b>+scale(b) and scale(a). If <b>scale</b> is
      set to zero and both expressions are integers this expression is the
      integer remainder function.</dd>
  <dt id="expr~7"><a class="permalink" href="#expr~7">expr ^ expr</a></dt>
  <dd>The result of the expression is the value of the first raised to the
      second. The second expression must be an integer. (If the second
      expression is not an integer, a warning is generated and the expression is
      truncated to get an integer value.) The scale of the result is
      <b>scale</b> if the exponent is negative. If the exponent is positive the
      scale of the result is the minimum of the scale of the first expression
      times the value of the exponent and the maximum of <b>scale</b> and the
      scale of the first expression. (e.g. scale(a^b) = min(scale(a)*b, max(
      <b>scale,</b> scale(a))).) It should be noted that expr^0 will always
      return the value of 1.</dd>
  <dt>( expr )</dt>
  <dd>This alters the standard precedence to force the evaluation of the
      expression.</dd>
  <dt id="var~4"><a class="permalink" href="#var~4">var = expr</a></dt>
  <dd>The variable is assigned the value of the expression.</dd>
  <dt id="var~5"><a class="permalink" href="#var~5">var &lt;op&gt;=
    expr</a></dt>
  <dd>This is equivalent to &quot;var = var &lt;op&gt; expr&quot; with the
      exception that the &quot;var&quot; part is evaluated only once. This can
      make a difference if &quot;var&quot; is an array.</dd>
</dl>
<p class="Pp">
  <br/>
   Relational expressions are a special kind of expression that always evaluate
    to 0 or 1, 0 if the relation is false and 1 if the relation is true. These
    may appear in any legal expression. (POSIX bc requires that relational
    expressions are used only in if, while, and for statements and that only one
    relational test may be done in them.) The relational operators are</p>
<dl class="Bl-tag">
  <dt id="expr1"><a class="permalink" href="#expr1">expr1 &lt; expr2</a></dt>
  <dd>The result is 1 if expr1 is strictly less than expr2.</dd>
  <dt id="expr1~2"><a class="permalink" href="#expr1~2">expr1 &lt;=
    expr2</a></dt>
  <dd>The result is 1 if expr1 is less than or equal to expr2.</dd>
  <dt id="expr1~3"><a class="permalink" href="#expr1~3">expr1 &gt;
    expr2</a></dt>
  <dd>The result is 1 if expr1 is strictly greater than expr2.</dd>
  <dt id="expr1~4"><a class="permalink" href="#expr1~4">expr1 &gt;=
    expr2</a></dt>
  <dd>The result is 1 if expr1 is greater than or equal to expr2.</dd>
  <dt id="expr1~5"><a class="permalink" href="#expr1~5">expr1 == expr2</a></dt>
  <dd>The result is 1 if expr1 is equal to expr2.</dd>
  <dt id="expr1~6"><a class="permalink" href="#expr1~6">expr1 != expr2</a></dt>
  <dd>The result is 1 if expr1 is not equal to expr2.</dd>
</dl>
<p class="Pp">Boolean operations are also legal. (POSIX <b>bc</b> does NOT have
    boolean operations). The result of all boolean operations are 0 and 1 (for
    false and true) as in relational expressions. The boolean operators are:</p>
<dl class="Bl-tag">
  <dt>!expr</dt>
  <dd>The result is 1 if expr is 0.</dd>
  <dt id="expr~8"><a class="permalink" href="#expr~8">expr &amp;&amp;
    expr</a></dt>
  <dd>The result is 1 if both expressions are non-zero.</dd>
  <dt id="expr~9"><a class="permalink" href="#expr~9">expr || expr</a></dt>
  <dd>The result is 1 if either expression is non-zero.</dd>
</dl>
<p class="Pp">The expression precedence is as follows: (lowest to highest)</p>
<div class="Bd-indent">
<pre>
|| operator, left associative
&amp;&amp; operator, left associative
! operator, nonassociative
Relational operators, left associative
Assignment operator, right associative
+ and - operators, left associative
*, / and % operators, left associative
^ operator, right associative
unary - operator, nonassociative
++ and -- operators, nonassociative
</pre>
</div>
<pre>
</pre>
<p class="Pp">This precedence was chosen so that POSIX compliant <b>bc</b>
    programs will run correctly. This will cause the use of the relational and
    logical operators to have some unusual behavior when used with assignment
    expressions. Consider the expression:</p>
<div class="Bd-indent">a = 3 &lt; 5</div>
<p class="Pp">Most C programmers would assume this would assign the result of
    &quot;3 &lt; 5&quot; (the value 1) to the variable &quot;a&quot;. What this
    does in <b>bc</b> is assign the value 3 to the variable &quot;a&quot; and
    then compare 3 to 5. It is best to use parenthesis when using relational and
    logical operators with the assignment operators.</p>
<p class="Pp">There are a few more special expressions that are provided in
    <b>bc</b>. These have to do with user defined functions and standard
    functions. They all appear as
    &quot;<i>name</i><b>(</b><i>parameters</i><b>)</b>&quot;. See the section on
    functions for user defined functions. The standard functions are:</p>
<dl class="Bl-tag">
  <dt id="length"><a class="permalink" href="#length">length ( expression
    )</a></dt>
  <dd>The value of the length function is the number of significant digits in
      the expression.</dd>
  <dt id="read"><a class="permalink" href="#read">read ( )</a></dt>
  <dd>The read function (an extension) will read a number from the standard
      input, regardless of where the function occurs. Beware, this can cause
      problems with the mixing of data and program in the standard input. The
      best use for this function is in a previously written program that needs
      input from the user, but never allows program code to be input from the
      user. The value of the read function is the number read from the standard
      input using the current value of the variable <b>ibase</b> for the
      conversion base.</dd>
  <dt id="scale"><a class="permalink" href="#scale">scale ( expression
    )</a></dt>
  <dd>The value of the scale function is the number of digits after the decimal
      point in the expression.</dd>
  <dt id="sqrt"><a class="permalink" href="#sqrt">sqrt ( expression )</a></dt>
  <dd>The value of the sqrt function is the square root of the expression. If
      the expression is negative, a run time error is generated.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="STATEMENTS"><a class="permalink" href="#STATEMENTS">STATEMENTS</a></h2>
<p class="Pp">Statements (as in most algebraic languages) provide the sequencing
    of expression evaluation. In <b>bc</b> statements are executed &quot;as soon
    as possible.&quot; Execution happens when a newline in encountered and there
    is one or more complete statements. Due to this immediate execution,
    newlines are very important in <b>bc</b>. In fact, both a semicolon and a
    newline are used as statement separators. An improperly placed newline will
    cause a syntax error. Because newlines are statement separators, it is
    possible to hide a newline by using the backslash character. The sequence
    &quot;\&lt;nl&gt;&quot;, where &lt;nl&gt; is the newline appears to
    <b>bc</b> as whitespace instead of a newline. A statement list is a series
    of statements separated by semicolons and newlines. The following is a list
    of <b>bc</b> statements and what they do: (Things enclosed in brackets ([])
    are optional parts of the statement.)</p>
<dl class="Bl-tag">
  <dt id="expression"><a class="permalink" href="#expression">expression</a></dt>
  <dd>This statement does one of two things. If the expression starts with
      &quot;&lt;variable&gt; &lt;assignment&gt; ...&quot;, it is considered to
      be an assignment statement. If the expression is not an assignment
      statement, the expression is evaluated and printed to the output. After
      the number is printed, a newline is printed. For example, &quot;a=1&quot;
      is an assignment statement and &quot;(a=1)&quot; is an expression that has
      an embedded assignment. All numbers that are printed are printed in the
      base specified by the variable <b>obase</b>. The legal values for <b></b>
      <b>obase</b> are 2 through BC_BASE_MAX. (See the section LIMITS.) For
      bases 2 through 16, the usual method of writing numbers is used. For bases
      greater than 16, <b>bc</b> uses a multi-character digit method of printing
      the numbers where each higher base digit is printed as a base 10 number.
      The multi-character digits are separated by spaces. Each digit contains
      the number of characters required to represent the base ten value of
      &quot;obase-1&quot;. Since numbers are of arbitrary precision, some
      numbers may not be printable on a single output line. These long numbers
      will be split across lines using the &quot;\&quot; as the last character
      on a line. The maximum number of characters printed per line is 70. Due to
      the interactive nature of <b>bc</b>, printing a number causes the side
      effect of assigning the printed value to the special variable <b>last</b>.
      This allows the user to recover the last value printed without having to
      retype the expression that printed the number. Assigning to <b>last</b> is
      legal and will overwrite the last printed value with the assigned value.
      The newly assigned value will remain until the next number is printed or
      another value is assigned to <b>last</b>. (Some installations may allow
      the use of a single period (.) which is not part of a number as a short
      hand notation for for <b>last</b>.)</dd>
  <dt id="string"><a class="permalink" href="#string">string</a></dt>
  <dd>The string is printed to the output. Strings start with a double quote
      character and contain all characters until the next double quote
      character. All characters are take literally, including any newline. No
      newline character is printed after the string.</dd>
  <dt id="print"><a class="permalink" href="#print"><b>print</b> list</a></dt>
  <dd>The print statement (an extension) provides another method of output. The
      &quot;list&quot; is a list of strings and expressions separated by commas.
      Each string or expression is printed in the order of the list. No
      terminating newline is printed. Expressions are evaluated and their value
      is printed and assigned to the variable <b>last</b>. Strings in the print
      statement are printed to the output and may contain special characters.
      Special characters start with the backslash character (\). The special
      characters recognized by <b>bc</b> are &quot;a&quot; (alert or bell),
      &quot;b&quot; (backspace), &quot;f&quot; (form feed), &quot;n&quot;
      (newline), &quot;r&quot; (carriage return), &quot;q&quot; (double quote),
      &quot;t&quot; (tab), and &quot;\&quot; (backslash). Any other character
      following the backslash will be ignored.</dd>
  <dt>{ statement_list }</dt>
  <dd>This is the compound statement. It allows multiple statements to be
      grouped together for execution.</dd>
  <dt id="if"><a class="permalink" href="#if"><b>if</b> ( expression )
    statement1 [<b>else</b> statement2]</a></dt>
  <dd>The if statement evaluates the expression and executes statement1 or
      statement2 depending on the value of the expression. If the expression is
      non-zero, statement1 is executed. If statement2 is present and the value
      of the expression is 0, then statement2 is executed. (The else clause is
      an extension.)</dd>
  <dt id="while"><a class="permalink" href="#while"><b>while</b> ( expression )
    statement</a></dt>
  <dd>The while statement will execute the statement while the expression is
      non-zero. It evaluates the expression before each execution of the
      statement. Termination of the loop is caused by a zero expression value or
      the execution of a break statement.</dd>
  <dt id="for"><a class="permalink" href="#for"><b>for</b> ( [expression1] ;
    [expression2] ; [expression3] ) statement</a></dt>
  <dd>The for statement controls repeated execution of the statement.
      Expression1 is evaluated before the loop. Expression2 is evaluated before
      each execution of the statement. If it is non-zero, the statement is
      evaluated. If it is zero, the loop is terminated. After each execution of
      the statement, expression3 is evaluated before the reevaluation of
      expression2. If expression1 or expression3 are missing, nothing is
      evaluated at the point they would be evaluated. If expression2 is missing,
      it is the same as substituting the value 1 for expression2. (The optional
      expressions are an extension. POSIX <b>bc</b> requires all three
      expressions.) The following is equivalent code for the for statement:</dd>
</dl>
<div class="Bd-indent">
<pre>
expression1;
while (expression2) {
   statement;
   expression3;
}
</pre>
</div>
<pre>
</pre>
<dl class="Bl-tag">
  <dt id="break"><a class="permalink" href="#break"><b>break</b></a></dt>
  <dd>This statement causes a forced exit of the most recent enclosing while
      statement or for statement.</dd>
  <dt id="continue"><a class="permalink" href="#continue"><b>continue</b></a></dt>
  <dd>The continue statement (an extension) causes the most recent enclosing for
      statement to start the next iteration.</dd>
  <dt id="halt"><a class="permalink" href="#halt"><b>halt</b></a></dt>
  <dd>The halt statement (an extension) is an executed statement that causes the
      <b>bc</b> processor to quit only when it is executed. For example,
      &quot;if (0 == 1) halt&quot; will not cause <b>bc</b> to terminate because
      the halt is not executed.</dd>
  <dt id="return"><a class="permalink" href="#return"><b>return</b></a></dt>
  <dd>Return the value 0 from a function. (See the section on functions.)</dd>
  <dt id="return~2"><a class="permalink" href="#return~2"><b>return</b> (
    expression )</a></dt>
  <dd>Return the value of the expression from a function. (See the section on
      functions.) As an extension, the parenthesis are not required.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="PSEUDO_STATEMENTS"><a class="permalink" href="#PSEUDO_STATEMENTS">PSEUDO
  STATEMENTS</a></h2>
<p class="Pp">These statements are not statements in the traditional sense. They
    are not executed statements. Their function is performed at
    &quot;compile&quot; time.</p>
<dl class="Bl-tag">
  <dt id="limits"><a class="permalink" href="#limits"><b>limits</b></a></dt>
  <dd>Print the local limits enforced by the local version of <b>bc</b>. This is
      an extension.</dd>
  <dt id="quit"><a class="permalink" href="#quit"><b>quit</b></a></dt>
  <dd>When the quit statement is read, the <b>bc</b> processor is terminated,
      regardless of where the quit statement is found. For example, &quot;if (0
      == 1) quit&quot; will cause <b>bc</b> to terminate.</dd>
  <dt id="warranty"><a class="permalink" href="#warranty"><b>warranty</b></a></dt>
  <dd>Print a longer warranty notice. This is an extension.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="FUNCTIONS"><a class="permalink" href="#FUNCTIONS">FUNCTIONS</a></h2>
<p class="Pp">Functions provide a method of defining a computation that can be
    executed later. Functions in <b>bc</b> always compute a value and return it
    to the caller. Function definitions are &quot;dynamic&quot; in the sense
    that a function is undefined until a definition is encountered in the input.
    That definition is then used until another definition function for the same
    name is encountered. The new definition then replaces the older definition.
    A function is defined as follows:</p>
<div class="Bd-indent">
<pre>
<b>define </b><i>name </i><b>( </b><i>parameters </i><b>) { </b><i>newline</i>
<i></i><i>    auto_list   statement_list </i><b>}</b>
</pre>
</div>
<pre>
</pre>
<p class="Pp">A function call is just an expression of the form
    &quot;<i>name</i><b>(</b><i>parameters</i><b>)</b>&quot;.</p>
<p class="Pp">Parameters are numbers or arrays (an extension). In the function
    definition, zero or more parameters are defined by listing their names
    separated by commas. Numbers are only call by value parameters. Arrays are
    only call by variable. Arrays are specified in the parameter definition by
    the notation &quot;<i>name</i><b>[]</b>&quot;. In the function call, actual
    parameters are full expressions for number parameters. The same notation is
    used for passing arrays as for defining array parameters. The named array is
    passed by variable to the function. Since function definitions are dynamic,
    parameter numbers and types are checked when a function is called. Any
    mismatch in number or types of parameters will cause a runtime error. A
    runtime error will also occur for the call to an undefined function.</p>
<p class="Pp">The <i>auto_list</i> is an optional list of variables that are for
    &quot;local&quot; use. The syntax of the auto list (if present) is
    &quot;<b>auto</b> <b></b><i>name</i>, ... ;&quot;. (The semicolon is
    optional.) Each <i>name</i> is the name of an auto variable. Arrays may be
    specified by using the same notation as used in parameters. These variables
    have their values pushed onto a stack at the start of the function. The
    variables are then initialized to zero and used throughout the execution of
    the function. At function exit, these variables are popped so that the
    original value (at the time of the function call) of these variables are
    restored. The parameters are really auto variables that are initialized to a
    value provided in the function call. Auto variables are different than
    traditional local variables because if function A calls function B, B may
    access function A's auto variables by just using the same name, unless
    function B has called them auto variables. Due to the fact that auto
    variables and parameters are pushed onto a stack, <b>bc</b> supports
    recursive functions.</p>
<p class="Pp">The function body is a list of <b>bc</b> statements. Again,
    statements are separated by semicolons or newlines. Return statements cause
    the termination of a function and the return of a value. There are two
    versions of the return statement. The first form, &quot;<b>return</b>&quot;,
    returns the value 0 to the calling expression. The second form,
    &quot;<b>return ( </b><i>expression </i><b>)</b>&quot;, computes the value
    of the expression and returns that value to the calling expression. There is
    an implied &quot;<b>return (0)</b>&quot; at the end of every function. This
    allows a function to terminate and return 0 without an explicit return
    statement.</p>
<p class="Pp">Functions also change the usage of the variable <b>ibase</b>. All
    constants in the function body will be converted using the value of
    <b>ibase</b> at the time of the function call. Changes of <b>ibase</b> will
    be ignored during the execution of the function except for the standard
    function <b>read</b>, which will always use the current value of
    <b>ibase</b> for conversion of numbers.</p>
<p class="Pp">As an extension, the format of the definition has been slightly
    relaxed. The standard requires the opening brace be on the same line as the
    <b>define</b> keyword and all other parts must be on following lines. This
    version of <b>bc</b> will allow any number of newlines before and after the
    opening brace of the function. For example, the following definitions are
    legal.</p>
<div class="Bd-indent">
<pre>
<span class="Li"></span>
<span class="Li">define d (n) { return (2*n); }</span>
<span class="Li">define d (n)</span>
<span class="Li">  { return (2*n); }</span>
<span class="Li"></span>
</pre>
</div>
<pre>
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="MATH_LIBRARY"><a class="permalink" href="#MATH_LIBRARY">MATH
  LIBRARY</a></h2>
<p class="Pp">If <b>bc</b> is invoked with the <b>-l</b> option, a math library
    is preloaded and the default scale is set to 20. The math functions will
    calculate their results to the scale set at the time of their call. The math
    library defines the following functions:</p>
<dl class="Bl-tag">
  <dt id="s"><a class="permalink" href="#s">s (<i>x</i>)</a></dt>
  <dd>The sine of x, x is in radians.</dd>
  <dt id="c"><a class="permalink" href="#c">c (<i>x</i>)</a></dt>
  <dd>The cosine of x, x is in radians.</dd>
  <dt id="a"><a class="permalink" href="#a">a (<i>x</i>)</a></dt>
  <dd>The arctangent of x, arctangent returns radians.</dd>
  <dt id="l"><a class="permalink" href="#l">l (<i>x</i>)</a></dt>
  <dd>The natural logarithm of x.</dd>
  <dt id="e"><a class="permalink" href="#e">e (<i>x</i>)</a></dt>
  <dd>The exponential function of raising e to the value x.</dd>
  <dt id="j"><a class="permalink" href="#j">j (<i>n,x</i>)</a></dt>
  <dd>The bessel function of integer order n of x.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h2>
<p class="Pp">In /bin/sh, the following will assign the value of &quot;pi&quot;
    to the shell variable <b>pi</b>.</p>
<div class="Bd-indent"><span class="Li"></span> <span class="Li">pi=$(echo
  &quot;scale=10; 4*a(1)&quot; | bc -l)</span> <span class="Li"></span></div>
<p class="Pp">The following is the definition of the exponential function used
    in the math library. This function is written in POSIX <b>bc</b>.</p>
<div class="Bd-indent">
<pre>
<span class="Li"></span>
<span class="Li">scale = 20</span>
<span class="Li">/* Uses the fact that e^x = (e^(x/2))^2</span>
<span class="Li">   When x is small enough, we use the series:</span>
<span class="Li">     e^x = 1 + x + x^2/2! + x^3/3! + ...</span>
<span class="Li">*/</span>
<span class="Li">define e(x) {</span>
<span class="Li">  auto  a, d, e, f, i, m, v, z</span>
<span class="Li">  /* Check the sign of x. */</span>
<span class="Li">  if (x&lt;0) {</span>
<span class="Li">    m = 1</span>
<span class="Li">    x = -x</span>
<span class="Li">  } </span>
<span class="Li">  /* Precondition x. */</span>
<span class="Li">  z = scale;</span>
<span class="Li">  scale = 4 + z + .44*x;</span>
<span class="Li">  while (x &gt; 1) {</span>
<span class="Li">    f += 1;</span>
<span class="Li">    x /= 2;</span>
<span class="Li">  }</span>
<span class="Li">  /* Initialize the variables. */</span>
<span class="Li">  v = 1+x</span>
<span class="Li">  a = x</span>
<span class="Li">  d = 1</span>
<span class="Li">  for (i=2; 1; i++) {</span>
<span class="Li">    e = (a *= x) / (d *= i)</span>
<span class="Li">    if (e == 0) {</span>
<span class="Li">      if (f&gt;0) while (f--)  v = v*v;</span>
<span class="Li">      scale = z</span>
<span class="Li">      if (m) return (1/v);</span>
<span class="Li">      return (v/1);</span>
<span class="Li">    }</span>
<span class="Li">    v += e</span>
<span class="Li">  }</span>
<span class="Li">}</span>
<span class="Li"></span>
</pre>
</div>
<pre>
</pre>
<p class="Pp">The following is code that uses the extended features of <b>bc</b>
    to implement a simple program for calculating checkbook balances. This
    program is best kept in a file so that it can be used many times without
    having to retype it at every use.</p>
<div class="Bd-indent">
<pre>
<span class="Li"></span>
<span class="Li">scale=2</span>
<span class="Li">print &quot;\nCheck book program!\n&quot;</span>
<span class="Li">print &quot;  Remember, deposits are negative transactions.\n&quot;</span>
<span class="Li">print &quot;  Exit by a 0 transaction.\n\n&quot;</span>
<span class="Li">print &quot;Initial balance? &quot;; bal = read()</span>
<span class="Li">bal /= 1</span>
<span class="Li">print &quot;\n&quot;</span>
<span class="Li">while (1) {</span>
<span class="Li">  &quot;current balance = &quot;; bal</span>
<span class="Li">  &quot;transaction? &quot;; trans = read()</span>
<span class="Li">  if (trans == 0) break;</span>
<span class="Li">  bal -= trans</span>
<span class="Li">  bal /= 1</span>
<span class="Li">}</span>
<span class="Li">quit</span>
<span class="Li"></span>
</pre>
</div>
<pre>
</pre>
<p class="Pp">The following is the definition of the recursive factorial
    function.</p>
<div class="Bd-indent">
<pre>
<span class="Li"></span>
<span class="Li">define f (x) {</span>
<span class="Li">  if (x &lt;= 1) return (1);</span>
<span class="Li">  return (f(x-1) * x);</span>
<span class="Li">}</span>
<span class="Li"></span>
</pre>
</div>
<pre>
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="READLINE_AND_LIBEDIT_OPTIONS"><a class="permalink" href="#READLINE_AND_LIBEDIT_OPTIONS">READLINE
  AND LIBEDIT OPTIONS</a></h2>
<p class="Pp">GNU <b>bc</b> can be compiled (via a configure option) to use the
    GNU <b>readline</b> input editor library or the BSD <b>libedit</b> library.
    This allows the user to do editing of lines before sending them to
    <b>bc</b>. It also allows for a history of previous lines typed. When this
    option is selected, <b>bc</b> has one more special variable. This special
    variable, <b>history</b> is the number of lines of history retained. For
    <b>readline</b>, a value of -1 means that an unlimited number of history
    lines are retained. Setting the value of <b>history</b> to a positive number
    restricts the number of history lines to the number given. The value of 0
    disables the history feature. The default value is 100. For more
    information, read the user manuals for the GNU <b>readline</b>,
    <b>history</b> and BSD <b>libedit</b> libraries. One can not enable both
    <b>readline</b> and <b>libedit</b> at the same time.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="DIFFERENCES"><a class="permalink" href="#DIFFERENCES">DIFFERENCES</a></h2>
<p class="Pp">This version of <b>bc</b> was implemented from the POSIX
    P1003.2/D11 draft and contains several differences and extensions relative
    to the draft and traditional implementations. It is not implemented in the
    traditional way using <i>dc(1).</i> This version is a single process which
    parses and runs a byte code translation of the program. There is an
    &quot;undocumented&quot; option (-c) that causes the program to output the
    byte code to the standard output instead of running it. It was mainly used
    for debugging the parser and preparing the math library.</p>
<p class="Pp">A major source of differences is extensions, where a feature is
    extended to add more functionality and additions, where new features are
    added. The following is the list of differences and extensions.</p>
<dl class="Bl-tag">
  <dt id="LANG"><a class="permalink" href="#LANG">LANG</a></dt>
  <dd>This version does not conform to the POSIX standard in the processing of
      the LANG environment variable and all environment variables starting with
      LC_.</dd>
  <dt id="names"><a class="permalink" href="#names">names</a></dt>
  <dd>Traditional and POSIX <b>bc</b> have single letter names for functions,
      variables and arrays. They have been extended to be multi-character names
      that start with a letter and may contain letters, numbers and the
      underscore character.</dd>
  <dt id="Strings"><a class="permalink" href="#Strings">Strings</a></dt>
  <dd>Strings are not allowed to contain NUL characters. POSIX says all
      characters must be included in strings.</dd>
  <dt id="last"><a class="permalink" href="#last">last</a></dt>
  <dd>POSIX <b>bc</b> does not have a <b>last</b> variable. Some implementations
      of <b>bc</b> use the period (.) in a similar way.</dd>
  <dt id="comparisons"><a class="permalink" href="#comparisons">comparisons</a></dt>
  <dd>POSIX <b>bc</b> allows comparisons only in the if statement, the while
      statement, and the second expression of the for statement. Also, only one
      relational operation is allowed in each of those statements.</dd>
  <dt id="if~2"><a class="permalink" href="#if~2">if statement, else
    clause</a></dt>
  <dd>POSIX <b>bc</b> does not have an else clause.</dd>
  <dt id="for~2"><a class="permalink" href="#for~2">for statement</a></dt>
  <dd>POSIX <b>bc</b> requires all expressions to be present in the for
      statement.</dd>
  <dt>&amp;&amp;, ||, !</dt>
  <dd>POSIX <b>bc</b> does not have the logical operators.</dd>
  <dt id="read~2"><a class="permalink" href="#read~2">read function</a></dt>
  <dd>POSIX <b>bc</b> does not have a read function.</dd>
  <dt id="print~2"><a class="permalink" href="#print~2">print statement</a></dt>
  <dd>POSIX <b>bc</b> does not have a print statement .</dd>
  <dt id="continue~2"><a class="permalink" href="#continue~2">continue
    statement</a></dt>
  <dd>POSIX <b>bc</b> does not have a continue statement.</dd>
  <dt id="return~3"><a class="permalink" href="#return~3">return
    statement</a></dt>
  <dd>POSIX <b>bc</b> requires parentheses around the return expression.</dd>
  <dt id="array"><a class="permalink" href="#array">array parameters</a></dt>
  <dd>POSIX <b>bc</b> does not (currently) support array parameters in full. The
      POSIX grammar allows for arrays in function definitions, but does not
      provide a method to specify an array as an actual parameter. (This is most
      likely an oversight in the grammar.) Traditional implementations of
      <b>bc</b> have only call by value array parameters.</dd>
  <dt id="function"><a class="permalink" href="#function">function
    format</a></dt>
  <dd>POSIX <b>bc</b> requires the opening brace on the same line as the
      <b>define</b> key word and the <b>auto</b> statement on the next
    line.</dd>
  <dt>=+, =-, =*, =/, =%, =^</dt>
  <dd>POSIX <b>bc</b> does not require these &quot;old style&quot; assignment
      operators to be defined. This version may allow these &quot;old
      style&quot; assignments. Use the limits statement to see if the installed
      version supports them. If it does support the &quot;old style&quot;
      assignment operators, the statement &quot;a =- 1&quot; will decrement
      <b>a</b> by 1 instead of setting <b>a</b> to the value -1.</dd>
  <dt id="spaces"><a class="permalink" href="#spaces">spaces in numbers</a></dt>
  <dd>Other implementations of <b>bc</b> allow spaces in numbers. For example,
      &quot;x=1 3&quot; would assign the value 13 to the variable x. The same
      statement would cause a syntax error in this version of <b>bc</b>.</dd>
  <dt id="errors"><a class="permalink" href="#errors">errors and
    execution</a></dt>
  <dd>This implementation varies from other implementations in terms of what
      code will be executed when syntax and other errors are found in the
      program. If a syntax error is found in a function definition, error
      recovery tries to find the beginning of a statement and continue to parse
      the function. Once a syntax error is found in the function, the function
      will not be callable and becomes undefined. Syntax errors in the
      interactive execution code will invalidate the current execution block.
      The execution block is terminated by an end of line that appears after a
      complete sequence of statements. For example,</dd>
</dl>
<div class="Bd-indent">
<pre>
a = 1
b = 2
</pre>
</div>
<pre>
</pre>
has two execution blocks and
<div class="Bd-indent">
<pre>
{ a = 1
  b = 2 }
</pre>
</div>
<pre>
</pre>
<p class="Pp">has one execution block. Any runtime error will terminate the
    execution of the current execution block. A runtime warning will not
    terminate the current execution block.</p>
<dl class="Bl-tag">
  <dt id="Interrupts"><a class="permalink" href="#Interrupts">Interrupts</a></dt>
  <dd>During an interactive session, the SIGINT signal (usually generated by the
      control-C character from the terminal) will cause execution of the current
      execution block to be interrupted. It will display a &quot;runtime&quot;
      error indicating which function was interrupted. After all runtime
      structures have been cleaned up, a message will be printed to notify the
      user that <b>bc</b> is ready for more input. All previously defined
      functions remain defined and the value of all non-auto variables are the
      value at the point of interruption. All auto variables and function
      parameters are removed during the clean up process. During a
      non-interactive session, the SIGINT signal will terminate the entire run
      of <b>bc</b>.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="LIMITS"><a class="permalink" href="#LIMITS">LIMITS</a></h2>
<p class="Pp">The following are the limits currently in place for this <b>bc</b>
    processor. Some of them may have been changed by an installation. Use the
    limits statement to see the actual values.</p>
<dl class="Bl-tag">
  <dt id="BC_BASE_MAX"><a class="permalink" href="#BC_BASE_MAX">BC_BASE_MAX</a></dt>
  <dd>The maximum output base is currently set at 999. The maximum input base is
      16.</dd>
  <dt id="BC_DIM_MAX"><a class="permalink" href="#BC_DIM_MAX">BC_DIM_MAX</a></dt>
  <dd>This is currently an arbitrary limit of 65535 as distributed. Your
      installation may be different.</dd>
  <dt id="BC_SCALE_MAX"><a class="permalink" href="#BC_SCALE_MAX">BC_SCALE_MAX</a></dt>
  <dd>The number of digits after the decimal point is limited to INT_MAX digits.
      Also, the number of digits before the decimal point is limited to INT_MAX
      digits.</dd>
  <dt id="BC_STRING_MAX"><a class="permalink" href="#BC_STRING_MAX">BC_STRING_MAX</a></dt>
  <dd>The limit on the number of characters in a string is INT_MAX
    characters.</dd>
  <dt id="exponent"><a class="permalink" href="#exponent">exponent</a></dt>
  <dd>The value of the exponent in the raise operation (^) is limited to
      LONG_MAX.</dd>
  <dt id="variable"><a class="permalink" href="#variable">variable
    names</a></dt>
  <dd>The current limit on the number of unique names is 32767 for each of
      simple variables, arrays and functions.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT_VARIABLES"><a class="permalink" href="#ENVIRONMENT_VARIABLES">ENVIRONMENT
  VARIABLES</a></h1>
<p class="Pp">The following environment variables are processed by
  <b>bc</b>:</p>
<dl class="Bl-tag">
  <dt id="POSIXLY_CORRECT"><a class="permalink" href="#POSIXLY_CORRECT">POSIXLY_CORRECT</a></dt>
  <dd>This is the same as the <b>-s</b> option.</dd>
  <dt id="BC_ENV_ARGS"><a class="permalink" href="#BC_ENV_ARGS">BC_ENV_ARGS</a></dt>
  <dd>This is another mechanism to get arguments to <b>bc</b>. The format is the
      same as the command line arguments. These arguments are processed first,
      so any files listed in the environent arguments are processed before any
      command line argument files. This allows the user to set up
      &quot;standard&quot; options and files to be processed at every invocation
      of <b>bc</b>. The files in the environment variables would typically
      contain function definitions for functions the user wants defined every
      time <b>bc</b> is run.</dd>
  <dt id="BC_LINE_LENGTH"><a class="permalink" href="#BC_LINE_LENGTH">BC_LINE_LENGTH</a></dt>
  <dd>This should be an integer specifing the number of characters in an output
      line for numbers. This includes the backslash and newline characters for
      long numbers.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<p class="Pp">If any file on the command line can not be opened, <b>bc</b> will
    report that the file is unavailable and terminate. Also, there are compile
    and run time diagnostics that should be self-explanatory.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Error recovery is not very good yet.</p>
<p class="Pp">Email bug reports to <b>bug-bc@gnu.org</b>. Be sure to include the
    word ``bc'' somewhere in the ``Subject:'' field.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<pre>
Philip A. Nelson
philnelson@acm.org
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="ACKNOWLEDGEMENTS"><a class="permalink" href="#ACKNOWLEDGEMENTS">ACKNOWLEDGEMENTS</a></h1>
<p class="Pp">The author would like to thank Steve Sommars
    (Steve.Sommars@att.com) for his extensive help in testing the
    implementation. Many great suggestions were given. This is a much better
    product due to his involvement.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">.</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
