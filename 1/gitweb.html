<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   t
       Title: gitweb
      Author: [FIXME: author] [see http://www.docbook.org/tdg5/en/html/author]
   Generator: DocBook XSL Stylesheets vsnapshot <http://docbook.sf.net/>
        Date: 06/06/2021
      Manual: Git Manual
      Source: Git 2.32.0
    Language: English
   -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>GITWEB(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">GITWEB(1)</td>
    <td class="head-vol">Git Manual</td>
    <td class="head-rtitle">GITWEB(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">gitweb - Git web interface (web frontend to Git repositories)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">To get started with gitweb, run <b>git-instaweb</b>(1) from a Git
    repository. This would configure and start your web server, and run web
    browser pointing to gitweb.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Gitweb provides a web interface to Git repositories. Its features
    include:</p>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Viewing multiple Git repositories with common
  root.</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Browsing every revision of the repository.</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Viewing the contents of files in the repository
  at any revision.</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Viewing the revision log of branches, history of
  files and directories, see what was changed when, by who.</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Viewing the blame/annotation details of any file
  (if enabled).</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Generating RSS and Atom feeds of commits, for any
  branch. The feeds are auto-discoverable in modern web browsers.</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Viewing everything that was changed in a
  revision, and step through revisions one at a time, viewing the history of the
  repository.</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Finding commits which commit messages matches
  given search term.</div>
<p class="Pp">See <b>http://repo.or.cz/w/git.git/tree/HEAD:/gitweb/</b> for
    gitweb source code, browsed using gitweb itself.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONFIGURATION"><a class="permalink" href="#CONFIGURATION">CONFIGURATION</a></h1>
<p class="Pp">Various aspects of gitweb&#x2019;s behavior can be controlled
    through the configuration file <b>gitweb_config.perl</b> or
    <b>/etc/gitweb.conf</b>. See the <b>gitweb.conf</b>(5) for details.</p>
<section class="Ss">
<h2 class="Ss" id="Repositories"><a class="permalink" href="#Repositories">Repositories</a></h2>
<p class="Pp">Gitweb can show information from one or more Git repositories.
    These repositories have to be all on local filesystem, and have to share
    common repository root, i.e. be all under a single parent repository (but
    see also &quot;Advanced web server setup&quot; section, &quot;Webserver
    configuration with multiple projects' root&quot; subsection).</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
our $projectroot = '/path/to/parent/directory';
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">The default value for <b>$projectroot</b> is <b>/pub/git</b>. You
    can change it during building gitweb via <b>GITWEB_PROJECTROOT</b> build
    configuration variable.</p>
<p class="Pp">By default all Git repositories under <b>$projectroot</b> are
    visible and available to gitweb. The list of projects is generated by
    default by scanning the <b>$projectroot</b> directory for Git repositories
    (for object databases to be more exact; gitweb is not interested in a
    working area, and is best suited to showing &quot;bare&quot;
  repositories).</p>
<p class="Pp">The name of the repository in gitweb is the path to its
    <b>$GIT_DIR</b> (its object database) relative to <b>$projectroot</b>.
    Therefore the repository $repo can be found at
    &quot;$projectroot/$repo&quot;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Projects_list_file_format"><a class="permalink" href="#Projects_list_file_format">Projects
  list file format</a></h2>
<p class="Pp">Instead of having gitweb find repositories by scanning filesystem
    starting from $projectroot, you can provide a pre-generated list of visible
    projects by setting <b>$projects_list</b> to point to a plain text file with
    a list of projects (with some additional info).</p>
<p class="Pp">This file uses the following format:</p>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;One record (for project / repository) per line;
  does not support line continuation (newline escaping).</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Leading and trailing whitespace are
  ignored.</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Whitespace separated fields; any run of
  whitespace can be used as field separator (rules for Perl&#x2019;s
  &quot;<b>split(&quot; &quot;, $line)</b>&quot;).</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Fields use modified URI encoding, defined in RFC
  3986, section 2.1 (Percent-Encoding), or rather &quot;Query string
  encoding&quot; (see
  <b>https://en.wikipedia.org/wiki/Query_string#URL_encoding</b>), the
  difference being that SP (&quot; &quot;) can be encoded as &quot;+&quot; (and
  therefore &quot;+&quot; has to be also percent-encoded).
<p class="Pp">Reserved characters are: &quot;%&quot; (used for encoding),
    &quot;+&quot; (can be used to encode SPACE), all whitespace characters as
    defined in Perl, including SP, TAB and LF, (used to separate fields in a
    record).</p>
</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Currently recognized fields are:
<p class="Pp">&lt;repository path&gt;</p>
<div class="Bd-indent">path to repository GIT_DIR, relative to
  <b>$projectroot</b></div>
<p class="Pp">&lt;repository owner&gt;</p>
<div class="Bd-indent">displayed as repository owner, preferably full name, or
  email, or both</div>
</div>
<p class="Pp">You can generate the projects list index file using the
    project_index action (the <i>TXT</i> link on projects list page) directly
    from gitweb; see also &quot;Generating projects list using gitweb&quot;
    section below.</p>
<p class="Pp">Example contents:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
foo.git       Joe+R+Hacker+&lt;joe@example.com&gt;
foo/bar.git   O+W+Ner+&lt;owner@example.org&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">By default this file controls only which projects are
    <b>visible</b> on projects list page (note that entries that do not point to
    correctly recognized Git repositories won&#x2019;t be displayed by gitweb).
    Even if a project is not visible on projects list page, you can view it
    nevertheless by hand-crafting a gitweb URL. By setting <b>$strict_export</b>
    configuration variable (see <b>gitweb.conf</b>(5)) to true value you can
    allow viewing only of repositories also shown on the overview page (i.e.
    only projects explicitly listed in projects list file will be
  accessible).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Generating_projects_list_using_gitweb"><a class="permalink" href="#Generating_projects_list_using_gitweb">Generating
  projects list using gitweb</a></h2>
<p class="Pp">We assume that GITWEB_CONFIG has its default Makefile value,
    namely <i>gitweb_config.perl</i>. Put the following in
    <i>gitweb_make_index.perl</i> file:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
read_config_file(&quot;gitweb_config.perl&quot;);
$projects_list = $projectroot;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">Then create the following script to get list of project in the
    format suitable for GITWEB_LIST build configuration variable (or
    <b>$projects_list</b> variable in gitweb config):</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
#!/bin/sh
export GITWEB_CONFIG=&quot;gitweb_make_index.perl&quot;
export GATEWAY_INTERFACE=&quot;CGI/1.1&quot;
export HTTP_ACCEPT=&quot;*/*&quot;
export REQUEST_METHOD=&quot;GET&quot;
export QUERY_STRING=&quot;a=project_index&quot;
perl -- /var/www/cgi-bin/gitweb.cgi
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">Run this script and save its output to a file. This file could
    then be used as projects list file, which means that you can set
    <b>$projects_list</b> to its filename.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Controlling_access_to_Git_repositories"><a class="permalink" href="#Controlling_access_to_Git_repositories">Controlling
  access to Git repositories</a></h2>
<p class="Pp">By default all Git repositories under <b>$projectroot</b> are
    visible and available to gitweb. You can however configure how gitweb
    controls access to repositories.</p>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;As described in &quot;Projects list file
  format&quot; section, you can control which projects are <b>visible</b> by
  selectively including repositories in projects list file, and setting
  <b>$projects_list</b> gitweb configuration variable to point to it. With
  <b>$strict_export</b> set, projects list file can be used to control which
  repositories are <b>available</b> as well.</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;You can configure gitweb to only list and allow
  viewing of the explicitly exported repositories, via <b>$export_ok</b>
  variable in gitweb config file; see <b>gitweb.conf</b>(5) manpage. If it
  evaluates to true, gitweb shows repositories only if this file named by
  <b>$export_ok</b> exists in its object database (if directory has the magic
  file named <b>$export_ok</b>).
<p class="Pp">For example <b>git-daemon</b>(1) by default (unless
    <b>--export-all</b> option is used) allows pulling only for those
    repositories that have <i>git-daemon-export-ok</i> file. Adding</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
our $export_ok = &quot;git-daemon-export-ok&quot;;
</pre>
</div>
<p class="Pp">makes gitweb show and allow access only to those repositories that
    can be fetched from via <b>git://</b> protocol.</p>
</div>
<p class="Pp"></p>
<div class="Bd-indent">&#x2022;Finally, it is possible to specify an arbitrary
  perl subroutine that will be called for each repository to determine if it can
  be exported. The subroutine receives an absolute path to the project
  (repository) as its only parameter (i.e. &quot;$projectroot/$project&quot;).
<p class="Pp">For example, if you use mod_perl to run the script, and have dumb
    HTTP protocol authentication configured for your repositories, you can use
    the following hook to allow access only if the user is authorized to read
    the files:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
$export_auth_hook = sub {
        use Apache2::SubRequest ();
        use Apache2::Const -compile =&gt; qw(HTTP_OK);
        my $path = &quot;$_[0]/HEAD&quot;;
        my $r    = Apache2::RequestUtil-&gt;request;
        my $sub  = $r-&gt;lookup_file($path);
        return $sub-&gt;filename eq $path
            &amp;&amp; $sub-&gt;status == Apache2::Const::HTTP_OK;
};
</pre>
</div>
<p class="Pp"></p>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Per"><a class="permalink" href="#Per">Per-repository gitweb
  configuration</a></h2>
<p class="Pp">You can configure individual repositories shown in gitweb by
    creating file in the <b>GIT_DIR</b> of Git repository, or by setting some
    repo configuration variable (in <b>GIT_DIR/config</b>, see
    <b>git-config</b>(1)).</p>
<p class="Pp">You can use the following files in repository:</p>
<p class="Pp">README.html</p>
<div class="Bd-indent">A html file (HTML fragment) which is included on the
  gitweb project &quot;summary&quot; page inside <b>&lt;div&gt;</b> block
  element. You can use it for longer description of a project, to provide links
  (for example to project&#x2019;s homepage), etc. This is recognized only if
  XSS prevention is off (<b>$prevent_xss</b> is false, see
  <b>gitweb.conf</b>(5)); a way to include a README safely when XSS prevention
  is on may be worked out in the future.</div>
<p class="Pp">description (or <b>gitweb.description</b>)</p>
<div class="Bd-indent">Short (shortened to
  <b>$projects_list_description_width</b> in the projects list page, which is 25
  characters by default; see <b>gitweb.conf</b>(5)) single line description of a
  project (of a repository). Plain text file; HTML will be escaped. By default
  set to
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
Unnamed repository; edit this file to name it for gitweb.
</pre>
</div>
<p class="Pp">from the template during repository creation, usually installed in
    <b>/usr/share/git-core/templates/</b>. You can use the
    <b>gitweb.description</b> repo configuration variable, but the file takes
    precedence.</p>
</div>
<p class="Pp">category (or <b>gitweb.category</b>)</p>
<div class="Bd-indent">Singe line category of a project, used to group projects
  if <b>$projects_list_group_categories</b> is enabled. By default (file and
  configuration variable absent), uncategorized projects are put in the
  <b>$project_list_default_category</b> category. You can use the
  <b>gitweb.category</b> repo configuration variable, but the file takes
  precedence.
<p class="Pp">The configuration variables <b>$projects_list_group_categories</b>
    and <b>$project_list_default_category</b> are described in
    <b>gitweb.conf</b>(5)</p>
</div>
<p class="Pp">cloneurl (or multiple-valued <b>gitweb.url</b>)</p>
<div class="Bd-indent">File with repository URL (used for clone and fetch), one
  per line. Displayed in the project summary page. You can use multiple-valued
  <b>gitweb.url</b> repository configuration variable for that, but the file
  takes precedence.
<p class="Pp">This is per-repository enhancement / version of global
    prefix-based <b>@git_base_url_list</b> gitweb configuration variable (see
    <b>gitweb.conf</b>(5)).</p>
</div>
<p class="Pp">gitweb.owner</p>
<div class="Bd-indent">You can use the <b>gitweb.owner</b> repository
  configuration variable to set repository&#x2019;s owner. It is displayed in
  the project list and summary page.
<p class="Pp">If it&#x2019;s not set, filesystem directory&#x2019;s owner is
    used (via GECOS field, i.e. real name field from <b>getpwuid</b>(3)) if
    <b>$projects_list</b> is unset (gitweb scans <b>$projectroot</b> for
    repositories); if <b>$projects_list</b> points to file with list of
    repositories, then project owner defaults to value from this file for given
    repository.</p>
</div>
<p class="Pp">various <b>gitweb.*</b> config variables (in config)</p>
<div class="Bd-indent">Read description of <b>%feature</b> hash for detailed
  list, and descriptions. See also &quot;Configuring gitweb features&quot;
  section in <b>gitweb.conf</b>(5)</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="ACTIONS,_AND_URLS"><a class="permalink" href="#ACTIONS,_AND_URLS">ACTIONS,
  AND URLS</a></h1>
<p class="Pp">Gitweb can use path_info (component) based URLs, or it can pass
    all necessary information via query parameters. The typical gitweb URLs are
    broken down in to five components:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
.../gitweb.cgi/&lt;repo&gt;/&lt;action&gt;/&lt;revision&gt;:/&lt;path&gt;?&lt;arguments&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp"></p>
<p class="Pp">repo</p>
<div class="Bd-indent">The repository the action will be performed on.
<p class="Pp">All actions except for those that list all available projects, in
    whatever form, require this parameter.</p>
</div>
<p class="Pp">action</p>
<div class="Bd-indent">The action that will be run. Defaults to
  <i>projects_list</i> if repo is not set, and to <i>summary</i>
  otherwise.</div>
<p class="Pp">revision</p>
<div class="Bd-indent">Revision shown. Defaults to HEAD.</div>
<p class="Pp">path</p>
<div class="Bd-indent">The path within the &lt;repository&gt; that the action is
  performed on, for those actions that require it.</div>
<p class="Pp">arguments</p>
<div class="Bd-indent">Any arguments that control the behaviour of the
  action.</div>
<p class="Pp">Some actions require or allow to specify two revisions, and
    sometimes even two pathnames. In most general form such path_info
    (component) based gitweb URL looks like this:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
.../gitweb.cgi/&lt;repo&gt;/&lt;action&gt;/&lt;revision_from&gt;:/&lt;path_from&gt;..&lt;revision_to&gt;:/&lt;path_to&gt;?&lt;arguments&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">Each action is implemented as a subroutine, and must be present in
    %actions hash. Some actions are disabled by default, and must be turned on
    via feature mechanism. For example to enable <i>blame</i> view add the
    following to gitweb configuration file:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
$feature{'blame'}{'default'} = [1];
</pre>
</div>
<p class="Pp"></p>
<section class="Ss">
<h2 class="Ss" id="Actions:"><a class="permalink" href="#Actions:">Actions:</a></h2>
<p class="Pp">The standard actions are:</p>
<p class="Pp">project_list</p>
<div class="Bd-indent">Lists the available Git repositories. This is the default
  command if no repository is specified in the URL.</div>
<p class="Pp">summary</p>
<div class="Bd-indent">Displays summary about given repository. This is the
  default command if no action is specified in URL, and only repository is
  specified.</div>
<p class="Pp">heads, remotes</p>
<div class="Bd-indent">Lists all local or all remote-tracking branches in given
  repository.
<p class="Pp">The latter is not available by default, unless configured.</p>
</div>
<p class="Pp">tags</p>
<div class="Bd-indent">List all tags (lightweight and annotated) in given
  repository.</div>
<p class="Pp">blob, tree</p>
<div class="Bd-indent">Shows the files and directories in a given repository
  path, at given revision. This is default command if no action is specified in
  the URL, and path is given.</div>
<p class="Pp">blob_plain</p>
<div class="Bd-indent">Returns the raw data for the file in given repository, at
  given path and revision. Links to this action are marked <i>raw</i>.</div>
<p class="Pp">blobdiff</p>
<div class="Bd-indent">Shows the difference between two revisions of the same
  file.</div>
<p class="Pp">blame, blame_incremental</p>
<div class="Bd-indent">Shows the blame (also called annotation) information for
  a file. On a per line basis it shows the revision in which that line was last
  changed and the user that committed the change. The incremental version (which
  if configured is used automatically when JavaScript is enabled) uses Ajax to
  incrementally add blame info to the contents of given file.
<p class="Pp">This action is disabled by default for performance reasons.</p>
</div>
<p class="Pp">commit, commitdiff</p>
<div class="Bd-indent">Shows information about a specific commit in a
  repository. The <i>commit</i> view shows information about commit in more
  detail, the <i>commitdiff</i> action shows changeset for given commit.</div>
<p class="Pp">patch</p>
<div class="Bd-indent">Returns the commit in plain text mail format, suitable
  for applying with <b>git-am</b>(1).</div>
<p class="Pp">tag</p>
<div class="Bd-indent">Display specific annotated tag (tag object).</div>
<p class="Pp">log, shortlog</p>
<div class="Bd-indent">Shows log information (commit message or just commit
  subject) for a given branch (starting from given revision).
<p class="Pp">The <i>shortlog</i> view is more compact; it shows one commit per
    line.</p>
</div>
<p class="Pp">history</p>
<div class="Bd-indent">Shows history of the file or directory in a given
  repository path, starting from given revision (defaults to HEAD, i.e. default
  branch).
<p class="Pp">This view is similar to <i>shortlog</i> view.</p>
</div>
<p class="Pp">rss, atom</p>
<div class="Bd-indent">Generates an RSS (or Atom) feed of changes to
  repository.</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="WEBSERVER_CONFIGURATION"><a class="permalink" href="#WEBSERVER_CONFIGURATION">WEBSERVER
  CONFIGURATION</a></h1>
<p class="Pp">This section explains how to configure some common webservers to
    run gitweb. In all cases, <b>/path/to/gitweb</b> in the examples is the
    directory you ran installed gitweb in, and contains
    <b>gitweb_config.perl</b>.</p>
<p class="Pp">If you&#x2019;ve configured a web server that isn&#x2019;t listed
    here for gitweb, please send in the instructions so they can be included in
    a future release.</p>
<section class="Ss">
<h2 class="Ss" id="Apache_as_CGI"><a class="permalink" href="#Apache_as_CGI">Apache
  as CGI</a></h2>
<p class="Pp">Apache must be configured to support CGI scripts in the directory
    in which gitweb is installed. Let&#x2019;s assume that it is
    <b>/var/www/cgi-bin</b> directory.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
ScriptAlias /cgi-bin/ &quot;/var/www/cgi-bin/&quot;
&lt;Directory &quot;/var/www/cgi-bin&quot;&gt;
    Options Indexes FollowSymlinks ExecCGI
    AllowOverride None
    Order allow,deny
    Allow from all
&lt;/Directory&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">With that configuration the full path to browse repositories would
    be:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
http://server/cgi-bin/gitweb.cgi
</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Apache_with_mod_perl,_via_ModPerl::Registry"><a class="permalink" href="#Apache_with_mod_perl,_via_ModPerl::Registry">Apache
  with mod_perl, via ModPerl::Registry</a></h2>
<p class="Pp">You can use mod_perl with gitweb. You must install
    Apache::Registry (for mod_perl 1.x) or ModPerl::Registry (for mod_perl 2.x)
    to enable this support.</p>
<p class="Pp">Assuming that gitweb is installed to <b>/var/www/perl</b>, the
    following Apache configuration (for mod_perl 2.x) is suitable.</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
Alias /perl &quot;/var/www/perl&quot;
&lt;Directory &quot;/var/www/perl&quot;&gt;
    SetHandler perl-script
    PerlResponseHandler ModPerl::Registry
    PerlOptions +ParseHeaders
    Options Indexes FollowSymlinks +ExecCGI
    AllowOverride None
    Order allow,deny
    Allow from all
&lt;/Directory&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">With that configuration the full path to browse repositories would
    be:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
http://server/perl/gitweb.cgi
</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="Apache_with_FastCGI"><a class="permalink" href="#Apache_with_FastCGI">Apache
  with FastCGI</a></h2>
<p class="Pp">Gitweb works with Apache and FastCGI. First you need to rename,
    copy or symlink gitweb.cgi to gitweb.fcgi. Let&#x2019;s assume that gitweb
    is installed in <b>/usr/share/gitweb</b> directory. The following Apache
    configuration is suitable (UNTESTED!)</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
FastCgiServer /usr/share/gitweb/gitweb.cgi
ScriptAlias /gitweb /usr/share/gitweb/gitweb.cgi
Alias /gitweb/static /usr/share/gitweb/static
&lt;Directory /usr/share/gitweb/static&gt;
    SetHandler default-handler
&lt;/Directory&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">With that configuration the full path to browse repositories would
    be:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
http://server/gitweb
</pre>
</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="ADVANCED_WEB_SERVER_SETUP"><a class="permalink" href="#ADVANCED_WEB_SERVER_SETUP">ADVANCED
  WEB SERVER SETUP</a></h1>
<p class="Pp">All of those examples use request rewriting, and need
    <b>mod_rewrite</b> (or equivalent; examples below are written for
  Apache).</p>
<section class="Ss">
<h2 class="Ss" id="Single_URL_for_gitweb_and_for_fetching"><a class="permalink" href="#Single_URL_for_gitweb_and_for_fetching">Single
  URL for gitweb and for fetching</a></h2>
<p class="Pp">If you want to have one URL for both gitweb and your
    <b>http://</b> repositories, you can configure Apache like this:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
&lt;VirtualHost *:80&gt;
    ServerName    git.example.org
    DocumentRoot  /pub/git
    SetEnv        GITWEB_CONFIG   /etc/gitweb.conf
    # turning on mod rewrite
    RewriteEngine on
    # make the front page an internal rewrite to the gitweb script
    RewriteRule ^/$  /cgi-bin/gitweb.cgi
    # make access for &quot;dumb clients&quot; work
    RewriteRule ^/(.*\.git/(?!/?(HEAD|info|objects|refs)).*)?$ \
                /cgi-bin/gitweb.cgi%{REQUEST_URI}  [L,PT]
&lt;/VirtualHost&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">The above configuration expects your public repositories to live
    under <b>/pub/git</b> and will serve them as
    <b>http://git.domain.org/dir-under-pub-git</b>, both as clonable Git URL and
    as browseable gitweb interface. If you then start your <b>git-daemon</b>(1)
    with <b>--base-path=/pub/git --export-all</b> then you can even use the
    <b>git://</b> URL with exactly the same path.</p>
<p class="Pp">Setting the environment variable <b>GITWEB_CONFIG</b> will tell
    gitweb to use the named file (i.e. in this example <b>/etc/gitweb.conf</b>)
    as a configuration for gitweb. You don&#x2019;t really need it in above
    example; it is required only if your configuration file is in different
    place than built-in (during compiling gitweb) <i>gitweb_config.perl</i> or
    <b>/etc/gitweb.conf</b>. See <b>gitweb.conf</b>(5) for details, especially
    information about precedence rules.</p>
<p class="Pp">If you use the rewrite rules from the example you <b>might</b>
    also need something like the following in your gitweb configuration file
    (<b>/etc/gitweb.conf</b> following example):</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
@stylesheets = (&quot;/some/absolute/path/gitweb.css&quot;);
$my_uri    = &quot;/&quot;;
$home_link = &quot;/&quot;;
$per_request_config = 1;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">Nowadays though gitweb should create HTML base tag when needed (to
    set base URI for relative links), so it should work automatically.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Webserver_configuration_with_multiple_projects"><a class="permalink" href="#Webserver_configuration_with_multiple_projects">Webserver
  configuration with multiple projects' root</a></h2>
<p class="Pp">If you want to use gitweb with several project roots you can edit
    your Apache virtual host and gitweb configuration files in the following
    way.</p>
<p class="Pp">The virtual host configuration (in Apache configuration file)
    should look like this:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
&lt;VirtualHost *:80&gt;
    ServerName    git.example.org
    DocumentRoot  /pub/git
    SetEnv        GITWEB_CONFIG  /etc/gitweb.conf
    # turning on mod rewrite
    RewriteEngine on
    # make the front page an internal rewrite to the gitweb script
    RewriteRule ^/$  /cgi-bin/gitweb.cgi  [QSA,L,PT]
    # look for a public_git folder in unix users' home
    # http://git.example.org/~&lt;user&gt;/
    RewriteRule ^/\~([^\/]+)(/|/gitweb.cgi)?$   /cgi-bin/gitweb.cgi \
                [QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]
    # http://git.example.org/+&lt;user&gt;/
    #RewriteRule ^/\+([^\/]+)(/|/gitweb.cgi)?$  /cgi-bin/gitweb.cgi \
                 [QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]
    # http://git.example.org/user/&lt;user&gt;/
    #RewriteRule ^/user/([^\/]+)/(gitweb.cgi)?$ /cgi-bin/gitweb.cgi \
                 [QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]
    # defined list of project roots
    RewriteRule ^/scm(/|/gitweb.cgi)?$ /cgi-bin/gitweb.cgi \
                [QSA,E=GITWEB_PROJECTROOT:/pub/scm/,L,PT]
    RewriteRule ^/var(/|/gitweb.cgi)?$ /cgi-bin/gitweb.cgi \
                [QSA,E=GITWEB_PROJECTROOT:/var/git/,L,PT]
    # make access for &quot;dumb clients&quot; work
    RewriteRule ^/(.*\.git/(?!/?(HEAD|info|objects|refs)).*)?$ \
                /cgi-bin/gitweb.cgi%{REQUEST_URI}  [L,PT]
&lt;/VirtualHost&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">Here actual project root is passed to gitweb via
    <b>GITWEB_PROJECT_ROOT</b> environment variable from a web server, so you
    need to put the following line in gitweb configuration file
    (<b>/etc/gitweb.conf</b> in above example):</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
$projectroot = $ENV{'GITWEB_PROJECTROOT'} || &quot;/pub/git&quot;;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp"><b>Note</b> that this requires to be set for each request, so
    either <b>$per_request_config</b> must be false, or the above must be put in
    code referenced by <b>$per_request_config</b>;</p>
<p class="Pp">These configurations enable two things. First, each unix user
    (<b>&lt;user&gt;</b>) of the server will be able to browse through gitweb
    Git repositories found in <b>~/public_git/</b> with the following url:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
http://git.example.org/~&lt;user&gt;/
</pre>
</div>
<p class="Pp">If you do not want this feature on your server just remove the
    second rewrite rule.</p>
<p class="Pp">If you already use &#x2018;mod_userdir` in your virtual host or
    you don&#x2019;t want to use the '~&#x2019; as first character, just comment
    or remove the second rewrite rule, and uncomment one of the following
    according to what you want.</p>
<p class="Pp">Second, repositories found in <b>/pub/scm/</b> and
    <b>/var/git/</b> will be accessible through
    <b>http://git.example.org/scm/</b> and <b>http://git.example.org/var/</b>.
    You can add as many project roots as you want by adding rewrite rules like
    the third and the fourth.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="PATH_INFO_usage"><a class="permalink" href="#PATH_INFO_usage">PATH_INFO
  usage</a></h2>
<p class="Pp">If you enable PATH_INFO usage in gitweb by putting</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
$feature{'pathinfo'}{'default'} = [1];
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">in your gitweb configuration file, it is possible to set up your
    server so that it consumes and produces URLs in the form</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
http://git.example.com/project.git/shortlog/sometag
</pre>
</div>
<p class="Pp">i.e. without <i>gitweb.cgi</i> part, by using a configuration such
    as the following. This configuration assumes that <b>/var/www/gitweb</b> is
    the DocumentRoot of your webserver, contains the gitweb.cgi script and
    complementary static files (stylesheet, favicon, JavaScript):</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
&lt;VirtualHost *:80&gt;
        ServerAlias git.example.com
        DocumentRoot /var/www/gitweb
        &lt;Directory /var/www/gitweb&gt;
                Options ExecCGI
                AddHandler cgi-script cgi
                DirectoryIndex gitweb.cgi
                RewriteEngine On
                RewriteCond %{REQUEST_FILENAME} !-f
                RewriteCond %{REQUEST_FILENAME} !-d
                RewriteRule ^.* /gitweb.cgi/$0 [L,PT]
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">The rewrite rule guarantees that existing static files will be
    properly served, whereas any other URL will be passed to gitweb as PATH_INFO
    parameter.</p>
<p class="Pp"><b>Notice</b> that in this case you don&#x2019;t need special
    settings for <b>@stylesheets</b>, <b>$my_uri</b> and <b>$home_link</b>, but
    you lose &quot;dumb client&quot; access to your project .git dirs (described
    in &quot;Single URL for gitweb and for fetching&quot; section). A possible
    workaround for the latter is the following: in your project root dir (e.g.
    <b>/pub/git</b>) have the projects named <b>without</b> a .git extension
    (e.g. <b>/pub/git/project</b> instead of <b>/pub/git/project.git</b>) and
    configure Apache as follows:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
&lt;VirtualHost *:80&gt;
        ServerAlias git.example.com
        DocumentRoot /var/www/gitweb
        AliasMatch ^(/.*?)(\.git)(/.*)?$ /pub/git$1$3
        &lt;Directory /var/www/gitweb&gt;
                Options ExecCGI
                AddHandler cgi-script cgi
                DirectoryIndex gitweb.cgi
                RewriteEngine On
                RewriteCond %{REQUEST_FILENAME} !-f
                RewriteCond %{REQUEST_FILENAME} !-d
                RewriteRule ^.* /gitweb.cgi/$0 [L,PT]
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</pre>
</div>
<p class="Pp"></p>
<p class="Pp">The additional AliasMatch makes it so that</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
http://git.example.com/project.git
</pre>
</div>
<p class="Pp">will give raw access to the project&#x2019;s Git dir (so that the
    project can be cloned), while</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
http://git.example.com/project
</pre>
</div>
<p class="Pp">will provide human-friendly gitweb access.</p>
<p class="Pp">This solution is not 100% bulletproof, in the sense that if some
    project has a named ref (branch, tag) starting with <b>git/</b>, then paths
    such as</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
http://git.example.com/project/command/abranch..git/abranch
</pre>
</div>
<p class="Pp">will fail with a 404 error.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Please report any bugs or feature requests to
    <b>git@vger.kernel.org</b>[1], putting &quot;gitweb&quot; in the subject of
    email.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>gitweb.conf</b>(5), <b>git-instaweb</b>(1)</p>
<p class="Pp"><b>gitweb/README</b>, <b>gitweb/INSTALL</b></p>
</section>
<section class="Sh">
<h1 class="Sh" id="GIT"><a class="permalink" href="#GIT">GIT</a></h1>
<p class="Pp">Part of the <b>git</b>(1) suite</p>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES"><a class="permalink" href="#NOTES">NOTES</a></h1>
<dl class="Bl-tag">
  <dt> 1.</dt>
  <dd>git@vger.kernel.org</dd>
</dl>
<div class="Bd-indent">mailto:git@vger.kernel.org</div>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">06/06/2021</td>
    <td class="foot-os">Git 2.32.0</td>
  </tr>
</table>
</body>
</html>
