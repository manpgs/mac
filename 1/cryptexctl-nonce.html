<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>CRYPTEXCTL-NONCE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CRYPTEXCTL-NONCE(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">CRYPTEXCTL-NONCE(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">cryptexctl nonce</code> &#x2014;
    <span class="Nd">retrieve or manipulate cryptex personalization
    nonces</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">cryptexctl nonce</code></td>
    <td>nonce [<code class="Fl">-r</code> | <code class="Fl">--roll</code>]
      [<code class="Fl">-g</code> | <code class="Fl">--global</code>]
      <var class="Ar">CRYPTEX-NAME</var></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Retrieve or manipulate personalization nonces for cryptexes. In
    the current implementation, all cryptexes are personalized with a single
    nonce which is rolled when the host performs a software update. In the
    future, each cryptex will have an individual nonce.</p>
<p class="Pp">This nonce can be used with
    <a class="Xr" href="../1/cryptexctl-create">cryptexctl-create(1)</a> to
    personalize a cryptex for a device when the device is not present.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp">A list of options with descriptions:</p>
<dl class="Bl-tag">
  <dt>[<code class="Fl">-r</code> | <code class="Fl">--roll</code>]</dt>
  <dd>Roll the cryptex's personalization nonce. This will invalidate the
      existing personalization for the cryptex such it will not be accepted at
      the next validation (usually at the next boot). This is not a live
      revocation and does not affect the state of the already-active cryptex.
      Once rolled, a new nonce is generated at the next boot, and thus the
      cryptex nonce will not be queryable until then.</dd>
  <dt>[<code class="Fl">-g</code> | <code class="Fl">--global</code>]</dt>
  <dd>Operate on the global cryptex nonce. Currently, all cryptexes are
      personalized with this nonce, but in the future, each will have its own
      nonce.</dd>
  <dt><var class="Ar">CRYPTEX-NAME</var></dt>
  <dd>The cryptex whose nonce is to be manipulated. Currently, all cryptexes are
      personalized with the same nonce, but in the future, each will have its
      own nonce. This option must be provided if the
      <code class="Fl">--global</code> option is not given.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt id="CRYPTEXCTL_UDID"><a class="permalink" href="#CRYPTEXCTL_UDID"><code class="Ev">CRYPTEXCTL_UDID</code></a></dt>
  <dd>Read by <code class="Nm">cryptexctl nonce</code> to set the [--udid]
      option on the base <a class="Xr" href="../1/cryptexctl">cryptexctl(1)</a>
      command. This UDID value can be retrieved from the
      <a class="Xr" href="../1/cryptexctl-device">cryptexctl-device(1)</a>
      command's
      <a class="permalink" href="#list"><i class="Em" id="list">list</i></a> or
      <a class="permalink" href="#print"><i class="Em" id="print">print</i></a>
      actions and provides a convenient way to operate on a single device when
      multiple devices are connected.
    <p class="Pp">The magic value &quot;first&quot; will select the first
        discovered device.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="TROUBLESHOOTING"><a class="permalink" href="#TROUBLESHOOTING">TROUBLESHOOTING</a></h1>
<p class="Pp">This command will communicate with the local cryptex subsystem if
    [-udid] or <code class="Ev">CRYPTEXTCTL_UDID</code> is not specified. When
    manually personalizing a cryptex with
    <a class="Xr" href="../1/cryptexctl-create">cryptexctl-create(1)</a> ensure
    you are communicating with the device you expect by confirming the
    <code class="Dv">UDID</code> matches with the output from
    <a class="Xr" href="../1/cryptexctl-device">cryptexctl-device(1)</a>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="../1/cryptexctl">cryptexctl(1)</a>,
    <a class="Xr" href="../1/cryptexctl-create">cryptexctl-create(1)</a>,
    <a class="Xr" href="../1/cryptexctl-list">cryptexctl-list(1)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">Introduced in macOS 11.0</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 7, 2020</td>
    <td class="foot-os">Darwin</td>
  </tr>
</table>
</body>
</html>
