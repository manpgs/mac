<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>ZSHCOMPWID(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ZSHCOMPWID(1)</td>
    <td class="head-vol"><a href=".">General Commands Manual</a></td>
    <td class="head-rtitle">ZSHCOMPWID(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">zshcompwid - zsh completion widgets</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The shell's programmable completion mechanism can be manipulated
    in two ways; here the low-level features supporting the newer,
    function-based mechanism are defined. A complete set of shell functions
    based on these features is described in <i>zshcompsys</i>(1), and users with
    no interest in adding to that system (or, potentially, writing their own --
    see dictionary entry for `hubris') should skip the current section. The
    older system based on the <b>compctl</b> builtin command is described in
    <i>zshcompctl</i>(1).</p>
<p class="Pp">Completion widgets are defined by the <b>-C</b> option to the
    <b>zle</b> builtin command provided by the <b>zsh/zle</b> module (see
    <i>zshzle</i>(1)). For example,</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>zle -C complete expand-or-complete completer</b></pre>
</div>
<p class="Pp">defines a widget named `<b>complete</b>'. The second argument is
    the name of any of the builtin widgets that handle completions:
    <b>complete-word</b>, <b>expand-or-complete</b>,
    <b>expand-or-complete-prefix</b>, <b>menu-complete</b>,
    <b>menu-expand-or-complete</b>, <b>reverse-menu-complete</b>,
    <b>list-choices</b>, or <b>delete-char-or-list</b>. Note that this will
    still work even if the widget in question has been re-bound.</p>
<p class="Pp">When this newly defined widget is bound to a key using the
    <b>bindkey</b> builtin command defined in the <b>zsh/zle</b> module (see
    <i>zshzle</i>(1)), typing that key will call the shell function
    `<b>completer</b>'. This function is responsible for generating completion
    matches using the builtins described below. As with other ZLE widgets, the
    function is called with its standard input closed.</p>
<p class="Pp">Once the function returns, the completion code takes over control
    again and treats the matches in the same manner as the specified builtin
    widget, in this case <b>expand-or-complete</b>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPLETION_SPECIAL_PARAMETERS"><a class="permalink" href="#COMPLETION_SPECIAL_PARAMETERS">COMPLETION
  SPECIAL PARAMETERS</a></h1>
<p class="Pp">The parameters <b>ZLE_REMOVE_SUFFIX_CHARS</b> and
    <b>ZLE_SPACE_SUFFIX_CHARS</b> are used by the completion mechanism, but are
    not special. See <i>Parameters Used By The Shell</i> in
  <i>zshparam</i>(1).</p>
<p class="Pp">Inside completion widgets, and any functions called from them,
    some parameters have special meaning; outside these functions they are not
    special to the shell in any way. These parameters are used to pass
    information between the completion code and the completion widget. Some of
    the builtin commands and the condition codes use or change the current
    values of these parameters. Any existing values will be hidden during
    execution of completion widgets; except for <b>compstate</b>, the parameters
    are reset on each function exit (including nested function calls from within
    the completion widget) to the values they had when the function was
  entered.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>CURRENT</b></dt>
  <dd>This is the number of the current word, i.e. the word the cursor is
      currently on in the <b>words</b> array. Note that this value is only
      correct if the <b>ksharrays</b> option is not set.</dd>
  <dt id="IPREFIX"><a class="permalink" href="#IPREFIX"><b>IPREFIX</b></a></dt>
  <dd>Initially this will be set to the empty string. This parameter functions
      like <b>PREFIX</b>; it contains a string which precedes the one in
      <b>PREFIX</b> and is not considered part of the list of matches.
      Typically, a string is transferred from the beginning of <b>PREFIX</b> to
      the end of <b>IPREFIX</b>, for example:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>IPREFIX=${PREFIX%%\=*}=</b>
<b>PREFIX=${PREFIX#*=}</b></pre>
</div>
<p class="Pp">causes the part of the prefix up to and including the first equal
    sign not to be treated as part of a matched string. This can be done
    automatically by the <b>compset</b> builtin, see below.</p>
</div>
<dl class="Bl-tag">
  <dt id="ISUFFIX"><a class="permalink" href="#ISUFFIX"><b>ISUFFIX</b></a></dt>
  <dd>As <b>IPREFIX</b>, but for a suffix that should not be considered part of
      the matches; note that the <b>ISUFFIX</b> string follows the <b>SUFFIX</b>
      string.</dd>
  <dt id="PREFIX"><a class="permalink" href="#PREFIX"><b>PREFIX</b></a></dt>
  <dd>Initially this will be set to the part of the current word from the
      beginning of the word up to the position of the cursor; it may be altered
      to give a common prefix for all matches.</dd>
  <dt id="QIPREFIX"><a class="permalink" href="#QIPREFIX"><b>QIPREFIX</b></a></dt>
  <dd>This parameter is read-only and contains the quoted string up to the word
      being completed. E.g. when completing `<b>&quot;foo</b>', this parameter
      contains the double quote. If the <b>-q</b> option of <b>compset</b> is
      used (see below), and the original string was `<b>&quot;foo bar</b>' with
      the cursor on the `<b>bar</b>', this parameter contains `<b>&quot;foo
      </b>'.</dd>
  <dt id="QISUFFIX"><a class="permalink" href="#QISUFFIX"><b>QISUFFIX</b></a></dt>
  <dd>Like <b>QIPREFIX</b>, but containing the suffix.</dd>
  <dt id="SUFFIX"><a class="permalink" href="#SUFFIX"><b>SUFFIX</b></a></dt>
  <dd>Initially this will be set to the part of the current word from the cursor
      position to the end; it may be altered to give a common suffix for all
      matches. It is most useful when the option <b>COMPLETE_IN_WORD</b> is set,
      as otherwise the whole word on the command line is treated as a
    prefix.</dd>
  <dt id="compstate"><a class="permalink" href="#compstate"><b>compstate</b></a></dt>
  <dd>This is an associative array with various keys and values that the
      completion code uses to exchange information with the completion widget.
      The keys are:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>all_quotes</b></dt>
  <dd>The <b>-q</b> option of the <b>compset</b> builtin command (see below)
      allows a quoted string to be broken into separate words; if the cursor is
      on one of those words, that word will be completed, possibly invoking
      `<b>compset -q</b>' recursively. With this key it is possible to test the
      types of quoted strings which are currently broken into parts in this
      fashion. Its value contains one character for each quoting level. The
      characters are a single quote or a double quote for strings quoted with
      these characters, a dollars sign for strings quoted with
      <b>$'</b><i>...</i><b>'</b> and a backslash for strings not starting with
      a quote character. The first character in the value always corresponds to
      the innermost quoting level.</dd>
  <dt id="context"><a class="permalink" href="#context"><b>context</b></a></dt>
  <dd>This will be set by the completion code to the overall context in which
      completion is attempted. Possible values are:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>array_value</b></dt>
  <dd>when completing inside the value of an array parameter assignment; in this
      case the <b>words</b> array contains the words inside the
    parentheses.</dd>
  <dt id="brace_parameter"><a class="permalink" href="#brace_parameter"><b>brace_parameter</b></a></dt>
  <dd>when completing the name of a parameter in a parameter expansion beginning
      with <b>${</b>. This context will also be set when completing parameter
      flags following <b>${(</b>; the full command line argument is presented
      and the handler must test the value to be completed to ascertain that this
      is the case.</dd>
  <dt id="assign_parameter"><a class="permalink" href="#assign_parameter"><b>assign_parameter</b></a></dt>
  <dd>when completing the name of a parameter in a parameter assignment.</dd>
  <dt id="command"><a class="permalink" href="#command"><b>command</b></a></dt>
  <dd>when completing for a normal command (either in command position or for an
      argument of the command).</dd>
  <dt id="condition"><a class="permalink" href="#condition"><b>condition</b></a></dt>
  <dd>when completing inside a `<b>[[</b>...<b>]]</b>' conditional expression;
      in this case the <b>words</b> array contains only the words inside the
      conditional expression.</dd>
  <dt id="math"><a class="permalink" href="#math"><b>math</b></a></dt>
  <dd>when completing in a mathematical environment such as a
      `<b>((</b>...<b>))</b>' construct.</dd>
  <dt id="parameter"><a class="permalink" href="#parameter"><b>parameter</b></a></dt>
  <dd>when completing the name of a parameter in a parameter expansion beginning
      with <b>$</b> but not <b>${</b>.</dd>
  <dt id="redirect"><a class="permalink" href="#redirect"><b>redirect</b></a></dt>
  <dd>when completing after a redirection operator.</dd>
  <dt id="subscript"><a class="permalink" href="#subscript"><b>subscript</b></a></dt>
  <dd>when completing inside a parameter subscript.</dd>
  <dt id="value"><a class="permalink" href="#value"><b>value</b></a></dt>
  <dd>when completing the value of a parameter assignment.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="exact"><a class="permalink" href="#exact"><b>exact</b></a></dt>
  <dd>Controls the behaviour when the <b>REC_EXACT</b> option is set. It will be
      set to <b>accept</b> if an exact match would be accepted, and will be
      unset otherwise.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If it was set when at least one match equal to the string on the
    line was generated, the match is accepted.</p>
</div>
<dl class="Bl-tag">
  <dt id="exact_string"><a class="permalink" href="#exact_string"><b>exact_string</b></a></dt>
  <dd>The string of an exact match if one was found, otherwise unset.</dd>
  <dt id="ignored"><a class="permalink" href="#ignored"><b>ignored</b></a></dt>
  <dd>The number of completions that were ignored because they matched one of
      the patterns given with the <b>-F</b> option to the <b>compadd</b> builtin
      command.</dd>
  <dt id="insert"><a class="permalink" href="#insert"><b>insert</b></a></dt>
  <dd>This controls the manner in which a match is inserted into the command
      line. On entry to the widget function, if it is unset the command line is
      not to be changed; if set to <b>unambiguous</b>, any prefix common to all
      matches is to be inserted; if set to <b>automenu-unambiguous</b>, the
      common prefix is to be inserted and the next invocation of the completion
      code may start menu completion (due to the <b>AUTO_MENU</b> option being
      set); if set to <b>menu</b> or <b>automenu</b> menu completion will be
      started for the matches currently generated (in the latter case this will
      happen because the <b>AUTO_MENU</b> is set). The value may also contain
      the string `<b>tab</b>' when the completion code would normally not really
      do completion, but only insert the TAB character.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">On exit it may be set to any of the values above (where setting it
    to the empty string is the same as unsetting it), or to a number, in which
    case the match whose number is given will be inserted into the command line.
    Negative numbers count backward from the last match (with `<b>-1</b>'
    selecting the last match) and out-of-range values are wrapped around, so
    that a value of zero selects the last match and a value one more than the
    maximum selects the first. Unless the value of this key ends in a space, the
    match is inserted as in a menu completion, i.e. without automatically
    appending a space.</p>
<p class="Pp">Both <b>menu</b> and <b>automenu</b> may also specify the number
    of the match to insert, given after a colon. For example, `<b>menu:2</b>'
    says to start menu completion, beginning with the second match.</p>
<p class="Pp">Note that a value containing the substring `<b>tab</b>' makes the
    matches generated be ignored and only the TAB be inserted.</p>
<p class="Pp">Finally, it may also be set to <b>all</b>, which makes all matches
    generated be inserted into the line.</p>
</div>
<dl class="Bl-tag">
  <dt id="insert_positions"><a class="permalink" href="#insert_positions"><b>insert_positions</b></a></dt>
  <dd>When the completion system inserts an unambiguous string into the line,
      there may be multiple places where characters are missing or where the
      character inserted differs from at least one match. The value of this key
      contains a colon separated list of all these positions, as indexes into
      the command line.</dd>
  <dt id="last_prompt"><a class="permalink" href="#last_prompt"><b>last_prompt</b></a></dt>
  <dd>If this is set to a non-empty string for every match added, the completion
      code will move the cursor back to the previous prompt after the list of
      completions has been displayed. Initially this is set or unset according
      to the <b>ALWAYS_LAST_PROMPT</b> option.</dd>
  <dt id="list"><a class="permalink" href="#list"><b>list</b></a></dt>
  <dd>This controls whether or how the list of matches will be displayed. If it
      is unset or empty they will never be listed; if its value begins with
      <b>list</b>, they will always be listed; if it begins with <b>autolist</b>
      or <b>ambiguous</b>, they will be listed when the <b>AUTO_LIST</b> or
      <b>LIST_AMBIGUOUS</b> options respectively would normally cause them to
      be.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the substring <b>force</b> appears in the value, this makes the
    list be shown even if there is only one match. Normally, the list would be
    shown only if there are at least two matches.</p>
<p class="Pp">The value contains the substring <b>packed</b> if the
    <b>LIST_PACKED</b> option is set. If this substring is given for all matches
    added to a group, this group will show the <b>LIST_PACKED</b> behavior. The
    same is done for the <b>LIST_ROWS_FIRST</b> option with the substring
    <b>rows</b>.</p>
<p class="Pp">Finally, if the value contains the string <b>explanations</b>,
    only the explanation strings, if any, will be listed and if it contains
    <b>messages</b>, only the messages (added with the <b>-x</b> option of
    <b>compadd</b>) will be listed. If it contains both <b>explanations</b> and
    <b>messages</b> both kinds of explanation strings will be listed. It will be
    set appropriately on entry to a completion widget and may be changed
  there.</p>
</div>
<dl class="Bl-tag">
  <dt id="list_lines"><a class="permalink" href="#list_lines"><b>list_lines</b></a></dt>
  <dd>This gives the number of lines that are needed to display the full list of
      completions. Note that to calculate the total number of lines to display
      you need to add the number of lines needed for the command line to this
      value, this is available as the value of the <b>BUFFERLINES</b> special
      parameter.</dd>
  <dt id="list_max"><a class="permalink" href="#list_max"><b>list_max</b></a></dt>
  <dd>Initially this is set to the value of the <b>LISTMAX</b> parameter. It may
      be set to any other value; when the widget exits this value will be used
      in the same way as the value of <b>LISTMAX</b>.</dd>
  <dt id="nmatches"><a class="permalink" href="#nmatches"><b>nmatches</b></a></dt>
  <dd>The number of matches added by the completion code so far.</dd>
  <dt id="old_insert"><a class="permalink" href="#old_insert"><b>old_insert</b></a></dt>
  <dd>On entry to the widget this will be set to the number of the match of an
      old list of completions that is currently inserted into the command line.
      If no match has been inserted, this is unset.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">As with <b>old_list</b>, the value of this key will only be used
    if it is the string <b>keep</b>. If it was set to this value by the widget
    and there was an old match inserted into the command line, this match will
    be kept and if the value of the <b>insert</b> key specifies that another
    match should be inserted, this will be inserted after the old one.</p>
</div>
<dl class="Bl-tag">
  <dt id="old_list"><a class="permalink" href="#old_list"><b>old_list</b></a></dt>
  <dd>This is set to <b>yes</b> if there is still a valid list of completions
      from a previous completion at the time the widget is invoked. This will
      usually be the case if and only if the previous editing operation was a
      completion widget or one of the builtin completion functions. If there is
      a valid list and it is also currently shown on the screen, the value of
      this key is <b>shown</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">After the widget has exited the value of this key is only used if
    it was set to <b>keep</b>. In this case the completion code will continue to
    use this old list. If the widget generated new matches, they will not be
    used.</p>
</div>
<dl class="Bl-tag">
  <dt id="parameter~2"><a class="permalink" href="#parameter~2"><b>parameter</b></a></dt>
  <dd>The name of the parameter when completing in a subscript or in the value
      of a parameter assignment.</dd>
  <dt id="pattern_insert"><a class="permalink" href="#pattern_insert"><b>pattern_insert</b></a></dt>
  <dd>Normally this is set to <b>menu</b>, which specifies that menu completion
      will be used whenever a set of matches was generated using
      <b>pattern_match</b> (see below). If it is set to any other non-empty
      string by the user and menu completion is not selected by other option
      settings, the code will instead insert any common prefix for the generated
      matches as with normal completion.</dd>
  <dt id="pattern_match"><a class="permalink" href="#pattern_match"><b>pattern_match</b></a></dt>
  <dd>Locally controls the behaviour given by the <b>GLOB_COMPLETE</b> option.
      Initially it is set to `<b>*</b>' if and only if the option is set. The
      completion widget may set it to this value, to an empty string (which has
      the same effect as unsetting it), or to any other non-empty string. If it
      is non-empty, unquoted metacharacters on the command line will be treated
      as patterns; if it is `<b>*</b>', then additionally a wildcard `<b>*</b>'
      is assumed at the cursor position; if it is empty or unset, metacharacters
      will be treated literally.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Note that the match specifications given to the <b>compadd</b>
    builtin command are not used if this is set to a non-empty string.</p>
</div>
<dl class="Bl-tag">
  <dt id="quote"><a class="permalink" href="#quote"><b>quote</b></a></dt>
  <dd>When completing inside quotes, this contains the quotation character (i.e.
      either a single quote, a double quote, or a backtick). Otherwise it is
      unset.</dd>
  <dt id="quoting"><a class="permalink" href="#quoting"><b>quoting</b></a></dt>
  <dd>When completing inside single quotes, this is set to the string
      <b>single</b>; inside double quotes, the string <b>double</b>; inside
      backticks, the string <b>backtick</b>. Otherwise it is unset.</dd>
  <dt id="redirect~2"><a class="permalink" href="#redirect~2"><b>redirect</b></a></dt>
  <dd>The redirection operator when completing in a redirection position, i.e.
      one of <b>&lt;</b>, <b>&gt;</b>, etc.</dd>
  <dt id="restore"><a class="permalink" href="#restore"><b>restore</b></a></dt>
  <dd>This is set to <b>auto</b> before a function is entered, which forces the
      special parameters mentioned above (<b>words</b>, <b>CURRENT</b>,
      <b>PREFIX</b>, <b>IPREFIX</b>, <b>SUFFIX</b>, and <b>ISUFFIX</b>) to be
      restored to their previous values when the function exits. If a function
      unsets it or sets it to any other string, they will not be restored.</dd>
  <dt id="to_end"><a class="permalink" href="#to_end"><b>to_end</b></a></dt>
  <dd>Specifies the occasions on which the cursor is moved to the end of a
      string when a match is inserted. On entry to a widget function, it may be
      <b>single</b> if this will happen when a single unambiguous match was
      inserted or <b>match</b> if it will happen any time a match is inserted
      (for example, by menu completion; this is likely to be the effect of the
      <b>ALWAYS_TO_END</b> option).</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">On exit, it may be set to <b>single</b> as above. It may also be
    set to <b>always</b>, or to the empty string or unset; in those cases the
    cursor will be moved to the end of the string always or never respectively.
    Any other string is treated as <b>match</b>.</p>
</div>
<dl class="Bl-tag">
  <dt id="unambiguous"><a class="permalink" href="#unambiguous"><b>unambiguous</b></a></dt>
  <dd>This key is read-only and will always be set to the common (unambiguous)
      prefix the completion code has generated for all matches added so
    far.</dd>
  <dt id="unambiguous_cursor"><a class="permalink" href="#unambiguous_cursor"><b>unambiguous_cursor</b></a></dt>
  <dd>This gives the position the cursor would be placed at if the common prefix
      in the <b>unambiguous</b> key were inserted, relative to the value of that
      key. The cursor would be placed before the character whose index is given
      by this key.</dd>
  <dt id="unambiguous_positions"><a class="permalink" href="#unambiguous_positions"><b>unambiguous_positions</b></a></dt>
  <dd>This contains all positions where characters in the unambiguous string are
      missing or where the character inserted differs from at least one of the
      matches. The positions are given as indexes into the string given by the
      value of the <b>unambiguous</b> key.</dd>
  <dt id="vared"><a class="permalink" href="#vared"><b>vared</b></a></dt>
  <dd>If completion is called while editing a line using the <b>vared</b>
      builtin, the value of this key is set to the name of the parameter given
      as an argument to <b>vared</b>. This key is only set while a <b>vared</b>
      command is active.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="words"><a class="permalink" href="#words"><b>words</b></a></dt>
  <dd>This array contains the words present on the command line currently being
      edited.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPLETION_BUILTIN_COMMANDS"><a class="permalink" href="#COMPLETION_BUILTIN_COMMANDS">COMPLETION
  BUILTIN COMMANDS</a></h1>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>compadd </b>[ <b>-akqQfenUl12C</b> ] [ <b>-F</b> <i>array</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-P</b> <i>prefix</i> ] [ <b>-S</b> <i>suffix</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-p</b> <i>hidden-prefix</i> ] [ <b>-s</b> <i>hidden-suffix</i>
    ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-i</b> <i>ignored-prefix</i> ] [ <b>-I</b>
    <i>ignored-suffix</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-W</b> <i>file-prefix</i> ] [ <b>-d</b> <i>array</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-J</b> <i>group-name</i> ] [ <b>-X</b> <i>explanation</i> ] [
    <b>-x</b> <i>message</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-V</b> <i>group-name</i> ] [ <b>-o</b> [ <i>order</i> ] ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-r</b> <i>remove-chars</i> ] [ <b>-R</b> <i>remove-func</i>
    ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-D</b> <i>array</i> ] [ <b>-O</b> <i>array</i> ] [ <b>-A</b>
    <i>array</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-E</b> <i>number</i> ]</dt>
  <dd></dd>
  <dt><b> </b>[<b>-M</b> <i>match-spec</i> ] [ <b>-</b><b>-</b> ] [
    <i>completions</i> ... ]</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This builtin command can be used to add matches directly and
    control all the information the completion code stores with each possible
    completion. The return status is zero if at least one match was added and
    non-zero if no matches were added.</p>
<p class="Pp">The completion code breaks each match into seven fields in the
    order:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><i>&lt;ipre&gt;&lt;apre&gt;&lt;hpre&gt;&lt;body&gt;&lt;hsuf&gt;&lt;asuf&gt;&lt;isuf&gt;</i></pre>
</div>
<p class="Pp">The first field is an ignored prefix taken from the command line,
    the contents of the <b>IPREFIX</b> parameter plus the string given with the
    <b>-i</b> option. With the <b>-U</b> option, only the string from the
    <b>-i</b> option is used. The field <i>&lt;apre&gt;</i> is an optional
    prefix string given with the <b>-P</b> option. The <i>&lt;hpre&gt;</i> field
    is a string that is considered part of the match but that should not be
    shown when listing completions, given with the <b>-p</b> option; for
    example, functions that do filename generation might specify a common path
    prefix this way. <i>&lt;body&gt;</i> is the part of the match that should
    appear in the list of matches shown to the user. The suffixes
    <i>&lt;hsuf&gt;</i>, <i>&lt;asuf&gt;</i> and <i>&lt;isuf&gt;</i> correspond
    to the prefixes <i>&lt;hpre&gt;</i>, <i>&lt;apre&gt;</i> and
    <i>&lt;ipre&gt;</i> and are given by the options <b>-s</b>, <b>-S</b> and
    <b>-I</b>, respectively.</p>
<p class="Pp">The supported flags are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-P</b> <i>prefix</i></dt>
  <dd>This gives a string to be inserted before each match. The string given is
      not considered as part of the match and any shell metacharacters in it
      will not be quoted when the string is inserted.</dd>
  <dt id="S"><a class="permalink" href="#S"><b>-S</b> <i>suffix</i></a></dt>
  <dd>Like <b>-P</b>, but gives a string to be inserted after each match.</dd>
  <dt id="p"><a class="permalink" href="#p"><b>-p</b>
    <i>hidden-prefix</i></a></dt>
  <dd>This gives a string that should be inserted before each match but that
      should not appear in the list of matches. Unless the <b>-U</b> option is
      given, this string must be matched as part of the string on the command
      line.</dd>
  <dt id="s"><a class="permalink" href="#s"><b>-s</b>
    <i>hidden-suffix</i></a></dt>
  <dd>Like `<b>-p</b>', but gives a string to insert after each match.</dd>
  <dt id="i"><a class="permalink" href="#i"><b>-i</b>
    <i>ignored-prefix</i></a></dt>
  <dd>This gives a string to insert just before any string given with the
      `<b>-P</b>' option. Without `<b>-P</b>' the string is inserted before the
      string given with `<b>-p</b>' or directly before each match.</dd>
  <dt id="I"><a class="permalink" href="#I"><b>-I</b>
    <i>ignored-suffix</i></a></dt>
  <dd>Like <b>-i</b>, but gives an ignored suffix.</dd>
  <dt id="a"><a class="permalink" href="#a"><b>-a</b></a></dt>
  <dd>With this flag the <i>completions</i> are taken as names of arrays and the
      actual completions are their values. If only some elements of the arrays
      are needed, the <i>completions</i> may also contain subscripts, as in
      `<b>foo[2,-1]</b>'.</dd>
  <dt id="k"><a class="permalink" href="#k"><b>-k</b></a></dt>
  <dd>With this flag the <i>completions</i> are taken as names of associative
      arrays and the actual completions are their keys. As for <b>-a</b>, the
      <i>words</i> may also contain subscripts, as in
    `<b>foo[(R)*bar*]</b>'.</dd>
  <dt id="d"><a class="permalink" href="#d"><b>-d</b> <i>array</i></a></dt>
  <dd>This adds per-completion display strings. The <i>array</i> should contain
      one element per <i>completion</i> given. The completion code will then
      display the first element instead of the first <i>completion</i>, and so
      on. The <i>array</i> may be given as the name of an array parameter or
      directly as a space-separated list of words in parentheses.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If there are fewer display strings than <i>completions</i>, the
    leftover <i>completions</i> will be displayed unchanged and if there are
    more display strings than <i>completions</i>, the leftover display strings
    will be silently ignored.</p>
</div>
<dl class="Bl-tag">
  <dt id="l"><a class="permalink" href="#l"><b>-l</b></a></dt>
  <dd>This option only has an effect if used together with the <b>-d</b> option.
      If it is given, the display strings are listed one per line, not arrayed
      in columns.</dd>
  <dt id="o"><a class="permalink" href="#o"><b>-o</b> [ <i>order</i> ]</a></dt>
  <dd>This controls the order in which matches are sorted. <i>order</i> is a
      comma-separated list comprising the following possible values. These
      values can be abbreviated to their initial two or three characters. Note
      that the order forms part of the group name space so matches with
      different orderings will not be in the same group.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>match</b></dt>
  <dd>If given, the order of the output is determined by the match strings;
      otherwise it is determined by the display strings (i.e. the strings given
      by the <b>-d</b> option). This is the default if `<b>-o</b>' is specified
      but the <i>order</i> argument is omitted.</dd>
  <dt id="nosort"><a class="permalink" href="#nosort"><b>nosort</b></a></dt>
  <dd>This specifies that the <i>completions</i> are pre-sorted and their order
      should be preserved. This value only makes sense alone and cannot be
      combined with any others.</dd>
  <dt id="numeric"><a class="permalink" href="#numeric"><b>numeric</b></a></dt>
  <dd>If the matches include numbers, sort them numerically rather than
      lexicographically.</dd>
  <dt id="reverse"><a class="permalink" href="#reverse"><b>reverse</b></a></dt>
  <dd>Arrange the matches backwards by reversing the sort ordering.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt id="J"><a class="permalink" href="#J"><b>-J</b> <i>group-name</i></a></dt>
  <dd>Gives the name of the group that the matches should be stored in.</dd>
  <dt id="V"><a class="permalink" href="#V"><b>-V</b> <i>group-name</i></a></dt>
  <dd>Like <b>-J</b> but naming an unsorted group. This option is identical to
      the combination of <b>-J</b> and <b>-o nosort</b>.</dd>
  <dt><b>-1</b></dt>
  <dd>If given together with the <b>-V</b> option, makes only consecutive
      duplicates in the group be removed. If combined with the <b>-J</b> option,
      this has no visible effect. Note that groups with and without this flag
      are in different name spaces.</dd>
  <dt><b>-2</b></dt>
  <dd>If given together with the <b>-J</b> or <b>-V</b> option, makes all
      duplicates be kept. Again, groups with and without this flag are in
      different name spaces.</dd>
  <dt id="X"><a class="permalink" href="#X"><b>-X</b>
    <i>explanation</i></a></dt>
  <dd>The <i>explanation</i> string will be printed with the list of matches,
      above the group currently selected.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Within the <i>explanation</i>, the following sequences may be used
    to specify output attributes as described in the section EXPANSION OF PROMPT
    SEQUENCES in <i>zshmisc</i>(1): `<b>%B</b>', `<b>%S</b>', `<b>%U</b>',
    `<b>%F</b>', `<b>%K</b>' and their lower case counterparts, as well as
    `<b>%{</b>...<b>%}</b>'. `<b>%F</b>', `<b>%K</b>' and
    `<b>%{</b>...<b>%}</b>' take arguments in the same form as prompt expansion.
    (Note that the sequence `<b>%G</b>' is not available; an argument to
    `<b>%{</b>' should be used instead.) The sequence `<b>%%</b>' produces a
    literal `<b>%</b>'.</p>
<p class="Pp">These sequences are most often employed by users when customising
    the <b>format</b> style (see <i>zshcompsys</i>(1)), but they must also be
    taken into account when writing completion functions, as passing
    descriptions with unescaped `<b>%</b>' characters to utility functions such
    as <b>_arguments</b> and <b>_message</b> may produce unexpected results. If
    arbitrary text is to be passed in a description, it can be escaped using
    e.g. <b>${my_str//\%/%%}</b>.</p>
</div>
<dl class="Bl-tag">
  <dt id="x"><a class="permalink" href="#x"><b>-x</b> <i>message</i></a></dt>
  <dd>Like <b>-X</b>, but the <i>message</i> will be printed even if there are
      no matches in the group.</dd>
  <dt id="q"><a class="permalink" href="#q"><b>-q</b></a></dt>
  <dd>The suffix given with <b>-S</b> will be automatically removed if the next
      character typed is a blank or does not insert anything, or if the suffix
      consists of only one character and the next character typed is the same
      character.</dd>
  <dt id="r"><a class="permalink" href="#r"><b>-r</b>
    <i>remove-chars</i></a></dt>
  <dd>This is a more versatile form of the <b>-q</b> option. The suffix given
      with <b>-S</b> or the slash automatically added after completing
      directories will be automatically removed if the next character typed
      inserts one of the characters given in the <i>remove-chars</i>. This
      string is parsed as a characters class and understands the backslash
      sequences used by the <b>print</b> command. For example, `<b>-r
      &quot;a-z\t&quot;</b>' removes the suffix if the next character typed
      inserts a lower case character or a TAB, and `<b>-r &quot;^0-9&quot;</b>'
      removes the suffix if the next character typed inserts anything but a
      digit. One extra backslash sequence is understood in this string:
      `<b>\-</b>' stands for all characters that insert nothing. Thus `<b>-S
      &quot;=&quot; -q</b>' is the same as `<b>-S &quot;=&quot; -r &quot;=
      \t\n\-&quot;</b>'.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">This option may also be used without the <b>-S</b> option; then
    any automatically added space will be removed when one of the characters in
    the list is typed.</p>
</div>
<dl class="Bl-tag">
  <dt id="R"><a class="permalink" href="#R"><b>-R</b>
    <i>remove-func</i></a></dt>
  <dd>This is another form of the <b>-r</b> option. When a match has been
      accepted and a suffix has been inserted, the function <i>remove-func</i>
      will be called after the next character typed. It is passed the length of
      the suffix as an argument and can use the special parameters available in
      ordinary (non-completion) zle widgets (see <i>zshzle</i>(1)) to analyse
      and modify the command line.</dd>
  <dt id="f"><a class="permalink" href="#f"><b>-f</b></a></dt>
  <dd>If this flag is given, all of the matches built from the
      <i>completions</i> are marked as being the names of files. They are not
      required to be actual filenames, but if they are, and the option
      <b>LIST_TYPES</b> is set, the characters describing the types of the files
      in the completion lists will be shown. This also forces a slash to be
      added when the name of a directory is completed.</dd>
  <dt id="e"><a class="permalink" href="#e"><b>-e</b></a></dt>
  <dd>This flag can be used to tell the completion code that the matches added
      are parameter names for a parameter expansion. This will make the
      <b>AUTO_PARAM_SLASH</b> and <b>AUTO_PARAM_KEYS</b> options be used for the
      matches.</dd>
  <dt id="W"><a class="permalink" href="#W"><b>-W</b>
    <i>file-prefix</i></a></dt>
  <dd>This string is a pathname that will be prepended to each match together
      with any prefix specified by the <b>-p</b> option to form a complete
      filename for testing. Hence it is only useful if combined with the
      <b>-f</b> flag, as the tests will not otherwise be performed.</dd>
  <dt id="F"><a class="permalink" href="#F"><b>-F</b> <i>array</i></a></dt>
  <dd>Specifies an array containing patterns. <i>completions</i> that match one
      of these patterns are ignored, that is, not considered to be matches.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The <i>array</i> may be the name of an array parameter or a list
    of literal patterns enclosed in parentheses and quoted, as in `<b>-F
    &quot;(*?.o</b> <b>*?.h)&quot;</b>'. If the name of an array is given, the
    elements of the array are taken as the patterns.</p>
</div>
<dl class="Bl-tag">
  <dt id="Q"><a class="permalink" href="#Q"><b>-Q</b></a></dt>
  <dd>This flag instructs the completion code not to quote any metacharacters in
      the matches when inserting them into the command line.</dd>
  <dt id="M"><a class="permalink" href="#M"><b>-M</b> <i>match-spec</i></a></dt>
  <dd>This gives local match specifications as described below in the section
      `Completion Matching Control'. This option may be given more than once. In
      this case all <i>match-spec</i>s given are concatenated with spaces
      between them to form the specification string to use. Note that they will
      only be used if the <b>-U</b> option is not given.</dd>
  <dt id="n"><a class="permalink" href="#n"><b>-n</b></a></dt>
  <dd>Specifies that matching <i>completions</i> are to be added to the set of
      matches, but are not to be listed to the user.</dd>
  <dt id="U"><a class="permalink" href="#U"><b>-U</b></a></dt>
  <dd>If this flag is given, all <i>completions</i> are added to the set of
      matches and no matching will be done by the completion code. Normally this
      is used in functions that do the matching themselves.</dd>
  <dt id="O"><a class="permalink" href="#O"><b>-O</b> <i>array</i></a></dt>
  <dd>If this option is given, the <i>completions</i> are <i>not</i> added to
      the set of matches. Instead, matching is done as usual and all of the
      <i>completions</i> that match will be stored in the array parameter whose
      name is given as <i>array</i>.</dd>
  <dt id="A"><a class="permalink" href="#A"><b>-A</b> <i>array</i></a></dt>
  <dd>As the <b>-O</b> option, except that instead of those of the
      <i>completions</i> which match being stored in <i>array</i>, the strings
      generated internally by the completion code are stored. For example, with
      a match specification of `<b>-M &quot;L:|no=&quot;</b>', a current word of
      `<b>nof</b>' and <i>completions</i> of `<b>foo</b>', this option stores
      the string `<b>nofoo</b>' in the array, whereas the <b>-O</b> option
      stores the `<b>foo</b>' originally given.</dd>
  <dt id="D"><a class="permalink" href="#D"><b>-D</b> <i>array</i></a></dt>
  <dd>As with <b>-O</b>, the <i>completions</i> are not added to the set of
      matches. Instead, whenever the <i>n</i>th <i>completion</i> does not
      match, the <i>n</i>th element of the <i>array</i> is removed. Elements for
      which the corresponding <i>completion</i> matches are retained. This
      option can be used more than once to remove elements from multiple
    arrays.</dd>
  <dt id="C"><a class="permalink" href="#C"><b>-C</b></a></dt>
  <dd>This option adds a special match which expands to all other matches when
      inserted into the line, even those that are added after this option is
      used. Together with the <b>-d</b> option it is possible to specify a
      string that should be displayed in the list for this special match. If no
      string is given, it will be shown as a string containing the strings that
      would be inserted for the other matches, truncated to the width of the
      screen.</dd>
  <dt id="E"><a class="permalink" href="#E"><b>-E</b> <i>number</i></a></dt>
  <dd>This option adds <i>number</i> empty matches after matching
      <i>completions</i> have been added. An empty match takes up space in
      completion listings but will never be inserted in the line and can't be
      selected with menu completion or menu selection. This makes empty matches
      only useful to format completion lists and to make explanatory string be
      shown in completion lists (since empty matches can be given display
      strings with the <b>-d</b> option). And because all but one empty string
      would otherwise be removed, this option implies the <b>-V</b> and
      <b>-2</b> options (even if an explicit <b>-J</b> option is given). This
      can be important to note as it affects the name space into which matches
      are added.</dd>
  <dt><b>-</b></dt>
  <dd></dd>
  <dt><b>-</b><b>-</b></dt>
  <dd>This flag ends the list of flags and options. All arguments after it will
      be taken as the <i>completions</i> even if they begin with hyphens.</dd>
</dl>
<p class="Pp">Except for the <b>-M</b> flag, if any of these flags is given more
    than once, the first one (and its argument) will be used.</p>
</div>
<dl class="Bl-tag">
  <dt><b>compset -p</b> <i>number</i></dt>
  <dd></dd>
  <dt><b>compset -P</b> [ <i>number</i> ] <i>pattern</i></dt>
  <dd></dd>
  <dt><b>compset -s</b> <i>number</i></dt>
  <dd></dd>
  <dt><b>compset -S</b> [ <i>number</i> ] <i>pattern</i></dt>
  <dd></dd>
  <dt><b>compset -n</b> <i>begin</i> [ <i>end</i> ]</dt>
  <dd></dd>
  <dt><b>compset -N</b> <i>beg-pat</i> [ <i>end-pat</i> ]</dt>
  <dd></dd>
  <dt><b>compset -q</b></dt>
  <dd>This command simplifies modification of the special parameters, while its
      return status allows tests on them to be carried out.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The options are:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-p</b> <i>number</i></dt>
  <dd>If the value of the <b>PREFIX</b> parameter is at least <i>number</i>
      characters long, the first <i>number</i> characters are removed from it
      and appended to the contents of the <b>IPREFIX</b> parameter.</dd>
  <dt id="P"><a class="permalink" href="#P"><b>-P</b> [ <i>number</i> ]
    <i>pattern</i></a></dt>
  <dd>If the value of the <b>PREFIX</b> parameter begins with anything that
      matches the <i>pattern</i>, the matched portion is removed from
      <b>PREFIX</b> and appended to <b>IPREFIX</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Without the optional <i>number</i>, the longest match is taken,
    but if <i>number</i> is given, anything up to the <i>number</i>th match is
    moved. If the <i>number</i> is negative, the <i>number</i>th longest match
    is moved. For example, if <b>PREFIX</b> contains the string `<b>a=b=c</b>',
    then <b>compset -P '*\='</b> will move the string `<b>a=b=</b>' into the
    <b>IPREFIX</b> parameter, but <b>compset -P 1 '*\='</b> will move only the
    string `<b>a=</b>'.</p>
</div>
<dl class="Bl-tag">
  <dt id="s~2"><a class="permalink" href="#s~2"><b>-s</b> <i>number</i></a></dt>
  <dd>As <b>-p</b>, but transfer the last <i>number</i> characters from the
      value of <b>SUFFIX</b> to the front of the value of <b>ISUFFIX</b>.</dd>
  <dt id="S~2"><a class="permalink" href="#S~2"><b>-S</b> [ <i>number</i> ]
    <i>pattern</i></a></dt>
  <dd>As <b>-P</b>, but match the last portion of <b>SUFFIX</b> and transfer the
      matched portion to the front of the value of <b>ISUFFIX</b>.</dd>
  <dt id="n~2"><a class="permalink" href="#n~2"><b>-n</b> <i>begin</i> [
    <i>end</i> ]</a></dt>
  <dd>If the current word position as specified by the parameter <b>CURRENT</b>
      is greater than or equal to <i>begin</i>, anything up to the
      <i>begin</i>th word is removed from the <b>words</b> array and the value
      of the parameter <b>CURRENT</b> is decremented by <i>begin</i>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the optional <i>end</i> is given, the modification is done only
    if the current word position is also less than or equal to <i>end</i>. In
    this case, the words from position <i>end</i> onwards are also removed from
    the <b>words</b> array.</p>
<p class="Pp">Both <i>begin</i> and <i>end</i> may be negative to count
    backwards from the last element of the <b>words</b> array.</p>
</div>
<dl class="Bl-tag">
  <dt id="N"><a class="permalink" href="#N"><b>-N</b> <i>beg-pat</i> [
    <i>end-pat</i> ]</a></dt>
  <dd>If one of the elements of the <b>words</b> array before the one at the
      index given by the value of the parameter <b>CURRENT</b> matches the
      pattern <i>beg-pat</i>, all elements up to and including the matching one
      are removed from the <b>words</b> array and the value of <b>CURRENT</b> is
      changed to point to the same word in the changed array.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If the optional pattern <i>end-pat</i> is also given, and there is
    an element in the <b>words</b> array matching this pattern, the parameters
    are modified only if the index of this word is higher than the one given by
    the <b>CURRENT</b> parameter (so that the matching word has to be after the
    cursor). In this case, the words starting with the one matching
    <b>end-pat</b> are also removed from the <b>words</b> array. If <b>words</b>
    contains no word matching <i>end-pat</i>, the testing and modification is
    performed as if it were not given.</p>
</div>
<dl class="Bl-tag">
  <dt id="q~2"><a class="permalink" href="#q~2"><b>-q</b></a></dt>
  <dd>The word currently being completed is split on spaces into separate words,
      respecting the usual shell quoting conventions. The resulting words are
      stored in the <b>words</b> array, and <b>CURRENT</b>, <b>PREFIX</b>,
      <b>SUFFIX</b>, <b>QIPREFIX</b>, and <b>QISUFFIX</b> are modified to
      reflect the word part that is completed.</dd>
</dl>
<p class="Pp">In all the above cases the return status is zero if the test
    succeeded and the parameters were modified and non-zero otherwise. This
    allows one to use this builtin in tests such as:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>if compset -P '*\='; then ...</b></pre>
</div>
<p class="Pp">This forces anything up to and including the last equal sign to be
    ignored by the completion code.</p>
</div>
<dl class="Bl-tag">
  <dt id="compcall"><a class="permalink" href="#compcall"><b>compcall</b> [
    <b>-TD</b> ]</a></dt>
  <dd>This allows the use of completions defined with the <b>compctl</b> builtin
      from within completion widgets. The list of matches will be generated as
      if one of the non-widget completion functions (<b>complete-word</b>, etc.)
      had been called, except that only <b>compctl</b>s given for specific
      commands are used. To force the code to try completions defined with the
      <b>-T</b> option of <b>compctl</b> and/or the default completion (whether
      defined by <b>compctl -D</b> or the builtin default) in the appropriate
      places, the <b>-T</b> and/or <b>-D</b> flags can be passed to
      <b>compcall</b>.</dd>
</dl>
<div class="Bd-indent">
<p class="Pp">The return status can be used to test if a matching <b>compctl</b>
    definition was found. It is non-zero if a <b>compctl</b> was found and zero
    otherwise.</p>
<p class="Pp">Note that this builtin is defined by the <b>zsh/compctl</b>
    module.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPLETION_CONDITION_CODES"><a class="permalink" href="#COMPLETION_CONDITION_CODES">COMPLETION
  CONDITION CODES</a></h1>
<p class="Pp">The following additional condition codes for use within the
    <b>[[</b> <i>...</i> <b>]]</b> construct are available in completion
    widgets. These work on the special parameters. All of these tests can also
    be performed by the <b>compset</b> builtin, but in the case of the condition
    codes the contents of the special parameters are not modified.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>-prefix</b> [ <i>number</i> ] <i>pattern</i></dt>
  <dd>true if the test for the <b>-P</b> option of <b>compset</b> would
    succeed.</dd>
  <dt id="suffix"><a class="permalink" href="#suffix"><b>-suffix</b> [
    <i>number</i> ] <i>pattern</i></a></dt>
  <dd>true if the test for the <b>-S</b> option of <b>compset</b> would
    succeed.</dd>
  <dt id="after"><a class="permalink" href="#after"><b>-after</b>
    <i>beg-pat</i></a></dt>
  <dd>true if the test of the <b>-N</b> option with only the <i>beg-pat</i>
      given would succeed.</dd>
  <dt id="between"><a class="permalink" href="#between"><b>-between</b>
    <i>beg-pat end-pat</i></a></dt>
  <dd>true if the test for the <b>-N</b> option with both patterns would
      succeed.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPLETION_MATCHING_CONTROL"><a class="permalink" href="#COMPLETION_MATCHING_CONTROL">COMPLETION
  MATCHING CONTROL</a></h1>
<p class="Pp">When the user invokes completion, the current <i>word</i> on the
    command line (that is, the word the cursor is currently on) is used to
    generate a <i>match</i> <i>pattern</i>. Only those <i>completions</i> that
    match the pattern are offered to the user as <i>matches</i>.</p>
<p class="Pp">The default match pattern is generated from the current word by
    either</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>appending a `<b>*</b>' (matching any number of characters in a completion)
      <i>or,</i></dd>
  <dt>&#x2022;</dt>
  <dd>if the shell option <b>COMPLETE_IN_WORD</b> is set, inserting a `<b>*</b>'
      at the cursor position.</dd>
</dl>
<p class="Pp">This narrow pattern can be broadened selectively by passing a
    <i>match</i> <i>specification</i> to the <b>compadd</b> builtin command
    through its <b>-M</b> option (see `Completion Builtin Commands' above). A
    match specification consists of one or more <i>matchers</i> separated by
    whitespace. Matchers in a match specification are applied one at a time,
    from left to right. Once all matchers have been applied, completions are
    compared to the final match pattern and non-matching ones are discarded.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Note that the <b>-M</b> option is ignored if the current word contains a
      glob pattern and the shell option <b>GLOB_COMPLETE</b> is set or if the
      <b>pattern_match</b> key of the special associative array <b>compstate</b>
      is set to a non-empty value (see `Completion Special Parameters'
    above).</dd>
  <dt>&#x2022;</dt>
  <dd>Users of the completion system (see <i>zshcompsys</i>(1)) should generally
      not use the <b>-M</b> option directly, but rather use the
      <b>matcher-list</b> and <b>matcher</b> styles (see the subsection
      <i>Standard Styles</i> in the documentation for COMPLETION SYSTEM
      CONFIGURATION in <i>zshcompsys</i>(1)).</dd>
</dl>
<p class="Pp">Each matcher consists of</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>a case-sensitive letter</dd>
  <dt>&#x2022;</dt>
  <dd>a `<b>:</b>',</dd>
  <dt>&#x2022;</dt>
  <dd>one or more patterns separated by pipes (`<b>|</b>'),</dd>
  <dt>&#x2022;</dt>
  <dd>an equals sign (`<b>=</b>'), and</dd>
  <dt>&#x2022;</dt>
  <dd>another pattern.</dd>
</dl>
<p class="Pp">The patterns before the `<b>=</b>' are used to match substrings of
    the current word. For each matched substring, the corresponding part of the
    match pattern is broadened with the pattern after the `<b>=</b>', by means
    of a logical <b>OR</b>.</p>
<p class="Pp">Each pattern in a matcher cosists of either</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>the empty string or</dd>
  <dt>&#x2022;</dt>
  <dd>a sequence of</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>literal characters (which may be quoted with a `<b>\</b>'),</dd>
  <dt>&#x2022;</dt>
  <dd>question marks (`<b>?</b>'),</dd>
  <dt>&#x2022;</dt>
  <dd>bracket expressions (`<b>[...]</b>'; see the subsection <i>Glob
      Operators</i> in the documentation for GLOB OPERATORS in
      <i>zshexpn</i>(1)), and/or</dd>
  <dt>&#x2022;</dt>
  <dd>brace expressions (see below).
    <p class="Pp"></p>
  </dd>
</dl>
</div>
<p class="Pp">Other shell patterns are not allowed.</p>
<p class="Pp">A brace expression, like a bracket expression, consists of a list
    of</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>literal characters,</dd>
  <dt>&#x2022;</dt>
  <dd>ranges (`<b>0-9</b>'), and/or</dd>
  <dt>&#x2022;</dt>
  <dd>character classes (`<b>[:</b><i>name</i><b>:]</b>').</dd>
</dl>
<p class="Pp">However, they differ from each other as follows:</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>A brace expression is delimited by a pair of braces (`<b>{...}</b>').</dd>
  <dt>&#x2022;</dt>
  <dd>Brace expressions do not support negations. That is, an initial `<b>!</b>'
      or `<b>^</b>' has no special meaning and will be interpreted as a literal
      character.</dd>
  <dt>&#x2022;</dt>
  <dd>When a character in the current word matches the <i>n</i>th pattern in a
      brace expression, the corresponding part of the match pattern is broadened
      only with the <i>n</i>th pattern of the brace expression on the other side
      of the `<b>=</b>', if there is one; if there is no brace expression on the
      other side, then this pattern is the empty string. However, if either
      brace expression has more elements than the other, then the excess entries
      are simply ignored. When comparing indexes, each literal character or
      character class counts as one element, but each range is instead expanded
      to the full list of literal characters it represents. Additionally, if on
      <i>both</i> sides of the `<b>=</b>', the <i>n</i>th pattern is
      `<b>[:upper:]</b>' or `<b>[:lower:]</b>', then these are expanded as
      ranges, too.</dd>
</dl>
<p class="Pp">Note that, although the matching system does not yet handle
    multibyte characters, this is likely to be a future extension. Hence, using
    `<b>[:upper:]</b>' and `<b>[:lower:]</b>' is recommended over `<b>A-Z</b>'
    and `<b>a-z</b>'.</p>
<p class="Pp">Below are the different forms of matchers supported. Each
    <i>uppercase</i> form behaves exactly like its lowercase counterpart, but
    adds an additional step <i>after</i> the match pattern has filtered out
    non-matching completions: Each of a match's substrings that was matched by a
    subpattern from an uppercase matcher is replaced with the corresponding
    substring of the current word. However, patterns from <i>lowercase</i>
    matchers have higher weight: If a substring of the current word was matched
    by patterns from both a lowercase and an uppercase matcher, then the
    lowercase matcher's pattern wins and the corresponding part of the match is
    not modified.</p>
<p class="Pp">Unless indicated otherwise, each example listed assumes
    <b>COMPLETE_IN_WORD</b> to be unset (as it is by default).</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>m:</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>M:</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For each substring of the current word that matches
    <i>word-pat</i>, broaden the corresponding part of the match pattern to
    additionally match <i>match-pat</i>.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>Examples:</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp"><b>m:{[:lower:]}={[:upper:]}</b> lets any lower case character in
    the current word be completed to itself or its uppercase counterpart. So,
    the completions `<b>foo</b>', `<b>FOO</b>' and `<b>Foo</b>' will are be
    considered matches for the word `<b>fo</b>'.</p>
<p class="Pp"><b>M:_=</b> inserts every underscore from the current word into
    each match, in the same relative position, determined by matching the
    substrings around it. So, given a completion `<b>foo</b>', the word
    `<b>f_o</b>' will be completed to the match `<b>f_oo</b>', even though the
    latter was not present as a completion.</p>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>b:</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>B:</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>e:</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>E:</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For each consecutive substring at the <b>b:</b>eginning or
    <b>e:</b>nd of the current word that matches <i>word-pat</i>, broaden the
    corresponding part of the match pattern to additionally match
    <i>match-pat</i>.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>Examples:</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">`<b>b:-=+</b>' lets any number of minuses at the start of the
    current word be completed to a minus or a plus.</p>
<p class="Pp">`<b>B:0=</b>' adds all zeroes at the beginning of the current word
    to the beginning of each match.</p>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>l:</b><b>|</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>L:</b><b>|</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>R:</b><i>word-pat</i><b>|</b><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>r:</b><i>word-pat</i><b>|</b><b>=</b><i>match-pat</i></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">If there is a substring at the <b>l:</b>eft or <b>r:</b>ight edge
    of the current word that matches <i>word-pat</i>, then broaden the
    corresponding part of the match pattern to additionally match
    <i>match-pat</i>.</p>
<p class="Pp">For each <b>l:</b>, <b>L:</b>, <b>r:</b> and <b>R:</b> matcher
    (including the ones below), the pattern <i>match-pat</i> may also be a
    `<b>*</b>'. This matches any number of characters in a completion.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>Examples:</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">`<b>r:|=*</b>' appends a `<b>*</b>' to the match pattern, even
    when <b>COMPLETE_IN_WORD</b> is set and the cursor is not at the end of the
    current word.</p>
<p class="Pp">If the current word starts with a minus, then `<b>L:|-=</b>' will
    prepend it to each match.</p>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>l:</b><i>anchor</i><b>|</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>L:</b><i>anchor</i><b>|</b><i>word-pat</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>r:</b><i>word-pat</i><b>|</b><i>anchor</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>R:</b><i>word-pat</i><b>|</b><i>anchor</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For each substring of the current word that matches
    <i>word-pat</i> and has on its <b>l:</b>eft or <b>r:</b>ight another
    substring matching <i>anchor</i>, broaden the corresponding part of the
    match pattern to additionally match <i>match-pat</i>.</p>
<p class="Pp">Note that these matchers (and the ones below) modify only what is
    matched by <i>word-pat</i>; they do not change the matching behavior of what
    is matched by <i>anchor</i> (or <i>coanchor</i>; see the matchers below).
    Thus, unless its corresponding part of the match pattern has been modified,
    the anchor in the current word has to match literally in each completion,
    just like any other substring of the current word.</p>
<p class="Pp">If a matcher includes at least one anchor (which includes the
    matchers with two anchors, below), then <i>match-pat</i> may also be
    `<b>*</b>' or `<b>**</b>'. `<b>*</b>' can match any part of a completion
    that does not contain any substrings matching <i>anchor</i>, whereas a
    `<b>**</b>' can match any part of a completion, period. (Note that this is
    different from the behavior of `<b>*</b>' in the anchorless forms of
    `<b>l:</b>' and `<b>r:</b>' and and also different from `<b>*</b>' and
    `<b>**</b>' in glob expressions.)</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>Examples:</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">`<b>r:|.=*</b>' makes the completion `<b>comp.sources.unix</b>' a
    match for the word `<b>..u</b>' -- but <i>not</i> for the word
  `<b>.u</b>'.</p>
<p class="Pp">Given a completion `<b>-</b><b>-foo</b>', the matcher
    `<b>L:--|no-=</b>' will complete the word `<b>-</b><b>-no-</b>' to the match
    `<b>-</b><b>-no-foo</b>'.</p>
</div>
</div>
<dl class="Bl-tag">
  <dt><b>l:</b><i>anchor</i><b>||</b><i>coanchor</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>L:</b><i>anchor</i><b>||</b><i>coanchor</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>r:</b><i>coanchor</i><b>||</b><i>anchor</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
  <dt><b>R:</b><i>coanchor</i><b>||</b><i>anchor</i><b>=</b><i>match-pat</i></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">For any two consecutive substrings of the current word that match
    <i>anchor</i> and <i>coanchor</i>, in the order given, insert the pattern
    <i>match-pat</i> between their corresponding parts in the match pattern.</p>
<p class="Pp">Note that, unlike <i>anchor</i>, the pattern <i>coanchor</i> does
    not change what `<b>*</b>' can match.</p>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt>Examples:</dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">`<b>r:?||[[:upper:]]=*</b>' will complete the current word
    `<b>fB</b>' to `<b>fooBar</b>', but it will not complete it to
    `<b>fooHooBar</b>' (because `<b>*</b>' here cannot match anything that
    includes a match for `<b>[[:upper:]]</b>), nor will it complete `<b>B</b>'
    to `<b>fooBar</b>' (because there is no character in the current word to
    match <i>coanchor</i>).</p>
<p class="Pp">Given the current word `<b>pass.n</b>' and a completion
    `<b>pass.byname</b>', the matcher `<b>L:.||[[:alpha:]]=by</b>' will produce
    the match `<b>pass.name</b>'.</p>
</div>
</div>
<dl class="Bl-tag">
  <dt id="x:"><a class="permalink" href="#x:"><b>x:</b></a></dt>
  <dd></dd>
</dl>
<div class="Bd-indent">
<p class="Pp">Ignore this matcher and all matchers to its right.</p>
<p class="Pp">This matcher is used to mark the end of a match specification. In
    a single standalone list of matchers, this has no use, but where match
    specifications are concatenated, as is often the case when using the
    completion system (see <i>zshcompsys</i>(1)), it can allow one match
    specification to override another.</p>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="COMPLETION_WIDGET_EXAMPLE"><a class="permalink" href="#COMPLETION_WIDGET_EXAMPLE">COMPLETION
  WIDGET EXAMPLE</a></h1>
<p class="Pp">The first step is to define the widget:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>zle -C complete complete-word complete-files</b></pre>
</div>
<p class="Pp">Then the widget can be bound to a key using the <b>bindkey</b>
    builtin command:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>bindkey '^X\t' complete</b></pre>
</div>
<p class="Pp">After that the shell function <b>complete-files</b> will be
    invoked after typing control-X and TAB. The function should then generate
    the matches, e.g.:</p>
<p class="Pp"></p>
<div class="Bd-indent">
<pre><b>complete-files () { compadd - * }</b></pre>
</div>
<p class="Pp">This function will complete files in the current directory
    matching the current word.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">May 14, 2022</td>
    <td class="foot-os"><a href="..">zsh 5.9</a></td>
  </tr>
</table>
</body>
</html>
