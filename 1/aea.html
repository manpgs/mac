<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>AEA(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">AEA(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">AEA(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">aea - Manipulate Apple Encrypted Archives</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>aea <b>command</b> [<b>options</b>]</b></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>aea creates and manipulates Apple Encrypted Archives
  (AEA)</b></p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERBS"><a class="permalink" href="#VERBS">VERBS</a></h1>
<p class="Pp"><b>encrypt</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Create
    a new AEA archive</p>
<p class="Pp"><b>decrypt</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Decrypt
    an AEA archive</p>
<p class="Pp"><b>sign</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Sign
    an AEA archive</p>
<p class="Pp"><b>append</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Append
    data to an existing AEA archive</p>
<p class="Pp"><b>id</b>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;Identify
    an AEA archive</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt id="v"><a class="permalink" href="#v"><b>-v</b></a></dt>
  <dd>Increase verbosity. Default is silent operation.</dd>
  <dt id="h"><a class="permalink" href="#h"><b>-h</b></a></dt>
  <dd>Print usage and exit.</dd>
  <dt id="i"><a class="permalink" href="#i"><b>-i&#x00A0;<i>input_file</i></b></a></dt>
  <dd>Input file. Default is <i>stdin</i>.</dd>
  <dt id="o"><a class="permalink" href="#o"><b>-o&#x00A0;<i>output_file</i></b></a></dt>
  <dd>Output file. Default is <i>stdout</i>.</dd>
  <dt id="profile"><a class="permalink" href="#profile"><b>-profile&#x00A0;<i>profile</i></b></a></dt>
  <dd>
    <br/>
    Archive profile, one of the following (both index and id are allowed):
    <br/>
    0: hkdf_sha256_hmac__none__ecdsa_p256 - no encryption, signed
    <br/>
    1: hkdf_sha256_aesctr_hmac__symmetric__none - symmetric key encryption
    <br/>
    2: hkdf_sha256_aesctr_hmac__symmetric__ecdsa_p256 - symmetric key
      encryption, signed
    <br/>
    3: hkdf_sha256_aesctr_hmac__ecdhe_p256__none - ECDHE encryption
    <br/>
    4: hkdf_sha256_aesctr_hmac__ecdhe_p256__ecdsa_p256 - ECDHE encryption,
      signed
    <br/>
    5: hkdf_sha256_aesctr_hmac__scrypt__none - scrypt encryption (password
      based)</dd>
  <dt id="a"><a class="permalink" href="#a"><b>-a&#x00A0;<i>algorithm</i></b></a></dt>
  <dd>Compression algorithm used when creating archives. One of <i>lzfse</i>,
      <i>lzma</i>, <i>lz4</i>, <i>zlib</i>, <i>copy</i>. Default is
      <i>lzfse</i>.</dd>
  <dt id="b"><a class="permalink" href="#b"><b>-b&#x00A0;<i>block_size</i></b></a></dt>
  <dd>Block size used for compression+encryption, a number with optional
      <i>b</i>, <i>k</i>, <i>m</i>, <i>g</i> suffix (bytes are assumed if no
      suffix is specified). Default is <i>1m</i>.</dd>
  <dt id="t"><a class="permalink" href="#t"><b>-t&#x00A0;<i>worker_threads</i></b></a></dt>
  <dd>Number of worker threads. Default is the number of physical CPU on the
      running machine.</dd>
  <dt id="checksum"><a class="permalink" href="#checksum"><b>-checksum&#x00A0;<i>checksum_mode</i></b></a></dt>
  <dd>Block checksum mode, one of <i>none</i>, <i>murmur64</i>,
    <i>sha256</i>.</dd>
  <dt id="key"><a class="permalink" href="#key"><b>-key&#x00A0;<i>key_file</i></b></a></dt>
  <dd>File containing or receiving the symmetric encryption key.</dd>
  <dt id="key~2"><a class="permalink" href="#key~2"><b>-key-value&#x00A0;<i>&lt;key&gt;</i></b></a></dt>
  <dd>Symmetric encryption key, encoded either as <i>hex:...</i>, or
      <i>base64:...</i>.</dd>
  <dt id="key~3"><a class="permalink" href="#key~3"><b>-key-gen</b></a></dt>
  <dd>When creating a new archive, generate a new random high entropy symmetric
      key, and store it in the file specified by <b>-key</b>. The new key is
      stored as <i>hex:...</i> in the file.</dd>
  <dt id="password"><a class="permalink" href="#password"><b>-password&#x00A0;<i>password_file</i></b></a></dt>
  <dd>File containing or receiving the encryption password.</dd>
  <dt id="password~2"><a class="permalink" href="#password~2"><b>-password-value&#x00A0;<i>&lt;password&gt;</i></b></a></dt>
  <dd>Encryption password.</dd>
  <dt id="password~3"><a class="permalink" href="#password~3"><b>-password-gen</b></a></dt>
  <dd>When creating a new archive, generate a new random high entropy password,
      and store it in the file specified by <b>-password</b>.</dd>
  <dt id="auth"><a class="permalink" href="#auth"><b>-auth-data-key&#x00A0;<i>&lt;string&gt;</i></b></a></dt>
  <dd>Define the key for the next <i>-auth-data</i> or <i>-auth-data-value</i>
      option. If this option is specified at least once, the auth data blob in
      the archive will be stored using the key-&gt;value format, and all
      occurrences of fI-auth-data or <i>-auth-data-value</i><i> must be preceded
      by a </i><i>-auth-data-key</i><i>.</i></dd>
  <dt id="auth~2"><a class="permalink" href="#auth~2"><b>-auth-data&#x00A0;<i>data_file</i></b></a></dt>
  <dd>Insert the contents of <i>data_file</i> in the container as authentication
      data. This option can be specified multiple times. Authentication data is
      stored in plain text in the container, and can be used to store public key
      certificates for example.</dd>
  <dt id="auth~3"><a class="permalink" href="#auth~3"><b>-auth-data-value&#x00A0;<i>&lt;data&gt;</i></b></a></dt>
  <dd>Insert the contents of <i>data</i> (encoded either as <i>hex:...</i>, or
      <i>base64:...</i>) in the container as authentication data. This option
      can be specified multiple times. Authentication data is stored in plain
      text in the container, and can be used to store public key certificates
      for example.</dd>
  <dt id="sign"><a class="permalink" href="#sign"><b>-sign-pub&#x00A0;<i>key_file</i></b></a></dt>
  <dd>File containing the signature public key. Used to decrypt a signed
      container, or encrypt a container without signing it.</dd>
  <dt id="sign~2"><a class="permalink" href="#sign~2"><b>-sign-priv&#x00A0;<i>key_file</i></b></a></dt>
  <dd>File containing the signature private key. Used to sign a container.</dd>
  <dt id="recipient"><a class="permalink" href="#recipient"><b>-recipient-pub&#x00A0;<i>key_file</i></b></a></dt>
  <dd>File containing the recipient public key. Used to encrypt a container in
      the ECDHE modes.</dd>
  <dt id="recipient~2"><a class="permalink" href="#recipient~2"><b>-recipient-priv&#x00A0;<i>key_file</i></b></a></dt>
  <dd>File containing the recipient private key. Used to decrypt a container in
      the ECDHE modes.</dd>
  <dt id="master"><a class="permalink" href="#master"><b>-master-key&#x00A0;<i>key_file</i></b></a></dt>
  <dd>When creating a new container, if this option is given, the file will
      receive the container main key, needed for future <b>append</b>
      operations. The main key is only intended to unlock an existing container
      to append new data, and should be kept by the container creator.</dd>
  <dt id="signature"><a class="permalink" href="#signature"><b>-signature-key&#x00A0;<i>key_file</i></b></a></dt>
  <dd>When creating an new signed container, if this option is given, the file
      will receive the signature encryption key. if only the signature public
      key is passed with <b>-sign-pub</b> when creating a new signed container,
      the container needs to be signed offline using the <b>sign</b> command.
      This requires both the signature private key <b>-sign-priv</b>, and this
      signature encryption key.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">Encrypt <i>foo</i> into <i>foo.aea</i> using a new random
    symmetric key stored in <i>foo.key</i></p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aea encrypt -profile
  hkdf_sha256_aesctr_hmac__symmetric__none -i foo -o foo.aea -key
  foo.key</b></div>
<p class="Pp">Decrypt <i>foo.aea</i> into <i>bar</i></p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aea decrypt -i foo.aea -o bar -key foo.key</b></div>
<p class="Pp">Alice encrypts and signs <i>foo</i> into <i>foo.aea</i>, so only
    Bob can decrypt it.</p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aea encrypt -profile
  hkdf_sha256_aesctr_hmac__ecdhe_p256__ecdsa_p256 -i foo -o foo.aea -sign-priv
  alice.priv -recipient-pub bob.pub</b></div>
<p class="Pp">Bob decrypts <i>foo.aea</i> into <i>bar</i> using his private key,
    and at the same time verifying Alice signed it.</p>
<p class="Pp"></p>
<div class="Bd-indent"><b>aea decrypt -i foo.aea -o bar -sign-pub alice.pub
  -recipient-priv bob.priv</b></div>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date"></td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
