<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>PROVE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PROVE(1)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">PROVE(1)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">prove - Run tests through a TAP harness.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="USAGE"><a class="permalink" href="#USAGE">USAGE</a></h1>
<pre> prove [options] [files or directories]
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<p class="Pp">Boolean options:</p>
<p class="Pp"></p>
<pre> -v,  --verbose         Print all test lines.
 -l,  --lib             Add 'lib' to the path for your tests (-Ilib).
 -b,  --blib            Add 'blib/lib' and 'blib/arch' to the path for
                        your tests
 -s,  --shuffle         Run the tests in random order.
 -c,  --color           Colored test output (default).
      --nocolor         Do not color test output.
      --count           Show the X/Y test count when not verbose
                        (default)
      --nocount         Disable the X/Y test count.
 -D   --dry             Dry run. Show test that would have run.
 -f,  --failures        Show failed tests.
 -o,  --comments        Show comments.
      --ignore-exit     Ignore exit status from test scripts.
 -m,  --merge           Merge test scripts' STDERR with their STDOUT.
 -r,  --recurse         Recursively descend into directories.
      --reverse         Run the tests in reverse order.
 -q,  --quiet           Suppress some test output while running tests.
 -Q,  --QUIET           Only print summary results.
 -p,  --parse           Show full list of TAP parse errors, if any.
      --directives      Only show results with TODO or SKIP directives.
      --timer           Print elapsed time after each test.
      --trap            Trap Ctrl-C and print summary on interrupt.
      --normalize       Normalize TAP output in verbose output
 -T                     Enable tainting checks.
 -t                     Enable tainting warnings.
 -W                     Enable fatal warnings.
 -w                     Enable warnings.
 -h,  --help            Display this help
 -?,                    Display this help
 -V,  --version         Display the version
 -H,  --man             Longer manpage for prove
      --norc            Don't process default .proverc
</pre>
<p class="Pp">Options that take arguments:</p>
<p class="Pp"></p>
<pre> -I                     Library paths to include.
 -P                     Load plugin (searches App::Prove::Plugin::*.)
 -M                     Load a module.
 -e,  --exec            Interpreter to run the tests ('' for compiled
                        tests.)
      --ext             Set the extension for tests (default '.t')
      --harness         Define test harness to use.  See TAP::Harness.
      --formatter       Result formatter to use. See FORMATTERS.
      --source          Load and/or configure a SourceHandler. See
                        SOURCE HANDLERS.
 -a,  --archive out.tgz Store the resulting TAP in an archive file.
 -j,  --jobs N          Run N test jobs in parallel (try 9.)
      --state=opts      Control prove's persistent state.
      --statefile=file  Use `file` instead of `.prove` for state
      --rc=rcfile       Process options from rcfile
      --rules           Rules for parallel vs sequential processing.
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES"><a class="permalink" href="#NOTES">NOTES</a></h1>
<section class="Ss">
<h2 class="Ss" id=".proverc"><a class="permalink" href="#.proverc">.proverc</a></h2>
<p class="Pp">If <i>~/.proverc</i> or <i>./.proverc</i> exist they will be read
    and any options they contain processed before the command line options.
    Options in <i>.proverc</i> are specified in the same way as command line
    options:</p>
<p class="Pp"></p>
<pre>    # .proverc
    --state=hot,fast,save
    -j9
</pre>
<p class="Pp">Additional option files may be specified with the
    <span class="Li">&quot;--rc&quot;</span> option. Default option file
    processing is disabled by the <span class="Li">&quot;--norc&quot;</span>
    option.</p>
<p class="Pp">Under Windows and VMS the option file is named <i>_proverc</i>
    rather than <i>.proverc</i> and is sought only in the current directory.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Reading_from__STDIN_"><a class="permalink" href="#Reading_from__STDIN_">Reading
  from &quot;STDIN&quot;</a></h2>
<p class="Pp">If you have a list of tests (or URLs, or anything else you want to
    test) in a file, you can add them to your tests by using a '-':</p>
<p class="Pp"></p>
<pre> prove - &lt; my_list_of_things_to_test.txt
</pre>
<p class="Pp">See the <span class="Li">&quot;README&quot;</span> in the
    <span class="Li">&quot;examples&quot;</span> directory of this
  distribution.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Default_Test_Directory"><a class="permalink" href="#Default_Test_Directory">Default
  Test Directory</a></h2>
<p class="Pp">If no files or directories are supplied,
    <span class="Li">&quot;prove&quot;</span> looks for all files matching the
    pattern <span class="Li">&quot;t/*.t&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Colored_Test_Output"><a class="permalink" href="#Colored_Test_Output">Colored
  Test Output</a></h2>
<p class="Pp">Colored test output using TAP::Formatter::Color is the default,
    but if output is not to a terminal, color is disabled. You can override this
    by adding the <span class="Li">&quot;--color&quot;</span> switch.</p>
<p class="Pp">Color support requires Term::ANSIColor and, on windows platforms,
    also Win32::Console::ANSI. If the necessary module(s) are not installed
    colored output will not be available.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Exit_Code"><a class="permalink" href="#Exit_Code">Exit
  Code</a></h2>
<p class="Pp">If the tests fail <span class="Li">&quot;prove&quot;</span> will
    exit with non-zero status.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Arguments_to_Tests"><a class="permalink" href="#Arguments_to_Tests">Arguments
  to Tests</a></h2>
<p class="Pp">It is possible to supply arguments to tests. To do so separate
    them from prove's own arguments with the arisdottle, '::'. For example</p>
<p class="Pp"></p>
<pre> prove -v t/mytest.t :: --url http://example.com
</pre>
<p class="Pp">would run <i>t/mytest.t</i> with the options '--url
    http://example.com'. When running multiple tests they will each receive the
    same arguments.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_"><a class="permalink" href="#_">&quot;--exec&quot;</a></h2>
<p class="Pp">Normally you can just pass a list of Perl tests and the harness
    will know how to execute them. However, if your tests are not written in
    Perl or if you want all tests invoked exactly the same way, use the
    <span class="Li">&quot;-e&quot;</span>, or
    <span class="Li">&quot;--exec&quot;</span> switch:</p>
<p class="Pp"></p>
<pre> prove --exec '/usr/bin/ruby -w' t/
 prove --exec '/usr/bin/perl -Tw -mstrict -Ilib' t/
 prove --exec '/path/to/my/customer/exec'
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="_~2"><a class="permalink" href="#_~2">&quot;--merge&quot;</a></h2>
<p class="Pp">If you need to make sure your diagnostics are displayed in the
    correct order relative to test results you can use the
    <span class="Li">&quot;--merge&quot;</span> option to merge the test
    scripts' STDERR into their STDOUT.</p>
<p class="Pp">This guarantees that STDOUT (where the test results appear) and
    STDERR (where the diagnostics appear) will stay in sync. The harness will
    display any diagnostics your tests emit on STDERR.</p>
<p class="Pp">Caveat: this is a bit of a kludge. In particular note that if
    anything that appears on STDERR looks like a test result the test harness
    will get confused. Use this option only if you understand the consequences
    and can live with the risk.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_~3"><a class="permalink" href="#_~3">&quot;--trap&quot;</a></h2>
<p class="Pp">The <span class="Li">&quot;--trap&quot;</span> option will attempt
    to trap SIGINT (Ctrl-C) during a test run and display the test summary even
    if the run is interrupted</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_~4"><a class="permalink" href="#_~4">&quot;--state&quot;</a></h2>
<p class="Pp">You can ask <span class="Li">&quot;prove&quot;</span> to remember
    the state of previous test runs and select and/or order the tests to be run
    based on that saved state.</p>
<p class="Pp">The <span class="Li">&quot;--state&quot;</span> switch requires an
    argument which must be a comma separated list of one or more of the
    following options.</p>
<dl class="Bl-tag">
  <dt>&quot;last&quot;</dt>
  <dd>Run the same tests as the last time the state was saved. This makes it
      possible, for example, to recreate the ordering of a shuffled test.
    <p class="Pp"></p>
    <pre>    # Run all tests in random order
    $ prove -b --state=save --shuffle
    # Run them again in the same order
    $ prove -b --state=last
    </pre>
  </dd>
  <dt>&quot;failed&quot;</dt>
  <dd>Run only the tests that failed on the last run.
    <p class="Pp"></p>
    <pre>    # Run all tests
    $ prove -b --state=save
    # Run failures
    $ prove -b --state=failed
    </pre>
    <p class="Pp">If you also specify the
        <span class="Li">&quot;save&quot;</span> option newly passing tests will
        be excluded from subsequent runs.</p>
    <p class="Pp"></p>
    <pre>    # Repeat until no more failures
    $ prove -b --state=failed,save
    </pre>
  </dd>
  <dt>&quot;passed&quot;</dt>
  <dd>Run only the passed tests from last time. Useful to make sure that no new
      problems have been introduced.</dd>
  <dt>&quot;all&quot;</dt>
  <dd>Run all tests in normal order. Multple options may be specified, so to run
      all tests with the failures from last time first:
    <p class="Pp"></p>
    <pre>    $ prove -b --state=failed,all,save
    </pre>
  </dd>
  <dt>&quot;hot&quot;</dt>
  <dd>Run the tests that most recently failed first. The last failure time of
      each test is stored. The <span class="Li">&quot;hot&quot;</span> option
      causes tests to be run in most-recent- failure order.
    <p class="Pp"></p>
    <pre>    $ prove -b --state=hot,save
    </pre>
    <p class="Pp">Tests that have never failed will not be selected. To run all
        tests with the most recently failed first use</p>
    <p class="Pp"></p>
    <pre>    $ prove -b --state=hot,all,save
    </pre>
    <p class="Pp">This combination of options may also be specified thus</p>
    <p class="Pp"></p>
    <pre>    $ prove -b --state=adrian
    </pre>
  </dd>
  <dt>&quot;todo&quot;</dt>
  <dd>Run any tests with todos.</dd>
  <dt>&quot;slow&quot;</dt>
  <dd>Run the tests in slowest to fastest order. This is useful in conjunction
      with the <span class="Li">&quot;-j&quot;</span> parallel testing switch to
      ensure that your slowest tests start running first.
    <p class="Pp"></p>
    <pre>    $ prove -b --state=slow -j9
    </pre>
  </dd>
  <dt>&quot;fast&quot;</dt>
  <dd>Run test tests in fastest to slowest order.</dd>
  <dt>&quot;new&quot;</dt>
  <dd>Run the tests in newest to oldest order based on the modification times of
      the test scripts.</dd>
  <dt>&quot;old&quot;</dt>
  <dd>Run the tests in oldest to newest order.</dd>
  <dt>&quot;fresh&quot;</dt>
  <dd>Run those test scripts that have been modified since the last test
    run.</dd>
  <dt>&quot;save&quot;</dt>
  <dd>Save the state on exit. The state is stored in a file called <i>.prove</i>
      (<i>_prove</i> on Windows and VMS) in the current directory.</dd>
</dl>
<p class="Pp">The <span class="Li">&quot;--state&quot;</span> switch may be used
    more than once.</p>
<p class="Pp"></p>
<pre>    $ prove -b --state=hot --state=all,save
</pre>
</section>
<section class="Ss">
<h2 class="Ss">--rules</h2>
<p class="Pp">The <span class="Li">&quot;--rules&quot;</span> option is used to
    control which tests are run sequentially and which are run in parallel, if
    the <span class="Li">&quot;--jobs&quot;</span> option is specified. The
    option may be specified multiple times, and the order matters.</p>
<p class="Pp">The most practical use is likely to specify that some tests are
    not &quot;parallel-ready&quot;. Since mentioning a file with --rules doesn't
    cause it to be selected to run as a test, you can &quot;set and forget&quot;
    some rules preferences in your .proverc file. Then you'll be able to take
    maximum advantage of the performance benefits of parallel testing, while
    some exceptions are still run in parallel.</p>
<p class="Pp"><i>--rules examples</i></p>
<p class="Pp"></p>
<pre>    # All tests are allowed to run in parallel, except those starting with &quot;p&quot;
    --rules='seq=t/p*.t' --rules='par=**'
    # All tests must run in sequence except those starting with &quot;p&quot;, which should be run parallel
    --rules='par=t/p*.t'
</pre>
<p class="Pp"><i>--rules resolution</i></p>
<ul class="Bl-bullet">
  <li>By default, all tests are eligible to be run in parallel. Specifying any
      of your own rules removes this one.</li>
  <li>&quot;First match wins&quot;. The first rule that matches a test will be
      the one that applies.</li>
  <li>Any test which does not match a rule will be run in sequence at the end of
      the run.</li>
  <li>The existence of a rule does not imply selecting a test. You must still
      specify the tests to run.</li>
  <li>Specifying a rule to allow tests to run in parallel does not make them run
      in parallel. You still need specify the number of parallel
      <span class="Li">&quot;jobs&quot;</span> in your Harness object.</li>
</ul>
<p class="Pp"><i>--rules Glob-style pattern matching</i></p>
<p class="Pp">We implement our own glob-style pattern matching for --rules. Here
    are the supported patterns:</p>
<p class="Pp"></p>
<pre>    ** is any number of characters, including /, within a pathname
    * is zero or more characters within a filename/directory name
    ? is exactly one character within a filename/directory name
    {foo,bar,baz} is any of foo, bar or baz.
    \ is an escape character
</pre>
<p class="Pp"><i>More advanced specifications for parallel vs sequence run
    rules</i></p>
<p class="Pp">If you need more advanced management of what runs in parallel vs
    in sequence, see the associated 'rules' documentation in TAP::Harness and
    TAP::Parser::Scheduler. If what's possible directly through
    <span class="Li">&quot;prove&quot;</span> is not sufficient, you can write
    your own harness to access these features directly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="@INC"><a class="permalink" href="#@INC">@INC</a></h2>
<p class="Pp">prove introduces a separation between &quot;options passed to the
    perl which runs prove&quot; and &quot;options passed to the perl which runs
    tests&quot;; this distinction is by design. Thus the perl which is running a
    test starts with the default <span class="Li">@INC</span>. Additional
    library directories can be added via the
    <span class="Li">&quot;PERL5LIB&quot;</span> environment variable, via -Ifoo
    in <span class="Li">&quot;PERL5OPT&quot;</span> or via the
    <span class="Li">&quot;-Ilib&quot;</span> option to <i>prove</i>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Taint_Mode"><a class="permalink" href="#Taint_Mode">Taint
  Mode</a></h2>
<p class="Pp">Normally when a Perl program is run in taint mode the contents of
    the <span class="Li">&quot;PERL5LIB&quot;</span> environment variable do not
    appear in <span class="Li">@INC</span>.</p>
<p class="Pp">Because <span class="Li">&quot;PERL5LIB&quot;</span> is often used
    during testing to add build directories to <span class="Li">@INC</span>
    prove passes the names of any directories found in
    <span class="Li">&quot;PERL5LIB&quot;</span> as -I switches. The net effect
    of this is that <span class="Li">&quot;PERL5LIB&quot;</span> is honoured
    even when prove is run in taint mode.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="FORMATTERS"><a class="permalink" href="#FORMATTERS">FORMATTERS</a></h1>
<p class="Pp">You can load a custom TAP::Parser::Formatter:</p>
<p class="Pp"></p>
<pre>  prove --formatter MyFormatter
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="SOURCE_HANDLERS"><a class="permalink" href="#SOURCE_HANDLERS">SOURCE
  HANDLERS</a></h1>
<p class="Pp">You can load custom TAP::Parser::SourceHandlers, to change the way
    the parser interprets particular <i>sources</i> of TAP.</p>
<p class="Pp"></p>
<pre>  prove --source MyHandler --source YetAnother t
</pre>
<p class="Pp">If you want to provide config to the source you can use:</p>
<p class="Pp"></p>
<pre>  prove --source MyCustom \
        --source Perl --perl-option 'foo=bar baz' --perl-option avg=0.278 \
        --source File --file-option extensions=.txt --file-option extensions=.tmp t
        --source pgTAP --pgtap-option pset=format=html --pgtap-option pset=border=2
</pre>
<p class="Pp">Each <span class="Li">&quot;--$source-option&quot;</span> option
    must specify a key/value pair separated by an
    <span class="Li">&quot;=&quot;</span>. If an option can take multiple
    values, just specify it multiple times, as with the
    <span class="Li">&quot;extensions=&quot;</span> examples above. If the
    option should be a hash reference, specify the value as a second pair
    separated by a <span class="Li">&quot;=&quot;</span>, as in the
    <span class="Li">&quot;pset=&quot;</span> examples above (escape
    <span class="Li">&quot;=&quot;</span> with a backslash).</p>
<p class="Pp">All <span class="Li">&quot;--sources&quot;</span> are combined
    into a hash, and passed to &quot;new&quot; in TAP::Harness's
    <span class="Li">&quot;sources&quot;</span> parameter.</p>
<p class="Pp">See TAP::Parser::IteratorFactory for more details on how
    configuration is passed to <i>SourceHandlers</i>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="PLUGINS"><a class="permalink" href="#PLUGINS">PLUGINS</a></h1>
<p class="Pp">Plugins can be loaded using the
    <span class="Li">&quot;-P</span><span class="Li"><i>plugin</i></span><span class="Li">&quot;</span>
    syntax, eg:</p>
<p class="Pp"></p>
<pre>  prove -PMyPlugin
</pre>
<p class="Pp">This will search for a module named
    <span class="Li">&quot;App::Prove::Plugin::MyPlugin&quot;</span>, or failing
    that, <span class="Li">&quot;MyPlugin&quot;</span>. If the plugin can't be
    found, <span class="Li">&quot;prove&quot;</span> will complain &amp;
  exit.</p>
<p class="Pp">You can pass arguments to your plugin by appending
    <span class="Li">&quot;=arg1,arg2,etc&quot;</span> to the plugin name:</p>
<p class="Pp"></p>
<pre>  prove -PMyPlugin=fou,du,fafa
</pre>
<p class="Pp">Please check individual plugin documentation for more details.</p>
<section class="Ss">
<h2 class="Ss" id="Available_Plugins"><a class="permalink" href="#Available_Plugins">Available
  Plugins</a></h2>
<p class="Pp">For an up-to-date list of plugins available, please check
  CPAN:</p>
<p class="Pp">&lt;http://search.cpan.org/search?query=App%3A%3AProve+Plugin&gt;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Writing_Plugins"><a class="permalink" href="#Writing_Plugins">Writing
  Plugins</a></h2>
<p class="Pp">Please see &quot;PLUGINS&quot; in App::Prove.</p>
</section>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2024-02-10</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
