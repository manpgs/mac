<!DOCTYPE html>
<html lang="en">
<!-- This is an automatically generated file.  Do not edit.
   -*- tab-width: 4 -*-
  
   Copyright (c) 2004-2012 Apple Inc. All Rights Reserved.
  
   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at
  
       http://www.apache.org/licenses/LICENSE-2.0
  
   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
  
   Date
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>dns-sd(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">dns-sd(1)</td>
    <td class="head-vol"><a href=".">General Commands Manual</a></td>
    <td class="head-rtitle">dns-sd(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">dns-sd</code> &#x2014; <span class="Nd">Multicast
    DNS (mDNS) &amp; DNS Service Discovery (DNS-SD) Test Tool</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-E</code></code></td>
    <td></td>
  </tr>
</table>
<p class="Pp"></p>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-F</code></code></td>
    <td></td>
  </tr>
</table>
<p class="Pp"></p>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-R</code> <var class="Ar">name
      type domain port</var> [<var class="Ar">key=value ...</var>]</code></td>
    <td></td>
  </tr>
</table>
<p class="Pp"></p>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-B</code> <var class="Ar">type
      domain</var></code></td>
    <td></td>
  </tr>
</table>
<p class="Pp"></p>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-L</code> <var class="Ar">name
      type domain</var></code></td>
    <td></td>
  </tr>
</table>
<p class="Pp"></p>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-P</code> <var class="Ar">name
      type domain port host IP</var> [<var class="Ar">key=value
      ...</var>]</code></td>
    <td></td>
  </tr>
</table>
<p class="Pp"></p>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-q</code> <var class="Ar">name
      rrtype rrclass</var></code></td>
    <td></td>
  </tr>
</table>
<p class="Pp"></p>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-Z</code> <var class="Ar">type
      domain</var></code></td>
    <td></td>
  </tr>
</table>
<p class="Pp"></p>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-G</code>&#x00A0;v4/v6/v4v6
      <var class="Ar">name</var></code></td>
    <td></td>
  </tr>
</table>
<p class="Pp"></p>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dns-sd <code class="Fl">-V</code></code></td>
    <td></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <code class="Nm">dns-sd</code> command is a network diagnostic
    tool, much like <a class="Xr" href="../8/ping">ping(8)</a> or
    <a class="Xr" href="../8/traceroute">traceroute(8)</a>. However, unlike
    those tools, most of its functionality is not implemented in the
    <code class="Nm">dns-sd</code> executable itself, but in library code that
    is available to any application. The library API that
    <code class="Nm">dns-sd</code> uses is documented in
    <span class="Pa">/usr/include/dns_sd.h</span>. The
    <code class="Nm">dns-sd</code> command replaces the older mDNS command.</p>
<p class="Pp">The <code class="Nm">dns-sd</code> command is primarily intended
    for interactive use. Because its command-line arguments and output format
    are subject to change, invoking it from a shell script will generally be
    fragile. Additionally, the asynchronous nature of DNS Service Discovery does
    not lend itself easily to script-oriented programming. For example, calls
    like &quot;browse&quot; never complete; the action of performing a
    &quot;browse&quot; sets in motion machinery to notify the client whenever
    instances of that service type appear or disappear from the network. These
    notifications continue to be delivered indefinitely, for minutes, hours, or
    even days, as services come and go, until the client explicitly terminates
    the call. This style of asynchronous interaction works best with
    applications that are either multi-threaded, or use a main event-handling
    loop to receive keystrokes, network data, and other asynchronous event
    notifications as they happen.
  <br/>
  If you wish to perform DNS Service Discovery operations from a scripting
    language, then the best way to do this is not to execute the
    <code class="Nm">dns-sd</code> command and then attempt to decipher the
    textual output, but instead to directly call the DNS-SD APIs using a binding
    for your chosen language.
  <br/>
  For example, if you are programming in Ruby, then you can directly call DNS-SD
    APIs using the dnssd package documented at
    <span class="Pa">&lt;http://rubyforge.org/projects/dnssd/&gt;</span>.
  <br/>
  Similar bindings for other languages are also in development.</p>
<dl class="Bl-tag">
  <dt><code class="Nm">dns-sd</code> <code class="Fl">-E</code></dt>
  <dd>return a list of domains recommended for registering(advertising)
      services.</dd>
  <dt><code class="Nm">dns-sd</code> <code class="Fl">-F</code></dt>
  <dd>return a list of domains recommended for browsing services.
    <p class="Pp">Normally, on your home network, the only domain you are likely
        to see is &quot;local&quot;. However if your network administrator has
        created Domain Enumeration records, then you may also see other
        recommended domains for registering and browsing.</p>
  </dd>
  <dt><code class="Nm">dns-sd</code> <code class="Fl">-R</code>
    <var class="Ar">name type domain port</var> [<var class="Ar">key=value
    ...</var>]</dt>
  <dd>register (advertise) a service in the specified
      <var class="Ar">domain</var> with the given <var class="Ar">name</var> and
      <var class="Ar">type</var> as listening (on the current machine) on
      <var class="Ar">port.</var>
    <p class="Pp"><var class="Ar">name</var> can be arbitrary unicode text,
        containing any legal unicode characters (including dots, spaces,
        slashes, colons, etc. without restriction), up to 63 UTF-8 bytes long.
        <var class="Ar">type</var> must be of the form
        &quot;_app-proto._tcp&quot; or &quot;_app-proto._udp&quot;, where
        &quot;app-proto&quot; is an application protocol name registered at
        <span class="Pa">http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xml</span>.</p>
    <p class="Pp"><var class="Ar">domain</var> is the domain in which to
        register the service. In current implementations, only the local
        multicast domain &quot;local&quot; is supported. In the future,
        registering will be supported in any arbitrary domain that has a working
        DNS Update server [RFC 2136]. The <var class="Ar">domain</var>
        &quot;.&quot; is a synonym for &quot;pick a sensible default&quot; which
        today means &quot;local&quot;.</p>
    <p class="Pp"><var class="Ar">port</var> is a number from 0 to 65535, and is
        the TCP or UDP port number upon which the service is listening.</p>
    <p class="Pp">Additional attributes of the service may optionally be
        described by key/value pairs, which are stored in the advertised
        service's DNS TXT record. Allowable keys and values are listed with the
        service registration at
        <span class="Pa">http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xml</span>.</p>
  </dd>
  <dt><code class="Nm">dns-sd</code> <code class="Fl">-B</code>
    <var class="Ar">type domain</var></dt>
  <dd>browse for instances of service <var class="Ar">type</var> in
      <var class="Ar">domain</var>.
    <p class="Pp">For valid <var class="Ar">type</var>s see
        <span class="Pa">http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xml</span>.
        as described above. Omitting the <var class="Ar">domain</var> or using
        &quot;.&quot; means &quot;pick a sensible default.&quot;</p>
  </dd>
  <dt><code class="Nm">dns-sd</code> <code class="Fl">-L</code>
    <var class="Ar">name type domain</var></dt>
  <dd>look up and display the information necessary to contact and use the named
      service: the hostname of the machine where that service is available, the
      port number on which the service is listening, and (if present) TXT record
      attributes describing properties of the service.
    <p class="Pp">Note that in a typical application, browsing may only happen
        rarely, while lookup (or &quot;resolving&quot;) happens every time the
        service is used. For example, a user browses the network to pick a
        default printer fairly rarely, but once a default printer has been
        picked, that named service is resolved to its current IP address and
        port number every time the user presses Cmd-P to print.</p>
  </dd>
  <dt><code class="Nm">dns-sd</code> <code class="Fl">-P</code>
    <var class="Ar">name type domain port host IP</var>
    [<var class="Ar">key=value ...</var>]</dt>
  <dd>create a proxy advertisement for a service running on(offered by) some
      other machine. The two new options are Host, a name for the device and IP,
      the address of it.
    <p class="Pp">The service for which you create a proxy advertisement does
        not necessarily have to be on your local network. You can set up a local
        proxy for a website on the Internet.</p>
  </dd>
  <dt><code class="Nm">dns-sd</code> <code class="Fl">-q</code>
    <var class="Ar">name rrtype rrclass</var></dt>
  <dd>look up any DNS name, resource record type, and resource record class, not
      necessarily DNS-SD names and record types. If rrtype is not specified, it
      queries for the IPv4 address of the name, if rrclass is not specified, IN
      class is assumed. If the name is not a fully qualified domain name, then
      search domains may be appended.</dd>
  <dt><code class="Nm">dns-sd</code> <code class="Fl">-Z</code>
    <var class="Ar">type domain</var></dt>
  <dd>browse for service instances and display output in zone file format.</dd>
  <dt><code class="Nm">dns-sd</code>
    <code class="Fl">-G</code>&#x00A0;v4/v6/v4v6 <var class="Ar">name</var></dt>
  <dd>look up the IP address information of the name. If v4 is specified, the
      IPv4 address of the name is looked up, if v6 is specified the IPv6 address
      is looked up. If v4v6 is specified both the IPv4 and IPv6 address is
      looked up. If the name is not a fully qualified domain name, then search
      domains may be appended.</dd>
  <dt><code class="Nm">dns-sd</code> <code class="Fl">-V</code></dt>
  <dd>return the version of the currently running daemon/system service.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">To advertise the existence of LPR printing service on port 515 on
    this machine, such that it will be discovered by the Mac OS X printing
    software and other DNS-SD compatible printing clients, use:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li"><code class="Nm">dns-sd</code>
  <code class="Fl">-R</code>&#x00A0;&quot;My Test&quot; _printer._tcp. . 515
  pdl=application/postscript</code></div>
<p class="Pp">For this registration to be useful, you need to actually have LPR
    service available on port 515. Advertising a service that does not exist is
    not very useful, and will be confusing and annoying to other people on the
    network.</p>
<p class="Pp">Similarly, to advertise a web page being served by an HTTP server
    on port 80 on this machine, such that it will show up in the Bonjour list in
    Safari and other DNS-SD compatible Web clients, use:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li"><code class="Nm">dns-sd</code>
  <code class="Fl">-R</code>&#x00A0;&quot;My Test&quot; _http._tcp . 80
  path=/path-to-page.html</code></div>
<p class="Pp">To find the advertised web pages on the local network (the same
    list that Safari shows), use:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li"><code class="Nm">dns-sd</code>
  <code class="Fl">-B</code>&#x00A0;_http._tcp</code></div>
<p class="Pp">While that command is running, in another window, try the
    <code class="Nm">dns-sd</code> <code class="Fl">-R</code> example given
    above to advertise a web page, and you should see the &quot;Add&quot; event
    reported to the <code class="Nm">dns-sd</code> <code class="Fl">-B</code>
    window. Now press Ctrl-C in the <code class="Nm">dns-sd</code>
    <code class="Fl">-R</code> window and you should see the &quot;Remove&quot;
    event reported to the <code class="Nm">dns-sd</code>
    <code class="Fl">-B</code> window.</p>
<p class="Pp">In the example below, the www.apple.com web page is advertised as
    a service called &quot;apple&quot;, running on a target host called
    apple.local, which resolves to 17.149.160.49.</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li"><code class="Nm">dns-sd</code>
  <code class="Fl">-P</code>&#x00A0;apple _http._tcp &quot;&quot; 80 apple.local
  17.149.160.49</code></div>
<p class="Pp">The Bonjour menu in the Safari web browser will now show
    &quot;apple&quot;. The same IP address can be reached by entering
    apple.local in the web browser. In either case, the request will be resolved
    to the IP address and browser will show contents associated with
    www.apple.com.</p>
<p class="Pp">If a client wants to be notified of changes in server state, it
    can initiate a query for the service's particular record and leave it
    running. For example, to monitor the status of an iChat user you can
  use:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li"><code class="Nm">dns-sd</code>
  <code class="Fl">-q</code>&#x00A0;someone@ex1._presence._tcp.local
  txt</code></div>
<p class="Pp">Everytime status of that user(someone) changes, you will see a new
    TXT record result reported.</p>
<p class="Pp">You can also query for a unicast name like www.apple.com and
    monitor its status.</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li"><code class="Nm">dns-sd</code>
  <code class="Fl">-q</code>&#x00A0;www.apple.com</code></div>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<p class="Pp"><span class="Pa">/usr/bin/dns-sd</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="../8/mDNSResponder">mDNSResponder(8)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp"><code class="Nm">dns-sd</code> bugs are tracked in Apple Radar
    component &quot;mDNSResponder&quot;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">The <code class="Nm">dns-sd</code> command first appeared in Mac
    OS X 10.4 (Tiger).</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">April 2004</td>
    <td class="foot-os"><a href="..">Darwin</a></td>
  </tr>
</table>
</body>
</html>
