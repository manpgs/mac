<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>TORQUE(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TORQUE(1)</td>
    <td class="head-vol"><a href=".">General Commands Manual</a></td>
    <td class="head-rtitle">TORQUE(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">torque</code> &#x2014; <span class="Nd">Launches
    one or more child processes, each of which performs a series of bandwidth
    intensive operations, and after completion <code class="Nm">torque</code>
    reports the bandwidth actually achieved by each operation during a period
    when all operation streams were executing simultaneously.</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">torque</code></td>
    <td>[Global Parameters] [[<var class="Ar">Local Parameters</var>]
      <var class="Ar">Action1</var>] [[<var class="Ar">Local Parameters</var>]
      <var class="Ar">Action2</var>] [[<var class="Ar">Local Parameters</var>]
      <var class="Ar">Action3</var>] [...]
    <p class="Pp">Global Parameters (affect all actions performed):
      <br/>
      [<code class="Fl">-aliasFile</code> <var class="Ar">f</var>]
        [<code class="Fl">-bo</code>] [<code class="Fl">-c</code>
        <var class="Ar">configuration file</var>]
        [<code class="Fl">-example</code>] [<code class="Fl">-f</code>
        <var class="Ar">test file</var>] [<code class="Fl">-fast</code>]
        [<code class="Fl">-freeSharedMemory</code>] [<code class="Fl">-g</code>]
        [<code class="Fl">-h</code>] [<code class="Fl">-ha</code>]
        [<code class="Fl">-help</code>] [<code class="Fl">-hg</code>]
        [<code class="Fl">-hl</code>] [<code class="Fl">-nh</code>]
        [<code class="Fl">-printAlias</code>] [<code class="Fl">-quit</code>]
        [<code class="Fl">-seed</code> <var class="Ar">n</var>]
        [<code class="Fl">-slow</code>] [<code class="Fl">-smkey</code>
        <var class="Ar">key</var>] [<code class="Fl">-sp</code>]
        [<code class="Fl">-v</code>] [<code class="Fl">-version</code>]
        [<code class="Fl">-vl</code> <var class="Ar">n</var>]</p>
    <p class="Pp">Local Parameters (only affect immediately following action):
      <br/>
      [<code class="Fl">-affinityNumber</code> <var class="Ar">n</var>]
        [<code class="Fl">-affinityNumberDiff</code> <var class="Ar">n</var>]
        [<code class="Fl">-affinityParent</code> <var class="Ar">n</var>]
        [<code class="Fl">-B</code> <var class="Ar">bytes</var>]
        [<code class="Fl">-bp</code> <var class="Ar">p</var>]
        [<code class="Fl">-bpkey</code> <var class="Ar">p</var>]
        [<code class="Fl">-bp1</code> <var class="Ar">p</var>]
        [<code class="Fl">-bp2</code> <var class="Ar">p</var>]
        [<code class="Fl">-bt</code> <var class="Ar">p</var>]
        [<code class="Fl">-btr</code>] [<code class="Fl">-cfiles</code>]
        [<code class="Fl">-checkpoint</code>] [<code class="Fl">-dir</code>
        <var class="Ar">path</var>] [<code class="Fl">-display</code>
        <var class="Ar">display</var>] [<code class="Fl">-execChild</code>]
        [<code class="Fl">-extraReadB</code> <var class="Ar">n</var>]
        [<code class="Fl">-fbc</code>] [<code class="Fl">-GB</code>
        <var class="Ar">GBytes</var>] [<code class="Fl">-i</code>
        <var class="Ar">iterations</var>] [<code class="Fl">-IH</code>
        <var class="Ar">pixels</var>] [<code class="Fl">-IW</code>
        <var class="Ar">pixels</var>] [<code class="Fl">-KB</code>
        <var class="Ar">KBytes</var>] [<code class="Fl">-linesize</code>
        <var class="Ar">bytes</var>] [<code class="Fl">-m</code>]
        [<code class="Fl">-MB</code> <var class="Ar">MBytes</var>]
        [<code class="Fl">-mfileKB</code> <var class="Ar">n</var>]
        [<code class="Fl">-mfileXfer</code> <var class="Ar">transfers</var>]
        [<code class="Fl">-n</code> <var class="Ar">transfers</var>]
        [<code class="Fl">-noResetParentAffinity</code>]
        [<code class="Fl">-noVideoInitLoops</code>]
        [<code class="Fl">-offsetB</code> <var class="Ar">n</var>]
        [<code class="Fl">-p</code> <var class="Ar">process count</var>]
        [<code class="Fl">-percR</code> <var class="Ar">p</var>]
        [<code class="Fl">-s</code> <var class="Ar">offset</var>]
        [<code class="Fl">-sa</code> <var class="Ar">interval</var>]
        [<code class="Fl">-sample</code> <var class="Ar">interval</var>]
        [<code class="Fl">-sleepEnd</code> <var class="Ar">n</var>]
        [<code class="Fl">-stride</code> <var class="Ar">bytes</var>]
        [<code class="Fl">-T</code> <var class="Ar">usec</var>]
        [<code class="Fl">-touch</code>] [<code class="Fl">-touch4K</code>]
        [<code class="Fl">-vectorB</code> <var class="Ar">n</var>]
        [<code class="Fl">-wire</code>]</p>
    <p class="Pp">Actions (Specific action to perform):
      <br/>
      [<code class="Fl">-aio</code> <var class="Ar">n</var>]
        [<code class="Fl">-bcopy</code>] [<code class="Fl">-bzero</code>]
        [<code class="Fl">-child</code> <var class="Ar">n</var>]
        [<code class="Fl">-files</code> <var class="Ar">n</var>]
        [<code class="Fl">-load</code>] [<code class="Fl">-ls</code>]
        [<code class="Fl">-memStreams</code> <var class="Ar">label lookahead
        size bw startTime runTime mfile</var>] [<code class="Fl">-r</code>]
        [<code class="Fl">-rand</code>] [<code class="Fl">-rmw</code>]
        [<code class="Fl">-rw</code>] [<code class="Fl">-Sadd</code>]
        [<code class="Fl">-scan</code> <var class="Ar">fn</var>]
        [<code class="Fl">-scanfile</code> <var class="Ar">fn</var>]
        [<code class="Fl">-Scopy</code>] [<code class="Fl">-spinWait</code>]
        [<code class="Fl">-Sscale</code>] [<code class="Fl">-store</code>]
        [<code class="Fl">-streams</code> <var class="Ar">label lookahead size
        bw startTime runTime mfile</var>] [<code class="Fl">-Striad</code>]
        [<code class="Fl">-V</code> <var class="Ar">n</var>]
        [<code class="Fl">-w</code>]</p>
    </td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><code class="Nm">torque</code> exercises a computer system in ways
    that mimic normal operation, while retaining as much simplicity as possible
    to aid in debugging. This is achieved by launching one or more child
    processes performing a series of operations (usually high bandwidth) and
    after completion reporting the bandwidth achieved by each operation during a
    period where all operation streams were executing simultaneously in their
    steady-state behavior. Note that <code class="Nm">torque</code> only
    measures its own processes and does not measure bandwidth of any other
    executing process.</p>
<p class="Pp">This tool is currently in use for measuring system bandwidth,
    testing for interactions between different sub-systems, reproducing
    problems, power analysis, thermal analysis, signal sensitivity analysis, and
    more. <code class="Nm">torque</code> contains a number of simple tests that
    are used together in any combination to exercise memory, video, and/or any
    component that supports a file system. Each separate test is run in its own
    process, and each action listed above specifies one or more tests to execute
    simultaneously. Common processor memory access patterns such as bcopy,
    bzero, load, and store are supported as well as different ways to access the
    file system. All test runtime parameters can be entered using a
    configuration file or as a command line parameter.</p>
<p class="Pp">When executed, <code class="Nm">torque</code> reports the most
    common system characteristics such as processor speed and memory size. In
    addition many more configuration details are left behind in the file
    sysctl.current. During an execution, the first two things displayed are
    always the <code class="Nm">torque</code> version number and the command
    line used for execution to make it as easy as possible to rerun the test and
    reproduce results at a later time.</p>
<p class="Pp">Since <code class="Nm">torque</code> uses a large number of
    operational parameters, the command line parameters are broken into three
    groups: global test parameters, local test parameters, and actions/tests.
    All tests have default configurations and can be executed with just an
    action parameter. For example, &quot; <code class="Nm">torque</code> -V
    7&quot;, the action parameter is &quot;-V 7&quot; (run video test 7)
    requesting execution of a video system memory read test.</p>
<p class="Pp">If a user wishes to change the tests for things like working-set
    size, transaction size, number of transactions, duration, etc.; all local
    test parameters on the command line before the action apply to the action.
    For the video read test a common sequence is</p>
<p class="Pp"><code class="Nm">torque</code> -n 256 -i 1 -V 6</p>
<p class="Pp">to make sure there are exactly 256 transactions (-n 256) issued
    once. The local parameters &quot;-n 256 -i 1&quot; only apply to the video
    read test and not to any other test. If the user wishes to execute a stream
    of memory reads while performing the video read test an example command line
    is:</p>
<p class="Pp"><code class="Nm">torque</code> -p 1 -n 8 -i 20 -MB 4 -load -n 256
    -V 6</p>
<p class="Pp">In this case the load test has a working-set size of 4 x 8 = 32
    MBytes (-n 8 -MB 4) that is executed twenty times (-i 20). The video test
    still uses the same parameters mentioned above but is executed ten times
    (default) since &quot;-i 1&quot; was not entered on the command line. Note
    that the &quot;-i 20&quot; does not apply to the video test in this
  example.</p>
<p class="Pp">Global parameters can be entered anywhere on the command line and
    control functions that affect all of the tests. For example</p>
<p class="Pp"><code class="Nm">torque</code> -n 256 -i 1 -V 6 -nh</p>
<p class="Pp">removes the header output for each test, reducing the amount of
    text added to the screen after execution.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS_(Actions)"><a class="permalink" href="#OPTIONS_(Actions)">OPTIONS
  (Actions)</a></h1>
<dl class="Bl-tag">
  <dt id="aio"><a class="permalink" href="#aio"><code class="Fl">-aio</code></a>
    <var class="Ar">&lt;n&gt;</var></dt>
  <dd>n = number of outstanding transactions
    <br/>
    Performs reads and writes of transferSize (e.g. -B, -KB, -MB, -GB) using
      asynchronous I/O. The argument -percR sets the percentage of reads and
      writes. One process is launched that keeps the specified number of
      Asynchronous I/Os outstanding. Using Asynchronous I/O allows the file
      system greater flexibility in ordering transactions. All test transactions
      are sequential, unless vector stride (-vectorKB) is set to space the
      transactions linearly across a single file. Setting -percR 100 makes all
      outstanding transactions reads and -percR 0 makes all outstanding
      transactions writes. Any other settings causes each transaction to
      randomly be a read or write. Note that the system has a maximum number of
      outstanding AIOs for every process which for OS 10.4.3 is 16.
      <code class="Nm">torque</code> makes sure a single process does not go
      over this limit, but it is up to the user to make sure multiple processes
      do not exceed the system's maximum outstanding AIO limit.</dd>
  <dt id="bcopy"><a class="permalink" href="#bcopy"><code class="Fl">-bcopy</code></a></dt>
  <dd>Perform bcopy test. Uses system bcopy function.</dd>
  <dt id="bzero"><a class="permalink" href="#bzero"><code class="Fl">-bzero</code></a></dt>
  <dd>Perform bzero test. Uses system bzero function</dd>
  <dt id="files"><a class="permalink" href="#files"><code class="Fl">-files</code></a>
    <var class="Ar">&lt;n&gt;</var></dt>
  <dd>n = number of files to test
    <p class="Pp">Random access read/write test to large number of files. To
        adjust read vs. write and max file size set -percR and -mfileMB
        repectively. The files test represents the use of a web server. There
        are thousands of files being read and written in random increments as
        the web site is being accessed. The accesses are of fixed size (transfer
        size) but random file choice and file location.</p>
  </dd>
  <dt id="load"><a class="permalink" href="#load"><code class="Fl">-load</code></a></dt>
  <dd>Perform loads as fast as possible. The default is one integer load for
      every sequential cache line.</dd>
  <dt id="ls"><a class="permalink" href="#ls"><code class="Fl">-ls</code></a></dt>
  <dd>Performs bursts of loads and stores as fast as possible. The burst size is
      the transactionSize specified.</dd>
  <dt id="memStreams"><a class="permalink" href="#memStreams"><code class="Fl">-memStreams</code></a>
    <var class="Ar">&lt;label&gt; &lt;lookahead&gt; &lt;size&gt; &lt;bw&gt;
    &lt;startTime&gt; &lt;runTime&gt; &lt;mfile&gt;</var></dt>
  <dd>Same as -streams, but works with system memory instead of files. At this
      time only the read stream has been tested.</dd>
  <dt id="r"><a class="permalink" href="#r"><code class="Fl">-r</code></a></dt>
  <dd>Perform Sequential Read Test</dd>
  <dt id="rand"><a class="permalink" href="#rand"><code class="Fl">-rand</code></a></dt>
  <dd>Randomly read transaction size chunks from a file. Be sure the file exists
      before executing and to set a max file size. The percentage of reads is
      set using the -percR parameter.</dd>
  <dt id="rmw"><a class="permalink" href="#rmw"><code class="Fl">-rmw</code></a></dt>
  <dd>Performs test to read, modify, write back to a file using a Sequential
      Read Transfer Size, then Write Transfer to modify read data.</dd>
  <dt id="rw"><a class="permalink" href="#rw"><code class="Fl">-rw</code></a></dt>
  <dd>Perform read of the specified transaction size, then write to the next
      sequential file location. The following read/write is to the next two
      sequential file locations.</dd>
  <dt id="Sadd"><a class="permalink" href="#Sadd"><code class="Fl">-Sadd</code></a></dt>
  <dd>Add test from stream benchmark. Adds two matrix of doubles and writes to a
      third matrix (c[j] = a[j]+b[j]).</dd>
  <dt id="scan"><a class="permalink" href="#scan"><code class="Fl">-scan</code></a>
    <var class="Ar">&lt;fn&gt;</var></dt>
  <dd>fn = filename; includes /dev/rdisk0&gt;
    <p class="Pp">It is preferred to use this command when scanning using the
        raw file I/O interface (e.g. /dev/rdisk0). This action can also scan
        through the standard file interface if the file location supplied is not
        in /dev. This action is designed to use the raw file I/O interface to
        perform transactions with equal spacing across an entire disk
        drive/file. When testing across an entire hard drive, this test provides
        bandwidth information for the different tracks on the physical disk by
        using the &quot;sample 0&quot; modifier. This is useful since accesses
        to inner hard drive tracks tend to have one half the bandwidth of
        accesses to the outer tracks. Note that this command automatically wires
        down the memory buffers and the wiring requires root access (see -wire).
        The easiest way to provide root access is by using the sudo command.</p>
  </dd>
  <dt id="scanfile"><a class="permalink" href="#scanfile"><code class="Fl">-scanfile</code></a>
    <var class="Ar">&lt;fn&gt;</var></dt>
  <dd>fn = filename; includes /dev/rdisk0&gt;
    <p class="Pp">Scan using standard file I/O interface to perform the same
        function as -scanDisk, but using the standard interface. The only real
        difference is the memory is not wired by default when using the
        -scanfile command. This command behaves identically to -scan if the
        -wire local parameter is set.</p>
  </dd>
  <dt id="Scopy"><a class="permalink" href="#Scopy"><code class="Fl">-Scopy</code></a></dt>
  <dd>Copy test from stream benchmark (www.streambench.org). Copies double
      values from one matrix to another (c[j] = a[j]).</dd>
  <dt id="spinWait"><a class="permalink" href="#spinWait"><code class="Fl">-spinWait</code></a></dt>
  <dd>This test is a random number generation routine. No bandwidth is generated
      or measured, but the processor is kept busy. This can be very useful when
      using affinity as it keeps a processor busy.</dd>
  <dt id="Sscale"><a class="permalink" href="#Sscale"><code class="Fl">-Sscale</code></a></dt>
  <dd>Scale test from stream benchmark. Scales doubles from one matrix to
      another (b[j] = scalar*c[j]).</dd>
  <dt id="store"><a class="permalink" href="#store"><code class="Fl">-store</code></a></dt>
  <dd>Perform stores as fast as possible. The default is one integer store for
      every sequential cache line.</dd>
  <dt id="streams"><a class="permalink" href="#streams"><code class="Fl">-streams</code></a>
    <var class="Ar">&lt;label&gt; &lt;lookahead&gt; &lt;size&gt; &lt;bw&gt;
    &lt;startTime&gt; &lt;runTime&gt; &lt;mfile&gt;</var></dt>
  <dd>Labels: r,w,rw,wr,rwr,rrw
    <br/>
     r = read stream
    <br/>
     w = write stream
    <br/>
     rw = write back the stream being read (modify stream)
    <br/>
     wr = read back the stream being written (from camera)
    <br/>
     rwr = read, change and write back, then read back
    <br/>
     rrw = combine to reads and write back (two cameras)
    <br/>
    Lookahead: # of Transfers for 1st read stream to prefetch
    <br/>
    Size: Size of each transfer (KBytes)
    <br/>
    BW: Bandwidth of each process within the stream (MBytes/sec)
    <br/>
    StartTime: Delay in seconds before starting stream
    <br/>
    RunTime: Length in seconds of stream duration
    <br/>
    mfile: reset stream to start of file when reached (Mbytes)
    <p class="Pp">Instead of trying to discover the maximum bandwidth capability
        of a path to memory or I/O, the stream/HDTV test attempts to hold one or
        more streams to a particular bandwidth. In addition, streams can be
        dependent upon each other. The goal is to simulate how video streams are
        used. For example, the rrw option represents a video stream composed of
        combining two video feeds. This means that the two read streams are
        consumed to produce the one write stream. The option rwr consists of a
        read stream that is then written back with a second read stream reading
        the written results. This may happen on a video feed that is being saved
        and watched at the same time. All combinations of rw,wr,rwr, and rrw
        include dependencies. If the goal is to create streams without
        dependencies, then just specify multiple streams using r and w. If it is
        not possible to meet the specified bandwidth, then
        <code class="Nm">torque</code> reports the achieved bandwidth.</p>
  </dd>
  <dt id="Striad"><a class="permalink" href="#Striad"><code class="Fl">-Striad</code></a></dt>
  <dd>Triad test from stream benchmark. Scales a matrix of doubles, adds from
      another matrix and then writes to a third matrix. (a[j] =
      b[j]+scalar*c[j]).</dd>
  <dt id="V"><a class="permalink" href="#V"><code class="Fl">-V</code></a>
    <var class="Ar">&lt;n&gt;</var></dt>
  <dd>n = video test number
    <p class="Pp">n=1; Read Pixels (W): proc. reads VRAM, writes system memory
      <br/>
      n=2; sync image copy (W): Video DMA to system memory
      <br/>
      n=3; async image copy (W): Video DMA to system memory
      <br/>
      n=4; test 3 with glFlush() (W): Video DMA to sys. memory
      <br/>
      n=5; sync PBO copy (W): Video PBO DMA to system memory
      <br/>
      n=6; async PBO copy (W): Video PBO DMA to system memory;
      <br/>
      n=7; async image copy (R): DMA system memory to VRAM
      <br/>
      n=8; sync image copy (R): DMA to VRAM (Added glFlush())
      <br/>
      n=9; sync image copy (R): DMA to VRAM (Added glFinish())
      <br/>
      n=10; async image copy (R): DMA system memory to VRAM
      <br/>
      n=11; sync image copy (R): DMA to VRAM (Added glFlush())
      <br/>
      n=12; sync image copy (R): DMA to VRAM (Added glFinish())</p>
    <p class="Pp">The first video test consists of the processor reading the
        VRAM, the next five video tests involve copying data from the VRAM to
        system memory, and the sixth through ninth tests copy data from system
        memory to VRAM. Tests 10 through 12 are identical to tests 6 through 9,
        but the texture is rotated between three different textures every
        transaction. This was necessary since the newest video cards are only
        performing the first transfer on tests 6 through 9 and reporting
        unbelievable bandwidths. The hope is that the card is now smart enough
        to buffer the texture, but this has not yet been proven. If tests 6
        through 9 report unbelievable bandwidths, use the results from tests 10
        through 12 instead. The default transfer size is 1.32 MBytes, but this
        can be changed using -IH and -IW.</p>
  </dd>
  <dt id="w"><a class="permalink" href="#w"><code class="Fl">-w</code></a></dt>
  <dd>Perform Sequential Write test.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS_(Global_Parameters)"><a class="permalink" href="#OPTIONS_(Global_Parameters)">OPTIONS
  (Global Parameters)</a></h1>
<dl class="Bl-tag">
  <dt id="aliasFile"><a class="permalink" href="#aliasFile"><code class="Fl">-aliasFile</code></a>
    <var class="Ar">filename</var></dt>
  <dd>Provides file location for torque alias definitions.</dd>
  <dt id="bo"><a class="permalink" href="#bo"><code class="Fl">-bo</code></a></dt>
  <dd>only print bandwidth results.</dd>
  <dt id="c"><a class="permalink" href="#c"><code class="Fl">-c</code></a>
    <var class="Ar">&lt;configuration filename&gt;</var></dt>
  <dd>Choose the configuration file for <code class="Nm">torque</code> ;
      Torque.config is the default. A configuration file may contain any option
      or argument that may be entered on the command line of
      <code class="Nm">torque</code> This is very useful for commands that are
      required for every execution of <code class="Nm">torque</code> such as -f.
      Note that command line arguments are consumed before configuration file
      commands.</dd>
  <dt id="child"><a class="permalink" href="#child"><code class="Fl">-child</code></a>
    <var class="Ar">n</var></dt>
  <dd>Grabs shared memory and executes test for child n. In Leopard, the video
      tests can no longer be executed as a forked process. Instead a fork-exec
      is used with command line parameters telling torque which child needs to
      be executed as a separate program. When this happens, torque grabs the
      shared memory already set up for the child process and executes the
    test.</dd>
  <dt id="example"><a class="permalink" href="#example"><code class="Fl">-example</code></a></dt>
  <dd>Print Testing Example.
    <br/>
    The usage/help output is long, so there are ways to display only a portion
      of the help file. The -h option displays the shortest output and the -help
      option displays everything.</dd>
  <dt id="f"><a class="permalink" href="#f"><code class="Fl">-f</code></a>
    <var class="Ar">&lt;test file&gt;</var></dt>
  <dd>Place new test file on file list. As many as 128 tests may be included in
      this list. It is usually easiest to place the tests in the configuration
      file and use the -s option to make sure each test uses the appropriate
      file. A file on the command line is placed on the file list before any
      files from the configuration file. Each test stops upon its own
      completion. With more than one test, all tests might not be running during
      the measurment interval. If torque is interrupted, this can be used to
      removed shared memory. Running torque a second time without interruption
      should also work.</dd>
  <dt id="g"><a class="permalink" href="#g"><code class="Fl">-g</code></a></dt>
  <dd>Delay start of <code class="Nm">torque</code> using getchar. No testing
      starts until a key is pressed. This is useful for finding the PID and
      attaching shark to the process before testing begins. See shark
      documentation for details. A reference to the shark documentation can be
      found in the SEE ALSO section.</dd>
  <dt id="h"><a class="permalink" href="#h"><code class="Fl">-h</code></a></dt>
  <dd>Print <code class="Nm">torque</code> Global Usage/Help</dd>
  <dt id="ha"><a class="permalink" href="#ha"><code class="Fl">-ha</code></a></dt>
  <dd>Print <code class="Nm">torque</code> Tests/Actions Usage/Help</dd>
  <dt id="help"><a class="permalink" href="#help"><code class="Fl">-help</code></a></dt>
  <dd>Print All <code class="Nm">torque</code> Usage and Example</dd>
  <dt id="hg"><a class="permalink" href="#hg"><code class="Fl">-hg</code></a></dt>
  <dd>Print <code class="Nm">torque</code> Global Usage/Help</dd>
  <dt id="hl"><a class="permalink" href="#hl"><code class="Fl">-hl</code></a></dt>
  <dd>Print <code class="Nm">torque</code> Local Usage/Help</dd>
  <dt id="nh"><a class="permalink" href="#nh"><code class="Fl">-nh</code></a></dt>
  <dd>Don't print header. Along with the Bandwidth numbers, certain header
      information is included to help describe the test choices under execution
      and the system under test. This option reduces the output to just the
      Bandwidth results.</dd>
  <dt id="printAlias"><a class="permalink" href="#printAlias"><code class="Fl">-printAlias</code></a></dt>
  <dd>Print current set of torque aliases.</dd>
  <dt id="quit"><a class="permalink" href="#quit"><code class="Fl">-quit</code></a></dt>
  <dd>Quits <code class="Nm">torque</code> as soon as the command line
      parameters and configuration file are parsed. Sometimes it is useful to
      see how the parameters are parsed before testing begins. This option
      allows the checking of parameters without having to wait for results.</dd>
  <dt id="seed"><a class="permalink" href="#seed"><code class="Fl">-seed</code></a>
    <var class="Ar">&lt;n&gt;</var></dt>
  <dd>Provide seed for all random number generation. This provides the seed for
      the first random number generated. All numbers after that depend on the
      first random number generated otherwise the current time is used.
      Providing a random number guarrentees that two identical executions are
      identical even when random numbers are used.</dd>
  <dt id="slow"><a class="permalink" href="#slow"><code class="Fl">-slow</code></a></dt>
  <dd>Continue All testing until slowest test completes. When executing two
      tests that interact during the testing phase, if one test finishes before
      the other, there is a period where only one test is executing. This makes
      the test that ran without overlap produce a higher bandwidth number. The
      -slow option keeps all tests running until the slowest test completes.
      Note that the testing takes at least twice as long in this mode. This
      option is on by default whenever more than one test is run
    simultaneously.</dd>
  <dt id="smkey"><a class="permalink" href="#smkey"><code class="Fl">-smkey</code></a>
    <var class="Ar">&lt;key&gt;</var></dt>
  <dd>Provides new key for shmget (default: 0xDECA). Does not currently work
      with -childExec.</dd>
  <dt id="sp"><a class="permalink" href="#sp"><code class="Fl">-sp</code></a></dt>
  <dd>Run <code class="Nm">torque</code> as a single process. Normally
      <code class="Nm">torque</code> forks off one process for every test and
      leave behind the main process to gather results. This option is useful for
      a single test where the main process should perform the testing. For
      example it is much easier to use this option for debugging.</dd>
  <dt id="v"><a class="permalink" href="#v"><code class="Fl">-v</code></a></dt>
  <dd>Use couts in code (gv-&gt;verbose). A large amount of information about
      the program and how the tests are progressing is sent to stdout. Unluckily
      cout and printf are very system invasive and using the -v option may skew
      test results.</dd>
  <dt id="version"><a class="permalink" href="#version"><code class="Fl">-version</code></a></dt>
  <dd>Prints installed torque version information.</dd>
  <dt id="vl"><a class="permalink" href="#vl"><code class="Fl">-vl</code></a>
    <var class="Ar">&lt;n&gt;</var></dt>
  <dd>Set verbose level greater than one. This option provides more feedback
      than just using -v. Currently <code class="Nm">torque</code> supports
      three levels of verbosity. Using -vl 1 is equivalent to -v while using -vl
      2 or -vl 3 provides so much detail that in some cases stdout shows
      information about every transaction. This level of verbosity tends to
      reduce the effectiveness of tests, but provides for detailed debugging.
      This should never be used by a typical user.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS_(Local/Modifying_Parameters)"><a class="permalink" href="#OPTIONS_(Local/Modifying_Parameters)">OPTIONS
  (Local/Modifying Parameters)</a></h1>
<dl class="Bl-tag">
  <dt id="affinityNumber"><a class="permalink" href="#affinityNumber"><code class="Fl">-affinityNumber</code></a>
    <var class="Ar">&lt;n&gt;</var></dt>
  <dd>Provides a test with an affinity number used for process scheduling. All
      processes in a group of tests will have the same affinity number. Leopard
      Only.</dd>
  <dt id="affinityNumberDiff"><a class="permalink" href="#affinityNumberDiff"><code class="Fl">-affinityNumberDiff</code></a>
    <var class="Ar">&lt;n&gt;</var></dt>
  <dd>Provides a test with an affinity number used for process scheduling. All
      processes in a group of tests will have different affinity numbers.
      Leopard Only.</dd>
  <dt id="affinityParent"><a class="permalink" href="#affinityParent"><code class="Fl">-affinityParent</code></a>
    <var class="Ar">&lt;n&gt;</var></dt>
  <dd>Provides the parent process with the affinity number of the child before
      launch. This is used for process scheduling. Leopard Only.</dd>
  <dt id="B"><a class="permalink" href="#B"><code class="Fl">-B</code></a>
    <var class="Ar">&lt;Bytes&gt;</var></dt>
  <dd>Set test transfer size; Bytes to transfer.</dd>
  <dt id="bp"><a class="permalink" href="#bp"><code class="Fl">-bp</code></a>
    <var class="Ar">&lt;p&gt;</var></dt>
  <dd>Memory Test Pattern Initialization. Sets 64 bit init pattern 1 and 2 for
      Memory Tests. For example &quot;-bp 0x5555555555555555&quot;.</dd>
  <dt id="bpKey"><a class="permalink" href="#bpKey"><code class="Fl">-bpKey</code></a>
    <var class="Ar">&lt;p&gt;</var></dt>
  <dd>Sets whether the Memory Test Pattern Initialization starts each buffer
      with a unique key that can be detected by a logic analyzer.
    <br/>
     0 = Do not add a key to memory test buffer.
    <br/>
     1 = add LA Key to start of Memory Buffer Init (default).</dd>
  <dt id="bp1"><a class="permalink" href="#bp1"><code class="Fl">-bp1</code></a>
    <var class="Ar">&lt;p&gt;</var></dt>
  <dd>Memory Test Pattern Initialization. Sets 64 bit init pattern 1 for Memory
      Tests. For example &quot;-bp 0x5555555555555555&quot;.</dd>
  <dt id="bp2"><a class="permalink" href="#bp2"><code class="Fl">-bp2</code></a>
    <var class="Ar">&lt;p&gt;</var></dt>
  <dd>Memory Test Pattern Initialization. Sets 64 bit init pattern 2 for Memory
      Tests. For example &quot;-bp 0x5555555555555555&quot;.</dd>
  <dt id="bt"><a class="permalink" href="#bt"><code class="Fl">-bt</code></a>
    <var class="Ar">&lt;p&gt;</var></dt>
  <dd>Memory Test Pattern Initialization. Sets usage of 64 bit init patterns 1
      and 2 for Memory Tests.
    <br/>
     p = percentage of bit toggling on a 64 bit bus0;
    <br/>
     0 = pattern 1 is written every bus cycle
    <br/>
     (1,1,1,1,...).
    <br/>
     100 = alternate between pattern 1 and 2
    <br/>
     (1,2,1,2,1,2,...).
    <br/>
     50 = alternate between pairs of pattern 1 and 2
    <br/>
     (1,1,2,2,1,1,...).
    <br/>
     75 = repeating pattern using pattern 1 and 2
    <br/>
     (1,2,1,2,2,1,2,1,1,2,1,2,2,1,2,1,1,...).
    <br/>
     101 = Pattern visually recognizable on a logic analyzer0;
    <br/>
     102 = Random Pattern0;</dd>
  <dt id="btr"><a class="permalink" href="#btr"><code class="Fl">-btr</code></a></dt>
  <dd>Memory Test Pattern Initialization with random numbers.</dd>
  <dt id="cfiles"><a class="permalink" href="#cfiles"><code class="Fl">-cfiles</code></a></dt>
  <dd>Make sure files exist for files test. The files test requires a specific
      file structure. If the tester has any doubt that the correct file
      structure exists, this command generates the required file structure. In
      some cases perfomance can be slightly different after creating a file
      structure so it is important to know the effects of running this command
      before the test as a separate execution and on the same command line as
      the test. The actual file creation is performed before the test and is not
      timed.</dd>
  <dt id="checkpoint"><a class="permalink" href="#checkpoint"><code class="Fl">-checkpoint</code></a></dt>
  <dd>Used for measuring times for different portions of torque execution.
      Currently only works for memory tests.</dd>
  <dt id="dir"><a class="permalink" href="#dir"><code class="Fl">-dir</code></a>
    <var class="Ar">&lt;path&gt;</var></dt>
  <dd>Specifies directory used for files test. If no directory is specified, the
      default is to use filestest in the launching directory.</dd>
  <dt id="display"><a class="permalink" href="#display"><code class="Fl">-display</code></a></dt>
  <dd>Picks display used by video test. Warning: openGL cannot see a display
      unless a monitor is attached.</dd>
  <dt id="execChild"><a class="permalink" href="#execChild"><code class="Fl">-execChild</code></a></dt>
  <dd>This is a mechanism to perform an execp() if a forked test uses mach
      calls. The video tests require this for leopard if they are not run
      standalone. If the video tests are run standalone, then -sp should be used
      instead.</dd>
  <dt id="extraReadB"><a class="permalink" href="#extraReadB"><code class="Fl">-extraReadB</code></a>
    <var class="Ar">&lt;Bytes&gt;</var></dt>
  <dd>Add an extra read and lseek back for every transfer (Read test Only).</dd>
  <dt id="extraReadKB"><a class="permalink" href="#extraReadKB"><code class="Fl">-extraReadKB</code></a>
    <var class="Ar">&lt;KBytes&gt;</var></dt>
  <dd>Add an extra read and lseek back for every transfer (Read test Only).</dd>
  <dt id="extraReadMB"><a class="permalink" href="#extraReadMB"><code class="Fl">-extraReadMB</code></a>
    <var class="Ar">&lt;MBytes&gt;</var></dt>
  <dd>Add an extra read and lseek back for every transfer (Read test Only).
    <br/>
    This parameter causes an extra read to be performed after each test transfer
      of the specified size. After the extra read is performed, a lseek is also
      performed to reset the file pointer to where it was before the read</dd>
  <dt id="fbc"><a class="permalink" href="#fbc"><code class="Fl">-fbc</code></a></dt>
  <dd>Turn on unix file buffer cache.
    <br/>
    By default the file buffer cache (fbc) is disabled by the test. Using this
      parameter re-enables the file buffer cache. Note turning off the file
      buffer cache for a file prevents new data from entering the fbc. If the
      file already has data in the fbc, the data remains until pushed out. This
      may cause problems if trying to execute with and without the file buffer
      cache enabled. The results for a <code class="Nm">torque</code> run may be
      dependent upon a previous execution. When enabling the fbc, make sure to
      execute twice, once to warm up the fbc and once to get results.</dd>
  <dt id="GB"><a class="permalink" href="#GB"><code class="Fl">-GB</code></a>
    <var class="Ar">&lt;GBytes&gt;</var></dt>
  <dd>Set test transfer size in GBytes.</dd>
  <dt id="i"><a class="permalink" href="#i"><code class="Fl">-i</code></a>
    <var class="Ar">&lt;number of iterations&gt;</var></dt>
  <dd>A test may be run more than one time using this command. The bandwidth
      reported is averaged over all iterations.</dd>
  <dt id="IH"><a class="permalink" href="#IH"><code class="Fl">-IH</code></a>
    <var class="Ar">&lt;h&gt;</var></dt>
  <dd>Image height for Video Tests in pixels.</dd>
  <dt id="IW"><a class="permalink" href="#IW"><code class="Fl">-IW</code></a>
    <var class="Ar">&lt;w&gt;</var></dt>
  <dd>Image width for Video Tests in pixels.
    <br/>
    Video Image Size = h x w x 4 bytes.
    <br/>
    The Video tests work with one Image at a time. The image size defaults to
      720 x 480 = 1.32 Mbytes, but can be changed to provide different transfer
      sizes.</dd>
  <dt id="KB"><a class="permalink" href="#KB"><code class="Fl">-KB</code></a>
    <var class="Ar">&lt;KBytes&gt;</var></dt>
  <dd>Set test transfer size in KBytes.</dd>
  <dt id="linesize"><a class="permalink" href="#linesize"><code class="Fl">-linesize</code></a>
    <var class="Ar">&lt;bytes of cache line&gt;</var></dt>
  <dd>System cache line size for -load and -store for integer access spacing. A
      system's cache line size is determined by torque during initializaiton and
      the line size is used for the default stride of the -load and -store
      tests. The -linesize option overrides the cache line size determined by
      the system and is used as a new default by torque. Since -stride overides
      the cache line size for -load and -store, changing the line size has no
      effect if -stride is specified for the test.
      <code class="Nm">torque</code> automatically sets the cache line size for
      the processor under test, but this parameter can override
      <code class="Nm">torque</code> and replace the value with whatever the
      user desires. This is really the same as setting -stride.</dd>
  <dt id="m"><a class="permalink" href="#m"><code class="Fl">-m</code></a></dt>
  <dd>Cause valloced memory not to be on page boundaries. Vallocs are carefully
      aligned on 4 KByte page boundaries. This option offsets all of the file
      test vallocs (not bcopy, bzero, store, and load) by one byte to make sure
      nothing is properly aligned.</dd>
  <dt id="MB"><a class="permalink" href="#MB"><code class="Fl">-MB</code></a>
    <var class="Ar">&lt;MBytes&gt;</var></dt>
  <dd>Set test transfer size in MBytes.</dd>
  <dt id="mfile4KB"><a class="permalink" href="#mfile4KB"><code class="Fl">-mfile4KB</code></a>
    <var class="Ar">&lt;4 KBytes Chunks&gt;</var></dt>
  <dd>Setting Max File Size in number of 4K blocks.</dd>
  <dt id="mfileGB"><a class="permalink" href="#mfileGB"><code class="Fl">-mfileGB</code></a>
    <var class="Ar">&lt;GBytes&gt;</var></dt>
  <dd>Setting Max File Size in GBytes.</dd>
  <dt id="mfileKB"><a class="permalink" href="#mfileKB"><code class="Fl">-mfileKB</code></a>
    <var class="Ar">&lt;KBytes&gt;</var></dt>
  <dd>Setting Max File Size in KBytes.</dd>
  <dt id="mfileMB"><a class="permalink" href="#mfileMB"><code class="Fl">-mfileMB</code></a>
    <var class="Ar">&lt;MBytes&gt;</var></dt>
  <dd>Setting Max File Size in MBytes.</dd>
  <dt id="mfileXfer"><a class="permalink" href="#mfileXfer"><code class="Fl">-mfileXfer</code></a>
    <var class="Ar">&lt;transfers&gt;</var></dt>
  <dd>Setting Max File Size in number of transfer size chunks.
    <br/>
    Some tests require a maximum file size. In addition, if a file is smaller
      than the desired test requirement, this setting can cause the test to wrap
      and reuse the file until the desired number of transfers have been
      completed. Be careful with this command as processor caches, the file
      buffer cache, and other artifacts may alter the performance results when
      the file size is too small. One way to be certain is to use 4 GByte file
      sizes. If this is not set, <code class="Nm">torque</code> does not check
      that the file size is large enough to perform the test. In the case of
      writes, accessing an offset greater than the file size just increases the
      file size. In the case of reads an error is returned and displayed to
      stdout for every transaction when the offset exceeds the file size.</dd>
  <dt id="n"><a class="permalink" href="#n"><code class="Fl">-n</code></a>
    <var class="Ar">&lt;file transfers&gt;</var></dt>
  <dd>Specifies number of data transfers of transferSize.</dd>
  <dt id="noResetParentAffinity"><a class="permalink" href="#noResetParentAffinity"><code class="Fl">-noResetParentAffinity</code></a></dt>
  <dd>When using affinity, do not reset the parent's affinity number. All child
      processes still have their affinity number changed. Leopard Only.</dd>
  <dt id="noVideoInitLoops"><a class="permalink" href="#noVideoInitLoops"><code class="Fl">-noVideoInitLoops</code></a></dt>
  <dd>Disables video test warm-up. This allows using -sample to measure all
      video transactions as the warmup is not measured.</dd>
  <dt id="offsetB"><a class="permalink" href="#offsetB"><code class="Fl">-offsetB</code></a>
    <var class="Ar">&lt;Bytes&gt;</var></dt>
  <dd>Begin test transfers at offset n Bytes.</dd>
  <dt id="offsetKB"><a class="permalink" href="#offsetKB"><code class="Fl">-offsetKB</code></a>
    <var class="Ar">&lt;KBytes&gt;</var></dt>
  <dd>Begin test transfers at offset n KBytes.</dd>
  <dt id="offsetMB"><a class="permalink" href="#offsetMB"><code class="Fl">-offsetMB</code></a>
    <var class="Ar">&lt;MBytes&gt;</var></dt>
  <dd>Begin test transfers at offset n MBytes.
    <br/>
    Used for starting transfers at a place in a file or buffer other than the
      start. The offset given is in bytes, kilobytes, or megabytes; and if
      maxFileSize is set, the transfers wrap to the beginning of the file, not
      the offset.</dd>
  <dt id="p"><a class="permalink" href="#p"><code class="Fl">-p</code></a>
    <var class="Ar">&lt;process count&gt;</var></dt>
  <dd>This parameter controls the number duplicate tests running in the system
      simultaneously using separate processes for a single action. Each test
      behaves identically, but usually accesses different files/memory. For
      example -p 2 may be used in a two hard drive system to test each hard
      drive simultaneously. This gives the user a chance to see if each hard
      drive can affect the other using the specified test sequence. For example
      two Hard Drives on one ATA cable may both compete for bandwidth reducing
      each hard drive's individual bandwidth component. The two files used are
      specified with multiple -f parameters or in the configuration file. This
      is a short cut method for duplicate tests. The long-hand method would be
      to write the test parameters twice on the same command line.</dd>
  <dt id="percR"><a class="permalink" href="#percR"><code class="Fl">-percR</code></a>
    <var class="Ar">&lt;p&gt;</var></dt>
  <dd>For -rand, percent of reads executed (default 100) and any other test that
      uses a random percentage of reads verses writes. The -rand test performs a
      series of random reads and writes of the requested transfer size. The
      -percR parameter specifies the percentage of reads and writes from/to the
      file. For example -percR 100 would cause the test to only perform reads
      and no writes. Note that the -rand test still chooses reads vs. writes
      randomly, it just makes sure that the reads happen a given percentage of
      the time.</dd>
  <dt id="s"><a class="permalink" href="#s"><code class="Fl">-s</code></a>
    <var class="Ar">&lt;start with offset into file list&gt;</var></dt>
  <dd>Each file added by the -f parameter is numbered starting from zero. If -s
      is not specified, the third test uses the third file specified. If -s is
      specified, then the test uses the specified file instead. If the test uses
      more than one file (e.g. -p), then the second file used for the test is
      s+1, the third is s+2, etc.</dd>
  <dt id="sa"><a class="permalink" href="#sa"><code class="Fl">-sa</code></a>
    <var class="Ar">&lt;interval&gt;</var></dt>
  <dd>Same as -sample, but only outputs the bandwidth portion of the sampled
      data. Showing only the bandwidth of sampled transactions is very useful if
      the display is not wide enough to show all results. Since all sampled
      results are displayed as one table, using -sa applies to all sampled
      results even if -sample ocurrs again on the same command line.</dd>
  <dt id="sample"><a class="permalink" href="#sample"><code class="Fl">-sample</code></a>
    <var class="Ar">&lt;interval&gt;</var></dt>
  <dd>Interval = how many transfers between samples.
    <br/>
    Samples I/O requests for duration and bandwidth.
    <br/>
    <code class="Nm">torque</code> automatically reports an aggregate bandwidth
      for each test stream. In addition each stream may take up to 1024
      transaction samples allowing periodic capture of bandwidth between
      intervals. Since the time at the beginning and end of the sample is also
      given, bandwidth during intervals can be calculated, but
      <code class="Nm">torque</code> currently only calculates the bandwidth
      during each sample. This is especially important if a file is not
      sequentially located on the hard drive as the outer edge of the hard disk
      can be about twice as fast as the inner edge (-scan). It is also a good
      way to detect bursty behavior due to a bad hard drive, choppy file
      placement, or other system effects. A sample is time stamped after a
      specified number of transactions. Please make sure and check the number of
      transfers requested to make sure to keep the number of samples less than
      1024 samples as that is the maximum that can be collected. For a test
      performing 2048 transfers, the interval must be set to greater than one or
      only the first 1/2 of the test is sampled. Sometimes it is useful to set
      the interval higher say 255 (2048 transfers implies 8 samples) to reduce
      the amount of data reported. Note that <code class="Nm">torque</code>
      automatically stops taking samples after 1024, so any extra are lost.
      Remember these are samples; therefore the argument &quot;-sample 3&quot;
      measures every fourth transaction. Warning, if the transactions being
      measured are small and a lot of samples are taken, sampling can reduce the
      accuracy of the average bandwidth measurements performed by
      <code class="Nm">torque</code></dd>
  <dt id="stride"><a class="permalink" href="#stride"><code class="Fl">-stride</code></a>
    <var class="Ar">&lt;stride&gt;</var></dt>
  <dd>Test option to space load/store tests by stride. For the load and store
      tests an integer is loaded or stored. The default is to stride by cache
      line size since that equates to every load or store accessing system
      memory, but any stride can be specified. If a stride is specified smaller
      than the size of an integer, then <code class="Nm">torque</code> may not
      perform as expected due to processor and cache line edge constraints. Note
      the default stride is automatically set to a system's cache line size;
      therefore the default is dependent upon what system the test is executed
      on.</dd>
  <dt id="T"><a class="permalink" href="#T"><code class="Fl">-T</code></a>
    <var class="Ar">usec</var></dt>
  <dd>Slows down (throttles) a test to consume less than the maximum bandwidth
      possible. This is performed by adding the specified delay in microseconds
      to every transfer. If the delay is too small, then it may not have an
      effect for things like I/O where there is substantial overhead that is not
      in the process requesting the I/O. If the delay is too big, then the
      bandwidth consumed may become too small to be interesting. The best
      setting is usually determined by trial and error since it is very
      dependant upon the hardware being used and the desires of the testor.</dd>
  <dt id="touch"><a class="permalink" href="#touch"><code class="Fl">-touch</code></a></dt>
  <dd>Access one byte in the buffer holding the read data for each read
      transfer. This can be important if the tester is worried that the test
      commands were optimized away due to doing nothing with the data. As of Mac
      OS 10.4.8 this has not yet become an issue.</dd>
  <dt id="touch4K"><a class="permalink" href="#touch4K"><code class="Fl">-touch4K</code></a></dt>
  <dd>Access one byte for each 4K page in a read transfer. This parameter only
      affects read transfers. When set, the processor reads from the fetched
      read data (after it is placed in memory) one word for every transfer
      (-touch), or one word from every 4 Kbyte block (-touch4K) in a transfer.
      This makes sure the data fetched by a file read is used by the processor
      to detect any optimizations that perform differently when a file I/O fetch
      is not used by the processor. It also causes at least one cache line of
      each file transfer to be in a processor's cache.</dd>
  <dt id="vectorB"><a class="permalink" href="#vectorB"><code class="Fl">-vectorB</code></a>
    <var class="Ar">&lt;stride&gt;</var></dt>
  <dd>Test option to space file operations by stride in Bytes.</dd>
  <dt id="vectorKB"><a class="permalink" href="#vectorKB"><code class="Fl">-vectorKB</code></a>
    <var class="Ar">&lt;stride&gt;</var></dt>
  <dd>Test option to space file operations by stride in KBytes.</dd>
  <dt id="vectorMB"><a class="permalink" href="#vectorMB"><code class="Fl">-vectorMB</code></a>
    <var class="Ar">&lt;stride&gt;</var></dt>
  <dd>Test option to space file operations by stride in MBytes.
    <br/>
    Full spacing is transferSize + stride.
    <br/>
    When used, the test performs a transfer then performs a lseek of
      &quot;stride&quot; before performing the next transfer.</dd>
  <dt id="wire"><a class="permalink" href="#wire"><code class="Fl">-wire</code></a></dt>
  <dd>Wire malloc'ed memory for test. The user must have root access to wire
      memory. This is performed automatically for ScanDisk Test. This was
      originally meant to be an option of the ScanDisk Test, but was later
      decided to be mandatory. It is still an option for all other tests except
      bcopy, bzero, load, store.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="USAGE"><a class="permalink" href="#USAGE">USAGE</a></h1>
<p class="Pp">This section details how to use <code class="Nm">torque</code> and
    understand the returned results. The goal of <code class="Nm">torque</code>
    is to exercise desired portions of the computer system exactly as specified
    and report on the results. To provide maximum flexibility every operation is
    detailed through user specified parameters. To prevent very long command
    lines, every parameter has a default that may be overridden by the user. The
    user parameters can be provided through the command line or through a
    specification file. The default specification file provided with
    <code class="Nm">torque</code> is called Torque.config and is read in
    automatically if it exists unless overridden with the -c option.</p>
<p class="Pp">Below is a simple two processor load test, that can be run using
    either of the two equivalent command lines shown below. The test output
    follows the two command lines. Note that this test was executed on a single
    processor system and the total bandwidth reports the same results (with a
    small deviation) when performing a one or two process test. With one
    processor a two process test has each test running individually and then
    context switching with the other test. Therefore you get the same bandwidth,
    but it takes twice as long to complete.</p>
<p class="Pp"><code class="Nm">torque</code> -p 2 -n 8 -i 10 -MB 4 -load</p>
<p class="Pp">
  <br/>
   or</p>
<p class="Pp"><code class="Nm">torque</code> -p 1 -n 8 -i 10 -MB 4 -load -p 1 -n
    8 -i 10 -MB 4 -load</p>
<p class="Pp">
  <br/>
   torque, version: 2.0(1014)-17
  <br/>
   torque -p 2 -n 8 -i 10 -MB 4 -load
  <br/>
   Wed Aug 2 11:02:52 PDT 2006</p>
<p class="Pp">
  <br/>
   hw.machine: Power Macintosh
  <br/>
   hw.model: PowerBook3,4
  <br/>
   Ethernet Address: 00:03:93:c6:73:12</p>
<p class="Pp">
  <br/>
   1000 hw.cpufrequency (MHz)
  <br/>
   133 hw.busfrequency (MHz)
  <br/>
   32 hw.cachelinesize (Bytes)
  <br/>
   32 hw.l1icachesize (KByte)
  <br/>
   32 hw.l1dcachesize (KByte)
  <br/>
   256 hw.l2cachesize (KByte)
  <br/>
   1024 hw.memsize (MByte)
  <br/>
   1 hw.physicalcpu
  <br/>
   1 hw.logicalcpu
  <br/>
   18 hw.cputype
  <br/>
   11 hw.cpusubtype</p>
<p class="Pp">
  <br/>
   torque (time in ms)
  <br/>
   We waited for 2 processes
  <br/>
   transaction size = 4194304 (4096K), (4M)
  <br/>
   configuration file = Torque.config
  <br/>
   number of transactions = 8
  <br/>
   Largest File Size = 40 MBytes
  <br/>
   Bytes Transferred = 320 MBytes/process
  <br/>
   Number of processes = 2
  <br/>
   Number of iterations = 10
  <br/>
   -p 2 -n 8 -i 10 -MB 4 -load</p>
<p class="Pp">proc,Start,Finish,Diff,Xfers,BW(MB/s),TS(KB),IO/sec,Test,File,PID
  <br/>
   0, 1372, 2275, 902, 80, 354.8, 4096, 88, Load, NA, 707
  <br/>
   1, 1436, 2326, 890, 80, 359.6, 4096, 89, Load, NA, 708</p>
<p class="Pp">BW, , , , , , , , , , , Load , , , , , , , , , , , , , , , Total
  <br/>
  BW:, , , , , , , , , , , 714, , , , , , , , , , , , , , , 714</p>
<p class="Pp">
  <br/>
   714: Total Bandwidth Consumed (MBytes/sec)</p>
<p class="Pp">There are three stages to <code class="Nm">torque</code>
    execution: setup, testing, and reporting. In the setup stage the system
    configuration is reported, the test processes are created, memory both
    shared and private is allocated, and then everything waits behind a barrier
    semaphore until all processes are ready to begin testing. This ensures that
    all tests start at the same time. The information printed during setup
    consists of the <code class="Nm">torque</code> version number, the command
    line used to execute <code class="Nm">torque</code> , the date, the machine
    name, machine model, ethernet address, and relevant machine statistics. The
    ethernet address is provided as a way to verify which individual machine the
    test was executed on.</p>
<p class="Pp">During testing there is no information printed to the terminal as
    a printf/cout is very system intensive and may change the measured results.
    This means that during testing there is no feedback to let the user know
    that everything is progressing properly. When planning to perform long
    tests, run shorter versions first to make sure the test is progressing
    properly before starting a long test. Measuring Multiple Simultaneous Tests
    on page 28 of the <code class="Nm">torque</code> documentation (a pointer to
    the documentation is located in the SEE ALSO section below) details how
    testing is performed to make sure that all tests are executing
    simultaneously during the measurement interval. Of course if a user tries to
    run more tests than the machine has resources to support, such as two memory
    tests on a single processor as performed above,
    <code class="Nm">torque</code> does nothing to prevent it.</p>
<p class="Pp">The last step of execution is to report the results of testing.
    This is done in three sections: individual test information, table of
    bandwidths, and summary/totals. Each group of tests, one group for every
    action, details statistics on items like transfer size, number of
    transactions, etc. Appended at the end is the portion of the command line
    that was relevant to the group of tests described.</p>
<p class="Pp">The table of bandwidths has a number of columns:</p>
<p class="Pp">
  <br/>
   proc: Process/test number
  <br/>
   Start: Start time of measurement in milliseconds
  <br/>
   Finish: Finish time of measurement in milliseconds
  <br/>
   Diff: Measurement duration in milliseconds (Finish - Start)
  <br/>
   Xfers: Number of transfers during measurement interval
  <br/>
   BW(MB/s): Measured bandwidth in MBytes/second
  <br/>
   TS(KB): Transfer size of each transfer
  <br/>
   IO/sec: IOmeter like reporting (best to ignore).
  <br/>
   Test: Test Type. This may also include a number such as Display number for
    the video tests or file accessed for the hard drive tests
  <br/>
   File: File name if applicable
  <br/>
   PID: Process Id for the testing process</p>
<p class="Pp">Though this is a great way to catalog the results for one
    execution, it can be very hard to combine into a table of multiple
    executions. There are also caveats such as a bcopy performing 1 MByte/sec of
    bcopy, but actually resulting in 2 MBytes/second of system bandwidth. A
    comma separated list of individual system bandwidths for each test is
    included to make it easy to combine multiple executions of
    <code class="Nm">torque</code> in a single spreadsheet. Only the tests names
    that are executed are included in the comma separated list to keep the list
    from getting too long. Lastly <code class="Nm">torque</code> reports the
    total system bandwidth consumed. An easy way to extract just the comma
    separated bandwidths is to redirect multiple test outputs to a file and then
    use grep to grab the bandwidth results line. You may have to add a
    &quot;-a&quot; to grep since some commands like &quot;date&quot; sometimes
    use output that makes grep think the output file is binary.</p>
<p class="Pp">
  <br/>
   grep -a BW: filename</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Please send your comments, suggestions and bug reports to:
    perftools-feedback@group.apple.com</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">/Developer/ADC Reference Library/documentation/CHUD and
    /Developer/ADC Reference Library/documentation/CHUD/TorqueUserGuide.pdf</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">February 21, 2008</td>
    <td class="foot-os"><a href=".."></a></td>
  </tr>
</table>
</body>
</html>
