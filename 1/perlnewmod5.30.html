<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>PERLNEWMOD(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PERLNEWMOD(1)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">PERLNEWMOD(1)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">perlnewmod - preparing a new module for distribution</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This document gives you some suggestions about how to go about
    writing Perl modules, preparing them for distribution, and making them
    available via CPAN.</p>
<p class="Pp">One of the things that makes Perl really powerful is the fact that
    Perl hackers tend to want to share the solutions to problems they've faced,
    so you and I don't have to battle with the same problem again.</p>
<p class="Pp">The main way they do this is by abstracting the solution into a
    Perl module. If you don't know what one of these is, the rest of this
    document isn't going to be much use to you. You're also missing out on an
    awful lot of useful code; consider having a look at perlmod, perlmodlib and
    perlmodinstall before coming back here.</p>
<p class="Pp">When you've found that there isn't a module available for what
    you're trying to do, and you've had to write the code yourself, consider
    packaging up the solution into a module and uploading it to CPAN so that
    others can benefit.</p>
<p class="Pp">You should also take a look at perlmodstyle for best practices in
    making a module.</p>
<section class="Ss">
<h2 class="Ss" id="Warning"><a class="permalink" href="#Warning">Warning</a></h2>
<p class="Pp">We're going to primarily concentrate on Perl-only modules here,
    rather than XS modules. XS modules serve a rather different purpose, and you
    should consider different things before distributing them - the popularity
    of the library you are gluing, the portability to other operating systems,
    and so on. However, the notes on preparing the Perl side of the module and
    packaging and distributing it will apply equally well to an XS module as a
    pure-Perl one.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_should_I_make_into_a_module?"><a class="permalink" href="#What_should_I_make_into_a_module?">What
  should I make into a module?</a></h2>
<p class="Pp">You should make a module out of any code that you think is going
    to be useful to others. Anything that's likely to fill a hole in the
    communal library and which someone else can slot directly into their
    program. Any part of your code which you can isolate and extract and plug
    into something else is a likely candidate.</p>
<p class="Pp">Let's take an example. Suppose you're reading in data from a local
    format into a hash-of-hashes in Perl, turning that into a tree, walking the
    tree and then piping each node to an Acme Transmogrifier Server.</p>
<p class="Pp">Now, quite a few people have the Acme Transmogrifier, and you've
    had to write something to talk the protocol from scratch - you'd almost
    certainly want to make that into a module. The level at which you pitch it
    is up to you: you might want protocol-level modules analogous to Net::SMTP
    which then talk to higher level modules analogous to Mail::Send. The choice
    is yours, but you do want to get a module out for that server protocol.</p>
<p class="Pp">Nobody else on the planet is going to talk your local data format,
    so we can ignore that. But what about the thing in the middle? Building tree
    structures from Perl variables and then traversing them is a nice, general
    problem, and if nobody's already written a module that does that, you might
    want to modularise that code too.</p>
<p class="Pp">So hopefully you've now got a few ideas about what's good to
    modularise. Let's now see how it's done.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Step-by-step:_Preparing_the_ground"><a class="permalink" href="#Step-by-step:_Preparing_the_ground">Step-by-step:
  Preparing the ground</a></h2>
<p class="Pp">Before we even start scraping out the code, there are a few things
    we'll want to do in advance.</p>
<dl class="Bl-tag">
  <dt id="Look"><a class="permalink" href="#Look">Look around</a></dt>
  <dd>Dig into a bunch of modules to see how they're written. I'd suggest
      starting with Text::Tabs, since it's in the standard library and is nice
      and simple, and then looking at something a little more complex like
      File::Copy. For object oriented code, WWW::Mechanize or the
      <span class="Li">&quot;Email::*&quot;</span> modules provide some good
      examples.
    <p class="Pp">These should give you an overall feel for how modules are laid
        out and written.</p>
  </dd>
  <dt id="Check"><a class="permalink" href="#Check">Check it's new</a></dt>
  <dd>There are a lot of modules on CPAN, and it's easy to miss one that's
      similar to what you're planning on contributing. Have a good plough
      through &lt;http://metacpan.org&gt; and make sure you're not the one
      reinventing the wheel!</dd>
  <dt id="Discuss"><a class="permalink" href="#Discuss">Discuss the
    need</a></dt>
  <dd>You might love it. You might feel that everyone else needs it. But there
      might not actually be any real demand for it out there. If you're unsure
      about the demand your module will have, consider asking the
      <span class="Li">&quot;module-authors@perl.org&quot;</span> mailing list
      (send an email to
      <span class="Li">&quot;module-authors-subscribe@perl.org&quot;</span> to
      subscribe; see &lt;http://lists.perl.org/list/module-authors.html&gt; for
      more information and a link to the archives).</dd>
  <dt id="Choose"><a class="permalink" href="#Choose">Choose a name</a></dt>
  <dd>Perl modules included on CPAN have a naming hierarchy you should try to
      fit in with. See perlmodlib for more details on how this works, and browse
      around CPAN and the modules list to get a feel of it. At the very least,
      remember this: modules should be title capitalised, (This::Thing) fit in
      with a category, and explain their purpose succinctly.</dd>
  <dt id="Check~2"><a class="permalink" href="#Check~2">Check again</a></dt>
  <dd>While you're doing that, make really sure you haven't missed a module
      similar to the one you're about to write.
    <p class="Pp">When you've got your name sorted out and you're sure that your
        module is wanted and not currently available, it's time to start
      coding.</p>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Step-by-step:_Making_the_module"><a class="permalink" href="#Step-by-step:_Making_the_module">Step-by-step:
  Making the module</a></h2>
<dl class="Bl-tag">
  <dt id="Start"><a class="permalink" href="#Start">Start with
    <i>module-starter</i> or <i>h2xs</i></a></dt>
  <dd>The <i>module-starter</i> utility is distributed as part of the
      Module::Starter CPAN package. It creates a directory with stubs of all the
      necessary files to start a new module, according to recent &quot;best
      practice&quot; for module development, and is invoked from the command
      line, thus:
    <p class="Pp"></p>
    <pre>    module-starter --module=Foo::Bar \
       --author=&quot;Your Name&quot; --email=yourname@cpan.org
    </pre>
    <p class="Pp">If you do not wish to install the Module::Starter package from
        CPAN, <i>h2xs</i> is an older tool, originally intended for the
        development of XS modules, which comes packaged with the Perl
        distribution.</p>
    <p class="Pp">A typical invocation of h2xs for a pure Perl module is:</p>
    <p class="Pp"></p>
    <pre>    h2xs -AX --skip-exporter --use-new-tests -n Foo::Bar
    </pre>
    <p class="Pp">The <span class="Li">&quot;-A&quot;</span> omits the
        Autoloader code, <span class="Li">&quot;-X&quot;</span> omits XS
        elements, <span class="Li">&quot;--skip-exporter&quot;</span> omits the
        Exporter code, <span class="Li">&quot;--use-new-tests&quot;</span> sets
        up a modern testing environment, and
        <span class="Li">&quot;-n&quot;</span> specifies the name of the
      module.</p>
  </dd>
  <dt id="Use"><a class="permalink" href="#Use">Use strict and warnings</a></dt>
  <dd>A module's code has to be warning and strict-clean, since you can't
      guarantee the conditions that it'll be used under. Besides, you wouldn't
      want to distribute code that wasn't warning or strict-clean anyway,
    right?</dd>
  <dt id="Use~2"><a class="permalink" href="#Use~2">Use Carp</a></dt>
  <dd>The Carp module allows you to present your error messages from the
      caller's perspective; this gives you a way to signal a problem with the
      caller and not your module. For instance, if you say this:
    <p class="Pp"></p>
    <pre>    warn &quot;No hostname given&quot;;
    </pre>
    <p class="Pp">the user will see something like this:</p>
    <p class="Pp"></p>
    <pre> No hostname given at
 /usr/local/lib/perl5/site_perl/5.6.0/Net/Acme.pm line 123.
    </pre>
    <p class="Pp">which looks like your module is doing something wrong.
        Instead, you want to put the blame on the user, and say this:</p>
    <p class="Pp"></p>
    <pre>    No hostname given at bad_code, line 10.
    </pre>
    <p class="Pp">You do this by using Carp and replacing your
        <span class="Li">&quot;warn&quot;</span>s with
        <span class="Li">&quot;carp&quot;</span>s. If you need to
        <span class="Li">&quot;die&quot;</span>, say
        <span class="Li">&quot;croak&quot;</span> instead. However, keep
        <span class="Li">&quot;warn&quot;</span> and
        <span class="Li">&quot;die&quot;</span> in place for your sanity checks
        - where it really is your module at fault.</p>
  </dd>
  <dt id="Use~3"><a class="permalink" href="#Use~3">Use Exporter -
    wisely!</a></dt>
  <dd>Exporter gives you a standard way of exporting symbols and subroutines
      from your module into the caller's namespace. For instance, saying
      <span class="Li">&quot;use Net::Acme qw(&amp;frob)&quot;</span> would
      import the <span class="Li">&quot;frob&quot;</span> subroutine.
    <p class="Pp">The package variable <span class="Li">@EXPORT</span> will
        determine which symbols will get exported when the caller simply says
        <span class="Li">&quot;use Net::Acme&quot;</span> - you will hardly ever
        want to put anything in there. <span class="Li">@EXPORT_OK</span>, on
        the other hand, specifies which symbols you're willing to export. If you
        do want to export a bunch of symbols, use the
        <span class="Li">%EXPORT_TAGS</span> and define a standard export set -
        look at Exporter for more details.</p>
  </dd>
  <dt id="Use~4"><a class="permalink" href="#Use~4">Use plain old
    documentation</a></dt>
  <dd>The work isn't over until the paperwork is done, and you're going to need
      to put in some time writing some documentation for your module.
      <span class="Li">&quot;module-starter&quot;</span> or
      <span class="Li">&quot;h2xs&quot;</span> will provide a stub for you to
      fill in; if you're not sure about the format, look at perlpod for an
      introduction. Provide a good synopsis of how your module is used in code,
      a description, and then notes on the syntax and function of the individual
      subroutines or methods. Use Perl comments for developer notes and POD for
      end-user notes.</dd>
  <dt id="Write"><a class="permalink" href="#Write">Write tests</a></dt>
  <dd>You're encouraged to create self-tests for your module to ensure it's
      working as intended on the myriad platforms Perl supports; if you upload
      your module to CPAN, a host of testers will build your module and send you
      the results of the tests. Again,
      <span class="Li">&quot;module-starter&quot;</span> and
      <span class="Li">&quot;h2xs&quot;</span> provide a test framework which
      you can extend - you should do something more than just checking your
      module will compile. Test::Simple and Test::More are good places to start
      when writing a test suite.</dd>
  <dt id="Write~2"><a class="permalink" href="#Write~2">Write the
    <i>README</i></a></dt>
  <dd>If you're uploading to CPAN, the automated gremlins will extract the
      README file and place that in your CPAN directory. It'll also appear in
      the main <i>by-module</i> and <i>by-category</i> directories if you make
      it onto the modules list. It's a good idea to put here what the module
      actually does in detail.</dd>
  <dt id="Write~3"><a class="permalink" href="#Write~3">Write
    <i>Changes</i></a></dt>
  <dd>Add any user-visible changes since the last release to your <i>Changes</i>
      file.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Step-by-step:_Distributing_your_module"><a class="permalink" href="#Step-by-step:_Distributing_your_module">Step-by-step:
  Distributing your module</a></h2>
<dl class="Bl-tag">
  <dt id="Get"><a class="permalink" href="#Get">Get a CPAN user ID</a></dt>
  <dd>Every developer publishing modules on CPAN needs a CPAN ID. Visit
      <span class="Li">&quot;&lt;http://pause.perl.org/&gt;&quot;</span>, select
      &quot;Request PAUSE Account&quot;, and wait for your request to be
      approved by the PAUSE administrators.</dd>
  <dt>&quot;perl Makefile.PL; make test; make distcheck; make dist&quot;</dt>
  <dd>Once again, <span class="Li">&quot;module-starter&quot;</span> or
      <span class="Li">&quot;h2xs&quot;</span> has done all the work for you.
      They produce the standard <span class="Li">&quot;Makefile.PL&quot;</span>
      you see when you download and install modules, and this produces a
      Makefile with a <span class="Li">&quot;dist&quot;</span> target.
    <p class="Pp">Once you've ensured that your module passes its own tests -
        always a good thing to make sure - you can <span class="Li">&quot;make
        distcheck&quot;</span> to make sure everything looks OK, followed by
        <span class="Li">&quot;make dist&quot;</span>, and the Makefile will
        hopefully produce you a nice tarball of your module, ready for
      upload.</p>
  </dd>
  <dt id="Upload"><a class="permalink" href="#Upload">Upload the
    tarball</a></dt>
  <dd>The email you got when you received your CPAN ID will tell you how to log
      in to PAUSE, the Perl Authors Upload SErver. From the menus there, you can
      upload your module to CPAN.
    <p class="Pp">Alternatively you can use the <i>cpan-upload</i> script, part
        of the CPAN::Uploader distribution on CPAN.</p>
  </dd>
  <dt id="Fix"><a class="permalink" href="#Fix">Fix bugs!</a></dt>
  <dd>Once you start accumulating users, they'll send you bug reports. If you're
      lucky, they'll even send you patches. Welcome to the joys of maintaining a
      software project...</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Simon Cozens,
  <span class="Li">&quot;simon@cpan.org&quot;</span></p>
<p class="Pp">Updated by Kirrily &quot;Skud&quot; Robert,
    <span class="Li">&quot;skud@cpan.org&quot;</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">perlmod, perlmodlib, perlmodinstall, h2xs, strict, Carp, Exporter,
    perlpod, Test::Simple, Test::More ExtUtils::MakeMaker, Module::Build,
    Module::Starter &lt;http://www.cpan.org/&gt;, Ken Williams' tutorial on
    building your own module at
    &lt;http://mathforum.org/~ken/perl_modules.html&gt;</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-10-21</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
