<!DOCTYPE html>
<html lang="en">
<!-- This is an automatically generated file.  Do not edit.
   The definitions below are for supplemental macros used in Tcl/Tk
   manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO
  	Start of list of standard options for a Tk widget.  The
  	options follow on successive lines, in four columns separated
  	by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   RCS: @(#) $Id: man.macros,v 1.1 2009/01/30 04:56:47 andreas_kupries Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>ftp(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">ftp(n)</td>
    <td class="head-vol"><a href=".">ftp client</a></td>
    <td class="head-rtitle">ftp(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">ftp - Client-side tcl implementation of the ftp protocol</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">package require <b>Tcl 8.2</b></p>
<p class="Pp">package require <b>ftp ?2.4.9?</b></p>
<p class="Pp"><b>::ftp::Open</b> <i>server</i> <i>user</i> <i>passwd</i>
    ?<i>options</i>?</p>
<p class="Pp"><b>::ftp::Close</b> <i>handle</i></p>
<p class="Pp"><b>::ftp::Cd</b> <i>handle</i> <i>directory</i></p>
<p class="Pp"><b>::ftp::Pwd</b> <i>handle</i></p>
<p class="Pp"><b>::ftp::Type</b> <i>handle</i> ?<b>ascii|binary|tenex</b>?</p>
<p class="Pp"><b>::ftp::List</b> <i>handle</i> ?<i>pattern</i>?</p>
<p class="Pp"><b>::ftp::NList</b> <i>handle</i> ?<i>directory</i>?</p>
<p class="Pp"><b>::ftp::FileSize</b> <i>handle</i> <i>file</i></p>
<p class="Pp"><b>::ftp::ModTime</b> <i>handle</i> <i>file</i></p>
<p class="Pp"><b>::ftp::Delete</b> <i>handle</i> <i>file</i></p>
<p class="Pp"><b>::ftp::Rename</b> <i>handle</i> <i>from</i> <i>to</i></p>
<p class="Pp"><b>::ftp::Put</b> <i>handle</i> (<i>local</i> | -data <i>data</i>
    | -channel <i>chan</i>) ?<i>remote</i>?</p>
<p class="Pp"><b>::ftp::Append</b> <i>handle</i> (<i>local</i> | -data
    <i>data</i> | -channel <i>chan</i>) ?<i>remote</i>?</p>
<p class="Pp"><b>::ftp::Get</b> <i>handle</i> <i>remote</i> ?(<i>local</i> |
    -variable <i>varname</i> | -channel <i>chan</i>)?</p>
<p class="Pp"><b>::ftp::Reget</b> <i>handle</i> <i>remote</i> ?<i>local</i>?
    ?<i>from</i>? ?<i>to</i>?</p>
<p class="Pp"><b>::ftp::Newer</b> <i>handle</i> <i>remote</i> ?<i>local</i>?</p>
<p class="Pp"><b>::ftp::MkDir</b> <i>handle</i> <i>directory</i></p>
<p class="Pp"><b>::ftp::RmDir</b> <i>handle</i> <i>directory</i></p>
<p class="Pp"><b>::ftp::Quote</b> <i>handle</i> <i>arg1</i> <i>arg2</i>
    <i>...</i></p>
<p class="Pp"><b>::ftp::DisplayMsg</b> <i>handle</i> <i>msg</i>
  ?<i>state</i>?</p>
<p class="Pp"></p>
<pre>
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The ftp package provides the client side of the ftp protocol as
    specified in RFC 959 (<i>http://www.rfc-editor.org/rfc/rfc959.txt</i>). The
    package implements both active (default) and passive ftp sessions.</p>
<p class="Pp">A new ftp session is started with the <b>::ftp::Open</b> command.
    To shutdown an existing ftp session use <b>::ftp::Close</b>. All other
    commands are restricted to usage in an an open ftp session. They will
    generate errors if they are used out of context. The ftp package includes
    file and directory manipulating commands for remote sites. To perform the
    same operations on the local site use commands built into the core, like
    <b>cd</b> or <b>file</b>.</p>
<p class="Pp">The output of the package is controlled by two state variables,
    <b>::ftp::VERBOSE</b> and <b>::ftp::DEBUG</b>. Setting <b>::ftp::VERBOSE</b>
    to &quot;1&quot; forces the package to show all responses from a remote
    server. The default value is &quot;0&quot;. Setting <b>::ftp::DEBUG</b> to
    &quot;1&quot; enables debugging and forces the package to show all return
    codes, states, state changes and &quot;real&quot; ftp commands. The default
    value is &quot;0&quot;.</p>
<p class="Pp">The command <b>::ftp::DisplayMsg</b> is used to show the different
    messages from the ftp session. The setting of <b>::ftp::VERBOSE</b>
    determines if this command is called or not. The current implementation of
    the command uses the <b>log</b> package of tcllib to write the messages to
    their final destination. This means that the behaviour of
    <b>::ftp::DisplayMsg</b> can be customized without changing its
    implementation. For more radical changes overwriting its implementation by
    the application is of course still possible. Note that the default
    implementation honors the option <b>-output</b> to <b>::ftp::Open</b> for a
    session specific log command.</p>
<p class="Pp"><i>Caution</i>: The default implementation logs error messages
    like all other messages. If this behaviour is changed to throwing an error
    instead all commands in the API will change their behaviour too. In such a
    case they will not return a failure code as described below but pass the
    thrown error to their caller.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="API"><a class="permalink" href="#API">API</a></h1>
<dl class="Bl-tag">
  <dt><b>::ftp::Open</b> <i>server</i> <i>user</i> <i>passwd</i>
    ?<i>options</i>?</dt>
  <dd>This command is used to start a FTP session by establishing a control
      connection to the FTP server. The defaults are used for any option not
      specified by the caller.
    <p class="Pp">The command takes a host name <i>server</i>, a user name
        <i>user</i> and a password <i>password</i> as its parameters and returns
        a session handle that is an integer number greater than or equal to
        &quot;0&quot;, if the connection is successfully established. Otherwise
        it returns &quot;-1&quot;. The <i>server</i> parameter must be the name
        or internet address (in dotted decimal notation) of the ftp server to
        connect to. The <i>user</i> and <i>passwd</i> parameters must contain a
        valid user name and password to complete the login process.</p>
    <p class="Pp">The options overwrite some default values or set special
        abilities:</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="blocksize"><a class="permalink" href="#blocksize"><b>-blocksize</b>
    <i>size</i></a></dt>
  <dd>The blocksize is used during data transfer. At most <i>size</i> bytes are
      transfered at once. The default value for this option is 4096. The package
      will evaluate the <b>-progress callback</b> for the session after the
      transfer of each block.</dd>
  <dt id="timeout"><a class="permalink" href="#timeout"><b>-timeout</b>
    <i>seconds</i></a></dt>
  <dd>If <i>seconds</i> is non-zero, then <b>::ftp::Open</b> sets up a timeout
      which will occur after the specified number of seconds. The default value
      is 600.</dd>
  <dt id="port"><a class="permalink" href="#port"><b>-port</b>
    <i>number</i></a></dt>
  <dd>The port <i>number</i> specifies an alternative remote port on the ftp
      server on which the ftp service resides. Most ftp services listen for
      connection requests on the default port 21. Sometimes, usually for
      security reasons, port numbers other than 21 are used for ftp
    connections.</dd>
  <dt id="mode"><a class="permalink" href="#mode"><b>-mode</b>
    <i>mode</i></a></dt>
  <dd>The transfer <i>mode</i> option determines if a file transfer occurs in
      <b>active</b> or <b>passive</b> mode. In passive mode the client will ask
      the ftp server to listen on a data port and wait for the connection rather
      than to initiate the process by itself when a data transfer request comes
      in. Passive mode is normally a requirement when accessing sites via a
      firewall. The default mode is <b>active</b>.</dd>
  <dt id="progress"><a class="permalink" href="#progress"><b>-progress</b>
    <i>callback</i></a></dt>
  <dd>This <i>callback</i> is evaluated whenever a block of data was transfered.
      See the option <b>-blocksize</b> for how to specify the size of the
      transfered blocks.
    <p class="Pp">When evaluating the <i>callback</i> one argument is appended
        to the callback script, the current accumulated number of bytes
        transferred so far.</p>
  </dd>
  <dt id="command"><a class="permalink" href="#command"><b>-command</b>
    <i>callback</i></a></dt>
  <dd>Specifying this option places the connection into asynchronous mode. The
      <i>callback</i> is evaluated after the completion of any operation. When
      an operation is running no further operations must be started until a
      callback has been received for the currently executing operation.
    <p class="Pp">When evaluating the <i>callback</i> several arguments are
        appended to the callback script, namely the keyword of the operation
        that has completed and any additional arguments specific to the
        operation. If an error occurred during the execution of the operation
        the callback is given the keyword <b>error</b>.</p>
  </dd>
  <dt id="output"><a class="permalink" href="#output"><b>-output</b>
    <i>callback</i></a></dt>
  <dd>This option has no default. If it is set the default implementation of
      <b>::ftp::DisplayMsg</b> will use its value as command prefix to log all
      internal messages. The callback will have three arguments appended to it
      before evaluation, the id of the session, the message itself, and the
      connection state, in this order.</dd>
</dl>
</div>
<dl class="Bl-tag">
  <dt><b>::ftp::Close</b> <i>handle</i></dt>
  <dd>This command terminates the specified ftp session. If no file transfer is
      in progress, the server will close the control connection immediately. If
      a file transfer is in progress however, the control connection will remain
      open until the transfers completes. When that happens the server will
      write the result response for the transfer to it and close the connection
      afterward.</dd>
  <dt><b>::ftp::Cd</b> <i>handle</i> <i>directory</i></dt>
  <dd>This command changes the current working directory on the ftp server to a
      specified target <i>directory</i>. The command returns 1 if the current
      working directory was successfully changed to the specified directory or 0
      if it fails. The target directory can be</dd>
</dl>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li>a subdirectory of the current directory,</li>
  <li>Two dots, <b>..</b> (as an indicator for the parent directory of the
      current directory)</li>
  <li>or a fully qualified path to a new working directory.</li>
</ul>
</div>
<dl class="Bl-tag">
  <dt><b>::ftp::Pwd</b> <i>handle</i></dt>
  <dd>This command returns the complete path of the current working directory on
      the ftp server, or an empty string in case of an error.</dd>
  <dt><b>::ftp::Type</b> <i>handle</i> ?<b>ascii|binary|tenex</b>?</dt>
  <dd>This command sets the ftp file transfer type to either <b>ascii</b>,
      <b>binary</b>, or <b>tenex</b>. The command always returns the currently
      set type. If called without type no change is made.
    <p class="Pp">Currently only <b>ascii</b> and <b>binary</b> types are
        supported. There is some early (alpha) support for Tenex mode. The type
        <b>ascii</b> is normally used to convert text files into a format
        suitable for text editors on the platform of the destination machine.
        This mainly affects end-of-line markers. The type <b>binary</b> on the
        other hand allows the undisturbed transfer of non-text files, such as
        compressed files, images and executables.</p>
  </dd>
  <dt><b>::ftp::List</b> <i>handle</i> ?<i>pattern</i>?</dt>
  <dd>This command returns a human-readable list of files. Wildcard expressions
      such as &quot;<i>*.tcl</i>&quot; are allowed. If <i>pattern</i> refers to
      a specific directory, then the contents of that directory are returned. If
      the <i>pattern</i> is not a fully-qualified path name, the command lists
      entries relative to the current remote directory. If no <i>pattern</i> is
      specified, the contents of the current remote directory is returned.
    <p class="Pp">The listing includes any system-dependent information that the
        server chooses to include. For example most UNIX systems produce output
        from the command <b>ls -l</b>. The command returns the retrieved
        information as a tcl list with one item per entry. Empty lines and
        UNIX's &quot;total&quot; lines are ignored and not included in the
        result as reported by this command.</p>
    <p class="Pp">If the command fails an empty list is returned.</p>
  </dd>
  <dt><b>::ftp::NList</b> <i>handle</i> ?<i>directory</i>?</dt>
  <dd>This command has the same behavior as the <b>::ftp::List</b> command,
      except that it only retrieves an abbreviated listing. This means only file
      names are returned in a sorted list.</dd>
  <dt><b>::ftp::FileSize</b> <i>handle</i> <i>file</i></dt>
  <dd>This command returns the size of the specified <i>file</i> on the ftp
      server. If the command fails an empty string is returned.
    <p class="Pp"><i>ATTENTION!</i> It will not work properly when in ascii mode
        and is not supported by all ftp server implementations.</p>
  </dd>
  <dt><b>::ftp::ModTime</b> <i>handle</i> <i>file</i></dt>
  <dd>This command retrieves the time of the last modification of the
      <i>file</i> on the ftp server as a system dependent integer value in
      seconds or an empty string if an error occurred. Use the built-in command
      <b>clock</b> to convert the retrieves value into other formats.</dd>
  <dt><b>::ftp::Delete</b> <i>handle</i> <i>file</i></dt>
  <dd>This command deletes the specified <i>file</i> on the ftp server. The
      command returns 1 if the specified file was successfully deleted or 0 if
      it failed.</dd>
  <dt><b>::ftp::Rename</b> <i>handle</i> <i>from</i> <i>to</i></dt>
  <dd>This command renames the file <i>from</i> in the current directory of the
      ftp server to the specified new file name <i>to</i>. This new file name
      must not be the same as any existing subdirectory or file name. The
      command returns 1 if the specified file was successfully renamed or 0 if
      it failed.</dd>
  <dt><b>::ftp::Put</b> <i>handle</i> (<i>local</i> | -data <i>data</i> |
    -channel <i>chan</i>) ?<i>remote</i>?</dt>
  <dd>This command transfers a local file <i>local</i> to a remote file
      <i>remote</i> on the ftp server. If the file parameters passed to the
      command do not fully qualified path names the command will use the current
      directory on local and remote host. If the remote file name is
      unspecified, the server will use the name of the local file as the name of
      the remote file. The command returns 1 to indicate a successful transfer
      and 0 in the case of a failure.
    <p class="Pp">If <b>-data</b> <i>data</i> is specified instead of a local
        file, the system will not transfer a file, but the <i>data</i> passed
        into it. In this case the name of the remote file has to be
      specified.</p>
    <p class="Pp">If <b>-channel</b> <i>chan</i> is specified instead of a local
        file, the system will not transfer a file, but read the contents of the
        channel <i>chan</i> and write this to the remote file. In this case the
        name of the remote file has to be specified. After the transfer
        <i>chan</i> will be closed.</p>
  </dd>
  <dt><b>::ftp::Append</b> <i>handle</i> (<i>local</i> | -data <i>data</i> |
    -channel <i>chan</i>) ?<i>remote</i>?</dt>
  <dd>This command behaves like <b>::ftp::Puts</b>, but appends the transfered
      information to the remote file. If the file did not exist on the server it
      will be created.</dd>
  <dt><b>::ftp::Get</b> <i>handle</i> <i>remote</i> ?(<i>local</i> | -variable
    <i>varname</i> | -channel <i>chan</i>)?</dt>
  <dd>This command retrieves a remote file <i>remote</i> on the ftp server and
      stores its contents into the local file <i>local</i>. If the file
      parameters passed to the command are not fully qualified path names the
      command will use the current directory on local and remote host. If the
      local file name is unspecified, the server will use the name of the remote
      file as the name of the local file. The command returns 1 to indicate a
      successful transfer and 0 in the case of a failure. The command will throw
      an error if the directory the file <i>local</i> is to be placed in does
      not exist.
    <p class="Pp">If <b>-variable</b> <i>varname</i> is specified, the system
        will store the retrieved data into the variable <i>varname</i> instead
        of a file.</p>
    <p class="Pp">If <b>-channel</b> <i>chan</i> is specified, the system will
        write the retrieved data into the channel <i>chan</i> instead of a file.
        The system will <i>not</i> close <i>chan</i> after the transfer, this is
        the responsibility of the caller to <b>::ftp::Get</b>.</p>
  </dd>
  <dt><b>::ftp::Reget</b> <i>handle</i> <i>remote</i> ?<i>local</i>?
    ?<i>from</i>? ?<i>to</i>?</dt>
  <dd>This command behaves like <b>::ftp::Get</b>, except that if local file
      <i>local</i> exists and is smaller than remote file <i>remote</i>, the
      local file is presumed to be a partially transferred copy of the remote
      file and the transfer is continued from the apparent point of failure. The
      command will throw an error if the directory the file <i>local</i> is to
      be placed in does not exist. This command is useful when transferring very
      large files over networks that tend to drop connections.
    <p class="Pp">Specifying the additional byte offsets <i>from</i> and
        <i>to</i> will cause the command to change its behaviour and to download
        exactly the specified slice of the remote file. This mode is possible
        only if a local destination is explicitly provided. Omission of
        <i>to</i> leads to downloading till the end of the file.</p>
  </dd>
  <dt><b>::ftp::Newer</b> <i>handle</i> <i>remote</i> ?<i>local</i>?</dt>
  <dd>This command behaves like <b>::ftp::Get</b>, except that it retrieves the
      remote file only if the modification time of the remote file is more
      recent than the file on the local system. If the file does not exist on
      the local system, the remote file is considered newer. The command will
      throw an error if the directory the file <i>local</i> is to be placed in
      does not exist.</dd>
  <dt><b>::ftp::MkDir</b> <i>handle</i> <i>directory</i></dt>
  <dd>This command creates the specified <i>directory</i> on the ftp server. If
      the specified path is relative the new directory will be created as a
      subdirectory of the current working directory. Else the created directory
      will have the specified path name. The command returns 1 to indicate a
      successful creation of the directory and 0 in the case of a failure.</dd>
  <dt><b>::ftp::RmDir</b> <i>handle</i> <i>directory</i></dt>
  <dd>This command removes the specified directory on the ftp server. The remote
      directory has to be empty or the command will fail. The command returns 1
      to indicate a successful removal of the directory and 0 in the case of a
      failure.</dd>
  <dt><b>::ftp::Quote</b> <i>handle</i> <i>arg1</i> <i>arg2</i> <i>...</i></dt>
  <dd>This command is used to send an arbitrary ftp command to the server. It
      cannot be used to obtain a directory listing or for transferring files. It
      is included to allow an application to execute commands on the ftp server
      which are not provided by this package. The arguments are sent verbatim,
      i.e. as is, with no changes.
    <p class="Pp">In contrast to the other commands in this package this command
        will not parse the response it got from the ftp server but return it
        verbatim to the caller.</p>
  </dd>
  <dt><b>::ftp::DisplayMsg</b> <i>handle</i> <i>msg</i> ?<i>state</i>?</dt>
  <dd>This command is used by the package itself to show the different messages
      from the ftp sessions. The package itself declares this command very
      simple, writing the messages to <b>stdout</b> (if <b>::ftp::VERBOSE</b>
      was set, see below) and throwing tcl errors for error messages. It is the
      responsibility of the application to overwrite it as needed. A state
      variable for different states assigned to different colors is recommended
      by the author. The package <b>log</b> is useful for this.</dd>
  <dt><b>::ftp::VERBOSE</b></dt>
  <dd>A state variable controlling the output of the package. Setting
      <b>::ftp::VERBOSE</b> to &quot;1&quot; forces the package to show all
      responses from a remote server. The default value is &quot;0&quot;.</dd>
  <dt><b>::ftp::DEBUG</b></dt>
  <dd>A state variable controlling the output of ftp. Setting
      <b>::ftp::DEBUG</b> to &quot;1&quot; enables debugging and forces the
      package to show all return codes, states, state changes and
      &quot;real&quot; ftp commands. The default value is &quot;0&quot;.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">The correct execution of many commands depends upon the proper
    behavior by the remote server, network and router configuration.</p>
<p class="Pp">An update command placed in the procedure <b>::ftp::DisplayMsg</b>
    may run into persistent errors or infinite loops. The solution to this
    problem is to use <b>update idletasks</b> instead of <b>update</b>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS,_IDEAS,_FEEDBACK"><a class="permalink" href="#BUGS,_IDEAS,_FEEDBACK">BUGS,
  IDEAS, FEEDBACK</a></h1>
<p class="Pp">This document, and the package it describes, will undoubtedly
    contain bugs and other problems. Please report such in the category
    <i>ftp</i> of the <i>Tcllib SF Trackers</i>
    [http://sourceforge.net/tracker/?group_id=12883]. Please also report any
    ideas for enhancements you may have for either package and/or
  documentation.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">ftpd, mime, pop3, smtp</p>
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
<p class="Pp">ftp, internet, net, rfc 959</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CATEGORY"><a class="permalink" href="#CATEGORY">CATEGORY</a></h1>
<p class="Pp">Networking</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2.4.9</td>
    <td class="foot-os"><a href="..">ftp</a></td>
  </tr>
</table>
</body>
</html>
