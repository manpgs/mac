<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 1992-1999 by Karl Lehenbauer and Mark Diekhans
   Copyright (c) 2000 by Scriptics Corporation.
   All rights reserved.
  
   RCS: @(#) $Id: memory.n,v 1.12.2.1 2009/10/18 11:21:38 mistachkin Exp $
  
   The -*- nroff -*- definitions below are for supplemental macros used
   in Tcl/Tk manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO ?manpage?
  	Start of list of standard options for a Tk widget. The manpage
  	argument defines where to look up the standard options; if
  	omitted, defaults to "options". The options follow on successive
  	lines, in three columns separated by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   .QW arg1 ?arg2?
  	Print arg1 in quotes, then arg2 normally (for trailing punctuation).
  
   .PQ arg1 ?arg2?
  	Print an open parenthesis, arg1 in quotes, then arg2 normally
  	(for trailing punctuation) and then a closing parenthesis.
  
   RCS: @(#) $Id: man.macros,v 1.9 2008/01/29 15:32:33 dkf Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>memory(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">memory(n)</td>
    <td class="head-vol">Tcl Built-In Commands</td>
    <td class="head-rtitle">memory(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">memory - Control Tcl memory debugging capabilities</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>memory </b><i>option </i>?<i>arg arg ...</i>?</p>
<pre>
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <b>memory</b> command gives the Tcl developer control of Tcl's
    memory debugging capabilities. The memory command has several suboptions,
    which are described below. It is only available when Tcl has been compiled
    with memory debugging enabled (when <b>TCL_MEM_DEBUG</b> is defined at
    compile time), and after <b>Tcl_InitMemory</b> has been called.</p>
<dl class="Bl-tag">
  <dt id="memory"><a class="permalink" href="#memory"><b>memory active</b>
    <i>file</i></a></dt>
  <dd>Write a list of all currently allocated memory to the specified
      <i>file</i>.</dd>
  <dt id="memory~2"><a class="permalink" href="#memory~2"><b>memory
    break_on_malloc</b> <i>count</i></a></dt>
  <dd>After the <i>count</i> allocations have been performed, <b>ckalloc</b>
      outputs a message to this effect and that it is now attempting to enter
      the C debugger. Tcl will then issue a <i>SIGINT</i> signal against itself.
      If you are running Tcl under a C debugger, it should then enter the
      debugger command mode.</dd>
  <dt id="memory~3"><a class="permalink" href="#memory~3"><b>memory
    info</b></a></dt>
  <dd>Returns a report containing the total allocations and frees since Tcl
      began, the current packets allocated (the current number of calls to
      <b>ckalloc</b> not met by a corresponding call to <b>ckfree</b>), the
      current bytes allocated, and the maximum number of packets and bytes
      allocated.</dd>
  <dt id="memory~4"><a class="permalink" href="#memory~4"><b>memory init
    </b>[<b>on</b>|<b>off</b>]</a></dt>
  <dd>Turn on or off the pre-initialization of all allocated memory with bogus
      bytes. Useful for detecting the use of uninitialized values.</dd>
  <dt id="memory~5"><a class="permalink" href="#memory~5"><b>memory objs
    </b><i>file</i></a></dt>
  <dd>Causes a list of all allocated Tcl_Obj values to be written to the
      specified <i>file</i> immediately, together with where they were
      allocated. Useful for checking for leaks of values.</dd>
  <dt id="memory~6"><a class="permalink" href="#memory~6"><b>memory onexit</b>
    <i>file</i></a></dt>
  <dd>Causes a list of all allocated memory to be written to the specified
      <i>file</i> during the finalization of Tcl's memory subsystem. Useful for
      checking that memory is properly cleaned up during process exit.</dd>
  <dt id="memory~7"><a class="permalink" href="#memory~7"><b>memory tag</b>
    <i>string</i></a></dt>
  <dd>Each packet of memory allocated by <b>ckalloc</b> can have associated with
      it a string-valued tag. In the lists of allocated memory generated by
      <b>memory active</b> and <b>memory onexit</b>, the tag for each packet is
      printed along with other information about the packet. The <b>memory
      tag</b> command sets the tag value for subsequent calls to <b>ckalloc</b>
      to be <i>string</i>.</dd>
  <dt id="memory~8"><a class="permalink" href="#memory~8"><b>memory trace
    </b>[<b>on</b>|<b>off</b>]</a></dt>
  <dd>Turns memory tracing on or off. When memory tracing is on, every call to
      <b>ckalloc</b> causes a line of trace information to be written to
      <i>stderr</i>, consisting of the word <i>ckalloc</i>, followed by the
      address returned, the amount of memory allocated, and the C filename and
      line number of the code performing the allocation. For example:</dd>
</dl>
<div class="Bd-indent">
<p class="Pp"></p>
<div class="Bd-indent">
<pre>
ckalloc 40e478 98 tclProc.c 1406</pre>
</div>
<p class="Pp">Calls to <b>ckfree</b> are traced in the same manner.</p>
</div>
<dl class="Bl-tag">
  <dt id="memory~9"><a class="permalink" href="#memory~9"><b>memory
    trace_on_at_malloc</b> <i>count</i></a></dt>
  <dd>Enable memory tracing after <i>count</i> <b>ckalloc</b>s have been
      performed. For example, if you enter <b>memory trace_on_at_malloc 100</b>,
      after the 100th call to <b>ckalloc</b>, memory trace information will
      begin being displayed for all allocations and frees. Since there can be a
      lot of memory activity before a problem occurs, judicious use of this
      option can reduce the slowdown caused by tracing (and the amount of trace
      information produced), if you can identify a number of allocations that
      occur before the problem sets in. The current number of memory allocations
      that have occurred since Tcl started is printed on a guard zone
    failure.</dd>
  <dt id="memory~10"><a class="permalink" href="#memory~10"><b>memory validate
    </b>[<b>on</b>|<b>off</b>]</a></dt>
  <dd>Turns memory validation on or off. When memory validation is enabled, on
      every call to <b>ckalloc</b> or <b>ckfree</b>, the guard zones are checked
      for every piece of memory currently in existence that was allocated by
      <b>ckalloc</b>. This has a large performance impact and should only be
      used when overwrite problems are strongly suspected. The advantage of
      enabling memory validation is that a guard zone overwrite can be detected
      on the first call to <b>ckalloc</b> or <b>ckfree</b> after the overwrite
      occurred, rather than when the specific memory with the overwritten guard
      zone(s) is freed, which may occur long after the overwrite occurred.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">ckalloc, ckfree, Tcl_ValidateAllMemory, Tcl_DumpActiveMemory,
    TCL_MEM_DEBUG</p>
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
<p class="Pp">memory, debug</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">8.1</td>
    <td class="foot-os">Tcl</td>
  </tr>
</table>
</body>
</html>
