<!DOCTYPE html>
<html lang="en">
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2001-2009 Andreas Kupries <andreas_kupries@users.sourceforge.net>
  
   The definitions below are for supplemental macros used in Tcl/Tk
   manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO
  	Start of list of standard options for a Tk widget.  The
  	options follow on successive lines, in four columns separated
  	by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   RCS: @(#) $Id: man.macros,v 1.1 2009/01/30 04:56:47 andreas_kupries Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>log(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">log(n)</td>
    <td class="head-vol"><a href=".">Logging facility</a></td>
    <td class="head-rtitle">log(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">log - Procedures to log messages of libraries and
  applications.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">package require <b>Tcl 8</b></p>
<p class="Pp">package require <b>log ?1.3?</b></p>
<p class="Pp"><b>::log::levels</b></p>
<p class="Pp"><b>::log::lv2longform</b> <i>level</i></p>
<p class="Pp"><b>::log::lv2color</b> <i>level</i></p>
<p class="Pp"><b>::log::lv2priority</b> <i>level</i></p>
<p class="Pp"><b>::log::lv2cmd</b> <i>level</i></p>
<p class="Pp"><b>::log::lv2channel</b> <i>level</i></p>
<p class="Pp"><b>::log::lvCompare</b> <i>level1</i> <i>level2</i></p>
<p class="Pp"><b>::log::lvSuppress</b> <i>level</i> {<i>suppress</i> 1}</p>
<p class="Pp"><b>::log::lvSuppressLE</b> <i>level</i> {<i>suppress</i> 1}</p>
<p class="Pp"><b>::log::lvIsSuppressed</b> <i>level</i></p>
<p class="Pp"><b>::log::lvCmd</b> <i>level</i> <i>cmd</i></p>
<p class="Pp"><b>::log::lvCmdForall</b> <i>cmd</i></p>
<p class="Pp"><b>::log::lvChannel</b> <i>level</i> <i>chan</i></p>
<p class="Pp"><b>::log::lvChannelForall</b> <i>chan</i></p>
<p class="Pp"><b>::log::lvColor</b> <i>level</i> <i>color</i></p>
<p class="Pp"><b>::log::lvColorForall</b> <i>color</i></p>
<p class="Pp"><b>::log::log</b> <i>level</i> <i>text</i></p>
<p class="Pp"><b>::log::logarray</b> <i>level</i> <i>arrayvar</i>
    ?<i>pattern</i>?</p>
<p class="Pp"><b>::log::loghex</b> <i>level</i> <i>text</i> <i>data</i></p>
<p class="Pp"><b>::log::logMsg</b> <i>text</i></p>
<p class="Pp"><b>::log::logError</b> <i>text</i></p>
<p class="Pp"><b>::log::Puts</b> <i>level</i> <i>text</i></p>
<p class="Pp"></p>
<pre>
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <b>log</b> package provides commands that allow libraries and
    applications to selectively log information about their internal operation
    and state.</p>
<p class="Pp">To use the package just execute</p>
<p class="Pp"></p>
<pre>
    package require log
    log::log notice &quot;Some message&quot;
</pre>
<p class="Pp">As can be seen above, each message given to the log facility is
    associated with a <i>level</i> determining the importance of the message.
    The user can then select which levels to log, what commands to use for the
    logging of each level and the channel to write the message to. In the
    following example the logging of all message with level <b>debug</b> is
    deactivated.</p>
<p class="Pp"></p>
<pre>
    package require log
    log::lvSuppress debug
    log::log debug &quot;Unseen message&quot; ; # No output
</pre>
<p class="Pp">By default all messages associated with an error-level
    (<b>emergency</b>, <b>alert</b>, <b>critical</b>, and <b>error</b>) are
    written to <b>stderr</b>. Messages with any other level are written to
    <b>stdout</b>. In the following example the log module is reconfigured to
    write <b>debug</b> messages to <b>stderr</b> too.</p>
<p class="Pp"></p>
<pre>
    package require log
    log::lvChannel debug stderr
    log::log debug &quot;Written to stderr&quot;
</pre>
<p class="Pp">Each message level is also associated with a command to use when
    logging a message with that level. The behaviour above for example relies on
    the fact that all message levels use by default the standard command
    <b>::log::Puts</b> to log any message. In the following example all messages
    of level <b>notice</b> are given to the non-standard command <b>toText</b>
    for logging. This disables the channel setting for such messages, assuming
    that <b>toText</b> does not use it by itself.</p>
<p class="Pp"></p>
<pre>
    package require log
    log::lvCmd notice toText
    log::log notice &quot;Handled by \&quot;toText\&quot;&quot;
</pre>
<p class="Pp">Another database maintained by this facility is a map from message
    levels to colors. The information in this database has <i>no</i> influence
    on the behaviour of the module. It is merely provided as a convenience and
    in anticipation of the usage of this facility in <b>tk</b>-based application
    which may want to colorize message logs.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="API"><a class="permalink" href="#API">API</a></h1>
<p class="Pp">The following commands are available:</p>
<dl class="Bl-tag">
  <dt><b>::log::levels</b></dt>
  <dd>Returns the names of all known levels, in alphabetical order.</dd>
  <dt><b>::log::lv2longform</b> <i>level</i></dt>
  <dd>Converts any unique abbreviation of a level name to the full level
    name.</dd>
  <dt><b>::log::lv2color</b> <i>level</i></dt>
  <dd>Converts any level name including unique abbreviations to the
      corresponding color.</dd>
  <dt><b>::log::lv2priority</b> <i>level</i></dt>
  <dd>Converts any level name including unique abbreviations to the
      corresponding priority.</dd>
  <dt><b>::log::lv2cmd</b> <i>level</i></dt>
  <dd>Converts any level name including unique abbreviations to the command
      prefix used to write messages with that level.</dd>
  <dt><b>::log::lv2channel</b> <i>level</i></dt>
  <dd>Converts any level name including unique abbreviations to the channel used
      by <b>::log::Puts</b> to write messages with that level.</dd>
  <dt><b>::log::lvCompare</b> <i>level1</i> <i>level2</i></dt>
  <dd>Compares two levels (including unique abbreviations) with respect to their
      priority. This command can be used by the -command option of lsort. The
      result is one of -1, 0 or 1 or an error. A result of -1 signals that
      level1 is of less priority than level2. 0 signals that both levels have
      the same priority. 1 signals that level1 has higher priority than
    level2.</dd>
  <dt><b>::log::lvSuppress</b> <i>level</i> {<i>suppress</i> 1}</dt>
  <dd>] (Un)suppresses the output of messages having the specified level. Unique
      abbreviations for the level are allowed here too.</dd>
  <dt><b>::log::lvSuppressLE</b> <i>level</i> {<i>suppress</i> 1}</dt>
  <dd>] (Un)suppresses the output of messages having the specified level or one
      of lesser priority. Unique abbreviations for the level are allowed here
      too.</dd>
  <dt><b>::log::lvIsSuppressed</b> <i>level</i></dt>
  <dd>Asks the package whether the specified level is currently suppressed.
      Unique abbreviations of level names are allowed.</dd>
  <dt><b>::log::lvCmd</b> <i>level</i> <i>cmd</i></dt>
  <dd>Defines for the specified level with which command to write the messages
      having this level. Unique abbreviations of level names are allowed. The
      command is actually a command prefix and this facility will append 2
      arguments before calling it, the level of the message and the message
      itself, in this order.</dd>
  <dt><b>::log::lvCmdForall</b> <i>cmd</i></dt>
  <dd>Defines for all known levels with which command to write the messages
      having this level. The command is actually a command prefix and this
      facility will append 2 arguments before calling it, the level of the
      message and the message itself, in this order.</dd>
  <dt><b>::log::lvChannel</b> <i>level</i> <i>chan</i></dt>
  <dd>Defines for the specified level into which channel <b>::log::Puts</b> (the
      standard command) shall write the messages having this level. Unique
      abbreviations of level names are allowed. The command is actually a
      command prefix and this facility will append 2 arguments before calling
      it, the level of the message and the message itself, in this order.</dd>
  <dt><b>::log::lvChannelForall</b> <i>chan</i></dt>
  <dd>Defines for all known levels with which which channel <b>::log::Puts</b>
      (the standard command) shall write the messages having this level. The
      command is actually a command prefix and this facility will append 2
      arguments before calling it, the level of the message and the message
      itself, in this order.</dd>
  <dt><b>::log::lvColor</b> <i>level</i> <i>color</i></dt>
  <dd>Defines for the specified level the color to return for it in a call to
      <b>::log::lv2color</b>. Unique abbreviations of level names are
    allowed.</dd>
  <dt><b>::log::lvColorForall</b> <i>color</i></dt>
  <dd>Defines for all known levels the color to return for it in a call to
      <b>::log::lv2color</b>. Unique abbreviations of level names are
    allowed.</dd>
  <dt><b>::log::log</b> <i>level</i> <i>text</i></dt>
  <dd>Log a message according to the specifications for commands, channels and
      suppression. In other words: The command will do nothing if the specified
      level is suppressed. If it is not suppressed the actual logging is
      delegated to the specified command. If there is no command specified for
      the level the message won't be logged. The standard command
      <b>::log::Puts</b> will write the message to the channel specified for the
      given level. If no channel is specified for the level the message won't be
      logged. Unique abbreviations of level names are allowed. Errors in the
      actual logging command are <i>not</i> caught, but propagated to the
      caller, as they may indicate misconfigurations of the log facility or
      errors in the callers code itself.</dd>
  <dt><b>::log::logarray</b> <i>level</i> <i>arrayvar</i> ?<i>pattern</i>?</dt>
  <dd>Like <b>::log::log</b>, but logs the contents of the specified array
      variable <i>arrayvar</i>, possibly restricted to entries matching the
      <i>pattern</i>. The pattern defaults to <b>*</b> (i.e. all entries) if
      none was specified.</dd>
  <dt><b>::log::loghex</b> <i>level</i> <i>text</i> <i>data</i></dt>
  <dd>Like <b>::log::log</b>, but assumes that <i>data</i> contains binary data.
      It converts this into a mixed hex/ascii representation before writing them
      to the log.</dd>
  <dt><b>::log::logMsg</b> <i>text</i></dt>
  <dd>Convenience wrapper around <b>::log::log</b>. Equivalent to <b>::log::log
      info text</b>.</dd>
  <dt><b>::log::logError</b> <i>text</i></dt>
  <dd>Convenience wrapper around <b>::log::log</b>. Equivalent to <b>::log::log
      error text</b>.</dd>
  <dt><b>::log::Puts</b> <i>level</i> <i>text</i></dt>
  <dd>The standard log command, it writes messages and their levels to
      user-specified channels. Assumes that the suppression checks were done by
      the caller. Expects full level names, abbreviations are <i>not
      allowed</i>.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="LEVELS"><a class="permalink" href="#LEVELS">LEVELS</a></h1>
<p class="Pp">The package currently defines the following log levels, the level
    of highest importance listed first.</p>
<ul class="Bl-bullet">
  <li>emergency</li>
  <li>alert</li>
  <li>critical</li>
  <li>error</li>
  <li>warning</li>
  <li>notice</li>
  <li>info</li>
  <li>debug</li>
</ul>
<p class="Pp"><i>Note</i> that by default all messages with levels
    <b>warning</b> down to <b>debug</b> are suppressed. This is done
    intentionally, because (we believe that) in most situations debugging output
    is not wanted. Most people wish to have such output only when actually
    debugging an application.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS,_IDEAS,_FEEDBACK"><a class="permalink" href="#BUGS,_IDEAS,_FEEDBACK">BUGS,
  IDEAS, FEEDBACK</a></h1>
<p class="Pp">This document, and the package it describes, will undoubtedly
    contain bugs and other problems. Please report such in the category
    <i>log</i> of the <i>Tcllib SF Trackers</i>
    [http://sourceforge.net/tracker/?group_id=12883]. Please also report any
    ideas for enhancements you may have for either package and/or
  documentation.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
<p class="Pp">log, log level, message, message level</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CATEGORY"><a class="permalink" href="#CATEGORY">CATEGORY</a></h1>
<p class="Pp">Programming tools</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<pre>Copyright (c) 2001-2009 Andreas Kupries &lt;andreas_kupries@users.sourceforge.net&gt;
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">1.3</td>
    <td class="foot-os"><a href="..">log</a></td>
  </tr>
</table>
</body>
</html>
