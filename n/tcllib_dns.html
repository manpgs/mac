<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2002, Pat Thoyts
  
   The definitions below are for supplemental macros used in Tcl/Tk
   manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO
  	Start of list of standard options for a Tk widget.  The
  	options follow on successive lines, in four columns separated
  	by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   RCS: @(#) $Id: man.macros,v 1.1 2009/01/30 04:56:47 andreas_kupries Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>dns(n)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">dns(n)</td>
    <td class="head-vol">Domain Name Service</td>
    <td class="head-rtitle">dns(n)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">dns - Tcl Domain Name Service Client</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">package require <b>Tcl 8.2</b></p>
<p class="Pp">package require <b>dns ?1.3.3?</b></p>
<p class="Pp"><b>::dns::resolve</b> <i>query</i> ?<i>options</i>?</p>
<p class="Pp"><b>::dns::configure</b> ?<i>options</i>?</p>
<p class="Pp"><b>::dns::name</b> <i>token</i></p>
<p class="Pp"><b>::dns::address</b> <i>token</i></p>
<p class="Pp"><b>::dns::cname</b> <i>token</i></p>
<p class="Pp"><b>::dns::result</b> <i>token</i></p>
<p class="Pp"><b>::dns::status</b> <i>token</i></p>
<p class="Pp"><b>::dns::error</b> <i>token</i></p>
<p class="Pp"><b>::dns::reset</b> <i>token</i></p>
<p class="Pp"><b>::dns::wait</b> <i>token</i></p>
<p class="Pp"><b>::dns::cleanup</b> <i>token</i></p>
<p class="Pp"><b>::dns::nameservers</b></p>
<p class="Pp"></p>
<pre>
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The dns package provides a Tcl only Domain Name Service client.
    You should refer to (1) and (2) for information about the DNS protocol or
    read resolver(3) to find out how the C library resolves domain names. The
    intention of this package is to insulate Tcl scripts from problems with
    using the system library resolver for slow name servers. It may or may not
    be of practical use. Internet name resolution is a complex business and DNS
    is only one part of the resolver. You may find you are supposed to be using
    hosts files, NIS or WINS to name a few other systems. This package is not a
    substitute for the C library resolver - it does however implement name
    resolution over DNS. The package also extends the package <b>uri</b> to
    support DNS URIs (4) of the form <i>dns:what.host.com</i> or
    <i>dns://my.nameserver/what.host.com</i>. The <b>dns::resolve</b> command
    can handle DNS URIs or simple domain names as a query.</p>
<p class="Pp"><i>Note:</i> The package defaults to using DNS over TCP
    connections. If you wish to use UDP you will need to have the <b>tcludp</b>
    package installed and have a version that correctly handles binary data
    (&gt; 1.0.4). This is available at <i>http://tcludp.sourceforge.net/</i>. If
    the <b>udp</b> package is present then UDP will be used by default.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COMMANDS"><a class="permalink" href="#COMMANDS">COMMANDS</a></h1>
<dl class="Bl-tag">
  <dt><b>::dns::resolve</b> <i>query</i> ?<i>options</i>?</dt>
  <dd>Resolve a domain name using the <i>DNS</i> protocol. <i>query</i> is the
      domain name to be lookup up. This should be either a fully qualified
      domain name or a DNS URI.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="nameserver"><a class="permalink" href="#nameserver"><b>-nameserver</b>
    <i>hostname</i> or <b>-server</b> <i>hostname</i></a></dt>
  <dd>Specify an alternative name server for this request.</dd>
  <dt id="protocol"><a class="permalink" href="#protocol"><b>-protocol</b>
    <i>tcp|udp</i></a></dt>
  <dd>Specify the network protocol to use for this request. Can be one of
      <i>tcp</i> or <i>udp</i>.</dd>
  <dt id="port"><a class="permalink" href="#port"><b>-port</b>
    <i>portnum</i></a></dt>
  <dd>Specify an alternative port.</dd>
  <dt id="search"><a class="permalink" href="#search"><b>-search</b>
    <i>domainlist</i></a></dt>
  <dd></dd>
  <dt id="timeout"><a class="permalink" href="#timeout"><b>-timeout</b>
    <i>milliseconds</i></a></dt>
  <dd>Override the default timeout.</dd>
  <dt id="type"><a class="permalink" href="#type"><b>-type</b>
    <i>TYPE</i></a></dt>
  <dd>Specify the type of DNS record you are interested in. Valid values are A,
      NS, MD, MF, CNAME, SOA, MB, MG, MR, NULL, WKS, PTR, HINFO, MINFO, MX, TXT,
      SPF, SRV, AAAA, AXFR, MAILB, MAILA and *. See RFC1035 for details about
      the return values. See <i>http://spf.pobox.com/</i> about SPF. See (3)
      about AAAA records and RFC2782 for details of SRV records.</dd>
  <dt id="class"><a class="permalink" href="#class"><b>-class</b>
    <i>CLASS</i></a></dt>
  <dd>Specify the class of domain name. This is usually IN but may be one of IN
      for internet domain names, CS, CH, HS or * for any class.</dd>
  <dt id="recurse"><a class="permalink" href="#recurse"><b>-recurse</b>
    <i>boolean</i></a></dt>
  <dd>Set to <i>false</i> if you do not want the name server to recursively act
      upon your request. Normally set to <i>true</i>.</dd>
  <dt id="command"><a class="permalink" href="#command"><b>-command</b>
    <i>procname</i></a></dt>
  <dd>Set a procedure to be called upon request completion. The procedure will
      be passed the token as its only argument.</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>::dns::configure</b> ?<i>options</i>?</dt>
  <dd>The <b>::dns::configure</b> command is used to setup the dns package. The
      server to query, the protocol and domain search path are all set via this
      command. If no arguments are provided then a list of all the current
      settings is returned. If only one argument then it must the the name of an
      option and the value for that option is returned.</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="nameserver~2"><a class="permalink" href="#nameserver~2"><b>-nameserver</b>
    <i>hostname</i></a></dt>
  <dd>Set the default name server to be used by all queries. The default is
      <i>localhost</i>.</dd>
  <dt id="protocol~2"><a class="permalink" href="#protocol~2"><b>-protocol</b>
    <i>tcp|udp</i></a></dt>
  <dd>Set the default network protocol to be used. Default is <i>tcp</i>.</dd>
  <dt id="port~2"><a class="permalink" href="#port~2"><b>-port</b>
    <i>portnum</i></a></dt>
  <dd>Set the default port to use on the name server. The default is 53.</dd>
  <dt id="search~2"><a class="permalink" href="#search~2"><b>-search</b>
    <i>domainlist</i></a></dt>
  <dd>Set the domain search list. This is currently not used.</dd>
  <dt id="timeout~2"><a class="permalink" href="#timeout~2"><b>-timeout</b>
    <i>milliseconds</i></a></dt>
  <dd>Set the default timeout value for DNS lookups. Default is 30 seconds.</dd>
  <dt id="loglevel"><a class="permalink" href="#loglevel"><b>-loglevel</b>
    <i>level</i></a></dt>
  <dd>Set the log level used for emitting diagnostic messages from this package.
      The default is <i>warn</i>. See the <b>log</b> package for details of the
      available levels.</dd>
</dl>
</div>
<p class="Pp"></p>
<dl class="Bl-tag">
  <dt><b>::dns::name</b> <i>token</i></dt>
  <dd>Returns a list of all domain names returned as an answer to your query.
    <p class="Pp"></p>
  </dd>
  <dt><b>::dns::address</b> <i>token</i></dt>
  <dd>Returns a list of the address records that match your query.
    <p class="Pp"></p>
  </dd>
  <dt><b>::dns::cname</b> <i>token</i></dt>
  <dd>Returns a list of canonical names (usually just one) matching your query.
    <p class="Pp"></p>
  </dd>
  <dt><b>::dns::result</b> <i>token</i></dt>
  <dd>Returns a list of all the decoded answer records provided for your query.
      This permits you to extract the result for more unusual query types.
    <p class="Pp"></p>
  </dd>
  <dt><b>::dns::status</b> <i>token</i></dt>
  <dd>Returns the status flag. For a successfully completed query this will be
      <i>ok</i>. May be <i>error</i> or <i>timeout</i> or <i>eof</i>. See also
      <b>::dns::error</b>
    <p class="Pp"></p>
  </dd>
  <dt><b>::dns::error</b> <i>token</i></dt>
  <dd>Returns the error message provided for requests whose status is
      <i>error</i>. If there is no error message then an empty string is
      returned.
    <p class="Pp"></p>
  </dd>
  <dt><b>::dns::reset</b> <i>token</i></dt>
  <dd>Reset or cancel a DNS query.
    <p class="Pp"></p>
  </dd>
  <dt><b>::dns::wait</b> <i>token</i></dt>
  <dd>Wait for a DNS query to complete and return the status upon completion.
    <p class="Pp"></p>
  </dd>
  <dt><b>::dns::cleanup</b> <i>token</i></dt>
  <dd>Remove all state variables associated with the request.
    <p class="Pp"></p>
  </dd>
  <dt><b>::dns::nameservers</b></dt>
  <dd>Attempts to return a list of the nameservers currently configured for the
      users system. On a unix machine this parses the /etc/resolv.conf file for
      nameservers (if it exists) and on Windows systems we examine certain parts
      of the registry. If no nameserver can be found then the loopback address
      (127.0.0.1) is used as a default.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<pre>
% set tok [dns::resolve www.tcl.tk]
::dns::1
% dns::status $tok
ok
% dns::address $tok
199.175.6.239
% dns::name $tok
www.tcl.tk
% dns::cleanup $tok
</pre>
<p class="Pp">Using DNS URIs as queries:</p>
<pre>
% set tok [dns::resolve &quot;dns:tcl.tk;type=MX&quot;]
% set tok [dns::resolve &quot;dns://l.root-servers.net/www.tcl.tk&quot;]
</pre>
<p class="Pp">Reverse address lookup:</p>
<pre>
% set tok [dns::resolve 127.0.0.1]
::dns::1
% dns::name $tok
localhost
% dns::cleanup $tok
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="REFERENCES"><a class="permalink" href="#REFERENCES">REFERENCES</a></h1>
<dl class="Bl-tag">
  <dt>[1]</dt>
  <dd>Mockapetris, P., &quot;Domain Names - Concepts and Facilities&quot;, RFC
      1034, November 1987. (<i>http://www.ietf.org/rfc/rfc1034.txt</i>)</dd>
  <dt>[2]</dt>
  <dd>Mockapetris, P., &quot;Domain Names - Implementation and
      Specification&quot;, RFC 1035, November 1087.
      (<i>http://www.ietf.org/rfc/rfc1035.txt</i>)</dd>
  <dt>[3]</dt>
  <dd>Thompson, S. and Huitema, C., &quot;DNS Extensions to support IP version
      6&quot;, RFC 1886, December 1995.
      (<i>http://www.ietf.org/rfc/rfc1886.txt</i>)</dd>
  <dt>[4]</dt>
  <dd>Josefsson, S., &quot;Domain Name System Uniform Resource
      Identifiers&quot;, Internet-Draft, October 2003,
      (<i>http://www.ietf.org/internet-drafts/draft-josefsson-dns-url-09.txt</i>)</dd>
  <dt>[5]</dt>
  <dd>Gulbrandsen, A., Vixie, P. and Esibov, L., &quot;A DNS RR for specifying
      the location of services (DNS SRV)&quot;, RFC 2782, February 2000,
      (<i>http://www.ietf.org/rfc/rfc2782.txt</i>)</dd>
  <dt>[6]</dt>
  <dd>Ohta, M. &quot;Incremental Zone Transfer in DNS&quot;, RFC 1995, August
      1996, (<i>http://www.ietf.org/rfc/rfc1995.txt</i>)</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Pat Thoyts</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS,_IDEAS,_FEEDBACK"><a class="permalink" href="#BUGS,_IDEAS,_FEEDBACK">BUGS,
  IDEAS, FEEDBACK</a></h1>
<p class="Pp">This document, and the package it describes, will undoubtedly
    contain bugs and other problems. Please report such in the category
    <i>dns</i> of the <i>Tcllib SF Trackers</i>
    [http://sourceforge.net/tracker/?group_id=12883]. Please also report any
    ideas for enhancements you may have for either package and/or
  documentation.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">resolver(5)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
<p class="Pp">DNS, domain name service, resolver, rfc 1034, rfc 1035, rfc
  1886</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CATEGORY"><a class="permalink" href="#CATEGORY">CATEGORY</a></h1>
<p class="Pp">Networking</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<pre>Copyright (c) 2002, Pat Thoyts
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">1.3.3</td>
    <td class="foot-os">dns</td>
  </tr>
</table>
</body>
</html>
