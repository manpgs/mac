<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 1989-1993 The Regents of the University of California.
   Copyright (c) 1994-1997 Sun Microsystems, Inc.
  
   See the file "license.terms" for information on usage and redistribution
   of this file, and for a DISCLAIMER OF ALL WARRANTIES.
  
   RCS: @(#) $Id: SetVar.3,v 1.16 2007/12/13 15:22:32 dgp Exp $
  
   The -*- nroff -*- definitions below are for supplemental macros used
   in Tcl/Tk manual entries.
  
   .AP type name in/out ?indent?
  	Start paragraph describing an argument to a library procedure.
  	type is type of argument (int, etc.), in/out is either "in", "out",
  	or "in/out" to describe whether procedure reads or modifies arg,
  	and indent is equivalent to second arg of .IP (shouldn't ever be
  	needed;  use .AS below instead)
  
   .AS ?type? ?name?
  	Give maximum sizes of arguments for setting tab stops.  Type and
  	name are examples of largest possible arguments that will be passed
  	to .AP later.  If args are omitted, default tab stops are used.
  
   .BS
  	Start box enclosure.  From here until next .BE, everything will be
  	enclosed in one large box.
  
   .BE
  	End of box enclosure.
  
   .CS
  	Begin code excerpt.
  
   .CE
  	End code excerpt.
  
   .VS ?version? ?br?
  	Begin vertical sidebar, for use in marking newly-changed parts
  	of man pages.  The first argument is ignored and used for recording
  	the version when the .VS was added, so that the sidebars can be
  	found and removed when they reach a certain age.  If another argument
  	is present, then a line break is forced before starting the sidebar.
  
   .VE
  	End of vertical sidebar.
  
   .DS
  	Begin an indented unfilled display.
  
   .DE
  	End of indented unfilled display.
  
   .SO ?manpage?
  	Start of list of standard options for a Tk widget. The manpage
  	argument defines where to look up the standard options; if
  	omitted, defaults to "options". The options follow on successive
  	lines, in three columns separated by tabs.
  
   .SE
  	End of list of standard options for a Tk widget.
  
   .OP cmdName dbName dbClass
  	Start of description of a specific option.  cmdName gives the
  	option's name as specified in the class command, dbName gives
  	the option's name in the option database, and dbClass gives
  	the option's class in the option database.
  
   .UL arg1 arg2
  	Print arg1 underlined, then print arg2 normally.
  
   .QW arg1 ?arg2?
  	Print arg1 in quotes, then arg2 normally (for trailing punctuation).
  
   .PQ arg1 ?arg2?
  	Print an open parenthesis, arg1 in quotes, then arg2 normally
  	(for trailing punctuation) and then a closing parenthesis.
  
   RCS: @(#) $Id: man.macros,v 1.9 2008/01/29 15:32:33 dkf Exp $
  
  	# Set up traps and other miscellaneous stuff for Tcl/Tk man pages.
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Tcl_SetVar(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Tcl_SetVar(3)</td>
    <td class="head-vol">Tcl Library Procedures</td>
    <td class="head-rtitle">Tcl_SetVar(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<pre>
</pre>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Tcl_SetVar2Ex, Tcl_SetVar, Tcl_SetVar2, Tcl_ObjSetVar2,
    Tcl_GetVar2Ex, Tcl_GetVar, Tcl_GetVar2, Tcl_ObjGetVar2, Tcl_UnsetVar,
    Tcl_UnsetVar2 - manipulate Tcl variables</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre><b>#include &lt;tcl.h&gt;</b>

Tcl_Obj *
<b>Tcl_SetVar2Ex</b>(<i>interp, name1, name2, newValuePtr, flags</i>)

const char *
<b>Tcl_SetVar</b>(<i>interp, varName, newValue, flags</i>)

const char *
<b>Tcl_SetVar2</b>(<i>interp, name1, name2, newValue, flags</i>)

Tcl_Obj *
<b>Tcl_ObjSetVar2</b>(<i>interp, part1Ptr, part2Ptr, newValuePtr, flags</i>)

Tcl_Obj *
<b>Tcl_GetVar2Ex</b>(<i>interp, name1, name2, flags</i>)

const char *
<b>Tcl_GetVar</b>(<i>interp, varName, flags</i>)

const char *
<b>Tcl_GetVar2</b>(<i>interp, name1, name2, flags</i>)

Tcl_Obj *
<b>Tcl_ObjGetVar2</b>(<i>interp, part1Ptr, part2Ptr, flags</i>)

int
<b>Tcl_UnsetVar</b>(<i>interp, varName, flags</i>)

int
<b>Tcl_UnsetVar2</b>(<i>interp, name1, name2, flags</i>)</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="ARGUMENTS"><a class="permalink" href="#ARGUMENTS">ARGUMENTS</a></h1>
<dl class="Bl-tag">
  <dt>Tcl_Interp <i>*interp</i> (in)</dt>
  <dd>Interpreter containing variable.</dd>
  <dt>const char <i>*name1</i> (in)</dt>
  <dd>Contains the name of an array variable (if <i>name2</i> is non-NULL) or
      (if <i>name2</i> is NULL) either the name of a scalar variable or a
      complete name including both variable name and index. May include
      <b>::</b> namespace qualifiers to specify a variable in a particular
      namespace.</dd>
  <dt>const char <i>*name2</i> (in)</dt>
  <dd>If non-NULL, gives name of element within array; in this case <i>name1</i>
      must refer to an array variable.</dd>
  <dt>Tcl_Obj <i>*newValuePtr</i> (in)</dt>
  <dd>Points to a Tcl object containing the new value for the variable.</dd>
  <dt>int <i>flags</i> (in)</dt>
  <dd>OR-ed combination of bits providing additional information. See below for
      valid values.</dd>
  <dt>const char <i>*varName</i> (in)</dt>
  <dd>Name of variable. May include <b>::</b> namespace qualifiers to specify a
      variable in a particular namespace. May refer to a scalar variable or an
      element of an array.</dd>
  <dt>const char <i>*newValue</i> (in)</dt>
  <dd>New value for variable, specified as a null-terminated string. A copy of
      this value is stored in the variable.</dd>
  <dt>Tcl_Obj <i>*part1Ptr</i> (in)</dt>
  <dd>Points to a Tcl object containing the variable's name. The name may
      include a series of <b>::</b> namespace qualifiers to specify a variable
      in a particular namespace. May refer to a scalar variable or an element of
      an array variable.</dd>
  <dt>Tcl_Obj <i>*part2Ptr</i> (in)</dt>
  <dd>If non-NULL, points to an object containing the name of an element within
      an array and <i>part1Ptr</i> must refer to an array variable.
    <pre>
    </pre>
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">These procedures are used to create, modify, read, and delete Tcl
    variables from C code.</p>
<p class="Pp"><b>Tcl_SetVar2Ex</b>, <b>Tcl_SetVar</b>, <b>Tcl_SetVar2</b>, and
    <b>Tcl_ObjSetVar2</b> will create a new variable or modify an existing one.
    These procedures set the given variable to the value given by
    <i>newValuePtr</i> or <i>newValue</i> and return a pointer to the variable's
    new value, which is stored in Tcl's variable structure. <b>Tcl_SetVar2Ex</b>
    and <b>Tcl_ObjSetVar2</b> take the new value as a Tcl_Obj and return a
    pointer to a Tcl_Obj. <b>Tcl_SetVar</b> and <b>Tcl_SetVar2</b> take the new
    value as a string and return a string; they are usually less efficient than
    <b>Tcl_ObjSetVar2</b>. Note that the return value may be different than the
    <i>newValuePtr</i> or <i>newValue</i> argument, due to modifications made by
    write traces. If an error occurs in setting the variable (e.g. an array
    variable is referenced without giving an index into the array) NULL is
    returned and an error message is left in <i>interp</i>'s result if the
    <b>TCL_LEAVE_ERR_MSG</b> <i>flag</i> bit is set.</p>
<p class="Pp"><b>Tcl_GetVar2Ex</b>, <b>Tcl_GetVar</b>, <b>Tcl_GetVar2</b>, and
    <b>Tcl_ObjGetVar2</b> return the current value of a variable. The arguments
    to these procedures are treated in the same way as the arguments to the
    procedures described above. Under normal circumstances, the return value is
    a pointer to the variable's value. For <b>Tcl_GetVar2Ex</b> and
    <b>Tcl_ObjGetVar2</b> the value is returned as a pointer to a Tcl_Obj. For
    <b>Tcl_GetVar</b> and <b>Tcl_GetVar2</b> the value is returned as a string;
    this is usually less efficient, so <b>Tcl_GetVar2Ex</b> or
    <b>Tcl_ObjGetVar2</b> are preferred. If an error occurs while reading the
    variable (e.g. the variable does not exist or an array element is specified
    for a scalar variable), then NULL is returned and an error message is left
    in <i>interp</i>'s result if the <b>TCL_LEAVE_ERR_MSG</b> <i>flag</i> bit is
    set.</p>
<p class="Pp"><b>Tcl_UnsetVar</b> and <b>Tcl_UnsetVar2</b> may be used to remove
    a variable, so that future attempts to read the variable will return an
    error. The arguments to these procedures are treated in the same way as the
    arguments to the procedures above. If the variable is successfully removed
    then <b>TCL_OK</b> is returned. If the variable cannot be removed because it
    does not exist then <b>TCL_ERROR</b> is returned and an error message is
    left in <i>interp</i>'s result if the <b>TCL_LEAVE_ERR_MSG</b> <i>flag</i>
    bit is set. If an array element is specified, the given element is removed
    but the array remains. If an array name is specified without an index, then
    the entire array is removed.</p>
<p class="Pp">The name of a variable may be specified to these procedures in
    four ways:</p>
<dl class="Bl-tag">
  <dt>[1]</dt>
  <dd>If <b>Tcl_SetVar</b>, <b>Tcl_GetVar</b>, or <b>Tcl_UnsetVar</b> is
      invoked, the variable name is given as a single string, <i>varName</i>. If
      <i>varName</i> contains an open parenthesis and ends with a close
      parenthesis, then the value between the parentheses is treated as an index
      (which can have any string value) and the characters before the first open
      parenthesis are treated as the name of an array variable. If
      <i>varName</i> does not have parentheses as described above, then the
      entire string is treated as the name of a scalar variable.</dd>
  <dt>[2]</dt>
  <dd>If the <i>name1</i> and <i>name2</i> arguments are provided and
      <i>name2</i> is non-NULL, then an array element is specified and the array
      name and index have already been separated by the caller: <i>name1</i>
      contains the name and <i>name2</i> contains the index. An error is
      generated if <i>name1</i> contains an open parenthesis and ends with a
      close parenthesis (array element) and <i>name2</i> is non-NULL.</dd>
  <dt>[3]</dt>
  <dd>If <i>name2</i> is NULL, <i>name1</i> is treated just like <i>varName</i>
      in case [1] above (it can be either a scalar or an array element variable
      name).</dd>
</dl>
<p class="Pp">The <i>flags</i> argument may be used to specify any of several
    options to the procedures. It consists of an OR-ed combination of the
    following bits.</p>
<dl class="Bl-tag">
  <dt id="TCL_GLOBAL_ONLY"><a class="permalink" href="#TCL_GLOBAL_ONLY"><b>TCL_GLOBAL_ONLY</b></a></dt>
  <dd>Under normal circumstances the procedures look up variables as follows. If
      a procedure call is active in <i>interp</i>, the variable is looked up at
      the current level of procedure call. Otherwise, the variable is looked up
      first in the current namespace, then in the global namespace. However, if
      this bit is set in <i>flags</i> then the variable is looked up only in the
      global namespace even if there is a procedure call active. If both
      <b>TCL_GLOBAL_ONLY</b> and <b>TCL_NAMESPACE_ONLY</b> are given,
      <b>TCL_GLOBAL_ONLY</b> is ignored.</dd>
  <dt id="TCL_NAMESPACE_ONLY"><a class="permalink" href="#TCL_NAMESPACE_ONLY"><b>TCL_NAMESPACE_ONLY</b></a></dt>
  <dd>If this bit is set in <i>flags</i> then the variable is looked up only in
      the current namespace; if a procedure is active its variables are ignored,
      and the global namespace is also ignored unless it is the current
      namespace.</dd>
  <dt id="TCL_LEAVE_ERR_MSG"><a class="permalink" href="#TCL_LEAVE_ERR_MSG"><b>TCL_LEAVE_ERR_MSG</b></a></dt>
  <dd>If an error is returned and this bit is set in <i>flags</i>, then an error
      message will be left in the interpreter's result, where it can be
      retrieved with <b>Tcl_GetObjResult</b> or <b>Tcl_GetStringResult</b>. If
      this flag bit is not set then no error message is left and the
      interpreter's result will not be modified.</dd>
  <dt id="TCL_APPEND_VALUE"><a class="permalink" href="#TCL_APPEND_VALUE"><b>TCL_APPEND_VALUE</b></a></dt>
  <dd>If this bit is set then <i>newValuePtr</i> or <i>newValue</i> is appended
      to the current value instead of replacing it. If the variable is currently
      undefined, then the bit is ignored. This bit is only used by the
      <b>Tcl_Set*</b> procedures.</dd>
  <dt id="TCL_LIST_ELEMENT"><a class="permalink" href="#TCL_LIST_ELEMENT"><b>TCL_LIST_ELEMENT</b></a></dt>
  <dd>If this bit is set, then <i>newValue</i> is converted to a valid Tcl list
      element before setting (or appending to) the variable. A separator space
      is appended before the new list element unless the list element is going
      to be the first element in a list or sublist (i.e. the variable's current
      value is empty, or contains the single character &#x201C;{&#x201D;, or
      ends in &#x201C; }&#x201D;). When appending, the original value of the
      variable must also be a valid list, so that the operation is the appending
      of a new list element onto a list.</dd>
</dl>
<p class="Pp"><b>Tcl_GetVar</b> and <b>Tcl_GetVar2</b> return the current value
    of a variable. The arguments to these procedures are treated in the same way
    as the arguments to <b>Tcl_SetVar</b> and <b>Tcl_SetVar2</b>. Under normal
    circumstances, the return value is a pointer to the variable's value (which
    is stored in Tcl's variable structure and will not change before the next
    call to <b>Tcl_SetVar</b> or <b>Tcl_SetVar2</b>). <b>Tcl_GetVar</b> and
    <b>Tcl_GetVar2</b> use the flag bits <b>TCL_GLOBAL_ONLY</b> and
    <b>TCL_LEAVE_ERR_MSG</b>, both of which have the same meaning as for
    <b>Tcl_SetVar</b>. If an error occurs in reading the variable (e.g. the
    variable does not exist or an array element is specified for a scalar
    variable), then NULL is returned.</p>
<p class="Pp"><b>Tcl_UnsetVar</b> and <b>Tcl_UnsetVar2</b> may be used to remove
    a variable, so that future calls to <b>Tcl_GetVar</b> or <b>Tcl_GetVar2</b>
    for the variable will return an error. The arguments to these procedures are
    treated in the same way as the arguments to <b>Tcl_GetVar</b> and
    <b>Tcl_GetVar2</b>. If the variable is successfully removed then
    <b>TCL_OK</b> is returned. If the variable cannot be removed because it does
    not exist then <b>TCL_ERROR</b> is returned. If an array element is
    specified, the given element is removed but the array remains. If an array
    name is specified without an index, then the entire array is removed.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Tcl_GetObjResult, Tcl_GetStringResult, Tcl_TraceVar</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="KEYWORDS"><a class="permalink" href="#KEYWORDS">KEYWORDS</a></h1>
<p class="Pp">array, get variable, interpreter, object, scalar, set, unset,
    variable</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">8.1</td>
    <td class="foot-os">Tcl</td>
  </tr>
</table>
</body>
</html>
