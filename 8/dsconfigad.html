<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>dsconfigad(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">dsconfigad(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">dsconfigad(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">dsconfigad</code> &#x2014;
    <span class="Nd">retrieves/changes configuration for Active
    Directory.</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">dsconfigad</code></td>
    <td><code class="Fl">-help</code></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dsconfigad</code></td>
    <td><code class="Fl">-show</code> [<code class="Fl">-xml</code>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dsconfigad</code></td>
    <td><code class="Fl">-add</code> <var class="Ar">fqdn</var>
      <code class="Fl">-username</code> <var class="Ar">username</var>
      [<code class="Fl">-password</code> <var class="Ar">password</var>]
      [<code class="Fl">-computer</code> <var class="Ar">computerid</var>]
      [<code class="Fl">-ou</code> <var class="Ar">dn</var>]
      [<code class="Fl">-preferred</code> <var class="Ar">server</var>]
      [<code class="Fl">-force</code>] [<code class="Fl">-localuser</code>
      <var class="Ar">username</var>] [<code class="Fl">-localpassword</code>
      <var class="Ar">password</var>] [<code class="Fl">-packetencrypt</code>
      <var class="Ar">allow</var> | <var class="Ar">disable</var> |
      <var class="Ar">require</var> | <var class="Ar">ssl</var>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dsconfigad</code></td>
    <td><code class="Fl">-leave</code> [<code class="Fl">-localuser</code>
      <var class="Ar">username</var>] [<code class="Fl">-localpassword</code>
      <var class="Ar">password</var>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dsconfigad</code></td>
    <td><code class="Fl">-remove</code> <code class="Fl">-username</code>
      <var class="Ar">username</var> [<code class="Fl">-password</code>
      <var class="Ar">password</var>] [<code class="Fl">-localuser</code>
      <var class="Ar">username</var>] [<code class="Fl">-localpassword</code>
      <var class="Ar">password</var>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">dsconfigad</code></td>
    <td>[<code class="Fl">-localuser</code> <var class="Ar">username</var>]
      [<code class="Fl">-localpassword</code> <var class="Ar">password</var>]
      [<code class="Fl">-alldomains</code> <var class="Ar">enable</var> |
      <var class="Ar">disable</var>] [<code class="Fl">-localhome</code>
      <var class="Ar">enable</var> | <var class="Ar">disable</var>]
      [<code class="Fl">-gid</code> <var class="Ar">attribute</var> |
      <code class="Fl">-nogid</code>] [<code class="Fl">-ggid</code>
      <var class="Ar">attribute</var> | <code class="Fl">-noggid</code>]
      [<code class="Fl">-groups</code>
      &quot;<var class="Ar">group1,group2,...</var>&quot; |
      <code class="Fl">-nogroups</code>] [<code class="Fl">-mobile</code>
      <var class="Ar">enable</var> | <var class="Ar">disable</var>]
      [<code class="Fl">-mobileconfirm</code> <var class="Ar">enable</var> |
      <var class="Ar">disable</var>] [<code class="Fl">-namespace</code>
      <var class="Ar">forest</var> | <var class="Ar">domain</var>]
      [<code class="Fl">-packetencrypt</code> <var class="Ar">allow</var> |
      <var class="Ar">disable</var> | <var class="Ar">require</var> |
      <var class="Ar">ssl</var>] [<code class="Fl">-packetsign</code>
      <var class="Ar">allow</var> | <var class="Ar">disable</var> |
      <var class="Ar">require</var>] [<code class="Fl">-passinterval</code>
      <var class="Ar">value</var>] [<code class="Fl">-preferred</code>
      <var class="Ar">server</var> | <code class="Fl">-nopreferred</code>]
      [<code class="Fl">-protocol</code> <var class="Ar">afp</var> |
      <var class="Ar">smb</var> | <var class="Ar">nfs</var>]
      [<code class="Fl">-restrictDDNS</code>
      <var class="Ar">interface,interface,...</var>]
      [<code class="Fl">-sharepoint</code> <var class="Ar">enable</var> |
      <var class="Ar">disable</var>] [<code class="Fl">-shell</code>
      <var class="Ar">value</var>] [<code class="Fl">-uid</code>
      <var class="Ar">attribute</var> | <code class="Fl">-nouid</code>]
      [<code class="Fl">-useuncpath</code> <var class="Ar">enable</var> |
      <var class="Ar">disable</var>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This tool allows command-line configuration of the Active
    Directory. <code class="Nm">dsconfigad</code> has the same functionality for
    configuring the Active Directory as the Directory Utility application. It
    requires &quot;admin&quot; privileges to the local workstation and to the
    Directory to make changes.</p>
<p class="Pp">A list of flags and their descriptions:</p>
<dl class="Bl-tag">
  <dt id="add"><a class="permalink" href="#add"><code class="Fl">-add</code></a>
    <var class="Ar">fqdn</var></dt>
  <dd>The fully-qualified DNS name of the Domain to be used when adding the
      computer to the Directory (e.g., domain.ads.example.com).</dd>
  <dt id="alldomains"><a class="permalink" href="#alldomains"><code class="Fl">-alldomains</code></a>
    <var class="Ar">enable</var> | <var class="Ar">disable</var></dt>
  <dd>This flag determines whether the plugin allows authentication from any
      domain in the forest. When this is enabled, individual domains will not be
      visible, only &quot;All Domains&quot;. If it is disabled, you will have
      the ability to select the specific domains that can authenticate to this
      computer. Enabled by default.</dd>
  <dt id="computer"><a class="permalink" href="#computer"><code class="Fl">-computer</code></a>
    <var class="Ar">computerid</var></dt>
  <dd>The &quot;computerid&quot; to add the specified Domain</dd>
  <dt id="force"><a class="permalink" href="#force"><code class="Fl">-force</code></a></dt>
  <dd>Force the process (i.e., join the existing account or remove the
    binding)</dd>
  <dt id="ggid"><a class="permalink" href="#ggid"><code class="Fl">-ggid</code></a>
    <var class="Ar">attribute</var></dt>
  <dd>This specifies the attribute to be used for the GID of the group. By
      default, a group GID is generated from the Active Directory GUID of the
      group.</dd>
  <dt id="gid"><a class="permalink" href="#gid"><code class="Fl">-gid</code></a>
    <var class="Ar">attribute</var></dt>
  <dd>This specifies the attribute to be used for the GID of the user. By
      default, a GID is derived from the primaryGroupID of the user (typically
      Domain Users).</dd>
  <dt id="groups"><a class="permalink" href="#groups"><code class="Fl">-groups</code></a>
    <var class="Ar">group1,group2,...</var></dt>
  <dd>Use the listed groups to determine who has local administrative privileges
      on this computer. Groups can be specified by domain to ensure security is
      not compromised, e.g., &quot;domain admins@domain.ads.demo.com&quot;</dd>
  <dt id="help"><a class="permalink" href="#help"><code class="Fl">-help</code></a></dt>
  <dd>Lists the options for calling <code class="Nm">dsconfigad</code></dd>
  <dt id="leave"><a class="permalink" href="#leave"><code class="Fl">-leave</code></a></dt>
  <dd>Leaves the current domain (preserving the computer record in the
      directory).</dd>
  <dt id="localhome"><a class="permalink" href="#localhome"><code class="Fl">-localhome</code></a>
    <var class="Ar">enable</var> | <var class="Ar">disable</var></dt>
  <dd>This flag determines whether the plugin forces all home directories to be
      local to the computer (i.e., /Users/username) (enabled by default).</dd>
  <dt id="localpassword"><a class="permalink" href="#localpassword"><code class="Fl">-localpassword</code></a>
    <var class="Ar">password</var></dt>
  <dd>Password to use in conjunction with the specified local username. If this
      is not specified, you will be prompted for entry. Note that using this
      option has a security risk due to a small window where the password could
      be captured from running process list. Consider using the prompting
      mechanism to ensure passwords are not exposed unexpectedly.</dd>
  <dt id="localuser"><a class="permalink" href="#localuser"><code class="Fl">-localuser</code></a>
    <var class="Ar">username</var></dt>
  <dd>Username of a local account that has administrative privileges to this
      computer</dd>
  <dt id="mobile"><a class="permalink" href="#mobile"><code class="Fl">-mobile</code></a>
    <var class="Ar">enable</var> | <var class="Ar">disable</var></dt>
  <dd>This flag determines whether the plugin will enable mobile account support
      for offline logon (disabled by default). This flag is a hint. If the
      appopriate Workgroup Management settings exist for a user, this will not
      override, as directory settings for the user take precendence.</dd>
  <dt id="mobileconfirm"><a class="permalink" href="#mobileconfirm"><code class="Fl">-mobileconfirm</code></a>
    <var class="Ar">enable</var> | <var class="Ar">disable</var></dt>
  <dd>This flag determines whether the plugin will warn the user when a mobile
      account is going to be created. This flag is a hint as discussed in
      <code class="Fl">-mobile</code></dd>
  <dt id="namespace"><a class="permalink" href="#namespace"><code class="Fl">-namespace</code></a>
    <var class="Ar">forest</var> | <var class="Ar">domain</var></dt>
  <dd>Sets the primary account username naming convention. By default it is set
      to &quot;domain&quot; naming which assumes no conflicting user accounts
      across all domains. If your Active Directory forest has conflicts setting
      this to &quot;forest&quot; will prefix all usernames with
      &quot;DOMAIN\&quot; to ensure unique naming between domains (e.g.,
      &quot;ADDOMAIN\user1&quot;). Warning: this will change the primary name of
      the user for all logins. Changing this setting on an existing system will
      cause any existing homes to be unused on the local machine.</dd>
  <dt id="noggid"><a class="permalink" href="#noggid"><code class="Fl">-noggid</code></a></dt>
  <dd>Turn off any previously mapped attribute and generate the group GID from
      the Active Directory GUID.</dd>
  <dt id="nogid"><a class="permalink" href="#nogid"><code class="Fl">-nogid</code></a></dt>
  <dd>Turn off any previously mapped attribute and use the GID from the
      directory.</dd>
  <dt id="nogroups"><a class="permalink" href="#nogroups"><code class="Fl">-nogroups</code></a></dt>
  <dd>Disable use of the current groups for determining administrative
      privileges on this computer.</dd>
  <dt id="nopreferred"><a class="permalink" href="#nopreferred"><code class="Fl">-nopreferred</code></a></dt>
  <dd>Turn off any previously specified server and default to dynamic server
      discovery.</dd>
  <dt id="nouid"><a class="permalink" href="#nouid"><code class="Fl">-nouid</code></a></dt>
  <dd>Turn off any previously mapped attribute and generate the UID from the
      Active Directory GUID.</dd>
  <dt id="ou"><a class="permalink" href="#ou"><code class="Fl">-ou</code></a>
    <var class="Ar">dn</var></dt>
  <dd>The LDAP DN of the container to use for adding the computer. If this is
      not specified, it will default to the container &quot;CN=Computers&quot;
      within the domain that was specified (e.g.,
      &quot;CN=Computers,DC=domain,DC=ads,DC=demo,DC=com&quot;</dd>
  <dt id="packetencrypt"><a class="permalink" href="#packetencrypt"><code class="Fl">-packetencrypt</code></a>
    <var class="Ar">allow</var> | <var class="Ar">disable</var> |
    <var class="Ar">require</var> | <var class="Ar">ssl</var></dt>
  <dd>By default packet encryption is allowed but not required, but can be
      required or disabled (for example if debugging a problem). This ensures
      that the data to/from the server is encrypted and signed guaranteeing the
      content was not tampered with and cannot be seen by other computers on the
      network.</dd>
  <dt id="packetsign"><a class="permalink" href="#packetsign"><code class="Fl">-packetsign</code></a>
    <var class="Ar">allow</var> | <var class="Ar">disable</var> |
    <var class="Ar">require</var></dt>
  <dd>By default packet signing is allowed but not required, but can be required
      or disabled (for example if debugging a problem). This ensures that the
      data to/from the server is not tampered with by another computer before
      received it is received.</dd>
  <dt id="passinterval"><a class="permalink" href="#passinterval"><code class="Fl">-passinterval</code></a>
    <var class="Ar">value</var></dt>
  <dd>Set how often the computer trust account password should be changed
      (default 14).</dd>
  <dt id="password"><a class="permalink" href="#password"><code class="Fl">-password</code></a>
    <var class="Ar">password</var></dt>
  <dd>Password to use in conjunction with the specified username. If this is not
      specified, you will be prompted for entry. Note that using this option has
      a security risk due to a small window where the password could be captured
      from running process list. Consider using the prompting mechanism to
      ensure passwords are not exposed unexpectedly.</dd>
  <dt id="preferred"><a class="permalink" href="#preferred"><code class="Fl">-preferred</code></a>
    <var class="Ar">server</var></dt>
  <dd>Use the specified server for all Directory lookups and authentications. If
      the server is no longer available, it will fail-over to other
    servers.</dd>
  <dt id="protocol"><a class="permalink" href="#protocol"><code class="Fl">-protocol</code></a>
    <var class="Ar">afp</var> | <var class="Ar">smb</var> |
    <var class="Ar">nfs</var></dt>
  <dd>This flag determines how a home directory is mounted on the desktop. By
      default SMB is used, but AFP can be used for use with Mac OS X Server or
      3rd Party AFP solutions on Windows Servers (previously known as
      mountstyle)</dd>
  <dt id="restrictDDNS"><a class="permalink" href="#restrictDDNS"><code class="Fl">-restrictDDNS</code></a></dt>
  <dd>Restricts Dynamic DNS updates to specific interfaces (e.g., en0, en1, en2,
      etc.). To disable restrictions pass &quot;&quot; as the list.</dd>
  <dt id="remove"><a class="permalink" href="#remove"><code class="Fl">-remove</code></a></dt>
  <dd>Remove this computer from the current Domain</dd>
  <dt id="sharepoint"><a class="permalink" href="#sharepoint"><code class="Fl">-sharepoint</code></a>
    <var class="Ar">enable</var> | <var class="Ar">disable</var></dt>
  <dd>Enable or disable mounting of the network home as a sharepoint.</dd>
  <dt id="shell"><a class="permalink" href="#shell"><code class="Fl">-shell</code></a>
    <var class="Ar">value</var></dt>
  <dd>Use the specified shell (e.g., &quot;/bin/bash&quot;) if a shell attribute
      does not exist in the directory for the user logging into this computer.
      Use a shell value of &quot;none&quot; to disable use of a default shell,
      preserving values that are only specified in the directory.</dd>
  <dt id="show"><a class="permalink" href="#show"><code class="Fl">-show</code></a></dt>
  <dd>Shows the current configuration of the Active Directory</dd>
  <dt id="uid"><a class="permalink" href="#uid"><code class="Fl">-uid</code></a>
    <var class="Ar">attribute</var></dt>
  <dd>This specifies the attribute to be used for the UID of the user. By
      default, a UID is generated from the Active Directory GUID.</dd>
  <dt id="username"><a class="permalink" href="#username"><code class="Fl">-username</code></a>
    <var class="Ar">username</var></dt>
  <dd>Username of a Network account that has administrative privileges to
      add/remove this computer to/from the specified Domain</dd>
  <dt id="useuncpath"><a class="permalink" href="#useuncpath"><code class="Fl">-useuncpath</code></a>
    <var class="Ar">enable</var> | <var class="Ar">disable</var></dt>
  <dd>This flag determines whether the plugin uses the UNC specified in the
      Active Directory when mounting the network home. If this is disabled, the
      plugin will look for Apple schema extensions to mount the home
    directory.</dd>
  <dt id="xml"><a class="permalink" href="#xml"><code class="Fl">-xml</code></a></dt>
  <dd>Output in XML rather than plain text. Valid only with -show.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">Adding a computer to a Directory:</p>
<p class="Pp"><code class="Nm">dsconfigad</code> -add domain.ads.example.com
    -computer ThisComputer -username &quot;administrator&quot; -ou
    &quot;CN=Computers,OU=Engineering,DC=ads,DC=example,DC=com&quot;</p>
<p class="Pp">Giving a set of groups administrative access to the local
    computer:</p>
<p class="Pp"><code class="Nm">dsconfigad</code> -groups &quot;DOMAIN\domain
    admins,FOREST\enterprise admins,DOMAIN\desktop techs&quot;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="../8/opendirectoryd">opendirectoryd(8)</a>,
    <a class="Xr" href="../1/odutil">odutil(1)</a></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 28 2010</td>
    <td class="foot-os">Darwin</td>
  </tr>
</table>
</body>
</html>
