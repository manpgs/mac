<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>CPANPLUS::Shell::Default::Plugins::HOWTO(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CPANPLUS::Shell::Default::Plugins::HOWTO(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">CPANPLUS::Shell::Default::Plugins::HOWTO(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">CPANPLUS::Shell::Default::Plugins::HOWTO -- documentation on how
    to write your own plugins</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    package CPANPLUS::Shell::Default::Plugins::MyPlugin;

    ### return command =&gt; method mapping
    sub plugins { ( myplugin1 =&gt; 'mp1', myplugin2 =&gt; 'mp2' ) }

    ### method called when the command '/myplugin1' is issued
    sub mp1 { .... }

    ### method called when the command '/? myplugin1' is issued
    sub mp1_help { return &quot;Help Text&quot; }
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This pod text explains how to write your own plugins for
    <span class="Li">&quot;CPANPLUS::Shell::Default&quot;</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="HOWTO"><a class="permalink" href="#HOWTO">HOWTO</a></h1>
<section class="Ss">
<h2 class="Ss" id="Registering_Plugin_Modules"><a class="permalink" href="#Registering_Plugin_Modules">Registering
  Plugin Modules</a></h2>
<p class="Pp">Plugins are detected by using
    <span class="Li">&quot;Module::Pluggable&quot;</span>. Every module in the
    <span class="Li">&quot;CPANPLUS::Shell::Default::Plugins::*&quot;</span>
    namespace is considered a plugin, and is attempted to be loaded.</p>
<p class="Pp">Therefor, any plugin must be declared in that namespace, in a
    corresponding <span class="Li">&quot;.pm&quot;</span> file.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Registering_Plugin_Commands"><a class="permalink" href="#Registering_Plugin_Commands">Registering
  Plugin Commands</a></h2>
<p class="Pp">To register any plugin commands, a list of key value pairs must be
    returned by a <span class="Li">&quot;plugins&quot;</span> method in your
    package. The keys are the commands you wish to register, the values are the
    methods in the plugin package you wish to have called when the command is
    issued.</p>
<p class="Pp">For example, a simple 'Hello, World!' plugin:</p>
<p class="Pp"></p>
<pre>
    package CPANPLUS::Shell::Default::Plugins::HW;

    sub plugins { return ( helloworld =&gt; 'hw' ) };

    sub hw { print &quot;Hello, world!\n&quot; }
</pre>
<p class="Pp">When the user in the default shell now issues the
    <span class="Li">&quot;/helloworld&quot;</span> command, this command will
    be dispatched to the plugin, and its <span class="Li">&quot;hw&quot;</span>
    method will be called</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Registering_Plugin_Help"><a class="permalink" href="#Registering_Plugin_Help">Registering
  Plugin Help</a></h2>
<p class="Pp">To provide usage information for your plugin, the user of the
    default shell can type <span class="Li">&quot;/?
    PLUGIN_COMMAND&quot;</span>. In that case, the function
    <span class="Li">&quot;PLUGIN_COMMAND_help&quot;</span> will be called in
    your plugin package.</p>
<p class="Pp">For example, extending the above example, when a user calls
    <span class="Li">&quot;/? helloworld&quot;</span>, the function
    <span class="Li">&quot;hw_help&quot;</span> will be called, which might look
    like this:</p>
<p class="Pp"></p>
<pre>
    sub hw_help { &quot;    /helloworld      # prints &quot;Hello, world!\n&quot; }
</pre>
<p class="Pp">If you dont provide a corresponding _help function to your
    commands, the default shell will handle it gracefully, but the user will be
    stuck without usage information on your commands, so it's considered
    undesirable to omit the help functions.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Arguments_to_Plugin_Commands"><a class="permalink" href="#Arguments_to_Plugin_Commands">Arguments
  to Plugin Commands</a></h2>
<p class="Pp">Any plugin function will receive the following arguments when
    called, which are all positional:</p>
<dl class="Bl-tag">
  <dt id="Classname"><a class="permalink" href="#Classname">Classname -- The
    name of your plugin class</a></dt>
  <dd></dd>
  <dt id="Shell"><a class="permalink" href="#Shell">Shell -- The
    CPANPLUS::Shell::Default object</a></dt>
  <dd></dd>
  <dt id="Backend"><a class="permalink" href="#Backend">Backend -- The
    CPANPLUS::Backend object</a></dt>
  <dd></dd>
  <dt id="Command"><a class="permalink" href="#Command">Command -- The command
    issued by the user</a></dt>
  <dd></dd>
  <dt id="Input"><a class="permalink" href="#Input">Input -- The input string
    from the user</a></dt>
  <dd></dd>
  <dt id="Options"><a class="permalink" href="#Options">Options -- A hashref of
    options provided by the user</a></dt>
  <dd></dd>
</dl>
<p class="Pp">For example, the following command:</p>
<p class="Pp"></p>
<pre>
    /helloworld bob --nofoo --bar=2 joe
</pre>
<p class="Pp">Would yield the following arguments:</p>
<p class="Pp"></p>
<pre>
    sub hw {
        my $class   = shift;    # CPANPLUS::Shell::Default::Plugins::HW
        my $shell   = shift;    # CPANPLUS::Shell::Default object
        my $cb      = shift;    # CPANPLUS::Backend object
        my $cmd     = shift;    # 'helloworld'
        my $input   = shift;    # 'bob joe'
        my $opts    = shift;    # { foo =&gt; 0, bar =&gt; 2 }

        ....
    }
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="BUG_REPORTS"><a class="permalink" href="#BUG_REPORTS">BUG
  REPORTS</a></h1>
<p class="Pp">Please report bugs or other issues to
    &lt;bug-cpanplus@rt.cpan.org&lt;gt&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">This module by Jos Boumans &lt;kane@cpan.org&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">The CPAN++ interface (of which this module is a part of) is
    copyright (c) 2001 - 2007, Jos Boumans &lt;kane@cpan.org&gt;. All rights
    reserved.</p>
<p class="Pp">This library is free software; you may redistribute and/or modify
    it under the same terms as Perl itself.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">CPANPLUS::Shell::Default, CPANPLUS::Shell, cpanp</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-09-30</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
