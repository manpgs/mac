<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Text::Diff(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Text::Diff(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Text::Diff(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Text::Diff - Perform diffs on files and record sets</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    use Text::Diff;

    ## Mix and match filenames, strings, file handles, producer subs,
    ## or arrays of records; returns diff in a string.
    ## WARNING: can return B&lt;large&gt; diffs for large files.
    my $diff = diff &quot;file1.txt&quot;, &quot;file2.txt&quot;, { STYLE =&gt; &quot;Context&quot; };
    my $diff = diff \$string1,   \$string2,   \%options;
    my $diff = diff \*FH1,       \*FH2;
    my $diff = diff \&amp;reader1,   \&amp;reader2;
    my $diff = diff \@records1,  \@records2;

    ## May also mix input types:
    my $diff = diff \@records1,  &quot;file_B.txt&quot;;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><span class="Li">&quot;diff()&quot;</span> provides a basic set of
    services akin to the GNU <span class="Li">&quot;diff&quot;</span> utility.
    It is not anywhere near as feature complete as GNU
    <span class="Li">&quot;diff&quot;</span>, but it is better integrated with
    Perl and available on all platforms. It is often faster than shelling out to
    a system's <span class="Li">&quot;diff&quot;</span> executable for small
    files, and generally slower on larger files.</p>
<p class="Pp">Relies on Algorithm::Diff for, well, the algorithm. This may not
    produce the same exact diff as a system's local
    <span class="Li">&quot;diff&quot;</span> executable, but it will be a valid
    diff and comprehensible by <span class="Li">&quot;patch&quot;</span>. We
    haven't seen any differences between Algorithm::Diff's logic and GNU diff's,
    but we have not examined them to make sure they are indeed identical.</p>
<p class="Pp"><b>Note</b>: If you don't want to import the
    <span class="Li">&quot;diff&quot;</span> function, do one of the
  following:</p>
<p class="Pp"></p>
<pre>
   use Text::Diff ();

   require Text::Diff;
</pre>
<p class="Pp">That's a pretty rare occurence, so
    <span class="Li">&quot;diff()&quot;</span> is exported by default. =head1
    OPTIONS</p>
<p class="Pp"><i>diff()</i> takes two parameters from which to draw input and a
    set of options to control it's output. The options are:</p>
<dl class="Bl-tag">
  <dt id="FILENAME_A,"><a class="permalink" href="#FILENAME_A,">FILENAME_A,
    MTIME_A, FILENAME_B, MTIME_B</a></dt>
  <dd>The name of the file and the modification time &quot;files&quot;
    <p class="Pp">These are filled in automatically for each file when
        <i>diff()</i> is passed a filename, unless a defined value is passed
      in.</p>
    <p class="Pp">If a filename is not passed in and FILENAME_A and FILENAME_B
        are not provided or <span class="Li">&quot;undef&quot;</span>, the
        header will not be printed.</p>
    <p class="Pp">Unused on <span class="Li">&quot;OldStyle&quot;</span>
      diffs.</p>
  </dd>
  <dt id="OFFSET_A,"><a class="permalink" href="#OFFSET_A,">OFFSET_A,
    OFFSET_B</a></dt>
  <dd>The index of the first line / element. These default to 1 for all
      parameter types except ARRAY references, for which the default is 0. This
      is because ARRAY references are presumed to be data structures, while the
      others are line oriented text.</dd>
  <dt id="STYLE"><a class="permalink" href="#STYLE">STYLE</a></dt>
  <dd>&quot;Unified&quot;, &quot;Context&quot;, &quot;OldStyle&quot;, or an
      object or class reference for a class providing
      <span class="Li">&quot;file_header()&quot;</span>,
      <span class="Li">&quot;hunk_header()&quot;</span>,
      <span class="Li">&quot;hunk()&quot;</span>,
      <span class="Li">&quot;hunk_footer()&quot;</span> and
      <span class="Li">&quot;file_footer()&quot;</span> methods. The two
      <i>footer()</i> methods are provided for overloading only; none of the
      formats provide them.
    <p class="Pp">Defaults to &quot;Unified&quot; (unlike standard
        <span class="Li">&quot;diff&quot;</span>, but Unified is what's most
        often used in submitting patches and is the most human readable of the
        three.</p>
    <p class="Pp">If the package indicated by the STYLE has no <i>hunk()</i>
        method, c&lt;<i>diff()</i>&gt; will load it automatically (lazy
        loading). Since all such packages should inherit from Text::Diff::Base,
        this should be marvy.</p>
    <p class="Pp">Styles may be specified as class names
        (<span class="Li">&quot;STYLE =&quot;</span> &quot;Foo&quot;), in which
        case they will be <span class="Li">&quot;new()&quot;</span>ed with no
        parameters, or as objects (<span class="Li">&quot;STYLE =&quot;</span>
        Foo-&gt;new&gt;).</p>
  </dd>
  <dt id="CONTEXT"><a class="permalink" href="#CONTEXT">CONTEXT</a></dt>
  <dd>How many lines before and after each diff to display. Ignored on old-style
      diffs. Defaults to 3.</dd>
  <dt id="OUTPUT"><a class="permalink" href="#OUTPUT">OUTPUT</a></dt>
  <dd>Examples and their equivalent subroutines:
    <p class="Pp"></p>
    <pre>
    OUTPUT   =&gt; \*FOOHANDLE,   # like: sub { print FOOHANDLE shift() }
    OUTPUT   =&gt; \$output,      # like: sub { $output .= shift }
    OUTPUT   =&gt; \@output,      # like: sub { push @output, shift }
    OUTPUT   =&gt; sub { $output .= shift },
    </pre>
    <p class="Pp">If no <span class="Li">&quot;OUTPUT&quot;</span> is supplied,
        returns the diffs in a string. If
        <span class="Li">&quot;OUTPUT&quot;</span> is a
        <span class="Li">&quot;CODE&quot;</span> ref, it will be called once
        with the (optional) file header, and once for each hunk body with the
        text to emit. If <span class="Li">&quot;OUTPUT&quot;</span> is an
        IO::Handle, output will be emitted to that handle.</p>
  </dd>
  <dt id="FILENAME_PREFIX_A,"><a class="permalink" href="#FILENAME_PREFIX_A,">FILENAME_PREFIX_A,
    FILENAME_PREFIX_B</a></dt>
  <dd>The string to print before the filename in the header. Unused on
      <span class="Li">&quot;OldStyle&quot;</span> diffs. Defaults are
      <span class="Li">&quot;---&quot;</span>,
      <span class="Li">&quot;+++&quot;</span> for Unified and
      <span class="Li">&quot;***&quot;</span>,
      <span class="Li">&quot;+++&quot;</span> for Context.</dd>
  <dt id="KEYGEN,"><a class="permalink" href="#KEYGEN,">KEYGEN,
    KEYGEN_ARGS</a></dt>
  <dd>These are passed to &quot;traverse_sequences&quot; in
    Algorithm::Diff.</dd>
</dl>
<p class="Pp"><b>Note</b>: if neither
    <span class="Li">&quot;FILENAME_&quot;</span> option is defined, the header
    will not be printed. If at one is present, the other and both MTIME_ options
    must be present or &quot;Use of undefined variable&quot; warnings will be
    generated (except on <span class="Li">&quot;OldStyle&quot;</span> diffs,
    which ignores these options).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Formatting_Classes"><a class="permalink" href="#Formatting_Classes">Formatting
  Classes</a></h1>
<p class="Pp">These functions implement the output formats. They are grouped in
    to classes so <i>diff()</i> can use class names to call the correct set of
    output routines and so that you may inherit from them easily. There are no
    constructors or instance methods for these classes, though subclasses may
    provide them if need be.</p>
<p class="Pp">Each class has <i>file_header()</i>, <i>hunk_header()</i>,
    <i>hunk()</i>, and <i>footer()</i> methods identical to those documented in
    the Text::Diff::Unified section. <i>header()</i> is called before the
    <i>hunk()</i> is first called, <i>footer()</i> afterwards. The default
    footer function is an empty method provided for overloading:</p>
<p class="Pp"></p>
<pre>
    sub footer { return &quot;End of patch\n&quot; }
</pre>
<p class="Pp">Some output formats are provided by external modules (which are
    loaded automatically), such as Text::Diff::Table. These are are documented
    here to keep the documentation simple.</p>
<section class="Ss">
<h2 class="Ss" id="Text::Diff::Base"><a class="permalink" href="#Text::Diff::Base">Text::Diff::Base</a></h2>
<p class="Pp">Returns &quot;&quot; for all methods (other than
    <span class="Li">&quot;new()&quot;</span>).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Text::Diff::Unified"><a class="permalink" href="#Text::Diff::Unified">Text::Diff::Unified</a></h2>
<pre>
  --- A   Mon Nov 12 23:49:30 2001
  +++ B   Mon Nov 12 23:49:30 2001
  @@ -2,13 +2,13 @@
   2
   3
   4
  -5d
  +5a
   6
   7
   8
   9
  +9a
   10
   11
  -11d
   12
   13
</pre>
<dl class="Bl-tag">
  <dt id="file_header"><a class="permalink" href="#file_header">file_header</a></dt>
  <dd>
    <pre>
  $s = Text::Diff::Unified-&gt;file_header( $options );
    </pre>
    <p class="Pp">Returns a string containing a unified header. The sole
        parameter is the options hash passed in to <i>diff()</i>, containing at
        least:</p>
    <p class="Pp"></p>
    <pre>
  FILENAME_A  =&gt; $fn1,
  MTIME_A     =&gt; $mtime1,
  FILENAME_B  =&gt; $fn2,
  MTIME_B     =&gt; $mtime2
    </pre>
    <p class="Pp">May also contain</p>
    <p class="Pp"></p>
    <pre>
  FILENAME_PREFIX_A    =&gt; &quot;---&quot;,
  FILENAME_PREFIX_B    =&gt; &quot;+++&quot;,
    </pre>
    <p class="Pp">to override the default prefixes (default values shown).</p>
  </dd>
  <dt id="hunk_header"><a class="permalink" href="#hunk_header">hunk_header</a></dt>
  <dd>
    <pre>
  Text::Diff::Unified-&gt;hunk_header( \@ops, $options );
    </pre>
    <p class="Pp">Returns a string containing the output of one hunk of unified
        diff.</p>
  </dd>
  <dt id="Text::Diff::Unified::hunk"><a class="permalink" href="#Text::Diff::Unified::hunk">Text::Diff::Unified::hunk</a></dt>
  <dd>
    <pre>
  Text::Diff::Unified-&gt;hunk( \@seq_a, \@seq_b, \@ops, $options );
    </pre>
    <p class="Pp">Returns a string containing the output of one hunk of unified
        diff.</p>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Text::Diff::Table"><a class="permalink" href="#Text::Diff::Table">Text::Diff::Table</a></h2>
<pre>
  +--+----------------------------------+--+------------------------------+
  |  |../Test-Differences-0.2/MANIFEST  |  |../Test-Differences/MANIFEST  |
  |  |Thu Dec 13 15:38:49 2001          |  |Sat Dec 15 02:09:44 2001      |
  +--+----------------------------------+--+------------------------------+
  |  |                                  * 1|Changes                       *
  | 1|Differences.pm                    | 2|Differences.pm                |
  | 2|MANIFEST                          | 3|MANIFEST                      |
  |  |                                  * 4|MANIFEST.SKIP                 *
  | 3|Makefile.PL                       | 5|Makefile.PL                   |
  |  |                                  * 6|t/00escape.t                  *
  | 4|t/00flatten.t                     | 7|t/00flatten.t                 |
  | 5|t/01text_vs_data.t                | 8|t/01text_vs_data.t            |
  | 6|t/10test.t                        | 9|t/10test.t                    |
  +--+----------------------------------+--+------------------------------+
</pre>
<p class="Pp">This format also goes to some pains to highlight
    &quot;invisible&quot; characters on differing elements by selectively
    escaping whitespace:</p>
<p class="Pp"></p>
<pre>
  +--+--------------------------+--------------------------+
  |  |demo_ws_A.txt             |demo_ws_B.txt             |
  |  |Fri Dec 21 08:36:32 2001  |Fri Dec 21 08:36:50 2001  |
  +--+--------------------------+--------------------------+
  | 1|identical                 |identical                 |
  * 2|        spaced in         |        also spaced in    *
  * 3|embedded space            |embedded        tab       *
  | 4|identical                 |identical                 |
  * 5|        spaced in         |\ttabbed in               *
  * 6|trailing spaces\s\s\n     |trailing tabs\t\t\n       *
  | 7|identical                 |identical                 |
  * 8|lf line\n                 |crlf line\r\n             *
  * 9|embedded ws               |embedded\tws              *
  +--+--------------------------+--------------------------+
</pre>
<p class="Pp">See &quot;Text::Diff::Table&quot; for more details, including how
    the whitespace escaping works.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Text::Diff::Context"><a class="permalink" href="#Text::Diff::Context">Text::Diff::Context</a></h2>
<pre>
    *** A   Mon Nov 12 23:49:30 2001
    --- B   Mon Nov 12 23:49:30 2001
    ***************
    *** 2,14 ****
      2
      3
      4
    ! 5d
      6
      7
      8
      9
      10
      11
    - 11d
      12
      13
    --- 2,14 ----
      2
      3
      4
    ! 5a
      6
      7
      8
      9
    + 9a
      10
      11
      12
      13
</pre>
<p class="Pp">Note: <i>hunk_header()</i> returns only
    &quot;***************\n&quot;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Text::Diff::OldStyle"><a class="permalink" href="#Text::Diff::OldStyle">Text::Diff::OldStyle</a></h2>
<pre>
    5c5
    &lt; 5d
    ---
    &gt; 5a
    9a10
    &gt; 9a
    12d12
    &lt; 11d
</pre>
<p class="Pp">Note: no <i>file_header()</i>.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="LIMITATIONS"><a class="permalink" href="#LIMITATIONS">LIMITATIONS</a></h1>
<p class="Pp">Must suck both input files entirely in to memory and store them
    with a normal amount of Perlish overhead (one array location) per record.
    This is implied by the implementation of Algorithm::Diff, which takes two
    arrays. If Algorithm::Diff ever offers an incremental mode, this can be
    changed (contact the maintainers of Algorithm::Diff and Text::Diff if you
    need this; it shouldn't be too terribly hard to tie arrays in this
  fashion).</p>
<p class="Pp">Does not provide most of the more refined GNU diff options:
    recursive directory tree scanning, ignoring blank lines / whitespace, etc.,
    etc. These can all be added as time permits and need arises, many are rather
    easy; patches quite welcome.</p>
<p class="Pp">Uses closures internally, this may lead to leaks on
    <span class="Li">&quot;perl&quot;</span> versions 5.6.1 and prior if used
    many times over a process' life time.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Adam Kennedy &lt;adamk@cpan.org&gt;</p>
<p class="Pp">Barrie Slaymaker &lt;barries@slaysys.com&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Some parts copyright 2009 Adam Kennedy.</p>
<p class="Pp">Copyright 2001 Barrie Slaymaker. All Rights Reserved.</p>
<p class="Pp">You may use this under the terms of either the Artistic License or
    GNU Public License v 2.0 or greater.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2011-04-16</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
