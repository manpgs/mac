<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>HTTP::Cookies(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">HTTP::Cookies(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">HTTP::Cookies(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">HTTP::Cookies - HTTP cookie jars</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">version 6.08</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>  use HTTP::Cookies;
  $cookie_jar = HTTP::Cookies-&gt;new(
    file =&gt; &quot;$ENV{'HOME'}/lwp_cookies.dat&quot;,
    autosave =&gt; 1,
  );
  use LWP;
  my $browser = LWP::UserAgent-&gt;new;
  $browser-&gt;cookie_jar($cookie_jar);
</pre>
<p class="Pp">Or for an empty and temporary cookie jar:</p>
<p class="Pp"></p>
<pre>  use LWP;
  my $browser = LWP::UserAgent-&gt;new;
  $browser-&gt;cookie_jar( {} );
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This class is for objects that represent a &quot;cookie jar&quot;
    -- that is, a database of all the HTTP cookies that a given LWP::UserAgent
    object knows about.</p>
<p class="Pp">Cookies are a general mechanism which server side connections can
    use to both store and retrieve information on the client side of the
    connection. For more information about cookies refer to Cookie Spec
    &lt;http://curl.haxx.se/rfc/cookie_spec.html&gt; and Cookie Central
    &lt;http://www.cookiecentral.com&gt;. This module also implements the new
    style cookies described in RFC 2965
    &lt;https://tools.ietf.org/html/rfc2965&gt;. The two variants of cookies are
    supposed to be able to coexist happily.</p>
<p class="Pp">Instances of the class <i>HTTP::Cookies</i> are able to store a
    collection of Set-Cookie2: and Set-Cookie: headers and are able to use this
    information to initialize Cookie-headers in <i>HTTP::Request</i> objects.
    The state of a <i>HTTP::Cookies</i> object can be saved in and restored from
    files.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LIMITATIONS"><a class="permalink" href="#LIMITATIONS">LIMITATIONS</a></h1>
<p class="Pp">This module does not support Public Suffix
    &lt;https://publicsuffix.org/&gt; encouraged by a more recent standard, RFC
    6265 &lt;https://tools.ietf.org/html/rfc6265&gt;.</p>
<p class="Pp">This module's shortcomings mean that a malicious Web site can set
    cookies to track your user agent across all sites under a top level domain.
    See <i>t/publicsuffix.t</i> in this module's distribution for details.</p>
<p class="Pp">HTTP::CookieJar::LWP supports Public Suffix, but only provides a
    limited subset of this module's functionality and does not support standards
    older than <i>RFC 6265</i>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<p class="Pp">The following methods are provided:</p>
<dl class="Bl-tag">
  <dt>$cookie_jar = HTTP::Cookies-&gt;new</dt>
  <dd>The constructor takes hash style parameters. The following parameters are
      recognized:
    <p class="Pp"></p>
    <pre>  file:            name of the file to restore cookies from and save cookies to
  autosave:        save during destruction (bool)
  ignore_discard:  save even cookies that are requested to be discarded (bool)
  hide_cookie2:    do not add Cookie2 header to requests
    </pre>
    <p class="Pp">Future parameters might include (not yet implemented):</p>
    <p class="Pp"></p>
    <pre>  max_cookies               300
  max_cookies_per_domain    20
  max_cookie_size           4096
  no_cookies   list of domain names that we never return cookies to
    </pre>
  </dd>
  <dt>$cookie_jar-&gt;get_cookies( $url_or_domain )</dt>
  <dd></dd>
  <dt>$cookie_jar-&gt;get_cookies( $url_or_domain, $cookie_key,... )</dt>
  <dd>Returns a hash of the cookies that applies to the given URL. If a
      domainname is given as argument, then a prefix of &quot;https://&quot; is
      assumed.
    <p class="Pp">If one or more <span class="Li">$cookie_key</span> parameters
        are provided return the given values, or
        <span class="Li">&quot;undef&quot;</span> if the cookie isn't
      available.</p>
  </dd>
  <dt>$cookie_jar-&gt;add_cookie_header( $request )</dt>
  <dd>The <b>add_cookie_header()</b> method will set the appropriate
      Cookie:-header for the <i>HTTP::Request</i> object given as argument. The
      <span class="Li">$request</span> must have a valid url attribute before
      this method is called.</dd>
  <dt>$cookie_jar-&gt;extract_cookies( $response )</dt>
  <dd>The <b>extract_cookies()</b> method will look for Set-Cookie: and
      Set-Cookie2: headers in the <i>HTTP::Response</i> object passed as
      argument. Any of these headers that are found are used to update the state
      of the <span class="Li">$cookie_jar</span>.</dd>
  <dt>$cookie_jar-&gt;set_cookie( $version, $key, $val, $path, $domain, $port,
    $path_spec, $secure, $maxage, $discard, \%rest )</dt>
  <dd>The <b>set_cookie()</b> method updates the state of the
      <span class="Li">$cookie_jar</span>. The <span class="Li">$key</span>,
      <span class="Li">$val</span>, <span class="Li">$domain</span>,
      <span class="Li">$port</span> and <span class="Li">$path</span> arguments
      are strings. The <span class="Li">$path_spec</span>,
      <span class="Li">$secure</span>, <span class="Li">$discard</span>
      arguments are boolean values. The <span class="Li">$maxage</span> value is
      a number indicating number of seconds that this cookie will live. A value
      of <span class="Li">$maxage</span> &lt;= 0 will delete this cookie. The
      <span class="Li">$version</span> argument sets the version of the cookie;
      the default value is 0 ( original Netscape spec ). Setting
      <span class="Li">$version</span> to another value indicates the RFC to
      which the cookie conforms (e.g. version 1 for RFC 2109).
      <span class="Li">%rest</span> defines various other attributes like
      &quot;Comment&quot; and &quot;CommentURL&quot;.</dd>
  <dt>$cookie_jar-&gt;save</dt>
  <dd></dd>
  <dt>$cookie_jar-&gt;save( $file )</dt>
  <dd></dd>
  <dt>$cookie_jar-&gt;save( file =&gt; $file, ignore_discard =&gt;
    $ignore_discard )</dt>
  <dd>This method file saves the state of the
      <span class="Li">$cookie_jar</span> to a file. The state can then be
      restored later using the <b>load()</b> method. If a filename is not
      specified we will use the name specified during construction. If the
      <span class="Li">$ignore_discard</span> value is true (or not specified,
      but attribute <i>ignore_discard</i> was set at cookie jar construction),
      then we will even save cookies that are marked to be discarded.
    <p class="Pp">The default is to save a sequence of &quot;Set-Cookie3&quot;
        lines. &quot;Set-Cookie3&quot; is a proprietary LWP format, not known to
        be compatible with any browser. The <i>HTTP::Cookies::Netscape</i>
        sub-class can be used to save in a format compatible with Netscape.</p>
  </dd>
  <dt>$cookie_jar-&gt;load</dt>
  <dd></dd>
  <dt>$cookie_jar-&gt;load( $file )</dt>
  <dd>This method reads the cookies from the file and adds them to the
      <span class="Li">$cookie_jar</span>. The file must be in the format
      written by the <b>save()</b> method.</dd>
  <dt>$cookie_jar-&gt;revert</dt>
  <dd>This method empties the <span class="Li">$cookie_jar</span> and re-loads
      the <span class="Li">$cookie_jar</span> from the last save file.</dd>
  <dt>$cookie_jar-&gt;clear</dt>
  <dd></dd>
  <dt>$cookie_jar-&gt;clear( $domain )</dt>
  <dd></dd>
  <dt>$cookie_jar-&gt;clear( $domain, $path )</dt>
  <dd></dd>
  <dt>$cookie_jar-&gt;clear( $domain, $path, $key )</dt>
  <dd>Invoking this method without arguments will empty the whole
      <span class="Li">$cookie_jar</span>. If given a single argument only
      cookies belonging to that domain will be removed. If given two arguments,
      cookies belonging to the specified path within that domain are removed. If
      given three arguments, then the cookie with the specified key, path and
      domain is removed.</dd>
  <dt>$cookie_jar-&gt;clear_temporary_cookies</dt>
  <dd>Discard all temporary cookies. Scans for all cookies in the jar with
      either no expire field or a true
      <span class="Li">&quot;discard&quot;</span> flag. To be called when the
      user agent shuts down according to RFC 2965.</dd>
  <dt>$cookie_jar-&gt;scan( \&amp;callback )</dt>
  <dd>The argument is a subroutine that will be invoked for each cookie stored
      in the <span class="Li">$cookie_jar</span>. The subroutine will be invoked
      with the following arguments:
    <p class="Pp"></p>
    <pre>  0  version
  1  key
  2  val
  3  path
  4  domain
  5  port
  6  path_spec
  7  secure
  8  expires
  9  discard
 10  hash
    </pre>
  </dd>
  <dt>$cookie_jar-&gt;as_string</dt>
  <dd></dd>
  <dt>$cookie_jar-&gt;as_string( $skip_discardables )</dt>
  <dd>The <b>as_string()</b> method will return the state of the
      <span class="Li">$cookie_jar</span> represented as a sequence of
      &quot;Set-Cookie3&quot; header lines separated by &quot;\n&quot;. If
      <span class="Li">$skip_discardables</span> is TRUE, it will not return
      lines for cookies with the <i>Discard</i> attribute.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">HTTP::Cookies::Netscape, HTTP::Cookies::Microsoft</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Gisle Aas &lt;gisle@activestate.com&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This software is copyright (c) 2002-2019 by Gisle Aas.</p>
<p class="Pp">This is free software; you can redistribute it and/or modify it
    under the same terms as the Perl 5 programming language system itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-12-02</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
