<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>autodie::Util(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">autodie::Util(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">autodie::Util(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">autodie::Util - Internal Utility subroutines for autodie and
  Fatal</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    # INTERNAL API for autodie and Fatal only!

    use autodie::Util qw(on_end_of_compile_scope);
    on_end_of_compile_scope(sub { print &quot;Hallo world\n&quot;; });
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Interal Utilities for autodie and Fatal! This module is not a part
    of autodie's public API.</p>
<p class="Pp">This module contains utility subroutines for abstracting away the
    underlying magic of autodie and (ab)uses of
    <span class="Li">&quot;%^H&quot;</span> to call subs at the end of a
    (compile-time) scopes.</p>
<p class="Pp">Note that due to how <span class="Li">&quot;%^H&quot;</span>
    works, some of these utilities are only useful during the compilation phase
    of a perl module and relies on the internals of how perl handles references
    in <span class="Li">&quot;%^H&quot;</span>.</p>
<section class="Ss">
<h2 class="Ss" id="Methods"><a class="permalink" href="#Methods">Methods</a></h2>
<p class="Pp"><i>on_end_of_compile_scope</i></p>
<p class="Pp"></p>
<pre>
  on_end_of_compile_scope(sub { print &quot;Hallo world\n&quot;; });
</pre>
<p class="Pp">Will invoke a sub at the end of a (compile-time) scope. The sub is
    called once with no arguments. Can be called multiple times (even in the
    same &quot;compile-time&quot; scope) to install multiple subs. Subs are
    called in a &quot;first-in-last-out&quot;-order (FILO or
    &quot;stack&quot;-order).</p>
<p class="Pp"><i>fill_protos</i></p>
<p class="Pp"></p>
<pre>
  fill_protos('*$$;$@')
</pre>
<p class="Pp">Given a Perl subroutine prototype, return a list of invocation
    specifications. Each specification is a listref, where the first member is
    the (minimum) number of arguments for this invocation specification. The
    remaining arguments are a string representation of how to pass the arguments
    correctly to a sub with the given prototype, when called with the given
    number of arguments.</p>
<p class="Pp">The specifications are returned in increasing order of arguments
    starting at 0 (e.g. ';$') or 1 (e.g. '$@'). Note that if the prototype is
    &quot;slurpy&quot; (e.g. ends with a &quot;@&quot;), the number of arguments
    for the last specification is a &quot;minimum&quot; number rather than an
    exact number. This can be detected by the last member of the last
    specification matching m/[@#]_/.</p>
<p class="Pp"><i>make_core_trampoline</i></p>
<p class="Pp"></p>
<pre>
  make_core_trampoline('CORE::open', 'main', prototype('CORE::open'))
</pre>
<p class="Pp">Creates a trampoline for calling a core sub. Essentially, a tiny
    sub that figures out how we should be calling our core sub, puts in the
    arguments in the right way, and bounces our control over to it.</p>
<p class="Pp">If we could reliably use `goto &amp;` on core builtins, we
    wouldn't need this subroutine.</p>
<p class="Pp"><i>install_subs</i></p>
<p class="Pp"></p>
<pre>
  install_subs('My::Module', { 'read' =&gt; sub { die(&quot;Hallo\n&quot;), ... }})
</pre>
<p class="Pp">Given a package name and a hashref mapping names to a subroutine
    reference (or <span class="Li">&quot;undef&quot;</span>), this subroutine
    will install said subroutines on their given name in that module. If a name
    mapes to <span class="Li">&quot;undef&quot;</span>, any subroutine with that
    name in the target module will be remove (possibly &quot;unshadowing&quot; a
    CORE sub of same name).</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Copyright 2013-2014, Niels Thykier &lt;niels@thykier.net&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LICENSE"><a class="permalink" href="#LICENSE">LICENSE</a></h1>
<p class="Pp">This module is free software. You may distribute it under the same
    terms as Perl itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-10-21</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
