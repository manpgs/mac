<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>File::Copy(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">File::Copy(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">File::Copy(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">File::Copy - Copy files or filehandles</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>        use File::Copy;
        copy(&quot;sourcefile&quot;,&quot;destinationfile&quot;) or die &quot;Copy failed: $!&quot;;
        copy(&quot;Copy.pm&quot;,\*STDOUT);
        move(&quot;/dev1/sourcefile&quot;,&quot;/dev2/destinationfile&quot;);
        use File::Copy &quot;cp&quot;;
        $n = FileHandle-&gt;new(&quot;/a/file&quot;,&quot;r&quot;);
        cp($n,&quot;x&quot;);
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The File::Copy module provides two basic functions,
    <span class="Li">&quot;copy&quot;</span> and
    <span class="Li">&quot;move&quot;</span>, which are useful for getting the
    contents of a file from one place to another.</p>
<dl class="Bl-tag">
  <dt id="copy"><a class="permalink" href="#copy">copy</a></dt>
  <dd>The <span class="Li">&quot;copy&quot;</span> function takes two
      parameters: a file to copy from and a file to copy to. Either argument may
      be a string, a FileHandle reference or a FileHandle glob. Obviously, if
      the first argument is a filehandle of some sort, it will be read from, and
      if it is a file <i>name</i> it will be opened for reading. Likewise, the
      second argument will be written to. If the second argument does not exist
      but the parent directory does exist, then it will be created. Trying to
      copy a file into a non-existent directory is an error. Trying to copy a
      file on top of itself is also an error.
      <span class="Li">&quot;copy&quot;</span> will not overwrite read-only
      files.
    <p class="Pp">If the destination (second argument) already exists and is a
        directory, and the source (first argument) is not a filehandle, then the
        source file will be copied into the directory specified by the
        destination, using the same base name as the source file. It's a failure
        to have a filehandle as the source when the destination is a
      directory.</p>
    <p class="Pp"><b>Note that passing in</b> <b>files as handles instead of
        names may lead to loss of information</b> <b>on some operating systems;
        it is recommended that you use file</b> <b>names whenever possible.</b>
        Files are opened in binary mode where applicable. To get a consistent
        behaviour when copying from a filehandle to a file, use
        <span class="Li">&quot;binmode&quot;</span> on the filehandle.</p>
    <p class="Pp">An optional third parameter can be used to specify the buffer
        size used for copying. This is the number of bytes from the first file,
        that will be held in memory at any given time, before being written to
        the second file. The default buffer size depends upon the file, but will
        generally be the whole file (up to 2MB), or 1k for filehandles that do
        not reference files (eg. sockets).</p>
    <p class="Pp">You may use the syntax <span class="Li">&quot;use File::Copy
        &quot;cp&quot;&quot;</span> to get at the
        <span class="Li">&quot;cp&quot;</span> alias for this function. The
        syntax is <i>exactly</i> the same. The behavior is nearly the same as
        well: as of version 2.15, <span class="Li">&quot;cp&quot;</span> will
        preserve the source file's permission bits like the shell utility
        <span class="Li">cp(1)</span> would do, while
        <span class="Li">&quot;copy&quot;</span> uses the default permissions
        for the target file (which may depend on the process'
        <span class="Li">&quot;umask&quot;</span>, file ownership, inherited
        ACLs, etc.). If an error occurs in setting permissions,
        <span class="Li">&quot;cp&quot;</span> will return 0, regardless of
        whether the file was successfully copied.</p>
  </dd>
  <dt id="move"><a class="permalink" href="#move">move</a></dt>
  <dd>The <span class="Li">&quot;move&quot;</span> function also takes two
      parameters: the current name and the intended name of the file to be
      moved. If the destination already exists and is a directory, and the
      source is not a directory, then the source file will be renamed into the
      directory specified by the destination.
    <p class="Pp">If possible, <b>move()</b> will simply rename the file.
        Otherwise, it copies the file to the new location and deletes the
        original. If an error occurs during this copy-and-delete process, you
        may be left with a (possibly partial) copy of the file under the
        destination name.</p>
    <p class="Pp">You may use the <span class="Li">&quot;mv&quot;</span> alias
        for this function in the same way that you may use the
        <span class="Li">&quot;cp&quot;</span> alias for
        <span class="Li">&quot;copy&quot;</span>.</p>
  </dd>
  <dt id="syscopy"><a class="permalink" href="#syscopy">syscopy</a></dt>
  <dd>File::Copy also provides the <span class="Li">&quot;syscopy&quot;</span>
      routine, which copies the file specified in the first parameter to the
      file specified in the second parameter, preserving OS-specific attributes
      and file structure. For Unix systems, this is equivalent to the simple
      <span class="Li">&quot;copy&quot;</span> routine, which doesn't preserve
      OS-specific attributes. For VMS systems, this calls the
      <span class="Li">&quot;rmscopy&quot;</span> routine (see below). For OS/2
      systems, this calls the <span class="Li">&quot;syscopy&quot;</span> XSUB
      directly. For Win32 systems, this calls
      <span class="Li">&quot;Win32::CopyFile&quot;</span>.
    <p class="Pp"><b>Special behaviour if
        </b><span class="Li"><b>&quot;syscopy&quot;</b></span><b> is defined
        (OS/2, VMS and Win32)</b>:</p>
    <p class="Pp">If both arguments to <span class="Li">&quot;copy&quot;</span>
        are not file handles, then <span class="Li">&quot;copy&quot;</span> will
        perform a &quot;system copy&quot; of the input file to a new output
        file, in order to preserve file attributes, indexed file structure,
        <i>etc.</i> The buffer size parameter is ignored. If either argument to
        <span class="Li">&quot;copy&quot;</span> is a handle to an opened file,
        then data is copied using Perl operators, and no effort is made to
        preserve file attributes or record structure.</p>
    <p class="Pp">The system copy routine may also be called directly under VMS
        and OS/2 as <span class="Li">&quot;File::Copy::syscopy&quot;</span> (or
        under VMS as <span class="Li">&quot;File::Copy::rmscopy&quot;</span>,
        which is the routine that does the actual work for syscopy).</p>
  </dd>
  <dt id="rmscopy($from,$to_,$date_flag_)"><a class="permalink" href="#rmscopy($from,$to_,$date_flag_)">rmscopy($from,$to[,$date_flag])</a></dt>
  <dd>The first and second arguments may be strings, typeglobs, typeglob
      references, or objects inheriting from IO::Handle; they are used in all
      cases to obtain the <i>filespec</i> of the input and output files,
      respectively. The name and type of the input file are used as defaults for
      the output file, if necessary.
    <p class="Pp">A new version of the output file is always created, which
        inherits the structure and RMS attributes of the input file, except for
        owner and protections (and possibly timestamps; see below). All data
        from the input file is copied to the output file; if either of the first
        two parameters to <span class="Li">&quot;rmscopy&quot;</span> is a file
        handle, its position is unchanged. (Note that this means a file handle
        pointing to the output file will be associated with an old version of
        that file after <span class="Li">&quot;rmscopy&quot;</span> returns, not
        the newly created version.)</p>
    <p class="Pp">The third parameter is an integer flag, which tells
        <span class="Li">&quot;rmscopy&quot;</span> how to handle timestamps. If
        it is &lt; 0, none of the input file's timestamps are propagated to the
        output file. If it is &gt; 0, then it is interpreted as a bitmask: if
        bit 0 (the LSB) is set, then timestamps other than the revision date are
        propagated; if bit 1 is set, the revision date is propagated. If the
        third parameter to <span class="Li">&quot;rmscopy&quot;</span> is 0,
        then it behaves much like the DCL COPY command: if the name or type of
        the output file was explicitly specified, then no timestamps are
        propagated, but if they were taken implicitly from the input filespec,
        then all timestamps other than the revision date are propagated. If this
        parameter is not supplied, it defaults to 0.</p>
    <p class="Pp"><span class="Li">&quot;rmscopy&quot;</span> is VMS specific
        and cannot be exported; it must be referenced by its full name,
      e.g.:</p>
    <p class="Pp"></p>
    <pre>  File::Copy::rmscopy($from, $to) or die $!;
    </pre>
    <p class="Pp">Like <span class="Li">&quot;copy&quot;</span>,
        <span class="Li">&quot;rmscopy&quot;</span> returns 1 on success. If an
        error occurs, it sets <span class="Li">$!</span>, deletes the output
        file, and returns 0.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="RETURN"><a class="permalink" href="#RETURN">RETURN</a></h1>
<p class="Pp">All functions return 1 on success, 0 on failure. $! will be set if
    an error was encountered.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES"><a class="permalink" href="#NOTES">NOTES</a></h1>
<p class="Pp">Before calling <b>copy()</b> or <b>move()</b> on a filehandle, the
    caller should close or <b>flush()</b> the file to avoid writes being lost.
    Note that this is the case even for <b>move()</b>, because it may actually
    copy the file, depending on the OS-specific implementation, and the
    underlying filesystem(s).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">File::Copy was written by Aaron Sherman <i>&lt;ajs@ajs.com&gt;</i>
    in 1995, and updated by Charles Bailey
    <i>&lt;bailey@newman.upenn.edu&gt;</i> in 1996.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-02-20</td>
    <td class="foot-os">perl v5.34.1</td>
  </tr>
</table>
</body>
</html>
