<!DOCTYPE html>
<html lang="en">
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>DBIx::Class::InflateColumn::File(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DBIx::Class::InflateColumn::File(3)</td>
    <td class="head-vol"><a href=".">User Contributed Perl Documentation</a></td>
    <td class="head-rtitle">DBIx::Class::InflateColumn::File(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">DBIx::Class::InflateColumn::File - DEPRECATED (superseded by
    DBIx::Class::InflateColumn::FS)</p>
<section class="Ss">
<h2 class="Ss" id="Deprecation_Notice"><a class="permalink" href="#Deprecation_Notice">Deprecation
  Notice</a></h2>
<pre> This component has a number of architectural deficiencies that can quickly
 drive your filesystem and database out of sync and is not recommended for
 further use. It will be retained for backwards compatibility, but no new
 functionality patches will be accepted. Please consider using the much more
 mature and actively supported DBIx::Class::InflateColumn::FS. You can set
 the environment variable DBIC_IC_FILE_NOWARN to a true value to disable
 this warning.
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">In your DBIx::Class table class:</p>
<p class="Pp"></p>
<pre>    use base 'DBIx::Class::Core';
    __PACKAGE__-&gt;load_components(qw/InflateColumn::File/);
    # define your columns
    __PACKAGE__-&gt;add_columns(
        &quot;id&quot;,
        {
            data_type         =&gt; &quot;integer&quot;,
            is_auto_increment =&gt; 1,
            is_nullable       =&gt; 0,
            size              =&gt; 4,
        },
        &quot;filename&quot;,
        {
            data_type           =&gt; &quot;varchar&quot;,
            is_file_column      =&gt; 1,
            file_column_path    =&gt;'/tmp/uploaded_files',
            # or for a Catalyst application
            # file_column_path  =&gt; MyApp-&gt;path_to('root','static','files'),
            default_value       =&gt; undef,
            is_nullable         =&gt; 1,
            size                =&gt; 255,
        },
    );
</pre>
<p class="Pp">In your Catalyst::Controller class:</p>
<p class="Pp">FileColumn requires a hash that contains IO::File as handle and
    the file's name as name.</p>
<p class="Pp"></p>
<pre>    my $entry = $c-&gt;model('MyAppDB::Articles')-&gt;create({
        subject =&gt; 'blah',
        filename =&gt; {
            handle =&gt; $c-&gt;req-&gt;upload('myupload')-&gt;fh,
            filename =&gt; $c-&gt;req-&gt;upload('myupload')-&gt;basename
        },
        body =&gt; '....'
    });
    $c-&gt;stash-&gt;{entry}=$entry;
</pre>
<p class="Pp">And Place the following in your TT template</p>
<p class="Pp"></p>
<pre>    Article Subject: [% entry.subject %]
    Uploaded File:
    &lt;a href=&quot;/static/files/[% entry.id %]/[% entry.filename.filename %]&quot;&gt;File&lt;/a&gt;
    Body: [% entry.body %]
</pre>
<p class="Pp">The file will be stored on the filesystem for later retrieval.
    Calling delete on your resultset will delete the file from the filesystem.
    Retrevial of the record automatically inflates the column back to the set
    hash with the IO::File handle and filename.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">InflateColumn::File</p>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="_file_column_callback_($file,$ret,$target)"><a class="permalink" href="#_file_column_callback_($file,$ret,$target)">_file_column_callback
  ($file,$ret,$target)</a></h2>
<p class="Pp">Method made to be overridden for callback purposes.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="FURTHER_QUESTIONS?"><a class="permalink" href="#FURTHER_QUESTIONS?">FURTHER
  QUESTIONS?</a></h1>
<p class="Pp">Check the list of additional DBIC resources.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This module is free software copyright by the DBIx::Class (DBIC)
    authors. You can redistribute it and/or modify it under the same terms as
    the DBIx::Class library.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2018-01-29</td>
    <td class="foot-os"><a href="..">perl v5.34.0</a></td>
  </tr>
</table>
</body>
</html>
