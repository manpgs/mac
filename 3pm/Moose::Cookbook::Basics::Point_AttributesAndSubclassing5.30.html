<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Moose::Cookbook::Basics::Point_AttributesAndSubclassing(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Moose::Cookbook::Basics::Point_AttributesAndSubclassing(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Moose::Cookbook::Basics::Point_AttributesAndSubclassing(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Moose::Cookbook::Basics::Point_AttributesAndSubclassing - Point
    and Point3D classes, showing basic attributes and subclassing.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">version 2.2012</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>  package Point;
  use Moose;
  has 'x' =&gt; (isa =&gt; 'Int', is =&gt; 'rw', required =&gt; 1);
  has 'y' =&gt; (isa =&gt; 'Int', is =&gt; 'rw', required =&gt; 1);
  sub clear {
      my $self = shift;
      $self-&gt;x(0);
      $self-&gt;y(0);
  }
  package Point3D;
  use Moose;
  extends 'Point';
  has 'z' =&gt; (isa =&gt; 'Int', is =&gt; 'rw', required =&gt; 1);
  after 'clear' =&gt; sub {
      my $self = shift;
      $self-&gt;z(0);
  };
  package main;
  # hash or hashrefs are ok for the constructor
  my $point1 = Point-&gt;new(x =&gt; 5, y =&gt; 7);
  my $point2 = Point-&gt;new({x =&gt; 5, y =&gt; 7});
  my $point3d = Point3D-&gt;new(x =&gt; 5, y =&gt; 42, z =&gt; -5);
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This is the classic Point example. It is taken directly from the
    Perl 6 Apocalypse 12 document, and is similar to the example found in the
    classic K&amp;R C book as well.</p>
<p class="Pp">As with all Perl 5 classes, a Moose class is defined in a package.
    Moose handles turning on <span class="Li">&quot;strict&quot;</span> and
    <span class="Li">&quot;warnings&quot;</span> for us, so all we need to do is
    say <span class="Li">&quot;use Moose&quot;</span>, and no kittens will
  die.</p>
<p class="Pp">When Moose is loaded, it exports a set of sugar functions into our
    package. This means that we import some functions which serve as Moose
    &quot;keywords&quot;. These aren't real language keywords, they're just Perl
    functions exported into our package.</p>
<p class="Pp">Moose automatically makes our package a subclass of Moose::Object.
    The Moose::Object class provides us with a constructor that respects our
    attributes, as well other features. See Moose::Object for details.</p>
<p class="Pp">Now, onto the keywords. The first one we see here is
    <span class="Li">&quot;has&quot;</span>, which defines an instance attribute
    in our class:</p>
<p class="Pp"></p>
<pre>  has 'x' =&gt; (isa =&gt; 'Int', is =&gt; 'rw', required =&gt; 1);
</pre>
<p class="Pp">This will create an attribute named
    <span class="Li">&quot;x&quot;</span>. The
    <span class="Li">&quot;isa&quot;</span> parameter says that we expect the
    value stored in this attribute to pass the type constraint for
    <span class="Li">&quot;Int&quot;</span> (1). The accessor generated for this
    attribute will be read-write.</p>
<p class="Pp">The <span class="Li">&quot;required =&gt; 1&quot;</span> parameter
    means that this attribute must be provided when a new object is created. A
    point object without coordinates doesn't make much sense, so we don't allow
    it.</p>
<p class="Pp">We have defined our attributes; next we define our methods. In
    Moose, as with regular Perl 5 OO, a method is just a subroutine defined
    within the package:</p>
<p class="Pp"></p>
<pre>  sub clear {
      my $self = shift;
      $self-&gt;x(0);
      $self-&gt;y(0);
  }
</pre>
<p class="Pp">That concludes the <b>Point</b> class.</p>
<p class="Pp">Next we have a subclass of <b>Point</b>, <b>Point3D</b>. To
    declare our superclass, we use the Moose keyword
    <span class="Li">&quot;extends&quot;</span>:</p>
<p class="Pp"></p>
<pre>  extends 'Point';
</pre>
<p class="Pp">The <span class="Li">&quot;extends&quot;</span> keyword works much
    like <span class="Li">&quot;use base&quot;</span>/<span class="Li">&quot;use
    parent&quot;</span>. First, it will attempt to load your class if needed.
    However, unlike <span class="Li">&quot;base&quot;</span>, the
    <span class="Li">&quot;extends&quot;</span> keyword will <i>overwrite</i>
    any previous values in your package's <span class="Li">@ISA</span>, where
    <span class="Li">&quot;use base&quot;</span> will
    <span class="Li">&quot;push&quot;</span> values onto the package's
    <span class="Li">@ISA</span>.</p>
<p class="Pp">It is my opinion that the behavior of
    <span class="Li">&quot;extends&quot;</span> is more intuitive. (2).</p>
<p class="Pp">Next we create a new attribute for <b>Point3D</b> called
    <span class="Li">&quot;z&quot;</span>.</p>
<p class="Pp"></p>
<pre>  has 'z' =&gt; (isa =&gt; 'Int', is =&gt; 'rw', required =&gt; 1);
</pre>
<p class="Pp">This attribute is just like <b>Point</b>'s
    <span class="Li">&quot;x&quot;</span> and
    <span class="Li">&quot;y&quot;</span> attributes.</p>
<p class="Pp">The <span class="Li">&quot;after&quot;</span> keyword demonstrates
    a Moose feature called &quot;method modifiers&quot; (or &quot;advice&quot;
    for the AOP inclined):</p>
<p class="Pp"></p>
<pre>  after 'clear' =&gt; sub {
      my $self = shift;
      $self-&gt;z(0);
  };
</pre>
<p class="Pp">When <span class="Li">&quot;clear&quot;</span> is called on a
    <b>Point3D</b> object, our modifier method gets called as well.
    Unsurprisingly, the modifier is called <i>after</i> the real method.</p>
<p class="Pp">In this case, the real <span class="Li">&quot;clear&quot;</span>
    method is inherited from <b>Point</b>. Our modifier method receives the same
    arguments as those passed to the modified method (just
    <span class="Li">$self</span> here).</p>
<p class="Pp">Of course, using the <span class="Li">&quot;after&quot;</span>
    modifier is not the only way to accomplish this. This <b>is</b> Perl, right?
    You can get the same results with this code:</p>
<p class="Pp"></p>
<pre>  sub clear {
      my $self = shift;
      $self-&gt;SUPER::clear();
      $self-&gt;z(0);
  }
</pre>
<p class="Pp">You could also use another Moose method modifier,
    <span class="Li">&quot;override&quot;</span>:</p>
<p class="Pp"></p>
<pre>  override 'clear' =&gt; sub {
      my $self = shift;
      super();
      $self-&gt;z(0);
  };
</pre>
<p class="Pp">The <span class="Li">&quot;override&quot;</span> modifier allows
    you to use the <span class="Li">&quot;super&quot;</span> keyword to dispatch
    to the superclass's method in a very Ruby-ish style.</p>
<p class="Pp">The choice of whether to use a method modifier, and which one to
    use, is often a question of style as much as functionality.</p>
<p class="Pp">Since <b>Point</b> inherits from Moose::Object, it will also
    inherit the default Moose::Object constructor:</p>
<p class="Pp"></p>
<pre>  my $point1 = Point-&gt;new(x =&gt; 5, y =&gt; 7);
  my $point2 = Point-&gt;new({x =&gt; 5, y =&gt; 7});
  my $point3d = Point3D-&gt;new(x =&gt; 5, y =&gt; 42, z =&gt; -5);
</pre>
<p class="Pp">The <span class="Li">&quot;new&quot;</span> constructor accepts a
    named argument pair for each attribute defined by the class, which you can
    provide as a hash or hash reference. In this particular example, the
    attributes are required, and calling <span class="Li">&quot;new&quot;</span>
    without them will throw an error.</p>
<p class="Pp"></p>
<pre>  my $point = Point-&gt;new( x =&gt; 5 ); # no y, kaboom!
</pre>
<p class="Pp">From here on, we can use <span class="Li">$point</span> and
    <span class="Li">$point3d</span> just as you would any other Perl 5 object.
    For a more detailed example of what can be done, you can refer to the
    <i>t/recipes/basics_point_attributesandsubclassing.t</i> test file.</p>
<section class="Ss">
<h2 class="Ss" id="Moose_Objects_are_Just_Hashrefs"><a class="permalink" href="#Moose_Objects_are_Just_Hashrefs">Moose
  Objects are Just Hashrefs</a></h2>
<p class="Pp">While this all may appear rather magical, it's important to
    realize that Moose objects are just hash references under the hood (3). For
    example, you could pass <span class="Li">$self</span> to
    <span class="Li">&quot;Data::Dumper&quot;</span> and you'd get exactly what
    you'd expect.</p>
<p class="Pp">You could even poke around inside the object's data structure, but
    that is strongly discouraged.</p>
<p class="Pp">The fact that Moose objects are hashrefs means it is easy to use
    Moose to extend non-Moose classes, as long as they too are hash references.
    If you want to extend a non-hashref class, check out
    <span class="Li">&quot;MooseX::InsideOut&quot;</span>.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="CONCLUSION"><a class="permalink" href="#CONCLUSION">CONCLUSION</a></h1>
<p class="Pp">This recipe demonstrates some basic Moose concepts, attributes,
    subclassing, and a simple method modifier.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FOOTNOTES"><a class="permalink" href="#FOOTNOTES">FOOTNOTES</a></h1>
<dl class="Bl-tag">
  <dt>(1)</dt>
  <dd>Moose provides a number of builtin type constraints, of which
      <span class="Li">&quot;Int&quot;</span> is one. For more information on
      the type constraint system, see Moose::Util::TypeConstraints.</dd>
  <dt>(2)</dt>
  <dd>The <span class="Li">&quot;extends&quot;</span> keyword supports multiple
      inheritance. Simply pass all of your superclasses to
      <span class="Li">&quot;extends&quot;</span> as a list:
    <p class="Pp"></p>
    <pre>  extends 'Foo', 'Bar', 'Baz';
    </pre>
  </dd>
  <dt>(3)</dt>
  <dd>Moose supports using instance structures other than blessed hash
      references (such as glob references - see MooseX::GlobRef).</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<dl class="Bl-tag">
  <dt id="Method"><a class="permalink" href="#Method">Method Modifiers</a></dt>
  <dd>The concept of method modifiers is directly ripped off from CLOS. A great
      explanation of them can be found by following this link.
    <p class="Pp">&lt;http://www.gigamonkeys.com/book/object-reorientation-generic-functions.html&gt;</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<ul class="Bl-bullet">
  <li>Stevan Little &lt;stevan.little@iinteractive.com&gt;</li>
  <li>Dave Rolsky &lt;autarch@urth.org&gt;</li>
  <li>Jesse Luehrs &lt;doy@tozt.net&gt;</li>
  <li>Shawn M Moore &lt;code@sartak.org&gt;</li>
  <li>&#x05D9;&#x05D5;&#x05D1;&#x05DC; &#x05E7;&#x05D5;&#x05D2;'&#x05DE;&#x05DF;
      (Yuval Kogman) &lt;nothingmuch@woobling.org&gt;</li>
  <li>Karen Etheridge &lt;ether@cpan.org&gt;</li>
  <li>Florian Ragwitz &lt;rafl@debian.org&gt;</li>
  <li>Hans Dieter Pearcey &lt;hdp@weftsoar.net&gt;</li>
  <li>Chris Prather &lt;chris@prather.org&gt;</li>
  <li>Matt S Trout &lt;mst@shadowcat.co.uk&gt;</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This software is copyright (c) 2006 by Infinity Interactive,
  Inc.</p>
<p class="Pp">This is free software; you can redistribute it and/or modify it
    under the same terms as the Perl 5 programming language system itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-11-22</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
