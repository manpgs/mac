<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>HTTP::Tiny(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">HTTP::Tiny(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">HTTP::Tiny(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">HTTP::Tiny - A small, simple, correct HTTP/1.1 client</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">version 0.025</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    use HTTP::Tiny;

    my $response = HTTP::Tiny-&gt;new-&gt;get('http://example.com/');

    die &quot;Failed!\n&quot; unless $response-&gt;{success};

    print &quot;$response-&gt;{status} $response-&gt;{reason}\n&quot;;

    while (my ($k, $v) = each %{$response-&gt;{headers}}) {
        for (ref $v eq 'ARRAY' ? @$v : $v) {
            print &quot;$k: $_\n&quot;;
        }
    }

    print $response-&gt;{content} if length $response-&gt;{content};
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This is a very simple HTTP/1.1 client, designed for doing simple
    GET requests without the overhead of a large framework like
  LWP::UserAgent.</p>
<p class="Pp">It is more correct and more complete than HTTP::Lite. It supports
    proxies (currently only non-authenticating ones) and redirection. It also
    correctly resumes after EINTR.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="new"><a class="permalink" href="#new">new</a></h2>
<pre>
    $http = HTTP::Tiny-&gt;new( %attributes );
</pre>
<p class="Pp">This constructor returns a new HTTP::Tiny object. Valid attributes
    include:</p>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;agent&quot;</span>
    <p class="Pp">A user-agent string (defaults to 'HTTP-Tiny/$VERSION'). If
        <span class="Li">&quot;agent&quot;</span> ends in a space character, the
        default user-agent string is appended.</p>
  </li>
  <li><span class="Li">&quot;default_headers&quot;</span>
    <p class="Pp">A hashref of default headers to apply to requests</p>
  </li>
  <li><span class="Li">&quot;local_address&quot;</span>
    <p class="Pp">The local IP address to bind to</p>
  </li>
  <li><span class="Li">&quot;max_redirect&quot;</span>
    <p class="Pp">Maximum number of redirects allowed (defaults to 5)</p>
  </li>
  <li><span class="Li">&quot;max_size&quot;</span>
    <p class="Pp">Maximum response size (only when not using a data callback).
        If defined, responses larger than this will return an exception.</p>
  </li>
  <li><span class="Li">&quot;proxy&quot;</span>
    <p class="Pp">URL of a proxy server to use (default is
        <span class="Li">$ENV{http_proxy}</span> if set)</p>
  </li>
  <li><span class="Li">&quot;timeout&quot;</span>
    <p class="Pp">Request timeout in seconds (default is 60)</p>
  </li>
  <li><span class="Li">&quot;verify_SSL&quot;</span>
    <p class="Pp">A boolean that indicates whether to validate the SSL
        certificate of an <span class="Li">&quot;https&quot;</span> connection
        (default is false)</p>
  </li>
  <li><span class="Li">&quot;SSL_options&quot;</span>
    <p class="Pp">A hashref of <span class="Li">&quot;SSL_*&quot;</span> options
        to pass through to IO::Socket::SSL</p>
  </li>
</ul>
<p class="Pp">Exceptions from <span class="Li">&quot;max_size&quot;</span>,
    <span class="Li">&quot;timeout&quot;</span> or other errors will result in a
    pseudo-HTTP status code of 599 and a reason of &quot;Internal
    Exception&quot;. The content field in the response will contain the text of
    the exception.</p>
<p class="Pp">See &quot;SSL SUPPORT&quot; for more on the
    <span class="Li">&quot;verify_SSL&quot;</span> and
    <span class="Li">&quot;SSL_options&quot;</span> attributes.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="get_head_put_post_delete"><a class="permalink" href="#get_head_put_post_delete">get|head|put|post|delete</a></h2>
<pre>
    $response = $http-&gt;get($url);
    $response = $http-&gt;get($url, \%options);
    $response = $http-&gt;head($url);
</pre>
<p class="Pp">These methods are shorthand for calling
    <span class="Li">&quot;request()&quot;</span> for the given method. The URL
    must have unsafe characters escaped and international domain names encoded.
    See <span class="Li">&quot;request()&quot;</span> for valid options and a
    description of the response.</p>
<p class="Pp">The <span class="Li">&quot;success&quot;</span> field of the
    response will be true if the status code is 2XX.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="post_form"><a class="permalink" href="#post_form">post_form</a></h2>
<pre>
    $response = $http-&gt;post_form($url, $form_data);
    $response = $http-&gt;post_form($url, $form_data, \%options);
</pre>
<p class="Pp">This method executes a <span class="Li">&quot;POST&quot;</span>
    request and sends the key/value pairs from a form data hash or array
    reference to the given URL with a
    <span class="Li">&quot;content-type&quot;</span> of
    <span class="Li">&quot;application/x-www-form-urlencoded&quot;</span>. See
    documentation for the <span class="Li">&quot;www_form_urlencode&quot;</span>
    method for details on the encoding.</p>
<p class="Pp">The URL must have unsafe characters escaped and international
    domain names encoded. See <span class="Li">&quot;request()&quot;</span> for
    valid options and a description of the response. Any
    <span class="Li">&quot;content-type&quot;</span> header or content in the
    options hashref will be ignored.</p>
<p class="Pp">The <span class="Li">&quot;success&quot;</span> field of the
    response will be true if the status code is 2XX.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="mirror"><a class="permalink" href="#mirror">mirror</a></h2>
<pre>
    $response = $http-&gt;mirror($url, $file, \%options)
    if ( $response-&gt;{success} ) {
        print &quot;$file is up to date\n&quot;;
    }
</pre>
<p class="Pp">Executes a <span class="Li">&quot;GET&quot;</span> request for the
    URL and saves the response body to the file name provided. The URL must have
    unsafe characters escaped and international domain names encoded. If the
    file already exists, the request will includes an
    <span class="Li">&quot;If-Modified-Since&quot;</span> header with the
    modification timestamp of the file. You may specify a different
    <span class="Li">&quot;If-Modified-Since&quot;</span> header yourself in the
    <span class="Li">&quot;$options-&gt;{headers}&quot;</span> hash.</p>
<p class="Pp">The <span class="Li">&quot;success&quot;</span> field of the
    response will be true if the status code is 2XX or if the status code is 304
    (unmodified).</p>
<p class="Pp">If the file was modified and the server response includes a
    properly formatted <span class="Li">&quot;Last-Modified&quot;</span> header,
    the file modification time will be updated accordingly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="request"><a class="permalink" href="#request">request</a></h2>
<pre>
    $response = $http-&gt;request($method, $url);
    $response = $http-&gt;request($method, $url, \%options);
</pre>
<p class="Pp">Executes an HTTP request of the given method type ('GET', 'HEAD',
    'POST', 'PUT', etc.) on the given URL. The URL must have unsafe characters
    escaped and international domain names encoded. A hashref of options may be
    appended to modify the request.</p>
<p class="Pp">Valid options are:</p>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;headers&quot;</span>
    <p class="Pp">A hashref containing headers to include with the request. If
        the value for a header is an array reference, the header will be output
        multiple times with each value in the array. These headers over-write
        any default headers.</p>
  </li>
  <li><span class="Li">&quot;content&quot;</span>
    <p class="Pp">A scalar to include as the body of the request OR a code
        reference that will be called iteratively to produce the body of the
        request</p>
  </li>
  <li><span class="Li">&quot;trailer_callback&quot;</span>
    <p class="Pp">A code reference that will be called if it exists to provide a
        hashref of trailing headers (only used with chunked
      transfer-encoding)</p>
  </li>
  <li><span class="Li">&quot;data_callback&quot;</span>
    <p class="Pp">A code reference that will be called for each chunks of the
        response body received.</p>
  </li>
</ul>
<p class="Pp">If the <span class="Li">&quot;content&quot;</span> option is a
    code reference, it will be called iteratively to provide the content body of
    the request. It should return the empty string or undef when the iterator is
    exhausted.</p>
<p class="Pp">If the <span class="Li">&quot;data_callback&quot;</span> option is
    provided, it will be called iteratively until the entire response body is
    received. The first argument will be a string containing a chunk of the
    response body, the second argument will be the in-progress response hash
    reference, as described below. (This allows customizing the action of the
    callback based on the <span class="Li">&quot;status&quot;</span> or
    <span class="Li">&quot;headers&quot;</span> received prior to the content
    body.)</p>
<p class="Pp">The <span class="Li">&quot;request&quot;</span> method returns a
    hashref containing the response. The hashref will have the following
  keys:</p>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;success&quot;</span>
    <p class="Pp">Boolean indicating whether the operation returned a 2XX status
        code</p>
  </li>
  <li><span class="Li">&quot;url&quot;</span>
    <p class="Pp">URL that provided the response. This is the URL of the request
        unless there were redirections, in which case it is the last URL queried
        in a redirection chain</p>
  </li>
  <li><span class="Li">&quot;status&quot;</span>
    <p class="Pp">The HTTP status code of the response</p>
  </li>
  <li><span class="Li">&quot;reason&quot;</span>
    <p class="Pp">The response phrase returned by the server</p>
  </li>
  <li><span class="Li">&quot;content&quot;</span>
    <p class="Pp">The body of the response. If the response does not have any
        content or if a data callback is provided to consume the response body,
        this will be the empty string</p>
  </li>
  <li><span class="Li">&quot;headers&quot;</span>
    <p class="Pp">A hashref of header fields. All header field names will be
        normalized to be lower case. If a header is repeated, the value will be
        an arrayref; it will otherwise be a scalar string containing the
      value</p>
  </li>
</ul>
<p class="Pp">On an exception during the execution of the request, the
    <span class="Li">&quot;status&quot;</span> field will contain 599, and the
    <span class="Li">&quot;content&quot;</span> field will contain the text of
    the exception.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="www_form_urlencode"><a class="permalink" href="#www_form_urlencode">www_form_urlencode</a></h2>
<pre>
    $params = $http-&gt;www_form_urlencode( $data );
    $response = $http-&gt;get(&quot;http://example.com/query?$params&quot;);
</pre>
<p class="Pp">This method converts the key/value pairs from a data hash or array
    reference into a <span class="Li">&quot;x-www-form-urlencoded&quot;</span>
    string. The keys and values from the data reference will be UTF-8 encoded
    and escaped per RFC 3986. If a value is an array reference, the key will be
    repeated with each of the values of the array reference. The key/value pairs
    in the resulting string will be sorted by key and value.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SSL_SUPPORT"><a class="permalink" href="#SSL_SUPPORT">SSL
  SUPPORT</a></h1>
<p class="Pp">Direct <span class="Li">&quot;https&quot;</span> connections are
    supported only if IO::Socket::SSL 1.56 or greater and Net::SSLeay 1.49 or
    greater are installed. An exception will be thrown if a new enough versions
    of these modules not installed or if the SSL encryption fails. There is no
    support for <span class="Li">&quot;https&quot;</span> connections via proxy
    (i.e. RFC 2817).</p>
<p class="Pp">SSL provides two distinct capabilities:</p>
<ul class="Bl-bullet">
  <li>Encrypted communication channel</li>
  <li>Verification of server identity</li>
</ul>
<p class="Pp"><b>By default, HTTP::Tiny does not verify server identity</b>.</p>
<p class="Pp">Server identity verification is controversial and potentially
    tricky because it depends on a (usually paid) third-party Certificate
    Authority (CA) trust model to validate a certificate as legitimate. This
    discriminates against servers with self-signed certificates or certificates
    signed by free, community-driven CA's such as CAcert.org
    &lt;http://cacert.org&gt;.</p>
<p class="Pp">By default, HTTP::Tiny does not make any assumptions about your
    trust model, threat level or risk tolerance. It just aims to give you an
    encrypted channel when you need one.</p>
<p class="Pp">Setting the <span class="Li">&quot;verify_SSL&quot;</span>
    attribute to a true value will make HTTP::Tiny verify that an SSL connection
    has a valid SSL certificate corresponding to the host name of the connection
    and that the SSL certificate has been verified by a CA. Assuming you trust
    the CA, this will protect against a man-in-the-middle attack
    &lt;http://en.wikipedia.org/wiki/Man-in-the-middle_attack&gt;. If you are
    concerned about security, you should enable this option.</p>
<p class="Pp">Certificate verification requires a file containing trusted CA
    certificates. If the Mozilla::CA module is installed, HTTP::Tiny will use
    the CA file included with it as a source of trusted CA's. (This means you
    trust Mozilla, the author of Mozilla::CA, the CPAN mirror where you got
    Mozilla::CA, the toolchain used to install it, and your operating system
    security, right?)</p>
<p class="Pp">If that module is not available, then HTTP::Tiny will search
    several system-specific default locations for a CA certificate file:</p>
<ul class="Bl-bullet">
  <li>/etc/ssl/certs/ca-certificates.crt</li>
  <li>/etc/pki/tls/certs/ca-bundle.crt</li>
  <li>/etc/ssl/ca-bundle.pem</li>
</ul>
<p class="Pp">An exception will be raised if
    <span class="Li">&quot;verify_SSL&quot;</span> is true and no CA certificate
    file is available.</p>
<p class="Pp">If you desire complete control over SSL connections, the
    <span class="Li">&quot;SSL_options&quot;</span> attribute lets you provide a
    hash reference that will be passed through to
    <span class="Li">&quot;IO::Socket::SSL::start_SSL()&quot;</span>, overriding
    any options set by HTTP::Tiny. For example, to provide your own trusted CA
    file:</p>
<p class="Pp"></p>
<pre>
    SSL_options =&gt; {
        SSL_ca_file =&gt; $file_path,
    }
</pre>
<p class="Pp">The <span class="Li">&quot;SSL_options&quot;</span> attribute
    could also be used for such things as providing a client certificate for
    authentication to a server or controlling the choice of cipher used for the
    SSL connection. See IO::Socket::SSL documentation for details.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LIMITATIONS"><a class="permalink" href="#LIMITATIONS">LIMITATIONS</a></h1>
<p class="Pp">HTTP::Tiny is <i>conditionally compliant</i> with the HTTP/1.1
    specification &lt;http://www.w3.org/Protocols/rfc2616/rfc2616.html&gt;. It
    attempts to meet all &quot;MUST&quot; requirements of the specification, but
    does not implement all &quot;SHOULD&quot; requirements.</p>
<p class="Pp">Some particular limitations of note include:</p>
<ul class="Bl-bullet">
  <li>HTTP::Tiny focuses on correct transport. Users are responsible for
      ensuring that user-defined headers and content are compliant with the
      HTTP/1.1 specification.</li>
  <li>Users must ensure that URLs are properly escaped for unsafe characters and
      that international domain names are properly encoded to ASCII. See
      URI::Escape, URI::_punycode and Net::IDN::Encode.</li>
  <li>Redirection is very strict against the specification. Redirection is only
      automatic for response codes 301, 302 and 307 if the request method is
      'GET' or 'HEAD'. Response code 303 is always converted into a 'GET'
      redirection, as mandated by the specification. There is no automatic
      support for status 305 (&quot;Use proxy&quot;) redirections.</li>
  <li>Persistent connections are not supported. The
      <span class="Li">&quot;Connection&quot;</span> header will always be set
      to <span class="Li">&quot;close&quot;</span>.</li>
  <li>Cookies are not directly supported. Users that set a
      <span class="Li">&quot;Cookie&quot;</span> header should also set
      <span class="Li">&quot;max_redirect&quot;</span> to zero to ensure cookies
      are not inappropriately re-transmitted.</li>
  <li>Only the <span class="Li">&quot;http_proxy&quot;</span> environment
      variable is supported in the format
      <span class="Li">&quot;http://HOST:PORT/&quot;</span>. If a
      <span class="Li">&quot;proxy&quot;</span> argument is passed to
      <span class="Li">&quot;new&quot;</span> (including undef), then the
      <span class="Li">&quot;http_proxy&quot;</span> environment variable is
      ignored.</li>
  <li>There is no provision for delaying a request body using an
      <span class="Li">&quot;Expect&quot;</span> header. Unexpected
      <span class="Li">&quot;1XX&quot;</span> responses are silently ignored as
      per the specification.</li>
  <li>Only 'chunked' <span class="Li">&quot;Transfer-Encoding&quot;</span> is
      supported.</li>
  <li>There is no support for a Request-URI of '*' for the 'OPTIONS'
    request.</li>
  <li>There is no support for IPv6 of any kind.</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<ul class="Bl-bullet">
  <li>LWP::UserAgent</li>
  <li>IO::Socket::SSL</li>
  <li>Mozilla::CA</li>
  <li>Net::SSLeay</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORT"><a class="permalink" href="#SUPPORT">SUPPORT</a></h1>
<section class="Ss">
<h2 class="Ss" id="Bugs_/_Feature_Requests"><a class="permalink" href="#Bugs_/_Feature_Requests">Bugs
  / Feature Requests</a></h2>
<p class="Pp">Please report any bugs or feature requests through the issue
    tracker at
    &lt;https://rt.cpan.org/Public/Dist/Display.html?Name=HTTP-Tiny&gt;. You
    will be notified automatically of any progress on your issue.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Source_Code"><a class="permalink" href="#Source_Code">Source
  Code</a></h2>
<p class="Pp">This is open source software. The code repository is available for
    public review and contribution under the terms of the license.</p>
<p class="Pp">&lt;https://github.com/dagolden/http-tiny&gt;</p>
<p class="Pp"></p>
<pre>
  git clone git://github.com/dagolden/http-tiny.git
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<ul class="Bl-bullet">
  <li>Christian Hansen &lt;chansen@cpan.org&gt;</li>
  <li>David Golden &lt;dagolden@cpan.org&gt;</li>
  <li>Mike Doherty &lt;doherty@cpan.org&gt;</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This software is copyright (c) 2012 by Christian Hansen.</p>
<p class="Pp">This is free software; you can redistribute it and/or modify it
    under the same terms as the Perl 5 programming language system itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-09-30</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
