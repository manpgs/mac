<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>TAP::Parser::Aggregator(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">TAP::Parser::Aggregator(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">TAP::Parser::Aggregator(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">TAP::Parser::Aggregator - Aggregate TAP::Parser results</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">Version 3.43</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    use TAP::Parser::Aggregator;
    my $aggregate = TAP::Parser::Aggregator-&gt;new;
    $aggregate-&gt;add( 't/00-load.t', $load_parser );
    $aggregate-&gt;add( 't/10-lex.t',  $lex_parser  );
    my $summary = &lt;&lt;'END_SUMMARY';
    Passed:  %s
    Failed:  %s
    Unexpectedly succeeded: %s
    END_SUMMARY
    printf $summary,
           scalar $aggregate-&gt;passed,
           scalar $aggregate-&gt;failed,
           scalar $aggregate-&gt;todo_passed;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><span class="Li">&quot;TAP::Parser::Aggregator&quot;</span>
    collects parser objects and allows reporting/querying their aggregate
    results.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="Class_Methods"><a class="permalink" href="#Class_Methods">Class
  Methods</a></h2>
<p class="Pp"><i></i><span class="Li"><i>&quot;new&quot;</i></span><i></i></p>
<p class="Pp"></p>
<pre> my $aggregate = TAP::Parser::Aggregator-&gt;new;
</pre>
<p class="Pp">Returns a new
    <span class="Li">&quot;TAP::Parser::Aggregator&quot;</span> object.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Instance_Methods"><a class="permalink" href="#Instance_Methods">Instance
  Methods</a></h2>
<p class="Pp"><i></i><span class="Li"><i>&quot;add&quot;</i></span><i></i></p>
<p class="Pp"></p>
<pre>  $aggregate-&gt;add( $description =&gt; $parser );
</pre>
<p class="Pp">The <span class="Li">$description</span> is usually a test file
    name (but only by convention.) It is used as a unique identifier (see e.g.
    &quot;parsers&quot;.) Reusing a description is a fatal error.</p>
<p class="Pp">The <span class="Li">$parser</span> is a TAP::Parser object.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;parsers&quot;</i></span><i></i></p>
<p class="Pp"></p>
<pre>  my $count   = $aggregate-&gt;parsers;
  my @parsers = $aggregate-&gt;parsers;
  my @parsers = $aggregate-&gt;parsers(@descriptions);
</pre>
<p class="Pp">In scalar context without arguments, this method returns the
    number of parsers aggregated. In list context without arguments, returns the
    parsers in the order they were added.</p>
<p class="Pp">If <span class="Li">@descriptions</span> is given, these
    correspond to the keys used in each call to the <b>add()</b> method. Returns
    an array of the requested parsers (in the requested order) in list context
    or an array reference in scalar context.</p>
<p class="Pp">Requesting an unknown identifier is a fatal error.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;descriptions&quot;</i></span><i></i></p>
<p class="Pp">Get an array of descriptions in the order in which they were added
    to the aggregator.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;start&quot;</i></span><i></i></p>
<p class="Pp">Call <span class="Li">&quot;start&quot;</span> immediately before
    adding any results to the aggregator. Among other times it records the start
    time for the test run.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;stop&quot;</i></span><i></i></p>
<p class="Pp">Call <span class="Li">&quot;stop&quot;</span> immediately after
    adding all test results to the aggregator.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;elapsed&quot;</i></span><i></i></p>
<p class="Pp">Elapsed returns a Benchmark object that represents the running
    time of the aggregated tests. In order for
    <span class="Li">&quot;elapsed&quot;</span> to be valid you must call
    <span class="Li">&quot;start&quot;</span> before running the tests and
    <span class="Li">&quot;stop&quot;</span> immediately afterwards.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;elapsed_timestr&quot;</i></span><i></i></p>
<p class="Pp">Returns a formatted string representing the runtime returned by
    <span class="Li">&quot;elapsed()&quot;</span>. This lets the caller not
    worry about Benchmark.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;all_passed&quot;</i></span><i></i></p>
<p class="Pp">Return true if all the tests passed and no parse errors were
    detected.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;get_status&quot;</i></span><i></i></p>
<p class="Pp">Get a single word describing the status of the aggregated tests.
    Depending on the outcome of the tests returns 'PASS', 'FAIL' or 'NOTESTS'.
    This token is understood by CPAN::Reporter.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Summary_methods"><a class="permalink" href="#Summary_methods">Summary
  methods</a></h2>
<p class="Pp">Each of the following methods will return the total number of
    corresponding tests if called in scalar context. If called in list context,
    returns the descriptions of the parsers which contain the corresponding
    tests (see <span class="Li">&quot;add&quot;</span> for an explanation of
    description.</p>
<ul class="Bl-bullet">
  <li>failed</li>
  <li>parse_errors</li>
  <li>passed</li>
  <li>planned</li>
  <li>skipped</li>
  <li>todo</li>
  <li>todo_passed</li>
  <li>wait</li>
  <li>exit</li>
</ul>
<p class="Pp">For example, to find out how many tests unexpectedly succeeded
    (TODO tests which passed when they shouldn't):</p>
<p class="Pp"></p>
<pre> my $count        = $aggregate-&gt;todo_passed;
 my @descriptions = $aggregate-&gt;todo_passed;
</pre>
<p class="Pp">Note that <span class="Li">&quot;wait&quot;</span> and
    <span class="Li">&quot;exit&quot;</span> are the totals of the wait and exit
    statuses of each of the tests. These values are totalled only to provide a
    true value if any of them are non-zero.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;total&quot;</i></span><i></i></p>
<p class="Pp"></p>
<pre>  my $tests_run = $aggregate-&gt;total;
</pre>
<p class="Pp">Returns the total number of tests run.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;has_problems&quot;</i></span><i></i></p>
<p class="Pp"></p>
<pre>  if ( $parser-&gt;has_problems ) {
      ...
  }
</pre>
<p class="Pp">Identical to <span class="Li">&quot;has_errors&quot;</span>, but
    also returns true if any TODO tests unexpectedly succeeded. This is more
    akin to &quot;warnings&quot;.</p>
<p class="Pp"><i></i><span class="Li"><i>&quot;has_errors&quot;</i></span><i></i></p>
<p class="Pp"></p>
<pre>  if ( $parser-&gt;has_errors ) {
      ...
  }
</pre>
<p class="Pp">Returns true if <i>any</i> of the parsers failed. This
  includes:</p>
<ul class="Bl-bullet">
  <li>Failed tests</li>
  <li>Parse errors</li>
  <li>Bad exit or wait status</li>
</ul>
<p class="Pp"><i></i><span class="Li"><i>&quot;todo_failed&quot;</i></span><i></i></p>
<p class="Pp"></p>
<pre>  # deprecated in favor of 'todo_passed'.  This method was horribly misnamed.
</pre>
<p class="Pp">This was a badly misnamed method. It indicates which TODO tests
    unexpectedly succeeded. Will now issue a warning and call
    <span class="Li">&quot;todo_passed&quot;</span>.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="See_Also"><a class="permalink" href="#See_Also">See
  Also</a></h1>
<p class="Pp">TAP::Parser</p>
<p class="Pp">TAP::Harness</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-02-19</td>
    <td class="foot-os">perl v5.34.1</td>
  </tr>
</table>
</body>
</html>
