<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>diagnostics(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">diagnostics(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">diagnostics(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">diagnostics, splain - produce verbose warning diagnostics</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">Using the <span class="Li">&quot;diagnostics&quot;</span>
  pragma:</p>
<p class="Pp"></p>
<pre>    use diagnostics;
    use diagnostics -verbose;
    enable  diagnostics;
    disable diagnostics;
</pre>
<p class="Pp">Using the <span class="Li">&quot;splain&quot;</span> standalone
    filter program:</p>
<p class="Pp"></p>
<pre>    perl program 2&gt;diag.out
    splain [-v] [-p] diag.out
</pre>
<p class="Pp">Using diagnostics to get stack traces from a misbehaving
  script:</p>
<p class="Pp"></p>
<pre>    perl -Mdiagnostics=-traceonly my_script.pl
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<section class="Ss">
<h2 class="Ss" id="The__diagnostics__Pragma"><a class="permalink" href="#The__diagnostics__Pragma">The
  &quot;diagnostics&quot; Pragma</a></h2>
<p class="Pp">This module extends the terse diagnostics normally emitted by both
    the perl compiler and the perl interpreter (from running perl with a -w
    switch or <span class="Li">&quot;use warnings&quot;</span>), augmenting them
    with the more explicative and endearing descriptions found in perldiag. Like
    the other pragmata, it affects the compilation phase of your program rather
    than merely the execution phase.</p>
<p class="Pp">To use in your program as a pragma, merely invoke</p>
<p class="Pp"></p>
<pre>    use diagnostics;
</pre>
<p class="Pp">at the start (or near the start) of your program. (Note that this
    <i>does</i> enable perl's <b>-w</b> flag.) Your whole compilation will then
    be subject(ed :-) to the enhanced diagnostics. These still go out
    <b>STDERR</b>.</p>
<p class="Pp">Due to the interaction between runtime and compiletime issues, and
    because it's probably not a very good idea anyway, you may not use
    <span class="Li">&quot;no diagnostics&quot;</span> to turn them off at
    compiletime. However, you may control their behaviour at runtime using the
    <b>disable()</b> and <b>enable()</b> methods to turn them off and on
    respectively.</p>
<p class="Pp">The <b>-verbose</b> flag first prints out the perldiag
    introduction before any other diagnostics. The
    <span class="Li">$diagnostics::PRETTY</span> variable can generate nicer
    escape sequences for pagers.</p>
<p class="Pp">Warnings dispatched from perl itself (or more accurately, those
    that match descriptions found in perldiag) are only displayed once (no
    duplicate descriptions). User code generated warnings a la <b>warn()</b> are
    unaffected, allowing duplicate user messages to be displayed.</p>
<p class="Pp">This module also adds a stack trace to the error message when perl
    dies. This is useful for pinpointing what caused the death. The
    <b>-traceonly</b> (or just <b>-t</b>) flag turns off the explanations of
    warning messages leaving just the stack traces. So if your script is dieing,
    run it again with</p>
<p class="Pp"></p>
<pre>  perl -Mdiagnostics=-traceonly my_bad_script
</pre>
<p class="Pp">to see the call stack at the time of death. By supplying the
    <b>-warntrace</b> (or just <b>-w</b>) flag, any warnings emitted will also
    come with a stack trace.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="The_"><a class="permalink" href="#The_">The <i>splain</i>
  Program</a></h2>
<p class="Pp">While apparently a whole nuther program, <i>splain</i> is actually
    nothing more than a link to the (executable) <i>diagnostics.pm</i> module,
    as well as a link to the <i>diagnostics.pod</i> documentation. The <b>-v</b>
    flag is like the <span class="Li">&quot;use diagnostics
    -verbose&quot;</span> directive. The <b>-p</b> flag is like the
    <span class="Li">$diagnostics::PRETTY</span> variable. Since you're
    post-processing with <i>splain</i>, there's no sense in being able to
    <b>enable()</b> or <b>disable()</b> processing.</p>
<p class="Pp">Output from <i>splain</i> is directed to <b>STDOUT</b>, unlike the
    pragma.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">The following file is certain to trigger a few errors at both
    runtime and compiletime:</p>
<p class="Pp"></p>
<pre>    use diagnostics;
    print NOWHERE &quot;nothing\n&quot;;
    print STDERR &quot;\n\tThis message should be unadorned.\n&quot;;
    warn &quot;\tThis is a user warning&quot;;
    print &quot;\nDIAGNOSTIC TESTER: Please enter a &lt;CR&gt; here: &quot;;
    my $a, $b = scalar &lt;STDIN&gt;;
    print &quot;\n&quot;;
    print $x/$y;
</pre>
<p class="Pp">If you prefer to run your program first and look at its problem
    afterwards, do this:</p>
<p class="Pp"></p>
<pre>    perl -w test.pl 2&gt;test.out
    ./splain &lt; test.out
</pre>
<p class="Pp">Note that this is not in general possible in shells of more
    dubious heritage, as the theoretical</p>
<p class="Pp"></p>
<pre>    (perl -w test.pl &gt;/dev/tty) &gt;&amp; test.out
    ./splain &lt; test.out
</pre>
<p class="Pp">Because you just moved the existing <b>stdout</b> to somewhere
    else.</p>
<p class="Pp">If you don't want to modify your source code, but still have
    on-the-fly warnings, do this:</p>
<p class="Pp"></p>
<pre>    exec 3&gt;&amp;1; perl -w test.pl 2&gt;&amp;1 1&gt;&amp;3 3&gt;&amp;- | splain 1&gt;&amp;2 3&gt;&amp;-
</pre>
<p class="Pp">Nifty, eh?</p>
<p class="Pp">If you want to control warnings on the fly, do something like
    this. Make sure you do the <span class="Li">&quot;use&quot;</span> first, or
    you won't be able to get at the <b>enable()</b> or <b>disable()</b>
  methods.</p>
<p class="Pp"></p>
<pre>    use diagnostics; # checks entire compilation phase 
        print &quot;\ntime for 1st bogus diags: SQUAWKINGS\n&quot;;
        print BOGUS1 'nada';
        print &quot;done with 1st bogus\n&quot;;
    disable diagnostics; # only turns off runtime warnings
        print &quot;\ntime for 2nd bogus: (squelched)\n&quot;;
        print BOGUS2 'nada';
        print &quot;done with 2nd bogus\n&quot;;
    enable diagnostics; # turns back on runtime warnings
        print &quot;\ntime for 3rd bogus: SQUAWKINGS\n&quot;;
        print BOGUS3 'nada';
        print &quot;done with 3rd bogus\n&quot;;
    disable diagnostics;
        print &quot;\ntime for 4th bogus: (squelched)\n&quot;;
        print BOGUS4 'nada';
        print &quot;done with 4th bogus\n&quot;;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="INTERNALS"><a class="permalink" href="#INTERNALS">INTERNALS</a></h1>
<p class="Pp">Diagnostic messages derive from the <i>perldiag.pod</i> file when
    available at runtime. Otherwise, they may be embedded in the file itself
    when the splain package is built. See the <i>Makefile</i> for details.</p>
<p class="Pp">If an extant <span class="Li">$SIG</span>{__WARN__} handler is
    discovered, it will continue to be honored, but only after the
    <b>diagnostics::splainthis()</b> function (the module's
    <span class="Li">$SIG</span>{__WARN__} interceptor) has had its way with
    your warnings.</p>
<p class="Pp">There is a <span class="Li">$diagnostics::DEBUG</span> variable
    you may set if you're desperately curious what sorts of things are being
    intercepted.</p>
<p class="Pp"></p>
<pre>    BEGIN { $diagnostics::DEBUG = 1 }
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Not being able to say &quot;no diagnostics&quot; is annoying, but
    may not be insurmountable.</p>
<p class="Pp">The <span class="Li">&quot;-pretty&quot;</span> directive is
    called too late to affect matters. You have to do this instead, and
    <i>before</i> you load the module.</p>
<p class="Pp"></p>
<pre>    BEGIN { $diagnostics::PRETTY = 1 }
</pre>
<p class="Pp">I could start up faster by delaying compilation until it should be
    needed, but this gets a &quot;panic: top_level&quot; when using the pragma
    form in Perl 5.001e.</p>
<p class="Pp">While it's true that this documentation is somewhat subserious, if
    you use a program named <i>splain</i>, you should expect a bit of
  whimsy.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Tom Christiansen &lt;<i>tchrist@mox.perl.com</i>&gt;, 25 June
    1995.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-06-14</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
