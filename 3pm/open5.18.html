<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>open(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">open(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">open(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">open - perl pragma to set default PerlIO layers for input and
    output</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    use open IN  =&gt; &quot;:crlf&quot;, OUT =&gt; &quot;:bytes&quot;;
    use open OUT =&gt; ':utf8';
    use open IO  =&gt; &quot;:encoding(iso-8859-7)&quot;;

    use open IO  =&gt; ':locale';

    use open ':encoding(utf8)';
    use open ':locale';
    use open ':encoding(iso-8859-7)';

    use open ':std';
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Full-fledged support for I/O layers is now implemented provided
    Perl is configured to use PerlIO as its IO system (which is now the
    default).</p>
<p class="Pp">The <span class="Li">&quot;open&quot;</span> pragma serves as one
    of the interfaces to declare default &quot;layers&quot; (also known as
    &quot;disciplines&quot;) for all I/O. Any two-argument <i>open()</i>,
    <i>readpipe()</i> (aka qx//) and similar operators found within the lexical
    scope of this pragma will use the declared defaults. Even three-argument
    opens may be affected by this pragma when they don't specify IO layers in
    MODE.</p>
<p class="Pp">With the <span class="Li">&quot;IN&quot;</span> subpragma you can
    declare the default layers of input streams, and with the
    <span class="Li">&quot;OUT&quot;</span> subpragma you can declare the
    default layers of output streams. With the
    <span class="Li">&quot;IO&quot;</span> subpragma you can control both input
    and output streams simultaneously.</p>
<p class="Pp">If you have a legacy encoding, you can use the
    <span class="Li">&quot;:encoding(...)&quot;</span> tag.</p>
<p class="Pp">If you want to set your encoding layers based on your locale
    environment variables, you can use the
    <span class="Li">&quot;:locale&quot;</span> tag. For example:</p>
<p class="Pp"></p>
<pre>
    $ENV{LANG} = 'ru_RU.KOI8-R';
    # the :locale will probe the locale environment variables like LANG
    use open OUT =&gt; ':locale';
    open(O, &quot;&gt;koi8&quot;);
    print O chr(0x430); # Unicode CYRILLIC SMALL LETTER A = KOI8-R 0xc1
    close O;
    open(I, &quot;&lt;koi8&quot;);
    printf &quot;%#x\n&quot;, ord(&lt;I&gt;), &quot;\n&quot;; # this should print 0xc1
    close I;
</pre>
<p class="Pp">These are equivalent</p>
<p class="Pp"></p>
<pre>
    use open ':encoding(utf8)';
    use open IO =&gt; ':encoding(utf8)';
</pre>
<p class="Pp">as are these</p>
<p class="Pp"></p>
<pre>
    use open ':locale';
    use open IO =&gt; ':locale';
</pre>
<p class="Pp">and these</p>
<p class="Pp"></p>
<pre>
    use open ':encoding(iso-8859-7)';
    use open IO =&gt; ':encoding(iso-8859-7)';
</pre>
<p class="Pp">The matching of encoding names is loose: case does not matter, and
    many encodings have several aliases. See Encode::Supported for details and
    the list of supported locales.</p>
<p class="Pp">When <i>open()</i> is given an explicit list of layers (with the
    three-arg syntax), they override the list declared using this pragma.
    <i>open()</i> can also be given a single colon (:) for a layer name, to
    override this pragma and use the default
    (<span class="Li">&quot;:raw&quot;</span> on Unix,
    <span class="Li">&quot;:crlf&quot;</span> on Windows).</p>
<p class="Pp">The <span class="Li">&quot;:std&quot;</span> subpragma on its own
    has no effect, but if combined with the
    <span class="Li">&quot;:utf8&quot;</span> or
    <span class="Li">&quot;:encoding&quot;</span> subpragmas, it converts the
    standard filehandles (STDIN, STDOUT, STDERR) to comply with encoding
    selected for input/output handles. For example, if both input and out are
    chosen to be <span class="Li">&quot;:encoding(utf8)&quot;</span>, a
    <span class="Li">&quot;:std&quot;</span> will mean that STDIN, STDOUT, and
    STDERR are also in <span class="Li">&quot;:encoding(utf8)&quot;</span>. On
    the other hand, if only output is chosen to be in
    <span class="Li">&quot;:encoding(koi8r)&quot;</span>, a
    <span class="Li">&quot;:std&quot;</span> will cause only the STDOUT and
    STDERR to be in <span class="Li">&quot;koi8r&quot;</span>. The
    <span class="Li">&quot;:locale&quot;</span> subpragma implicitly turns on
    <span class="Li">&quot;:std&quot;</span>.</p>
<p class="Pp">The logic of <span class="Li">&quot;:locale&quot;</span> is
    described in full in encoding, but in short it is first trying
    nl_langinfo(CODESET) and then guessing from the LC_ALL and LANG locale
    environment variables.</p>
<p class="Pp">Directory handles may also support PerlIO layers in the
  future.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="NONPERLIO_FUNCTIONALITY"><a class="permalink" href="#NONPERLIO_FUNCTIONALITY">NONPERLIO
  FUNCTIONALITY</a></h1>
<p class="Pp">If Perl is not built to use PerlIO as its IO system then only the
    two pseudo-layers <span class="Li">&quot;:bytes&quot;</span> and
    <span class="Li">&quot;:crlf&quot;</span> are available.</p>
<p class="Pp">The <span class="Li">&quot;:bytes&quot;</span> layer corresponds
    to &quot;binary mode&quot; and the <span class="Li">&quot;:crlf&quot;</span>
    layer corresponds to &quot;text mode&quot; on platforms that distinguish
    between the two modes when opening files (which is many DOS-like platforms,
    including Windows). These two layers are no-ops on platforms where
    <i>binmode()</i> is a no-op, but perform their functions everywhere if
    PerlIO is enabled.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="IMPLEMENTATION_DETAILS"><a class="permalink" href="#IMPLEMENTATION_DETAILS">IMPLEMENTATION
  DETAILS</a></h1>
<p class="Pp">There is a class method in
    <span class="Li">&quot;PerlIO::Layer&quot;</span>
    <span class="Li">&quot;find&quot;</span> which is implemented as XS code. It
    is called by <span class="Li">&quot;import&quot;</span> to validate the
    layers:</p>
<p class="Pp"></p>
<pre>
   PerlIO::Layer::-&gt;find(&quot;perlio&quot;)
</pre>
<p class="Pp">The return value (if defined) is a Perl object, of class
    <span class="Li">&quot;PerlIO::Layer&quot;</span> which is created by the C
    code in <i>perlio.c</i>. As yet there is nothing useful you can do with the
    object at the perl level.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">&quot;binmode&quot; in perlfunc, &quot;open&quot; in perlfunc,
    perlunicode, PerlIO, encoding</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-01-31</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
