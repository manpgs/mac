<!DOCTYPE html>
<html lang="en">
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Params::Check(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Params::Check(3pm)</td>
    <td class="head-vol"><a href=".">Perl Programmers Reference Guide</a></td>
    <td class="head-rtitle">Params::Check(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Params::Check - A generic input parsing/checking mechanism.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    use Params::Check qw[check allow last_error];
    sub fill_personal_info {
        my %hash = @_;
        my $x;
        my $tmpl = {
            firstname   =&gt; { required   =&gt; 1, defined =&gt; 1 },
            lastname    =&gt; { required   =&gt; 1, store =&gt; \$x },
            gender      =&gt; { required   =&gt; 1,
                             allow      =&gt; [qr/M/i, qr/F/i],
                           },
            married     =&gt; { allow      =&gt; [0,1] },
            age         =&gt; { default    =&gt; 21,
                             allow      =&gt; qr/^\d+$/,
                           },
            phone       =&gt; { allow =&gt; [ sub { return 1 if /$valid_re/ },
                                        '1-800-PERL' ]
                           },
            id_list     =&gt; { default        =&gt; [],
                             strict_type    =&gt; 1
                           },
            employer    =&gt; { default =&gt; 'NSA', no_override =&gt; 1 },
        };
        ### check() returns a hashref of parsed args on success ###
        my $parsed_args = check( $tmpl, \%hash, $VERBOSE )
                            or die qw[Could not parse arguments!];
        ... other code here ...
    }
    my $ok = allow( $colour, [qw|blue green yellow|] );
    my $error = Params::Check::last_error();
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Params::Check is a generic input parsing/checking mechanism.</p>
<p class="Pp">It allows you to validate input via a template. The only
    requirement is that the arguments must be named.</p>
<p class="Pp">Params::Check can do the following things for you:</p>
<ul class="Bl-bullet">
  <li>Convert all keys to lowercase</li>
  <li>Check if all required arguments have been provided</li>
  <li>Set arguments that have not been provided to the default</li>
  <li>Weed out arguments that are not supported and warn about them to the
    user</li>
  <li>Validate the arguments given by the user based on strings, regexes, lists
      or even subroutines</li>
  <li>Enforce type integrity if required</li>
</ul>
<p class="Pp">Most of Params::Check's power comes from its template, which we'll
    discuss below:</p>
</section>
<section class="Sh">
<h1 class="Sh" id="Template"><a class="permalink" href="#Template">Template</a></h1>
<p class="Pp">As you can see in the synopsis, based on your template, the
    arguments provided will be validated.</p>
<p class="Pp">The template can take a different set of rules per key that is
    used.</p>
<p class="Pp">The following rules are available:</p>
<dl class="Bl-tag">
  <dt id="default"><a class="permalink" href="#default">default</a></dt>
  <dd>This is the default value if none was provided by the user. This is also
      the type <span class="Li">&quot;strict_type&quot;</span> will look at when
      checking type integrity (see below).</dd>
  <dt id="required"><a class="permalink" href="#required">required</a></dt>
  <dd>A boolean flag that indicates if this argument was a required argument. If
      marked as required and not provided, <b>check()</b> will fail.</dd>
  <dt id="strict_type"><a class="permalink" href="#strict_type">strict_type</a></dt>
  <dd>This does a <span class="Li">&quot;ref()&quot;</span> check on the
      argument provided. The <span class="Li">&quot;ref&quot;</span> of the
      argument must be the same as the <span class="Li">&quot;ref&quot;</span>
      of the default value for this check to pass.
    <p class="Pp">This is very useful if you insist on taking an array reference
        as argument for example.</p>
  </dd>
  <dt id="defined"><a class="permalink" href="#defined">defined</a></dt>
  <dd>If this template key is true, enforces that if this key is provided by
      user input, its value is <span class="Li">&quot;defined&quot;</span>. This
      just means that the user is not allowed to pass
      <span class="Li">&quot;undef&quot;</span> as a value for this key and is
      equivalent to:
    <br/>
     allow =&gt; sub { defined <span class="Li">$_</span>[0] &amp;&amp; OTHER
      TESTS }</dd>
  <dt id="no_override"><a class="permalink" href="#no_override">no_override</a></dt>
  <dd>This allows you to specify <span class="Li">&quot;constants&quot;</span>
      in your template. ie, they keys that are not allowed to be altered by the
      user. It pretty much allows you to keep all your
      <span class="Li">&quot;configurable&quot;</span> data in one place; the
      <span class="Li">&quot;Params::Check&quot;</span> template.</dd>
  <dt id="store"><a class="permalink" href="#store">store</a></dt>
  <dd>This allows you to pass a reference to a scalar, in which the data will be
      stored:
    <p class="Pp"></p>
    <pre>    my $x;
    my $args = check(foo =&gt; { default =&gt; 1, store =&gt; \$x }, $input);
    </pre>
    <p class="Pp">This is basically shorthand for saying:</p>
    <p class="Pp"></p>
    <pre>    my $args = check( { foo =&gt; { default =&gt; 1 }, $input );
    my $x    = $args-&gt;{foo};
    </pre>
    <p class="Pp">You can alter the global variable
        <span class="Li">$Params::Check::NO_DUPLICATES</span> to control whether
        the <span class="Li">&quot;store&quot;</span>'d key will still be
        present in your result set. See the &quot;Global Variables&quot; section
        below.</p>
  </dd>
  <dt id="allow"><a class="permalink" href="#allow">allow</a></dt>
  <dd>A set of criteria used to validate a particular piece of data if it has to
      adhere to particular rules.
    <p class="Pp">See the <span class="Li">&quot;allow()&quot;</span> function
        for details.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="Functions"><a class="permalink" href="#Functions">Functions</a></h1>
<section class="Ss">
<h2 class="Ss" id="check(_"><a class="permalink" href="#check(_">check( \%tmpl,
  \%args, [$verbose] );</a></h2>
<p class="Pp">This function is not exported by default, so you'll have to ask
    for it via:</p>
<p class="Pp"></p>
<pre>    use Params::Check qw[check];
</pre>
<p class="Pp">or use its fully qualified name instead.</p>
<p class="Pp"><span class="Li">&quot;check&quot;</span> takes a list of
    arguments, as follows:</p>
<dl class="Bl-tag">
  <dt id="Template~2"><a class="permalink" href="#Template~2">Template</a></dt>
  <dd>This is a hash reference which contains a template as explained in the
      <span class="Li">&quot;SYNOPSIS&quot;</span> and
      <span class="Li">&quot;Template&quot;</span> section.</dd>
  <dt id="Arguments"><a class="permalink" href="#Arguments">Arguments</a></dt>
  <dd>This is a reference to a hash of named arguments which need checking.</dd>
  <dt id="Verbose"><a class="permalink" href="#Verbose">Verbose</a></dt>
  <dd>A boolean to indicate whether <span class="Li">&quot;check&quot;</span>
      should be verbose and warn about what went wrong in a check or not.
    <p class="Pp">You can enable this program wide by setting the package
        variable <span class="Li">$Params::Check::VERBOSE</span> to a true
        value. For details, see the section on <span class="Li">&quot;Global
        Variables&quot;</span> below.</p>
  </dd>
</dl>
<p class="Pp"><span class="Li">&quot;check&quot;</span> will return when it
    fails, or a hashref with lowercase keys of parsed arguments when it
    succeeds.</p>
<p class="Pp">So a typical call to check would look like this:</p>
<p class="Pp"></p>
<pre>    my $parsed = check( \%template, \%arguments, $VERBOSE )
                    or warn q[Arguments could not be parsed!];
</pre>
<p class="Pp">A lot of the behaviour of
    <span class="Li">&quot;check()&quot;</span> can be altered by setting
    package variables. See the section on <span class="Li">&quot;Global
    Variables&quot;</span> for details on this.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="allow(_$test_me,_"><a class="permalink" href="#allow(_$test_me,_">allow(
  $test_me, \@criteria );</a></h2>
<p class="Pp">The function that handles the
    <span class="Li">&quot;allow&quot;</span> key in the template is also
    available for independent use.</p>
<p class="Pp">The function takes as first argument a key to test against, and as
    second argument any form of criteria that are also allowed by the
    <span class="Li">&quot;allow&quot;</span> key in the template.</p>
<p class="Pp">You can use the following types of values for allow:</p>
<dl class="Bl-tag">
  <dt id="string"><a class="permalink" href="#string">string</a></dt>
  <dd>The provided argument MUST be equal to the string for the validation to
      pass.</dd>
  <dt id="regexp"><a class="permalink" href="#regexp">regexp</a></dt>
  <dd>The provided argument MUST match the regular expression for the validation
      to pass.</dd>
  <dt id="subroutine"><a class="permalink" href="#subroutine">subroutine</a></dt>
  <dd>The provided subroutine MUST return true in order for the validation to
      pass and the argument accepted.
    <p class="Pp">(This is particularly useful for more complicated data).</p>
  </dd>
  <dt id="array"><a class="permalink" href="#array">array ref</a></dt>
  <dd>The provided argument MUST equal one of the elements of the array ref for
      the validation to pass. An array ref can hold all the above values.</dd>
</dl>
<p class="Pp">It returns true if the key matched the criteria, or false
    otherwise.</p>
</section>
<section class="Ss">
<h2 class="Ss"><b>last_error()</b></h2>
<p class="Pp">Returns a string containing all warnings and errors reported
    during the last time <span class="Li">&quot;check&quot;</span> was
  called.</p>
<p class="Pp">This is useful if you want to report then some other way than
    <span class="Li">&quot;carp&quot;</span>'ing when the verbose flag is
  on.</p>
<p class="Pp">It is exported upon request.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Global_Variables"><a class="permalink" href="#Global_Variables">Global
  Variables</a></h1>
<p class="Pp">The behaviour of Params::Check can be altered by changing the
    following global variables:</p>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::VERBOSE"><a class="permalink" href="#$Params::Check::VERBOSE">$Params::Check::VERBOSE</a></h2>
<p class="Pp">This controls whether Params::Check will issue warnings and
    explanations as to why certain things may have failed. If you set it to 0,
    Params::Check will not output any warnings.</p>
<p class="Pp">The default is 1 when warnings are enabled, 0 otherwise;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::STRICT_TYPE"><a class="permalink" href="#$Params::Check::STRICT_TYPE">$Params::Check::STRICT_TYPE</a></h2>
<p class="Pp">This works like the
    <span class="Li">&quot;strict_type&quot;</span> option you can pass to
    <span class="Li">&quot;check&quot;</span>, which will turn on
    <span class="Li">&quot;strict_type&quot;</span> globally for all calls to
    <span class="Li">&quot;check&quot;</span>.</p>
<p class="Pp">The default is 0;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::ALLOW_UNKNOWN"><a class="permalink" href="#$Params::Check::ALLOW_UNKNOWN">$Params::Check::ALLOW_UNKNOWN</a></h2>
<p class="Pp">If you set this flag, unknown options will still be present in the
    return value, rather than filtered out. This is useful if your subroutine is
    only interested in a few arguments, and wants to pass the rest on blindly to
    perhaps another subroutine.</p>
<p class="Pp">The default is 0;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::STRIP_LEADING_DASHES"><a class="permalink" href="#$Params::Check::STRIP_LEADING_DASHES">$Params::Check::STRIP_LEADING_DASHES</a></h2>
<p class="Pp">If you set this flag, all keys passed in the following manner:</p>
<p class="Pp"></p>
<pre>    function( -key =&gt; 'val' );
</pre>
<p class="Pp">will have their leading dashes stripped.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::NO_DUPLICATES"><a class="permalink" href="#$Params::Check::NO_DUPLICATES">$Params::Check::NO_DUPLICATES</a></h2>
<p class="Pp">If set to true, all keys in the template that are marked as to be
    stored in a scalar, will also be removed from the result set.</p>
<p class="Pp">Default is false, meaning that when you use
    <span class="Li">&quot;store&quot;</span> as a template key,
    <span class="Li">&quot;check&quot;</span> will put it both in the scalar you
    supplied, as well as in the hashref it returns.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::PRESERVE_CASE"><a class="permalink" href="#$Params::Check::PRESERVE_CASE">$Params::Check::PRESERVE_CASE</a></h2>
<p class="Pp">If set to true, Params::Check will no longer convert all keys from
    the user input to lowercase, but instead expect them to be in the case the
    template provided. This is useful when you want to use similar keys with
    different casing in your templates.</p>
<p class="Pp">Understand that this removes the case-insensitivity feature of
    this module.</p>
<p class="Pp">Default is 0;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::ONLY_ALLOW_DEFINED"><a class="permalink" href="#$Params::Check::ONLY_ALLOW_DEFINED">$Params::Check::ONLY_ALLOW_DEFINED</a></h2>
<p class="Pp">If set to true, Params::Check will require all values passed to be
    <span class="Li">&quot;defined&quot;</span>. If you wish to enable this on a
    'per key' basis, use the template option
    <span class="Li">&quot;defined&quot;</span> instead.</p>
<p class="Pp">Default is 0;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::SANITY_CHECK_TEMPLATE"><a class="permalink" href="#$Params::Check::SANITY_CHECK_TEMPLATE">$Params::Check::SANITY_CHECK_TEMPLATE</a></h2>
<p class="Pp">If set to true, Params::Check will sanity check templates,
    validating for errors and unknown keys. Although very useful for debugging,
    this can be somewhat slow in hot-code and large loops.</p>
<p class="Pp">To disable this check, set this variable to
    <span class="Li">&quot;false&quot;</span>.</p>
<p class="Pp">Default is 1;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::WARNINGS_FATAL"><a class="permalink" href="#$Params::Check::WARNINGS_FATAL">$Params::Check::WARNINGS_FATAL</a></h2>
<p class="Pp">If set to true, Params::Check will
    <span class="Li">&quot;croak&quot;</span> when an error during template
    validation occurs, rather than return
    <span class="Li">&quot;false&quot;</span>.</p>
<p class="Pp">Default is 0;</p>
</section>
<section class="Ss">
<h2 class="Ss" id="$Params::Check::CALLER_DEPTH"><a class="permalink" href="#$Params::Check::CALLER_DEPTH">$Params::Check::CALLER_DEPTH</a></h2>
<p class="Pp">This global modifies the argument given to
    <span class="Li">&quot;caller()&quot;</span> by
    <span class="Li">&quot;Params::Check::check()&quot;</span> and is useful if
    you have a custom wrapper function around
    <span class="Li">&quot;Params::Check::check()&quot;</span>. The value must
    be an integer, indicating the number of wrapper functions inserted between
    the real function call and
    <span class="Li">&quot;Params::Check::check()&quot;</span>.</p>
<p class="Pp">Example wrapper function, using a custom stacktrace:</p>
<p class="Pp"></p>
<pre>    sub check {
        my ($template, $args_in) = @_;
        local $Params::Check::WARNINGS_FATAL = 1;
        local $Params::Check::CALLER_DEPTH = $Params::Check::CALLER_DEPTH + 1;
        my $args_out = Params::Check::check($template, $args_in);
        my_stacktrace(Params::Check::last_error) unless $args_out;
        return $args_out;
    }
</pre>
<p class="Pp">Default is 0;</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Acknowledgements"><a class="permalink" href="#Acknowledgements">Acknowledgements</a></h1>
<p class="Pp">Thanks to Richard Soderberg for his performance improvements.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUG_REPORTS"><a class="permalink" href="#BUG_REPORTS">BUG
  REPORTS</a></h1>
<p class="Pp">Please report bugs or other issues to
    &lt;bug-params-check@rt.cpan.org&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">This module by Jos Boumans &lt;kane@cpan.org&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">This library is free software; you may redistribute and/or modify
    it under the same terms as Perl itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-02-19</td>
    <td class="foot-os"><a href="..">perl v5.34.1</a></td>
  </tr>
</table>
</body>
</html>
