<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>autodie(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">autodie(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">autodie(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">autodie - Replace functions with ones that succeed or die with
    lexical scope</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    use autodie;            # Recommended: implies 'use autodie qw(:default)'

    use autodie qw(:all);   # Recommended more: defaults and system/exec.

    use autodie qw(open close);   # open/close succeed or die

    open(my $fh, &quot;&lt;&quot;, $filename); # No need to check!

    {
        no autodie qw(open);          # open failures won't die
        open(my $fh, &quot;&lt;&quot;, $filename); # Could fail silently!
        no autodie;                   # disable all autodies
    }
    
    print &quot;Hello World&quot; or die $!;    # autodie DOESN'T check print!
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<pre>
        bIlujDI' yIchegh()Qo'; yIHegh()!

        It is better to die() than to return() in failure.

                -- Klingon programming proverb.
</pre>
<p class="Pp">The <span class="Li">&quot;autodie&quot;</span> pragma provides a
    convenient way to replace functions that normally return false on failure
    with equivalents that throw an exception on failure.</p>
<p class="Pp">The <span class="Li">&quot;autodie&quot;</span> pragma has
    <i>lexical scope</i>, meaning that functions and subroutines altered with
    <span class="Li">&quot;autodie&quot;</span> will only change their behaviour
    until the end of the enclosing block, file, or
    <span class="Li">&quot;eval&quot;</span>.</p>
<p class="Pp">If <span class="Li">&quot;system&quot;</span> is specified as an
    argument to <span class="Li">&quot;autodie&quot;</span>, then it uses
    IPC::System::Simple to do the heavy lifting. See the description of that
    module for more information.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXCEPTIONS"><a class="permalink" href="#EXCEPTIONS">EXCEPTIONS</a></h1>
<p class="Pp">Exceptions produced by the
    <span class="Li">&quot;autodie&quot;</span> pragma are members of the
    autodie::exception class. The preferred way to work with these exceptions
    under Perl 5.10 is as follows:</p>
<p class="Pp"></p>
<pre>
    use feature qw(switch);

    eval {
        use autodie;

        open(my $fh, '&lt;', $some_file);

        my @records = &lt;$fh&gt;;

        # Do things with @records...

        close($fh);

    };

    given ($@) {
        when (undef)   { say &quot;No error&quot;;                    }
        when ('open')  { say &quot;Error from open&quot;;             }
        when (':io')   { say &quot;Non-open, IO error.&quot;;         }
        when (':all')  { say &quot;All other autodie errors.&quot;    }
        default        { say &quot;Not an autodie error at all.&quot; }
    }
</pre>
<p class="Pp">Under Perl 5.8, the <span class="Li">&quot;given/when&quot;</span>
    structure is not available, so the following structure may be used:</p>
<p class="Pp"></p>
<pre>
    eval {
        use autodie;

        open(my $fh, '&lt;', $some_file);

        my @records = &lt;$fh&gt;;

        # Do things with @records...

        close($fh);
    };

    if ($@ and $@-&gt;isa('autodie::exception')) {
        if ($@-&gt;matches('open')) { print &quot;Error from open\n&quot;;   }
        if ($@-&gt;matches(':io' )) { print &quot;Non-open, IO error.&quot;; }
    } elsif ($@) {
        # A non-autodie exception.
    }
</pre>
<p class="Pp">See autodie::exception for further information on interrogating
    exceptions.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CATEGORIES"><a class="permalink" href="#CATEGORIES">CATEGORIES</a></h1>
<p class="Pp">Autodie uses a simple set of categories to group together similar
    built-ins. Requesting a category type (starting with a colon) will enable
    autodie for all built-ins beneath that category. For example, requesting
    <span class="Li">&quot;:file&quot;</span> will enable autodie for
    <span class="Li">&quot;close&quot;</span>,
    <span class="Li">&quot;fcntl&quot;</span>,
    <span class="Li">&quot;open&quot;</span> and
    <span class="Li">&quot;sysopen&quot;</span>.</p>
<p class="Pp">The categories are currently:</p>
<p class="Pp"></p>
<pre>
    :all
        :default
            :io
                read
                seek
                sysread
                sysseek
                syswrite
                :dbm
                    dbmclose
                    dbmopen
                :file
                    binmode
                    close
                    chmod
                    chown
                    fcntl
                    flock
                    ioctl
                    open
                    sysopen
                    truncate
                :filesys
                    chdir
                    closedir
                    opendir
                    link
                    mkdir
                    readlink
                    rename
                    rmdir
                    symlink
                    unlink
                :ipc
                    kill
                    pipe
                    :msg
                        msgctl
                        msgget
                        msgrcv
                        msgsnd
                    :semaphore
                        semctl
                        semget
                        semop
                    :shm
                        shmctl
                        shmget
                        shmread
                :socket
                    accept
                    bind
                    connect
                    getsockopt
                    listen
                    recv
                    send
                    setsockopt
                    shutdown
                    socketpair
            :threads
                fork
        :system
            system
            exec
</pre>
<p class="Pp">Note that while the above category system is presently a strict
    hierarchy, this should not be assumed.</p>
<p class="Pp">A plain <span class="Li">&quot;use autodie&quot;</span> implies
    <span class="Li">&quot;use autodie qw(:default)&quot;</span>. Note that
    <span class="Li">&quot;system&quot;</span> and
    <span class="Li">&quot;exec&quot;</span> are not enabled by default.
    <span class="Li">&quot;system&quot;</span> requires the optional
    IPC::System::Simple module to be installed, and enabling
    <span class="Li">&quot;system&quot;</span> or
    <span class="Li">&quot;exec&quot;</span> will invalidate their exotic forms.
    See &quot;BUGS&quot; below for more details.</p>
<p class="Pp">The syntax:</p>
<p class="Pp"></p>
<pre>
    use autodie qw(:1.994);
</pre>
<p class="Pp">allows the <span class="Li">&quot;:default&quot;</span> list from
    a particular version to be used. This provides the convenience of using the
    default methods, but the surety that no behavioral changes will occur if the
    <span class="Li">&quot;autodie&quot;</span> module is upgraded.</p>
<p class="Pp"><span class="Li">&quot;autodie&quot;</span> can be enabled for all
    of Perl's built-ins, including <span class="Li">&quot;system&quot;</span>
    and <span class="Li">&quot;exec&quot;</span> with:</p>
<p class="Pp"></p>
<pre>
    use autodie qw(:all);
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="FUNCTION_SPECIFIC_NOTES"><a class="permalink" href="#FUNCTION_SPECIFIC_NOTES">FUNCTION
  SPECIFIC NOTES</a></h1>
<section class="Ss">
<h2 class="Ss" id="print"><a class="permalink" href="#print">print</a></h2>
<p class="Pp">The autodie pragma <b>&lt;does not check calls to
    </b><b>&quot;print&quot;</b><b></b>&gt;.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="flock"><a class="permalink" href="#flock">flock</a></h2>
<p class="Pp">It is not considered an error for
    <span class="Li">&quot;flock&quot;</span> to return false if it fails due to
    an <span class="Li">&quot;EWOULDBLOCK&quot;</span> (or equivalent)
    condition. This means one can still use the common convention of testing the
    return value of <span class="Li">&quot;flock&quot;</span> when called with
    the <span class="Li">&quot;LOCK_NB&quot;</span> option:</p>
<p class="Pp"></p>
<pre>
    use autodie;

    if ( flock($fh, LOCK_EX | LOCK_NB) ) {
        # We have a lock
    }
</pre>
<p class="Pp">Autodying <span class="Li">&quot;flock&quot;</span> will generate
    an exception if <span class="Li">&quot;flock&quot;</span> returns false with
    any other error.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="system/exec"><a class="permalink" href="#system/exec">system/exec</a></h2>
<p class="Pp">The <span class="Li">&quot;system&quot;</span> built-in is
    considered to have failed in the following circumstances:</p>
<ul class="Bl-bullet">
  <li>The command does not start.</li>
  <li>The command is killed by a signal.</li>
  <li>The command returns a non-zero exit value (but see below).</li>
</ul>
<p class="Pp">On success, the autodying form of
    <span class="Li">&quot;system&quot;</span> returns the <i>exit value</i>
    rather than the contents of <span class="Li">$?</span>.</p>
<p class="Pp">Additional allowable exit values can be supplied as an optional
    first argument to autodying <span class="Li">&quot;system&quot;</span>:</p>
<p class="Pp"></p>
<pre>
    system( [ 0, 1, 2 ], $cmd, @args);  # 0,1,2 are good exit values
</pre>
<p class="Pp"><span class="Li">&quot;autodie&quot;</span> uses the
    IPC::System::Simple module to change
    <span class="Li">&quot;system&quot;</span>. See its documentation for
    further information.</p>
<p class="Pp">Applying <span class="Li">&quot;autodie&quot;</span> to
    <span class="Li">&quot;system&quot;</span> or
    <span class="Li">&quot;exec&quot;</span> causes the exotic forms
    <span class="Li">&quot;system { $cmd } @args &quot;</span> or
    <span class="Li">&quot;exec { $cmd } @args&quot;</span> to be considered a
    syntax error until the end of the lexical scope. If you really need to use
    the exotic form, you can call
    <span class="Li">&quot;CORE::system&quot;</span> or
    <span class="Li">&quot;CORE::exec&quot;</span> instead, or use
    <span class="Li">&quot;no autodie qw(system exec)&quot;</span> before
    calling the exotic form.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="GOTCHAS"><a class="permalink" href="#GOTCHAS">GOTCHAS</a></h1>
<p class="Pp">Functions called in list context are assumed to have failed if
    they return an empty list, or a list consisting only of a single undef
    element.</p>
<p class="Pp">Some builtins (e.g. <span class="Li">&quot;chdir&quot;</span> or
    <span class="Li">&quot;truncate&quot;</span>) has a call signature that
    cannot completely be representated with a Perl prototype. This means that
    some valid Perl code will be invalid under autodie. As an example:</p>
<p class="Pp"></p>
<pre>
  chdir(BAREWORD);
</pre>
<p class="Pp">Without autodie (and assuming BAREWORD is an open
    filehandle/dirhandle) this is a valid call to chdir. But under autodie,
    <span class="Li">&quot;chdir&quot;</span> will behave like it had the
    prototype &quot;;$&quot; and thus BAREWORD will be a syntax error (under
    &quot;use strict&quot;. Without strict, it will interpreted as a
  filename).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<dl class="Bl-tag">
  <dt>:void cannot be used with lexical scope</dt>
  <dd>The <span class="Li">&quot;:void&quot;</span> option is supported in
      Fatal, but not <span class="Li">&quot;autodie&quot;</span>. To workaround
      this, <span class="Li">&quot;autodie&quot;</span> may be explicitly
      disabled until the end of the current block with <span class="Li">&quot;no
      autodie&quot;</span>. To disable autodie for only a single function (eg,
      open) use <span class="Li">&quot;no autodie qw(open)&quot;</span>.
    <p class="Pp"><span class="Li">&quot;autodie&quot;</span> performs no
        checking of called context to determine whether to throw an exception;
        the explicitness of error handling with
        <span class="Li">&quot;autodie&quot;</span> is a deliberate feature.</p>
  </dd>
  <dt id="No"><a class="permalink" href="#No">No user hints defined for
    %s</a></dt>
  <dd>You've insisted on hints for user-subroutines, either by pre-pending a
      <span class="Li">&quot;!&quot;</span> to the subroutine name itself, or
      earlier in the list of arguments to
      <span class="Li">&quot;autodie&quot;</span>. However the subroutine in
      question does not have any hints available.</dd>
</dl>
<p class="Pp">See also &quot;DIAGNOSTICS&quot; in Fatal.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">&quot;Used only once&quot; warnings can be generated when
    <span class="Li">&quot;autodie&quot;</span> or
    <span class="Li">&quot;Fatal&quot;</span> is used with package filehandles
    (eg, <span class="Li">&quot;FILE&quot;</span>). Scalar filehandles are
    strongly recommended instead.</p>
<p class="Pp">When using <span class="Li">&quot;autodie&quot;</span> or
    <span class="Li">&quot;Fatal&quot;</span> with user subroutines, the
    declaration of those subroutines must appear before the first use of
    <span class="Li">&quot;Fatal&quot;</span> or
    <span class="Li">&quot;autodie&quot;</span>, or have been exported from a
    module. Attempting to use <span class="Li">&quot;Fatal&quot;</span> or
    <span class="Li">&quot;autodie&quot;</span> on other user subroutines will
    result in a compile-time error.</p>
<p class="Pp">Due to a bug in Perl, <span class="Li">&quot;autodie&quot;</span>
    may &quot;lose&quot; any format which has the same name as an autodying
    built-in or function.</p>
<p class="Pp"><span class="Li">&quot;autodie&quot;</span> may not work correctly
    if used inside a file with a name that looks like a string eval, such as
    <i>eval (3)</i>.</p>
<section class="Ss">
<h2 class="Ss" id="autodie_and_string_eval"><a class="permalink" href="#autodie_and_string_eval">autodie
  and string eval</a></h2>
<p class="Pp">Due to the current implementation of
    <span class="Li">&quot;autodie&quot;</span>, unexpected results may be seen
    when used near or with the string version of eval. <i>None of these bugs
    exist when using block eval</i>.</p>
<p class="Pp">Under Perl 5.8 only, <span class="Li">&quot;autodie&quot;</span>
    <i>does not</i> propagate into string
    <span class="Li">&quot;eval&quot;</span> statements, although it can be
    explicitly enabled inside a string
  <span class="Li">&quot;eval&quot;</span>.</p>
<p class="Pp">Under Perl 5.10 only, using a string eval when
    <span class="Li">&quot;autodie&quot;</span> is in effect can cause the
    autodie behaviour to leak into the surrounding scope. This can be worked
    around by using a <span class="Li">&quot;no autodie&quot;</span> at the end
    of the scope to explicitly remove autodie's effects, or by avoiding the use
    of string eval.</p>
<p class="Pp"><i>None of these bugs exist when using block eval</i>. The use of
    <span class="Li">&quot;autodie&quot;</span> with block eval is considered
    good practice.</p>
</section>
<section class="Ss">
<h2 class="Ss">REPORTING BUGS</h2>
<p class="Pp">Please report bugs via the GitHub Issue Tracker at
    &lt;https://github.com/pjf/autodie/issues&gt; or via the CPAN Request
    Tracker at &lt;https://rt.cpan.org/NoAuth/Bugs.html?Dist=autodie&gt;.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="FEEDBACK"><a class="permalink" href="#FEEDBACK">FEEDBACK</a></h1>
<p class="Pp">If you find this module useful, please consider rating it on the
    CPAN Ratings service at
    &lt;http://cpanratings.perl.org/rate?distribution=autodie&gt; .</p>
<p class="Pp">The module author loves to hear how
    <span class="Li">&quot;autodie&quot;</span> has made your life better (or
    worse). Feedback can be sent to &lt;pjf@perltraining.com.au&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Copyright 2008-2009, Paul Fenwick
  &lt;pjf@perltraining.com.au&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LICENSE"><a class="permalink" href="#LICENSE">LICENSE</a></h1>
<p class="Pp">This module is free software. You may distribute it under the same
    terms as Perl itself.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Fatal, autodie::exception, autodie::hints, IPC::System::Simple</p>
<p class="Pp"><i>Perl tips, autodie</i> at
    &lt;http://perltraining.com.au/tips/2008-08-20.html&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ACKNOWLEDGEMENTS"><a class="permalink" href="#ACKNOWLEDGEMENTS">ACKNOWLEDGEMENTS</a></h1>
<p class="Pp">Mark Reed and Roland Giersig -- Klingon translators.</p>
<p class="Pp">See the <i>AUTHORS</i> file for full credits. The latest version
    of this file can be found at
    &lt;https://github.com/pjf/autodie/tree/master/AUTHORS&gt; .</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-10-21</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
