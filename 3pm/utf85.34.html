<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>utf8(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">utf8(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">utf8(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">utf8 - Perl pragma to enable/disable UTF-8 (or UTF-EBCDIC) in
    source code</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre> use utf8;
 no utf8;
 # Convert the internal representation of a Perl scalar to/from UTF-8.
 $num_octets = utf8::upgrade($string);
 $success    = utf8::downgrade($string[, $fail_ok]);
 # Change each character of a Perl scalar to/from a series of
 # characters that represent the UTF-8 bytes of each original character.
 utf8::encode($string);  # &quot;\x{100}&quot;  becomes &quot;\xc4\x80&quot;
 utf8::decode($string);  # &quot;\xc4\x80&quot; becomes &quot;\x{100}&quot;
 # Convert a code point from the platform native character set to
 # Unicode, and vice-versa.
 $unicode = utf8::native_to_unicode(ord('A')); # returns 65 on both
                                               # ASCII and EBCDIC
                                               # platforms
 $native = utf8::unicode_to_native(65);        # returns 65 on ASCII
                                               # platforms; 193 on
                                               # EBCDIC
 $flag = utf8::is_utf8($string); # since Perl 5.8.1
 $flag = utf8::valid($string);
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <span class="Li">&quot;use utf8&quot;</span> pragma tells the
    Perl parser to allow UTF-8 in the program text in the current lexical scope.
    The <span class="Li">&quot;no utf8&quot;</span> pragma tells Perl to switch
    back to treating the source text as literal bytes in the current lexical
    scope. (On EBCDIC platforms, technically it is allowing UTF-EBCDIC, and not
    UTF-8, but this distinction is academic, so in this document the term UTF-8
    is used to mean both).</p>
<p class="Pp"><b>Do not use this pragma for anything else than telling Perl that
    your</b> <b>script is written in UTF-8.</b> The utility functions described
    below are directly usable without <span class="Li">&quot;use
    utf8;&quot;</span>.</p>
<p class="Pp">Because it is not possible to reliably tell UTF-8 from native 8
    bit encodings, you need either a Byte Order Mark at the beginning of your
    source code, or <span class="Li">&quot;use utf8;&quot;</span>, to instruct
    perl.</p>
<p class="Pp">When UTF-8 becomes the standard source format, this pragma will
    effectively become a no-op.</p>
<p class="Pp">See also the effects of the <span class="Li">&quot;-C&quot;</span>
    switch and its cousin, the <span class="Li">&quot;PERL_UNICODE&quot;</span>
    environment variable, in perlrun.</p>
<p class="Pp">Enabling the <span class="Li">&quot;utf8&quot;</span> pragma has
    the following effect:</p>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Bytes in the source text that are not in the ASCII character set will be
      treated as being part of a literal UTF-8 sequence. This includes most
      literals such as identifier names, string constants, and constant regular
      expression patterns.</dd>
</dl>
<p class="Pp">Note that if you have non-ASCII, non-UTF-8 bytes in your script
    (for example embedded Latin-1 in your string literals),
    <span class="Li">&quot;use utf8&quot;</span> will be unhappy. If you want to
    have such bytes under <span class="Li">&quot;use utf8&quot;</span>, you can
    disable this pragma until the end the block (or file, if at top level) by
    <span class="Li">&quot;no utf8;&quot;</span>.</p>
<section class="Ss">
<h2 class="Ss" id="Utility_functions"><a class="permalink" href="#Utility_functions">Utility
  functions</a></h2>
<p class="Pp">The following functions are defined in the
    <span class="Li">&quot;utf8::&quot;</span> package by the Perl core. You do
    not need to say <span class="Li">&quot;use utf8&quot;</span> to use these
    and in fact you should not say that unless you really want to have UTF-8
    source code.</p>
<ul class="Bl-bullet">
  <li><span class="Li">&quot;$num_octets = utf8::upgrade($string)&quot;</span>
    <p class="Pp">(Since Perl v5.8.0) Converts in-place the internal
        representation of the string from an octet sequence in the native
        encoding (Latin-1 or EBCDIC) to UTF-8. The logical character sequence
        itself is unchanged. If
        <i></i><span class="Li"><i>$string</i></span><i></i> is already
        upgraded, then this is a no-op. Returns the number of octets necessary
        to represent the string as UTF-8.</p>
    <p class="Pp">If your code needs to be compatible with versions of perl
        without <span class="Li">&quot;use feature
        'unicode_strings';&quot;</span>, you can force Unicode semantics on a
        given string:</p>
    <p class="Pp"></p>
    <pre>  # force unicode semantics for $string without the
  # &quot;unicode_strings&quot; feature
  utf8::upgrade($string);
    </pre>
    <p class="Pp">For example:</p>
    <p class="Pp"></p>
    <pre>  # without explicit or implicit use feature 'unicode_strings'
  my $x = &quot;\xDF&quot;;    # LATIN SMALL LETTER SHARP S
  $x =~ /ss/i;       # won't match
  my $y = uc($x);    # won't convert
  utf8::upgrade($x);
  $x =~ /ss/i;       # matches
  my $z = uc($x);    # converts to &quot;SS&quot;
    </pre>
    <p class="Pp"><b>Note that this function does not handle arbitrary
        encodings</b>; use Encode instead.</p>
  </li>
  <li><span class="Li">&quot;$success = utf8::downgrade($string[,
      $fail_ok])&quot;</span>
    <p class="Pp">(Since Perl v5.8.0) Converts in-place the internal
        representation of the string from UTF-8 to the equivalent octet sequence
        in the native encoding (Latin-1 or EBCDIC). The logical character
        sequence itself is unchanged. If
        <i></i><span class="Li"><i>$string</i></span><i></i> is already stored
        as native 8 bit, then this is a no-op. Can be used to make sure that the
        UTF-8 flag is off, e.g. when you want to make sure that the
        <b>substr()</b> or <b>length()</b> function works with the usually
        faster byte algorithm.</p>
    <p class="Pp">Fails if the original UTF-8 sequence cannot be represented in
        the native 8 bit encoding. On failure dies or, if the value of
        <i></i><span class="Li"><i>$fail_ok</i></span><i></i> is true, returns
        false.</p>
    <p class="Pp">Returns true on success.</p>
    <p class="Pp">If your code expects an octet sequence this can be used to
        validate that you've received one:</p>
    <p class="Pp"></p>
    <pre>  # throw an exception if not representable as octets
  utf8::downgrade($string)
  # or do your own error handling
  utf8::downgrade($string, 1) or die &quot;string must be octets&quot;;
    </pre>
    <p class="Pp"><b>Note that this function does not handle arbitrary
        encodings</b>; use Encode instead.</p>
  </li>
  <li><span class="Li">&quot;utf8::encode($string)&quot;</span>
    <p class="Pp">(Since Perl v5.8.0) Converts in-place the character sequence
        to the corresponding octet sequence in Perl's extended UTF-8. That is,
        every (possibly wide) character gets replaced with a sequence of one or
        more characters that represent the individual UTF-8 bytes of the
        character. The UTF8 flag is turned off. Returns nothing.</p>
    <p class="Pp"></p>
    <pre> my $x = &quot;\x{100}&quot;; # $x contains one character, with ord 0x100
 utf8::encode($x);  # $x contains two characters, with ords (on
                    # ASCII platforms) 0xc4 and 0x80.  On EBCDIC
                    # 1047, this would instead be 0x8C and 0x41.
    </pre>
    <p class="Pp">Similar to:</p>
    <p class="Pp"></p>
    <pre>  use Encode;
  $x = Encode::encode(&quot;utf8&quot;, $x);
    </pre>
    <p class="Pp"><b>Note that this function does not handle arbitrary
        encodings</b>; use Encode instead.</p>
  </li>
  <li><span class="Li">&quot;$success = utf8::decode($string)&quot;</span>
    <p class="Pp">(Since Perl v5.8.0) Attempts to convert in-place the octet
        sequence encoded in Perl's extended UTF-8 to the corresponding character
        sequence. That is, it replaces each sequence of characters in the string
        whose ords represent a valid (extended) UTF-8 byte sequence, with the
        corresponding single character. The UTF-8 flag is turned on only if the
        source string contains multiple-byte UTF-8 characters. If
        <i></i><span class="Li"><i>$string</i></span><i></i> is invalid as
        extended UTF-8, returns false; otherwise returns true.</p>
    <p class="Pp"></p>
    <pre> my $x = &quot;\xc4\x80&quot;; # $x contains two characters, with ords
                     # 0xc4 and 0x80
 utf8::decode($x);   # On ASCII platforms, $x contains one char,
                     # with ord 0x100.   Since these bytes aren't
                     # legal UTF-EBCDIC, on EBCDIC platforms, $x is
                     # unchanged and the function returns FALSE.
 my $y = &quot;\xc3\x83\xc2\xab&quot;; This has been encoded twice; this
                     # example is only for ASCII platforms
 utf8::decode($y);   # Converts $y to \xc3\xab, returns TRUE;
 utf8::decode($y);   # Further converts to \xeb, returns TRUE;
 utf8::decode($y);   # Returns FALSE, leaves $y unchanged
    </pre>
    <p class="Pp"><b>Note that this function does not handle arbitrary
        encodings</b>; use Encode instead.</p>
  </li>
  <li><span class="Li">&quot;$unicode =
      utf8::native_to_unicode($code_point)&quot;</span>
    <p class="Pp">(Since Perl v5.8.0) This takes an unsigned integer (which
        represents the ordinal number of a character (or a code point) on the
        platform the program is being run on) and returns its Unicode equivalent
        value. Since ASCII platforms natively use the Unicode code points, this
        function returns its input on them. On EBCDIC platforms it converts from
        EBCDIC to Unicode.</p>
    <p class="Pp">A meaningless value will currently be returned if the input is
        not an unsigned integer.</p>
    <p class="Pp">Since Perl v5.22.0, calls to this function are optimized out
        on ASCII platforms, so there is no performance hit in using it
      there.</p>
  </li>
  <li><span class="Li">&quot;$native =
      utf8::unicode_to_native($code_point)&quot;</span>
    <p class="Pp">(Since Perl v5.8.0) This is the inverse of
        <span class="Li">&quot;utf8::native_to_unicode()&quot;</span>,
        converting the other direction. Again, on ASCII platforms, this returns
        its input, but on EBCDIC platforms it will find the native platform code
        point, given any Unicode one.</p>
    <p class="Pp">A meaningless value will currently be returned if the input is
        not an unsigned integer.</p>
    <p class="Pp">Since Perl v5.22.0, calls to this function are optimized out
        on ASCII platforms, so there is no performance hit in using it
      there.</p>
  </li>
  <li><span class="Li">&quot;$flag = utf8::is_utf8($string)&quot;</span>
    <p class="Pp">(Since Perl 5.8.1) Test whether
        <i></i><span class="Li"><i>$string</i></span><i></i> is marked
        internally as encoded in UTF-8. Functionally the same as
        <span class="Li">&quot;Encode::is_utf8($string)&quot;</span>.</p>
    <p class="Pp">Typically only necessary for debugging and testing, if you
        need to dump the internals of an SV, Devel::Peek's <b>Dump()</b>
        provides more detail in a compact form.</p>
    <p class="Pp">If you still think you need this outside of debugging, testing
        or dealing with filenames, you should probably read perlunitut and
        &quot;What is &quot;the UTF8 flag&quot;?&quot; in perlunifaq.</p>
    <p class="Pp">Don't use this flag as a marker to distinguish character and
        binary data: that should be decided for each variable when you write
        your code.</p>
    <p class="Pp">To force unicode semantics in code portable to perl 5.8 and
        5.10, call <span class="Li">&quot;utf8::upgrade($string)&quot;</span>
        unconditionally.</p>
  </li>
  <li><span class="Li">&quot;$flag = utf8::valid($string)&quot;</span>
    <p class="Pp">[INTERNAL] Test whether
        <i></i><span class="Li"><i>$string</i></span><i></i> is in a consistent
        state regarding UTF-8. Will return true if it is well-formed Perl
        extended UTF-8 and has the UTF-8 flag on <b>or</b> if
        <i></i><span class="Li"><i>$string</i></span><i></i> is held as bytes
        (both these states are 'consistent'). The main reason for this routine
        is to allow Perl's test suite to check that operations have left strings
        in a consistent state.</p>
  </li>
</ul>
<p class="Pp"><span class="Li">&quot;utf8::encode&quot;</span> is like
    <span class="Li">&quot;utf8::upgrade&quot;</span>, but the UTF8 flag is
    cleared. See perlunicode, and the C API functions
    <span class="Li">&quot;sv_utf8_upgrade&quot;</span>,
    <span class="Li">&quot;&quot;sv_utf8_downgrade&quot; in
    perlapi&quot;</span>, <span class="Li">&quot;&quot;sv_utf8_encode&quot; in
    perlapi&quot;</span>, and <span class="Li">&quot;&quot;sv_utf8_decode&quot;
    in perlapi&quot;</span>, which are wrapped by the Perl functions
    <span class="Li">&quot;utf8::upgrade&quot;</span>,
    <span class="Li">&quot;utf8::downgrade&quot;</span>,
    <span class="Li">&quot;utf8::encode&quot;</span> and
    <span class="Li">&quot;utf8::decode&quot;</span>. Also, the functions
    <span class="Li">&quot;utf8::is_utf8&quot;</span>,
    <span class="Li">&quot;utf8::valid&quot;</span>,
    <span class="Li">&quot;utf8::encode&quot;</span>,
    <span class="Li">&quot;utf8::decode&quot;</span>,
    <span class="Li">&quot;utf8::upgrade&quot;</span>, and
    <span class="Li">&quot;utf8::downgrade&quot;</span> are actually internal,
    and thus always available, without a <span class="Li">&quot;require
    utf8&quot;</span> statement.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Some filesystems may not support UTF-8 file names, or they may be
    supported incompatibly with Perl. Therefore UTF-8 names that are visible to
    the filesystem, such as module names may not work.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">perlunitut, perluniintro, perlrun, bytes, perlunicode</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-02-19</td>
    <td class="foot-os">perl v5.34.1</td>
  </tr>
</table>
</body>
</html>
