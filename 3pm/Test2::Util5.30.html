<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Test2::Util(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test2::Util(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test2::Util(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Test2::Util - Tools used by Test2 and friends.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Collection of tools used by Test2 and friends.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXPORTS"><a class="permalink" href="#EXPORTS">EXPORTS</a></h1>
<p class="Pp">All exports are optional. You must specify subs to import.</p>
<dl class="Bl-tag">
  <dt>($success, $error) = try { ... }</dt>
  <dd>Eval the codeblock, return success or failure, and the error message. This
      code protects $@ and $!, they will be restored by the end of the run. This
      code also temporarily blocks <span class="Li">$SIG</span>{DIE}
    handlers.</dd>
  <dt id="protect"><a class="permalink" href="#protect">protect { ... }</a></dt>
  <dd>Similar to try, except that it does not catch exceptions. The idea here is
      to protect $@ and $! from changes. $@ and $! will be restored to whatever
      they were before the run so long as it is successful. If the run fails $!
      will still be restored, but $@ will contain the exception being
    thrown.</dd>
  <dt id="CAN_FORK"><a class="permalink" href="#CAN_FORK">CAN_FORK</a></dt>
  <dd>True if this system is capable of true or pseudo-fork.</dd>
  <dt id="CAN_REALLY_FORK"><a class="permalink" href="#CAN_REALLY_FORK">CAN_REALLY_FORK</a></dt>
  <dd>True if the system can really fork. This will be false for systems where
      fork is emulated.</dd>
  <dt id="CAN_THREAD"><a class="permalink" href="#CAN_THREAD">CAN_THREAD</a></dt>
  <dd>True if this system is capable of using threads.</dd>
  <dt id="USE_THREADS"><a class="permalink" href="#USE_THREADS">USE_THREADS</a></dt>
  <dd>Returns true if threads are enabled, false if they are not.</dd>
  <dt id="get_tid"><a class="permalink" href="#get_tid">get_tid</a></dt>
  <dd>This will return the id of the current thread when threads are enabled,
      otherwise it returns 0.</dd>
  <dt id="my"><a class="permalink" href="#my">my $file =
    pkg_to_file($package)</a></dt>
  <dd>Convert a package name to a filename.</dd>
  <dt>$string = <b>ipc_separator()</b></dt>
  <dd>Get the IPC separator. Currently this is always the string
      <span class="Li">'~'</span>.</dd>
  <dt>$string = <b>gen_uid()</b></dt>
  <dd>Generate a unique id (NOT A UUID). This will typically be the process id,
      the thread id, the time, and an incrementing integer all joined with the
      <span class="Li">&quot;ipc_separator()&quot;</span>.
    <p class="Pp">These ID's are unique enough for most purposes. For identical
        ids to be generated you must have 2 processes with the same PID generate
        IDs at the same time with the same current state of the incrementing
        integer. This is a perfectly reasonable thing to expect to happen across
        multiple machines, but is quite unlikely to happen on one machine.</p>
    <p class="Pp">This can fail to be unique if a process generates an id, calls
        exec, and does it again after the exec and it all happens in less than a
        second. It can also happen if the systems process id's cycle in less
        than a second allowing 2 different programs that use this generator to
        run with the same PID in less than a second. Both these cases are
        sufficiently unlikely. If you need universally unique ids, or ids that
        are unique in these conditions, look at Data::UUID.</p>
  </dd>
  <dt>($ok, $err) = do_rename($old_name, $new_name)</dt>
  <dd>Rename a file, this wraps <span class="Li">&quot;rename()&quot;</span> in
      a way that makes it more reliable cross-platform when trying to rename
      files you recently altered.</dd>
  <dt>($ok, $err) = do_unlink($filename)</dt>
  <dd>Unlink a file, this wraps <span class="Li">&quot;unlink()&quot;</span> in
      a way that makes it more reliable cross-platform when trying to unlink
      files you recently altered.</dd>
  <dt>($ok, $err) = try_sig_mask { ... }</dt>
  <dd>Complete an action with several signals masked, they will be unmasked at
      the end allowing any signals that were intercepted to get handled.
    <p class="Pp">This is primarily used when you need to make several actions
        atomic (against some signals anyway).</p>
    <p class="Pp">Signals that are intercepted:</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="SIGINT"><a class="permalink" href="#SIGINT">SIGINT</a></dt>
  <dd></dd>
  <dt id="SIGALRM"><a class="permalink" href="#SIGALRM">SIGALRM</a></dt>
  <dd></dd>
  <dt id="SIGHUP"><a class="permalink" href="#SIGHUP">SIGHUP</a></dt>
  <dd></dd>
  <dt id="SIGTERM"><a class="permalink" href="#SIGTERM">SIGTERM</a></dt>
  <dd></dd>
  <dt id="SIGUSR1"><a class="permalink" href="#SIGUSR1">SIGUSR1</a></dt>
  <dd></dd>
  <dt id="SIGUSR2"><a class="permalink" href="#SIGUSR2">SIGUSR2</a></dt>
  <dd></dd>
</dl>
</div>
<div class="Bd-indent"></div>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES_&amp;&amp;_CAVEATS"><a class="permalink" href="#NOTES_&amp;&amp;_CAVEATS">NOTES
  &amp;&amp; CAVEATS</a></h1>
<dl class="Bl-tag">
  <dt>5.10.0</dt>
  <dd>Perl 5.10.0 has a bug when compiled with newer gcc versions. This bug
      causes a segfault whenever a new thread is launched. Test2 will attempt to
      detect this, and note that the system is not capable of forking when it is
      detected.</dd>
  <dt id="Devel::Cover"><a class="permalink" href="#Devel::Cover">Devel::Cover</a></dt>
  <dd>Devel::Cover does not support threads. CAN_THREAD will return false if
      Devel::Cover is loaded before the check is first run.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SOURCE"><a class="permalink" href="#SOURCE">SOURCE</a></h1>
<p class="Pp">The source code repository for Test2 can be found at
    <i>http://github.com/Test-More/test-more/</i>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="MAINTAINERS"><a class="permalink" href="#MAINTAINERS">MAINTAINERS</a></h1>
<dl class="Bl-tag">
  <dt id="Chad"><a class="permalink" href="#Chad">Chad Granum
    &lt;exodist@cpan.org&gt;</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<dl class="Bl-tag">
  <dt id="Chad~2"><a class="permalink" href="#Chad~2">Chad Granum
    &lt;exodist@cpan.org&gt;</a></dt>
  <dd></dd>
  <dt id="Kent"><a class="permalink" href="#Kent">Kent Fredric
    &lt;kentnl@cpan.org&gt;</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright 2020 Chad Granum &lt;exodist@cpan.org&gt;.</p>
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
<p class="Pp">See <i>http://dev.perl.org/licenses/</i></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-10-22</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
