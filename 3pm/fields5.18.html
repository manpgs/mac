<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>fields(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">fields(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">fields(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">fields - compile-time class fields</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    {
        package Foo;
        use fields qw(foo bar _Foo_private);
        sub new {
            my Foo $self = shift;
            unless (ref $self) {
                $self = fields::new($self);
                $self-&gt;{_Foo_private} = &quot;this is Foo's secret&quot;;
            }
            $self-&gt;{foo} = 10;
            $self-&gt;{bar} = 20;
            return $self;
        }
    }

    my $var = Foo-&gt;new;
    $var-&gt;{foo} = 42;

    # this will generate an error
    $var-&gt;{zap} = 42;

    # subclassing
    {
        package Bar;
        use base 'Foo';
        use fields qw(baz _Bar_private);        # not shared with Foo
        sub new {
            my $class = shift;
            my $self = fields::new($class);
            $self-&gt;SUPER::new();                # init base fields
            $self-&gt;{baz} = 10;                  # init own fields
            $self-&gt;{_Bar_private} = &quot;this is Bar's secret&quot;;
            return $self;
        }
    }
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <span class="Li">&quot;fields&quot;</span> pragma enables
    compile-time verified class fields.</p>
<p class="Pp">NOTE: The current implementation keeps the declared fields in the
    <span class="Li">%FIELDS</span> hash of the calling package, but this may
    change in future versions. Do <b>not</b> update the
    <span class="Li">%FIELDS</span> hash directly, because it must be created at
    compile-time for it to be fully useful, as is done by this pragma.</p>
<p class="Pp"><b>Only valid for perl before 5.9.0:</b></p>
<p class="Pp">If a typed lexical variable holding a reference is used to access
    a hash element and a package with the same name as the type has declared
    class fields using this pragma, then the operation is turned into an array
    access at compile time.</p>
<p class="Pp">The related <span class="Li">&quot;base&quot;</span> pragma will
    combine fields from base classes and any fields declared using the
    <span class="Li">&quot;fields&quot;</span> pragma. This enables field
    inheritance to work properly.</p>
<p class="Pp">Field names that start with an underscore character are made
    private to the class and are not visible to subclasses. Inherited fields can
    be overridden but will generate a warning if used together with the
    <span class="Li">&quot;-w&quot;</span> switch.</p>
<p class="Pp"><b>Only valid for perls before 5.9.0:</b></p>
<p class="Pp">The effect of all this is that you can have objects with named
    fields which are as compact and as fast arrays to access. This only works as
    long as the objects are accessed through properly typed variables. If the
    objects are not typed, access is only checked at run time.</p>
<p class="Pp">The following functions are supported:</p>
<dl class="Bl-tag">
  <dt id="new"><a class="permalink" href="#new">new</a></dt>
  <dd><b> perl before 5.9.0: </b> <i>fields::new()</i> creates and blesses a
      pseudo-hash comprised of the fields declared using the
      <span class="Li">&quot;fields&quot;</span> pragma into the specified
      class.
    <p class="Pp"><b> perl 5.9.0 and higher: </b> <i>fields::new()</i> creates
        and blesses a restricted-hash comprised of the fields declared using the
        <span class="Li">&quot;fields&quot;</span> pragma into the specified
        class.</p>
    <p class="Pp">This function is usable with or without pseudo-hashes. It is
        the recommended way to construct a fields-based object.</p>
    <p class="Pp">This makes it possible to write a constructor like this:</p>
    <p class="Pp"></p>
    <pre>
    package Critter::Sounds;
    use fields qw(cat dog bird);

    sub new {
        my $self = shift;
        $self = fields::new($self) unless ref $self;
        $self-&gt;{cat} = 'meow';                      # scalar element
        @$self{'dog','bird'} = ('bark','tweet');    # slice
        return $self;
    }
    </pre>
  </dd>
  <dt id="phash"><a class="permalink" href="#phash">phash</a></dt>
  <dd><b> before perl 5.9.0: </b>
    <p class="Pp"><i>fields::phash()</i> can be used to create and initialize a
        plain (unblessed) pseudo-hash. This function should always be used
        instead of creating pseudo-hashes directly.</p>
    <p class="Pp">If the first argument is a reference to an array, the
        pseudo-hash will be created with keys from that array. If a second
        argument is supplied, it must also be a reference to an array whose
        elements will be used as the values. If the second array contains less
        elements than the first, the trailing elements of the pseudo-hash will
        not be initialized. This makes it particularly useful for creating a
        pseudo-hash from subroutine arguments:</p>
    <p class="Pp"></p>
    <pre>
    sub dogtag {
       my $tag = fields::phash([qw(name rank ser_num)], [@_]);
    }
    </pre>
    <p class="Pp"><i>fields::phash()</i> also accepts a list of key-value pairs
        that will be used to construct the pseudo hash. Examples:</p>
    <p class="Pp"></p>
    <pre>
    my $tag = fields::phash(name =&gt; &quot;Joe&quot;,
                            rank =&gt; &quot;captain&quot;,
                            ser_num =&gt; 42);

    my $pseudohash = fields::phash(%args);
    </pre>
    <p class="Pp"><b> perl 5.9.0 and higher: </b></p>
    <p class="Pp">Pseudo-hashes have been removed from Perl as of 5.10. Consider
        using restricted hashes or <i>fields::new()</i> instead. Using
        <i>fields::phash()</i> will cause an error.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">base</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-09-30</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
