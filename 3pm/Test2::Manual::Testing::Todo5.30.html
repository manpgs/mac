<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Test2::Manual::Testing::Todo(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test2::Manual::Testing::Todo(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test2::Manual::Testing::Todo(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Test2::Manual::Testing::Todo - Tutorial for marking tests as
  TODO.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This tutorial covers the process of marking tests as TODO. It also
    describes how TODO works under the hood.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="THE_TOOL"><a class="permalink" href="#THE_TOOL">THE
  TOOL</a></h1>
<pre>    use Test2::Tools::Basic qw/todo/;
</pre>
<section class="Ss">
<h2 class="Ss">TODO BLOCK</h2>
<p class="Pp">This form is low-magic. All tests inside the block are marked as
    todo, tests outside the block are not todo. You do not need to do any
    variable management. The flaw with this form is that it adds a couple levels
    to the stack, which can break some high-magic tests.</p>
<p class="Pp">Overall this is the preferred form unless you have a special case
    that requires the variable form.</p>
<p class="Pp"></p>
<pre>    todo &quot;Reason for the todo&quot; =&gt; sub {
        ok(0, &quot;fail but todo&quot;);
        ...
    };
</pre>
</section>
<section class="Ss">
<h2 class="Ss">TODO VARIABLE</h2>
<p class="Pp">This form maintains the todo scope for the life of the variable.
    This is useful for tests that are sensitive to scope changes. This closely
    emulates the Test::More style which localized the
    <span class="Li">$TODO</span> package variable. Once the variable is
    destroyed (set it to undef, scope end, etc) the TODO state ends.</p>
<p class="Pp"></p>
<pre>    my $todo = todo &quot;Reason for the todo&quot;;
    ok(0, &quot;fail but todo&quot;);
    ...
    $todo = undef;
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="MANUAL_TODO_EVENTS"><a class="permalink" href="#MANUAL_TODO_EVENTS">MANUAL
  TODO EVENTS</a></h1>
<pre>    use Test2::API qw/context/;
    sub todo_ok {
        my ($bool, $name, $todo) = @_;
        my $ctx = context();
        $ctx-&gt;send_event('Ok', pass =&gt; $bool, effective_pass =&gt; 1, todo =&gt; $todo);
        $ctx-&gt;release;
        return $bool;
    }
</pre>
<p class="Pp">The Test2::Event::Ok event has a
    <span class="Li">&quot;todo&quot;</span> field which should have the todo
    reason. The event also has the <span class="Li">&quot;pass&quot;</span> and
    <span class="Li">&quot;effective_pass&quot;</span> fields. The
    <span class="Li">&quot;pass&quot;</span> field is the actual pass/fail
    value. The <span class="Li">&quot;effective_pass&quot;</span> is used to
    determine if the event is an actual failure (should always be set tot true
    with todo).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="HOW_THE_TODO_TOOLS_WORK_UNDER_THE_HOOD"><a class="permalink" href="#HOW_THE_TODO_TOOLS_WORK_UNDER_THE_HOOD">HOW
  THE TODO TOOLS WORK UNDER THE HOOD</a></h1>
<p class="Pp">The Test2::Todo library gets the current Test2::Hub instance and
    adds a filter. The filter that is added will set the todo and effective pass
    fields on any Test2::Event::Ok events that pass through the hub. The filter
    also converts Test2::Event::Diag events into Test2::Event::Note events.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Test2::Manual - Primary index of the manual.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SOURCE"><a class="permalink" href="#SOURCE">SOURCE</a></h1>
<p class="Pp">The source code repository for Test2-Manual can be found at
    <i>https://github.com/Test-More/Test2-Suite/</i>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="MAINTAINERS"><a class="permalink" href="#MAINTAINERS">MAINTAINERS</a></h1>
<dl class="Bl-tag">
  <dt id="Chad"><a class="permalink" href="#Chad">Chad Granum
    &lt;exodist@cpan.org&gt;</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<dl class="Bl-tag">
  <dt id="Chad~2"><a class="permalink" href="#Chad~2">Chad Granum
    &lt;exodist@cpan.org&gt;</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright 2018 Chad Granum &lt;exodist@cpan.org&gt;.</p>
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
<p class="Pp">See <i>http://dev.perl.org/licenses/</i></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-10-22</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
