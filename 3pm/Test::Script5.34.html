<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Test::Script(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test::Script(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test::Script(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Test::Script - Basic cross-platform tests for scripts</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">version 1.26</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre> use Test2::V0;
 use Test::Script;
 
 script_compiles('script/myscript.pl');
 script_runs(['script/myscript.pl', '--my-argument']);
 
 program_runs(['ls', '/dev']);
 
 done_testing;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The intent of this module is to provide a series of basic tests
    for 80% of the testing you will need to do for scripts in the <i>script</i>
    (or <i>bin</i> as is also commonly used) paths of your Perl
  distribution.</p>
<p class="Pp">It also provides similar functions for testing programs that are
    not Perl scripts.</p>
<p class="Pp">Further, it aims to provide this functionality with perfect
    platform-compatibility, and in a way that is as unobtrusive as possible.</p>
<p class="Pp">That is, if the program works on a platform, then
    <b>Test::Script</b> should always work on that platform as well. Anything
    less than 100% is considered unacceptable.</p>
<p class="Pp">In doing so, it is hoped that <b>Test::Script</b> can become a
    module that you can safely make a dependency of all your modules, without
    risking that your module won't on some platform because of the
  dependency.</p>
<p class="Pp">Where a clash exists between wanting more functionality and
    maintaining platform safety, this module will err on the side of platform
    safety.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FUNCTIONS"><a class="permalink" href="#FUNCTIONS">FUNCTIONS</a></h1>
<section class="Ss">
<h2 class="Ss" id="script_compiles"><a class="permalink" href="#script_compiles">script_compiles</a></h2>
<pre> script_compiles( $script, $test_name );
</pre>
<p class="Pp">The &quot;script_compiles&quot; test calls the script with
    &quot;perl -c script.pl&quot;, and checks that it returns without error.</p>
<p class="Pp">The path it should be passed is a relative Unix-format script
    name. This will be localised when running <span class="Li">&quot;perl
    -c&quot;</span> and if the test fails the local name used will be shown in
    the diagnostic output.</p>
<p class="Pp">Note also that the test will be run with the same perl interpreter
    that is running the test script (and not with the default system perl). This
    will also be shown in the diagnostic output on failure.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="script_runs"><a class="permalink" href="#script_runs">script_runs</a></h2>
<pre> script_runs( $script, $test_name );
 script_runs( \@script_and_arguments, $test_name );
 script_runs( $script, \%options, $test_name );
 script_runs( \@script_and_arguments, \%options, $test_name );
</pre>
<p class="Pp">The &quot;script_runs&quot; test executes the script with
    &quot;perl script.pl&quot; and checks that it returns success.</p>
<p class="Pp">The path it should be passed is a relative unix-format script
    name. This will be localised when running <span class="Li">&quot;perl
    -c&quot;</span> and if the test fails the local name used will be shown in
    the diagnostic output.</p>
<p class="Pp">The test will be run with the same perl interpreter that is
    running the test script (and not with the default system perl). This will
    also be shown in the diagnostic output on failure.</p>
<p class="Pp">You may pass in options as a hash as the second argument.</p>
<dl class="Bl-tag">
  <dt id="exit"><a class="permalink" href="#exit">exit</a></dt>
  <dd>The expected exit value. The default is to use whatever indicates success
      on your platform (usually 0).</dd>
  <dt id="interpreter_options"><a class="permalink" href="#interpreter_options">interpreter_options</a></dt>
  <dd>Array reference of Perl options to be passed to the interpreter. Things
      like <span class="Li">&quot;-w&quot;</span> or
      <span class="Li">&quot;-x&quot;</span> can be passed this way. This may be
      either a single string or an array reference.</dd>
  <dt id="signal"><a class="permalink" href="#signal">signal</a></dt>
  <dd>The expected signal. The default is 0. Use with care! This may not be
      portable, and is known not to work on Windows.</dd>
  <dt id="stdin"><a class="permalink" href="#stdin">stdin</a></dt>
  <dd>The input to be passed into the script via stdin. The value may be one
    of</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="simple"><a class="permalink" href="#simple">simple scalar</a></dt>
  <dd>Is considered to be a filename.</dd>
  <dt id="scalar"><a class="permalink" href="#scalar">scalar reference</a></dt>
  <dd>In which case the input will be drawn from the data contained in the
      referenced scalar.</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp">The behavior for any other types is undefined (the current
    implementation uses Capture::Tiny). Any already opened stdin will be
  closed.</p>
</div>
<dl class="Bl-tag">
  <dt id="stdout"><a class="permalink" href="#stdout">stdout</a></dt>
  <dd>Where to send the standard output to. If you use this option, then the the
      behavior of the <span class="Li">&quot;script_stdout_&quot;</span>
      functions below are undefined. The value may be one of</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="simple~2"><a class="permalink" href="#simple~2">simple scalar</a></dt>
  <dd>Is considered to be a filename.</dd>
  <dt id="scalar~2"><a class="permalink" href="#scalar~2">scalar
    reference</a></dt>
  <dd></dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp">In which case the standard output will be places into the
    referenced scalar</p>
<p class="Pp">The behavior for any other types is undefined (the current
    implementation uses Capture::Tiny).</p>
</div>
<dl class="Bl-tag">
  <dt id="stderr"><a class="permalink" href="#stderr">stderr</a></dt>
  <dd>Same as <span class="Li">&quot;stdout&quot;</span> above, except for
      stderr.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="script_stdout_is"><a class="permalink" href="#script_stdout_is">script_stdout_is</a></h2>
<pre> script_stdout_is $expected_stdout, $test_name;
</pre>
<p class="Pp">Tests if the output to stdout from the previous
    &quot;script_runs&quot; matches the expected value exactly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="script_stdout_isnt"><a class="permalink" href="#script_stdout_isnt">script_stdout_isnt</a></h2>
<pre> script_stdout_is $expected_stdout, $test_name;
</pre>
<p class="Pp">Tests if the output to stdout from the previous
    &quot;script_runs&quot; does NOT match the expected value exactly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="script_stdout_like"><a class="permalink" href="#script_stdout_like">script_stdout_like</a></h2>
<pre> script_stdout_like $regex, $test_name;
</pre>
<p class="Pp">Tests if the output to stdout from the previous
    &quot;script_runs&quot; matches the regular expression.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="script_stdout_unlike"><a class="permalink" href="#script_stdout_unlike">script_stdout_unlike</a></h2>
<pre> script_stdout_unlike $regex, $test_name;
</pre>
<p class="Pp">Tests if the output to stdout from the previous
    &quot;script_runs&quot; does NOT match the regular expression.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="script_stderr_is"><a class="permalink" href="#script_stderr_is">script_stderr_is</a></h2>
<pre> script_stderr_is $expected_stderr, $test_name;
</pre>
<p class="Pp">Tests if the output to stderr from the previous
    &quot;script_runs&quot; matches the expected value exactly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="script_stderr_isnt"><a class="permalink" href="#script_stderr_isnt">script_stderr_isnt</a></h2>
<pre> script_stderr_is $expected_stderr, $test_name;
</pre>
<p class="Pp">Tests if the output to stderr from the previous
    &quot;script_runs&quot; does NOT match the expected value exactly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="script_stderr_like"><a class="permalink" href="#script_stderr_like">script_stderr_like</a></h2>
<pre> script_stderr_like $regex, $test_name;
</pre>
<p class="Pp">Tests if the output to stderr from the previous
    &quot;script_runs&quot; matches the regular expression.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="script_stderr_unlike"><a class="permalink" href="#script_stderr_unlike">script_stderr_unlike</a></h2>
<pre> script_stderr_unlike $regex, $test_name;
</pre>
<p class="Pp">Tests if the output to stderr from the previous
    &quot;script_runs&quot; does NOT match the regular expression.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="program_runs"><a class="permalink" href="#program_runs">program_runs</a></h2>
<pre> program_runs( $program, $test_name );
 program_runs( \@program_and_arguments, $test_name );
 program_runs( $program, \%options, $test_name );
 program_runs( \@program_and_arguments, \%options, $test_name );
</pre>
<p class="Pp">The &quot;program_runs&quot; test executes the given program and
    checks that it returns success. This function works like
    &quot;script_runs&quot; except:</p>
<ul class="Bl-bullet">
  <li>The path <span class="Li">$program</span> or
      <span class="Li">@program_and_arguments</span> is passed as-is to
      <b>system()</b> &lt;https://perldoc.perl.org/functions/system.html&gt;.
      This means <span class="Li">&quot;program_runs&quot;</span> can test any
      program, not just Perl scripts.</li>
  <li>The <span class="Li">%options</span> do not support the
      <span class="Li">&quot;interpreter_options&quot;</span> key.</li>
</ul>
<p class="Pp">See File::Spec or Path::Class for routines useful in building
    pathnames in a cross-platform way.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="program_stdout_is"><a class="permalink" href="#program_stdout_is">program_stdout_is</a></h2>
<pre> program_stdout_is $expected_stdout, $test_name;
</pre>
<p class="Pp">Tests if the output to stdout from the previous
    &quot;program_runs&quot; matches the expected value exactly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="program_stdout_isnt"><a class="permalink" href="#program_stdout_isnt">program_stdout_isnt</a></h2>
<pre> program_stdout_is $expected_stdout, $test_name;
</pre>
<p class="Pp">Tests if the output to stdout from the previous
    &quot;program_runs&quot; does NOT match the expected value exactly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="program_stdout_like"><a class="permalink" href="#program_stdout_like">program_stdout_like</a></h2>
<pre> program_stdout_like $regex, $test_name;
</pre>
<p class="Pp">Tests if the output to stdout from the previous
    &quot;program_runs&quot; matches the regular expression.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="program_stdout_unlike"><a class="permalink" href="#program_stdout_unlike">program_stdout_unlike</a></h2>
<pre> program_stdout_unlike $regex, $test_name;
</pre>
<p class="Pp">Tests if the output to stdout from the previous
    &quot;program_runs&quot; does NOT match the regular expression.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="program_stderr_is"><a class="permalink" href="#program_stderr_is">program_stderr_is</a></h2>
<pre> program_stderr_is $expected_stderr, $test_name;
</pre>
<p class="Pp">Tests if the output to stderr from the previous
    &quot;program_runs&quot; matches the expected value exactly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="program_stderr_isnt"><a class="permalink" href="#program_stderr_isnt">program_stderr_isnt</a></h2>
<pre> program_stderr_is $expected_stderr, $test_name;
</pre>
<p class="Pp">Tests if the output to stderr from the previous
    &quot;program_runs&quot; does NOT match the expected value exactly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="program_stderr_like"><a class="permalink" href="#program_stderr_like">program_stderr_like</a></h2>
<pre> program_stderr_like $regex, $test_name;
</pre>
<p class="Pp">Tests if the output to stderr from the previous
    &quot;program_runs&quot; matches the regular expression.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="program_stderr_unlike"><a class="permalink" href="#program_stderr_unlike">program_stderr_unlike</a></h2>
<pre> program_stderr_unlike $regex, $test_name;
</pre>
<p class="Pp">Tests if the output to stderr from the previous
    &quot;program_runs&quot; does NOT match the regular expression.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="CAVEATS"><a class="permalink" href="#CAVEATS">CAVEATS</a></h1>
<p class="Pp">This module is fully supported back to Perl 5.8.1.</p>
<p class="Pp">The STDIN handle will be closed when using script_runs with the
    stdin option. An older version used IPC::Run3, which attempted to save
    STDIN, but apparently this cannot be done consistently or portably. We now
    use Capture::Tiny instead and explicitly do not support saving STDIN
    handles.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Test::Script::Run, Test2::Suite</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Original author: Adam Kennedy</p>
<p class="Pp">Current maintainer: Graham Ollis &lt;plicease@cpan.org&gt;</p>
<p class="Pp">Contributors:</p>
<p class="Pp">Brendan Byrd</p>
<p class="Pp">Chris White &lt;cxw@cpan.org&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This software is copyright (c) 2019 by Adam Kennedy.</p>
<p class="Pp">This is free software; you can redistribute it and/or modify it
    under the same terms as the Perl 5 programming language system itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-10-26</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
