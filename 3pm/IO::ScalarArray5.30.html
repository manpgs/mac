<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>IO::ScalarArray(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">IO::ScalarArray(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">IO::ScalarArray(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">IO::ScalarArray - IO:: interface for reading/writing an array of
    scalars</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">Perform I/O on strings, using the basic OO interface...</p>
<p class="Pp"></p>
<pre>    use IO::ScalarArray;
    @data = (&quot;My mes&quot;, &quot;sage:\n&quot;);
    ### Open a handle on an array, and append to it:
    $AH = new IO::ScalarArray \@data;
    $AH-&gt;print(&quot;Hello&quot;);       
    $AH-&gt;print(&quot;, world!\nBye now!\n&quot;);  
    print &quot;The array is now: &quot;, @data, &quot;\n&quot;;
    ### Open a handle on an array, read it line-by-line, then close it:
    $AH = new IO::ScalarArray \@data;
    while (defined($_ = $AH-&gt;getline)) { 
        print &quot;Got line: $_&quot;;
    }
    $AH-&gt;close;
    ### Open a handle on an array, and slurp in all the lines:
    $AH = new IO::ScalarArray \@data;
    print &quot;All lines:\n&quot;, $AH-&gt;getlines; 
    ### Get the current position (either of two ways):
    $pos = $AH-&gt;getpos;         
    $offset = $AH-&gt;tell;  
    ### Set the current position (either of two ways):
    $AH-&gt;setpos($pos);        
    $AH-&gt;seek($offset, 0);
    ### Open an anonymous temporary array:
    $AH = new IO::ScalarArray;
    $AH-&gt;print(&quot;Hi there!&quot;);
    print &quot;I printed: &quot;, @{$AH-&gt;aref}, &quot;\n&quot;;      ### get at value
</pre>
<p class="Pp">Don't like OO for your I/O? No problem. Thanks to the magic of an
    invisible <b>tie()</b>, the following now works out of the box, just as it
    does with IO::Handle:</p>
<p class="Pp"></p>
<pre>    use IO::ScalarArray;
    @data = (&quot;My mes&quot;, &quot;sage:\n&quot;);
    ### Open a handle on an array, and append to it:
    $AH = new IO::ScalarArray \@data;
    print $AH &quot;Hello&quot;;    
    print $AH &quot;, world!\nBye now!\n&quot;;
    print &quot;The array is now: &quot;, @data, &quot;\n&quot;;
    ### Open a handle on a string, read it line-by-line, then close it:
    $AH = new IO::ScalarArray \@data;
    while (&lt;$AH&gt;) {
        print &quot;Got line: $_&quot;;
    }
    close $AH;
    ### Open a handle on a string, and slurp in all the lines:
    $AH = new IO::ScalarArray \@data;
    print &quot;All lines:\n&quot;, &lt;$AH&gt;;
    ### Get the current position (WARNING: requires 5.6):
    $offset = tell $AH;
    ### Set the current position (WARNING: requires 5.6):
    seek $AH, $offset, 0;
    ### Open an anonymous temporary scalar:
    $AH = new IO::ScalarArray;
    print $AH &quot;Hi there!&quot;;
    print &quot;I printed: &quot;, @{$AH-&gt;aref}, &quot;\n&quot;;      ### get at value
</pre>
<p class="Pp">And for you folks with 1.x code out there: the old <b>tie()</b>
    style still works, though this is <i>unnecessary and deprecated</i>:</p>
<p class="Pp"></p>
<pre>    use IO::ScalarArray;
    ### Writing to a scalar...
    my @a; 
    tie *OUT, 'IO::ScalarArray', \@a;
    print OUT &quot;line 1\nline 2\n&quot;, &quot;line 3\n&quot;;
    print &quot;Array is now: &quot;, @a, &quot;\n&quot;
    ### Reading and writing an anonymous scalar... 
    tie *OUT, 'IO::ScalarArray';
    print OUT &quot;line 1\nline 2\n&quot;, &quot;line 3\n&quot;;
    tied(OUT)-&gt;seek(0,0);
    while (&lt;OUT&gt;) { 
        print &quot;Got line: &quot;, $_;
    }
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This class is part of the IO::Stringy distribution; see
    IO::Stringy for change log and general information.</p>
<p class="Pp">The IO::ScalarArray class implements objects which behave just
    like IO::Handle (or FileHandle) objects, except that you may use them to
    write to (or read from) arrays of scalars. Logically, an array of scalars
    defines an in-core &quot;file&quot; whose contents are the concatenation of
    the scalars in the array. The handles created by this class are
    automatically tiehandle'd (though please see &quot;WARNINGS&quot; for
    information relevant to your Perl version).</p>
<p class="Pp">For writing large amounts of data with individual <b>print()</b>
    statements, this class is likely to be more efficient than IO::Scalar.</p>
<p class="Pp">Basically, this:</p>
<p class="Pp"></p>
<pre>    my @a;
    $AH = new IO::ScalarArray \@a;
    $AH-&gt;print(&quot;Hel&quot;, &quot;lo, &quot;);         ### OO style
    $AH-&gt;print(&quot;world!\n&quot;);            ### ditto
</pre>
<p class="Pp">Or this:</p>
<p class="Pp"></p>
<pre>    my @a;
    $AH = new IO::ScalarArray \@a;
    print $AH &quot;Hel&quot;, &quot;lo, &quot;;           ### non-OO style
    print $AH &quot;world!\n&quot;;              ### ditto
</pre>
<p class="Pp">Causes <span class="Li">@a</span> to be set to the following array
    of 3 strings:</p>
<p class="Pp"></p>
<pre>    ( &quot;Hel&quot; , 
      &quot;lo, &quot; , 
      &quot;world!\n&quot; )
</pre>
<p class="Pp">See IO::Scalar and compare with this class.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="PUBLIC_INTERFACE"><a class="permalink" href="#PUBLIC_INTERFACE">PUBLIC
  INTERFACE</a></h1>
<section class="Ss">
<h2 class="Ss" id="Construction"><a class="permalink" href="#Construction">Construction</a></h2>
<dl class="Bl-tag">
  <dt id="new"><a class="permalink" href="#new">new [ARGS...]</a></dt>
  <dd><i>Class method.</i> Return a new, unattached array handle. If any
      arguments are given, they're sent to <b>open()</b>.</dd>
  <dt id="open"><a class="permalink" href="#open">open [ARRAYREF]</a></dt>
  <dd><i>Instance method.</i> Open the array handle on a new array, pointed to
      by ARRAYREF. If no ARRAYREF is given, a &quot;private&quot; array is
      created to hold the file data.
    <p class="Pp">Returns the self object on success, undefined on error.</p>
  </dd>
  <dt id="opened"><a class="permalink" href="#opened">opened</a></dt>
  <dd><i>Instance method.</i> Is the array handle opened on something?</dd>
  <dt id="close"><a class="permalink" href="#close">close</a></dt>
  <dd><i>Instance method.</i> Disassociate the array handle from its underlying
      array. Done automatically on destroy.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Input_and_output"><a class="permalink" href="#Input_and_output">Input
  and output</a></h2>
<dl class="Bl-tag">
  <dt id="flush"><a class="permalink" href="#flush">flush</a></dt>
  <dd><i>Instance method.</i> No-op, provided for OO compatibility.</dd>
  <dt id="fileno"><a class="permalink" href="#fileno">fileno</a></dt>
  <dd><i>Instance method.</i> No-op, returns undef</dd>
  <dt id="getc"><a class="permalink" href="#getc">getc</a></dt>
  <dd><i>Instance method.</i> Return the next character, or undef if none
      remain. This does a <b>read</b>(1), which is somewhat costly.</dd>
  <dt id="getline"><a class="permalink" href="#getline">getline</a></dt>
  <dd><i>Instance method.</i> Return the next line, or undef on end of data. Can
      safely be called in an array context. Currently, lines are delimited by
      &quot;\n&quot;.</dd>
  <dt id="getlines"><a class="permalink" href="#getlines">getlines</a></dt>
  <dd><i>Instance method.</i> Get all remaining lines. It will <b>croak()</b> if
      accidentally called in a scalar context.</dd>
  <dt id="print"><a class="permalink" href="#print">print ARGS...</a></dt>
  <dd><i>Instance method.</i> Print ARGS to the underlying array.
    <p class="Pp">Currently, this always causes a &quot;seek to the end of the
        array&quot; and generates a new array entry. This may change in the
        future.</p>
  </dd>
  <dt id="read"><a class="permalink" href="#read">read BUF, NBYTES,
    [OFFSET];</a></dt>
  <dd><i>Instance method.</i> Read some bytes from the array. Returns the number
      of bytes actually read, 0 on end-of-file, undef on error.</dd>
  <dt id="write"><a class="permalink" href="#write">write BUF, NBYTES,
    [OFFSET];</a></dt>
  <dd><i>Instance method.</i> Write some bytes into the array.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Seeking/telling_and_other_attributes"><a class="permalink" href="#Seeking/telling_and_other_attributes">Seeking/telling
  and other attributes</a></h2>
<dl class="Bl-tag">
  <dt id="autoflush"><a class="permalink" href="#autoflush">autoflush</a></dt>
  <dd><i>Instance method.</i> No-op, provided for OO compatibility.</dd>
  <dt id="binmode"><a class="permalink" href="#binmode">binmode</a></dt>
  <dd><i>Instance method.</i> No-op, provided for OO compatibility.</dd>
  <dt id="clearerr"><a class="permalink" href="#clearerr">clearerr</a></dt>
  <dd><i>Instance method.</i> Clear the error and EOF flags. A no-op.</dd>
  <dt id="eof"><a class="permalink" href="#eof">eof</a></dt>
  <dd><i>Instance method.</i> Are we at end of file?</dd>
  <dt id="seek"><a class="permalink" href="#seek">seek POS,WHENCE</a></dt>
  <dd><i>Instance method.</i> Seek to a given position in the stream. Only a
      WHENCE of 0 (SEEK_SET) is supported.</dd>
  <dt id="tell"><a class="permalink" href="#tell">tell</a></dt>
  <dd><i>Instance method.</i> Return the current position in the stream, as a
      numeric offset.</dd>
  <dt id="setpos"><a class="permalink" href="#setpos">setpos POS</a></dt>
  <dd><i>Instance method.</i> Seek to a given position in the array, using the
      opaque <b>getpos()</b> value. Don't expect this to be a number.</dd>
  <dt id="getpos"><a class="permalink" href="#getpos">getpos</a></dt>
  <dd><i>Instance method.</i> Return the current position in the array, as an
      opaque value. Don't expect this to be a number.</dd>
  <dt id="aref"><a class="permalink" href="#aref">aref</a></dt>
  <dd><i>Instance method.</i> Return a reference to the underlying array.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="WARNINGS"><a class="permalink" href="#WARNINGS">WARNINGS</a></h1>
<p class="Pp">Perl's TIEHANDLE spec was incomplete prior to 5.005_57; it was
    missing support for <span class="Li">&quot;seek()&quot;</span>,
    <span class="Li">&quot;tell()&quot;</span>, and
    <span class="Li">&quot;eof()&quot;</span>. Attempting to use these functions
    with an IO::ScalarArray will not work prior to 5.005_57. IO::ScalarArray
    will not have the relevant methods invoked; and even worse, this kind of bug
    can lie dormant for a while. If you turn warnings on (via
    <span class="Li">$^W</span> or <span class="Li">&quot;perl -w&quot;</span>),
    and you see something like this...</p>
<p class="Pp"></p>
<pre>    attempt to seek on unopened filehandle
</pre>
<p class="Pp">...then you are probably trying to use one of these functions on
    an IO::ScalarArray with an old Perl. The remedy is to simply use the OO
    version; e.g.:</p>
<p class="Pp"></p>
<pre>    $AH-&gt;seek(0,0);    ### GOOD: will work on any 5.005
    seek($AH,0,0);     ### WARNING: will only work on 5.005_57 and beyond
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp"><span class="Li">$Id:</span> ScalarArray.pm,v 1.7 2005/02/10
    21:21:53 dfs Exp $</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<section class="Ss">
<h2 class="Ss" id="Primary_Maintainer"><a class="permalink" href="#Primary_Maintainer">Primary
  Maintainer</a></h2>
<p class="Pp">Dianne Skoll (<i>dfs@roaringpenguin.com</i>).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Principal_author"><a class="permalink" href="#Principal_author">Principal
  author</a></h2>
<p class="Pp">Eryq (<i>eryq@zeegee.com</i>). President, ZeeGee Software Inc
    (<i>http://www.zeegee.com</i>).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Other_contributors"><a class="permalink" href="#Other_contributors">Other
  contributors</a></h2>
<p class="Pp">Thanks to the following individuals for their invaluable
    contributions (if I've forgotten or misspelled your name, please email
  me!):</p>
<p class="Pp"><i>Andy Glew,</i> for suggesting
    <span class="Li">&quot;getc()&quot;</span>.</p>
<p class="Pp"><i>Brandon Browning,</i> for suggesting
    <span class="Li">&quot;opened()&quot;</span>.</p>
<p class="Pp"><i>Eric L. Brine,</i> for his offset-using <b>read()</b> and
    <b>write()</b> implementations.</p>
<p class="Pp"><i>Doug Wilson,</i> for the IO::Handle inheritance and automatic
    tie-ing.</p>
</section>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2015-04-22</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
