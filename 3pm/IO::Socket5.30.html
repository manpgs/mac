<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>IO::Socket(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">IO::Socket(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">IO::Socket(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">IO::Socket - Object interface to socket communications</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    use IO::Socket;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><span class="Li">&quot;IO::Socket&quot;</span> provides an object
    interface to creating and using sockets. It is built upon the IO::Handle
    interface and inherits all the methods defined by IO::Handle.</p>
<p class="Pp"><span class="Li">&quot;IO::Socket&quot;</span> only defines
    methods for those operations which are common to all types of socket.
    Operations which are specified to a socket in a particular domain have
    methods defined in sub classes of
    <span class="Li">&quot;IO::Socket&quot;</span></p>
<p class="Pp"><span class="Li">&quot;IO::Socket&quot;</span> will export all
    functions (and constants) defined by Socket.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONSTRUCTOR"><a class="permalink" href="#CONSTRUCTOR">CONSTRUCTOR</a></h1>
<dl class="Bl-tag">
  <dt id="new"><a class="permalink" href="#new">new ( [ARGS] )</a></dt>
  <dd>Creates an <span class="Li">&quot;IO::Socket&quot;</span>, which is a
      reference to a newly created symbol (see the
      <span class="Li">&quot;Symbol&quot;</span> package).
      <span class="Li">&quot;new&quot;</span> optionally takes arguments, these
      arguments are in key-value pairs. <span class="Li">&quot;new&quot;</span>
      only looks for one key <span class="Li">&quot;Domain&quot;</span> which
      tells new which domain the socket will be in. All other arguments will be
      passed to the configuration method of the package for that domain, See
      below.
    <p class="Pp"><b>NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE
        NOTE</b></p>
    <p class="Pp">As of VERSION 1.18 all IO::Socket objects have autoflush
        turned on by default. This was not the case with earlier releases.</p>
    <p class="Pp"><b>NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE NOTE
        NOTE</b></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<p class="Pp">See perlfunc for complete descriptions of each of the following
    supported <span class="Li">&quot;IO::Socket&quot;</span> methods, which are
    just front ends for the corresponding built-in functions:</p>
<p class="Pp"></p>
<pre>
    socket
    socketpair
    bind
    listen
    accept
    send
    recv
    peername (getpeername)
    sockname (getsockname)
    shutdown
</pre>
<p class="Pp">Some methods take slightly different arguments to those defined in
    perlfunc in attempt to make the interface more flexible. These are</p>
<dl class="Bl-tag">
  <dt id="accept(_"><a class="permalink" href="#accept(_">accept([PKG])</a></dt>
  <dd>perform the system call <span class="Li">&quot;accept&quot;</span> on the
      socket and return a new object. The new object will be created in the same
      class as the listen socket, unless <span class="Li">&quot;PKG&quot;</span>
      is specified. This object can be used to communicate with the client that
      was trying to connect.
    <p class="Pp">In a scalar context the new socket is returned, or undef upon
        failure. In a list context a two-element array is returned containing
        the new socket and the peer address; the list will be empty upon
        failure.</p>
    <p class="Pp">The timeout in the [PKG] can be specified as zero to effect a
        &quot;poll&quot;, but you shouldn't do that because a new IO::Select
        object will be created behind the scenes just to do the single poll.
        This is horrendously inefficient. Use rather true <b>select()</b> with a
        zero timeout on the handle, or non-blocking IO.</p>
  </dd>
  <dt id="socketpair("><a class="permalink" href="#socketpair(">socketpair(DOMAIN,
    TYPE, PROTOCOL)</a></dt>
  <dd>Call <span class="Li">&quot;socketpair&quot;</span> and return a list of
      two sockets created, or an empty list on failure.</dd>
</dl>
<p class="Pp">Additional methods that are provided are:</p>
<dl class="Bl-tag">
  <dt id="atmark"><a class="permalink" href="#atmark">atmark</a></dt>
  <dd>True if the socket is currently positioned at the urgent data mark, false
      otherwise.
    <p class="Pp"></p>
    <pre>
    use IO::Socket;

    my $sock = IO::Socket::INET-&gt;new('some_server');
    $sock-&gt;read($data, 1024) until $sock-&gt;atmark;
    </pre>
    <p class="Pp">Note: this is a reasonably new addition to the family of
        socket functions, so all systems may not support this yet. If it is
        unsupported by the system, an attempt to use this method will abort the
        program.</p>
    <p class="Pp">The <b>atmark()</b> functionality is also exportable as
        <b>sockatmark()</b> function:</p>
    <p class="Pp"></p>
    <pre>
        use IO::Socket 'sockatmark';
    </pre>
    <p class="Pp">This allows for a more traditional use of <b>sockatmark()</b>
        as a procedural socket function. If your system does not support
        <b>sockatmark()</b>, the <span class="Li">&quot;use&quot;</span>
        declaration will fail at compile time.</p>
  </dd>
  <dt id="connected"><a class="permalink" href="#connected">connected</a></dt>
  <dd>If the socket is in a connected state, the peer address is returned. If
      the socket is not in a connected state, undef is returned.
    <p class="Pp">Note that <b>connected()</b> considers a half-open TCP socket
        to be &quot;in a connected state&quot;. Specifically, <b>connected()</b>
        does not distinguish between the <b>ESTABLISHED</b> and
        <b>CLOSE-WAIT</b> TCP states; it returns the peer address, rather than
        undef, in either case. Thus, in general, <b>connected()</b> cannot be
        used to reliably learn whether the peer has initiated a graceful
        shutdown because in most cases (see below) the local TCP state machine
        remains in <b>CLOSE-WAIT</b> until the local application calls
        <b>shutdown()</b> or <b>close()</b>; only at that point does
        <b>connected()</b> return undef.</p>
    <p class="Pp">The &quot;in most cases&quot; hedge is because local TCP state
        machine behavior may depend on the peer's socket options. In particular,
        if the peer socket has SO_LINGER enabled with a zero timeout, then the
        peer's <b>close()</b> will generate a RST segment, upon receipt of which
        the local TCP transitions immediately to <b>CLOSED</b>, and in that
        state, <b>connected()</b> <i>will</i> return undef.</p>
  </dd>
  <dt id="protocol"><a class="permalink" href="#protocol">protocol</a></dt>
  <dd>Returns the numerical number for the protocol being used on the socket, if
      known. If the protocol is unknown, as with an AF_UNIX socket, zero is
      returned.</dd>
  <dt id="sockdomain"><a class="permalink" href="#sockdomain">sockdomain</a></dt>
  <dd>Returns the numerical number for the socket domain type. For example, for
      an AF_INET socket the value of &amp;AF_INET will be returned.</dd>
  <dt id="sockopt("><a class="permalink" href="#sockopt(">sockopt(OPT [,
    VAL])</a></dt>
  <dd>Unified method to both set and get options in the SOL_SOCKET level. If
      called with one argument then getsockopt is called, otherwise setsockopt
      is called.</dd>
  <dt id="getsockopt("><a class="permalink" href="#getsockopt(">getsockopt(LEVEL,
    OPT)</a></dt>
  <dd>Get option associated with the socket. Other levels than SOL_SOCKET may be
      specified here.</dd>
  <dt id="setsockopt("><a class="permalink" href="#setsockopt(">setsockopt(LEVEL,
    OPT, VAL)</a></dt>
  <dd>Set option associated with the socket. Other levels than SOL_SOCKET may be
      specified here.</dd>
  <dt id="socktype"><a class="permalink" href="#socktype">socktype</a></dt>
  <dd>Returns the numerical number for the socket type. For example, for a
      SOCK_STREAM socket the value of &amp;SOCK_STREAM will be returned.</dd>
  <dt id="timeout(_"><a class="permalink" href="#timeout(_">timeout([VAL])</a></dt>
  <dd>Set or get the timeout value (in seconds) associated with this socket. If
      called without any arguments then the current setting is returned. If
      called with an argument the current setting is changed and the previous
      value returned.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="LIMITATIONS"><a class="permalink" href="#LIMITATIONS">LIMITATIONS</a></h1>
<p class="Pp">On some systems, for an IO::Socket object created with
    <b>new_from_fd()</b>, or created with <b>accept()</b> from such an object,
    the <b>protocol()</b>, <b>sockdomain()</b> and <b>socktype()</b> methods may
    return undef.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Socket, IO::Handle, IO::Socket::INET, IO::Socket::UNIX</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Graham Barr. <b>atmark()</b> by Lincoln Stein. Currently
    maintained by the Perl Porters. Please report all bugs to
    &lt;perlbug@perl.org&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright (c) 1997-8 Graham Barr &lt;gbarr@pobox.com&gt;. All
    rights reserved. This program is free software; you can redistribute it
    and/or modify it under the same terms as Perl itself.</p>
<p class="Pp">The <b>atmark()</b> implementation: Copyright 2001, Lincoln Stein
    &lt;lstein@cshl.org&gt;. This module is distributed under the same terms as
    Perl itself. Feel free to use, modify and redistribute it as long as you
    retain the correct attribution.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-10-21</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
