<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Locale::Maketext::Extract(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Locale::Maketext::Extract(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Locale::Maketext::Extract(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Locale::Maketext::Extract - Extract translatable strings from
    source</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">version 1.00</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    my $Ext = Locale::Maketext::Extract-&gt;new;
    $Ext-&gt;read_po('messages.po');
    $Ext-&gt;extract_file($_) for &lt;*.pl&gt;;
    # Set $entries_are_in_gettext_format if the .pl files above use
    # loc('%1') instead of loc('[_1]')
    $Ext-&gt;compile($entries_are_in_gettext_format);
    $Ext-&gt;write_po('messages.po');
    -----------------------------------
    ### Specifying parser plugins ###
    my $Ext = Locale::Maketext::Extract-&gt;new(
        # Specify which parser plugins to use
        plugins =&gt; {
            # Use Perl parser, process files with extension .pl .pm .cgi
            perl =&gt; [],
            # Use YAML parser, process all files
            yaml =&gt; ['*'],
            # Use TT2 parser, process files with extension .tt2 .tt .html
            # or which match the regex
            tt2  =&gt; [
                'tt2',
                'tt',
                'html',
                qr/\.tt2?\./
            ],
            # Use My::Module as a parser for all files
            'My::Module' =&gt; ['*'],
        },
        # Warn if a parser can't process a file or problems loading a plugin
        warnings =&gt; 1,
        # List processed files
        verbose =&gt; 1,
    );
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This module can extract translatable strings from files, and write
    them back to PO files. It can also parse existing PO files and merge their
    contents with newly extracted strings.</p>
<p class="Pp">A command-line utility, xgettext.pl, is installed with this module
    as well.</p>
<p class="Pp">The format parsers are loaded as plugins, so it is possible to
    define your own parsers.</p>
<p class="Pp">Following formats of input files are supported:</p>
<dl class="Bl-tag">
  <dt id="Perl"><a class="permalink" href="#Perl">Perl source files (plugin:
    perl)</a></dt>
  <dd>Valid localization function names are:
      <span class="Li">&quot;translate&quot;</span>,
      <span class="Li">&quot;maketext&quot;</span>,
      <span class="Li">&quot;gettext&quot;</span>,
      <span class="Li">&quot;l&quot;</span>,
      <span class="Li">&quot;loc&quot;</span>,
      <span class="Li">&quot;x&quot;</span>,
      <span class="Li">&quot;_&quot;</span> and
      <span class="Li">&quot;__&quot;</span>.
    <p class="Pp">For a slightly more accurate, but much slower Perl parser, you
        can use the PPI plugin. This does not have a short name (like
        <span class="Li">&quot;perl&quot;</span>), but must be specified in
        full.</p>
  </dd>
  <dt id="HTML::Mason"><a class="permalink" href="#HTML::Mason">HTML::Mason
    (Mason 1) and Mason (Mason 2) (plugin: mason)</a></dt>
  <dd>HTML::Mason (aka Mason 1)
    <br/>
     Strings inside &lt;&amp;|/l&gt;...&lt;/&amp;&gt; and
      &lt;&amp;|/loc&gt;...&lt;/&amp;&gt; are extracted.
    <p class="Pp">Mason (aka Mason 2) Strings inside &lt;% $.floc {
        %&gt;...&lt;/%&gt; or &lt;% $.fl { %&gt;...&lt;/%&gt; or &lt;%
        <span class="Li">$self</span>-&gt;floc { %&gt;...&lt;/%&gt; or &lt;%
        <span class="Li">$self</span>-&gt;fl { %&gt;...&lt;/%&gt; are
      extracted.</p>
  </dd>
  <dt id="Template"><a class="permalink" href="#Template">Template Toolkit
    (plugin: tt2)</a></dt>
  <dd>Valid forms are:
    <p class="Pp"></p>
    <pre>  [% | l(arg1,argn) %]string[% END %]
  [% 'string' | l(arg1,argn) %]
  [% l('string',arg1,argn) %]
  FILTER and | are interchangeable
  l and loc are interchangeable
  args are optional
    </pre>
  </dd>
  <dt id="Text::Template"><a class="permalink" href="#Text::Template">Text::Template
    (plugin: text)</a></dt>
  <dd>Sentences between <span class="Li">&quot;STARTxxx&quot;</span> and
      <span class="Li">&quot;ENDxxx&quot;</span> are extracted
    individually.</dd>
  <dt id="YAML"><a class="permalink" href="#YAML">YAML (plugin: yaml)</a></dt>
  <dd>Valid forms are _&quot;string&quot; or _'string', eg:
    <p class="Pp"></p>
    <pre>    title: _&quot;My title&quot;
    desc:  _'My &quot;quoted&quot; string'
    </pre>
    <p class="Pp">Quotes do not have to be escaped, so you could also do:</p>
    <p class="Pp"></p>
    <pre>    desc:  _&quot;My &quot;quoted&quot; string&quot;
    </pre>
  </dd>
  <dt id="HTML::FormFu"><a class="permalink" href="#HTML::FormFu">HTML::FormFu
    (plugin: formfu)</a></dt>
  <dd>HTML::FormFu uses a config-file to generate forms, with built in support
      for localizing errors, labels etc.
    <p class="Pp">We extract the text after <span class="Li">&quot;_loc:
        &quot;</span>:
      <br/>
       content_loc: this is the string
      <br/>
       message_loc: ['Max string length: [_1]', 10]</p>
  </dd>
  <dt id="Generic"><a class="permalink" href="#Generic">Generic Template
    (plugin: generic)</a></dt>
  <dd>Strings inside {{...}} are extracted.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss" id="Constructor"><a class="permalink" href="#Constructor">Constructor</a></h2>
<pre>    new()
    new(
        plugins   =&gt; {...},
        warnings  =&gt; 1 | 0,
        verbose   =&gt; 0 | 1 | 2 | 3,
    )
</pre>
<p class="Pp">See &quot;Plugins&quot;, &quot;Warnings&quot; and
    &quot;Verbose&quot; for details</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Plugins"><a class="permalink" href="#Plugins">Plugins</a></h2>
<pre>    $ext-&gt;plugins({...});
</pre>
<p class="Pp">Locale::Maketext::Extract uses plugins (see below for the list) to
    parse different formats.</p>
<p class="Pp">Each plugin can also specify which file types it can parse.</p>
<p class="Pp"></p>
<pre>    # use only the YAML plugin
    # only parse files with the default extension list defined in the plugin
    # ie .yaml .yml .conf
    $ext-&gt;plugins({
        yaml =&gt; [],
    })
    # use only the Perl plugin
    # parse all file types
    $ext-&gt;plugins({
        perl =&gt; '*'
    })
    $ext-&gt;plugins({
        tt2  =&gt; [
            'tt',              # matches base filename against /\.tt$/
            qr/\.tt2?\./,      # matches base filename against regex
            \&amp;my_filter,       # codref called
        ]
    })
    sub my_filter {
        my ($base_filename,$path_to_file) = @_;
        return 1 | 0;
    }
    # Specify your own parser
    # only parse files with the default extension list defined in the plugin
    $ext-&gt;plugins({
        'My::Extract::Parser'  =&gt; []
    })
</pre>
<p class="Pp">By default, if no plugins are specified, it first tries to
    determine which plugins are intended specifically for the file type and uses
    them. If no such plugins are found, it then uses all of the builtin plugins,
    overriding the file types specified in each.</p>
<p class="Pp"><i>Available plugins</i></p>
<dl class="Bl-tag">
  <dt>&quot;perl&quot; : Locale::Maketext::Extract::Plugin::Perl</dt>
  <dd>For a slightly more accurate but much slower Perl parser, you can use the
      PPI plugin. This does not have a short name, but must be specified in
      full, ie: Locale::Maketext::Extract::Plugin::PPI</dd>
  <dt>&quot;tt2&quot; : Locale::Maketext::Extract::Plugin::TT2</dt>
  <dd></dd>
  <dt>&quot;yaml&quot; : Locale::Maketext::Extract::Plugin::YAML</dt>
  <dd></dd>
  <dt>&quot;formfu&quot; : Locale::Maketext::Extract::Plugin::FormFu</dt>
  <dd></dd>
  <dt>&quot;mason&quot; : Locale::Maketext::Extract::Plugin::Mason</dt>
  <dd></dd>
  <dt>&quot;text&quot; : Locale::Maketext::Extract::Plugin::TextTemplate</dt>
  <dd></dd>
  <dt>&quot;generic&quot; : Locale::Maketext::Extract::Plugin::Generic</dt>
  <dd></dd>
</dl>
<p class="Pp">Also, see Locale::Maketext::Extract::Plugin::Base for details of
    how to write your own plugin.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Warnings"><a class="permalink" href="#Warnings">Warnings</a></h2>
<p class="Pp">Because the YAML and TT2 plugins use proper parsers, rather than
    just regexes, if a source file is not valid and it is unable to parse the
    file, then the parser will throw an error and abort parsing.</p>
<p class="Pp">The next enabled plugin will be tried.</p>
<p class="Pp">By default, you will not see these errors. If you would like to
    see them, then enable warnings via <b>new()</b>. All parse errors will be
    printed to STDERR.</p>
<p class="Pp">Also, if developing your own plugin, turn on warnings to see any
    errors that result from loading your plugin.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Verbose"><a class="permalink" href="#Verbose">Verbose</a></h2>
<p class="Pp">If you would like to see which files have been processed, which
    plugins were used, and which strings were extracted, then enable
    <span class="Li">&quot;verbose&quot;</span>. If no acceptable plugin was
    found, or no strings were extracted, then the file is not listed:</p>
<p class="Pp"></p>
<pre>      $ext = Locale::Extract-&gt;new( verbose =&gt; 1 | 2 | 3);
   OR
      xgettext.pl ... -v           # files reported
      xgettext.pl ... -v -v        # files and plugins reported
      xgettext.pl ... -v -v -v     # files, plugins and strings reported
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Accessors"><a class="permalink" href="#Accessors">Accessors</a></h2>
<pre>    header, set_header
    lexicon, set_lexicon, msgstr, set_msgstr
    entries, set_entries, entry, add_entry, del_entry
    compiled_entries, set_compiled_entries, compiled_entry,
    add_compiled_entry, del_compiled_entry
    clear
</pre>
</section>
<section class="Ss">
<h2 class="Ss">PO File manipulation</h2>
<p class="Pp"><i>method read_po ($file)</i></p>
<p class="Pp"><i>method write_po ($file,
    </i><span class="Li"><i>$add_format_marker</i></span><i>?)</i></p>
</section>
<section class="Ss">
<h2 class="Ss" id="Extraction"><a class="permalink" href="#Extraction">Extraction</a></h2>
<pre>    extract
    extract_file
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Compilation"><a class="permalink" href="#Compilation">Compilation</a></h2>
<p class="Pp"><i>compile($entries_are_in_gettext_style?)</i></p>
<p class="Pp">Merges the <span class="Li">&quot;entries&quot;</span> into
    <span class="Li">&quot;compiled_entries&quot;</span>.</p>
<p class="Pp">If <span class="Li">$entries_are_in_gettext_style</span> is true,
    the previously extracted entries are assumed to be in the <b>Gettext</b>
    style (e.g. <span class="Li">%1</span>).</p>
<p class="Pp">Otherwise they are assumed to be in <b>Maketext</b> style (e.g.
    <span class="Li">&quot;[_1]&quot;</span>) and are converted into
    <b>Gettext</b> style before merging into
    <span class="Li">&quot;compiled_entries&quot;</span>.</p>
<p class="Pp">The <span class="Li">&quot;entries&quot;</span> are <i>not</i>
    cleared after each compilation; use
    <span class="Li">&quot;-&quot;</span><b>set_entries()</b>&gt; to clear them
    if you need to extract from sources with varying styles.</p>
<p class="Pp"><i>normalize_space</i></p>
</section>
<section class="Ss">
<h2 class="Ss" id="Lexicon_accessors"><a class="permalink" href="#Lexicon_accessors">Lexicon
  accessors</a></h2>
<pre>    msgids, has_msgid,
    msgstr, set_msgstr
    msg_positions, msg_variables, msg_format, msg_out
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Internal_utilities"><a class="permalink" href="#Internal_utilities">Internal
  utilities</a></h2>
<pre>    _default_header
    _maketext_to_gettext
    _escape
    _format
    _plugins_specifically_for_file
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="ACKNOWLEDGMENTS"><a class="permalink" href="#ACKNOWLEDGMENTS">ACKNOWLEDGMENTS</a></h1>
<p class="Pp">Thanks to Jesse Vincent for contributing to an early version of
    this module.</p>
<p class="Pp">Also to Alain Barbet, who effectively re-wrote the source parser
    with a flex-like algorithm.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">xgettext.pl, Locale::Maketext, Locale::Maketext::Lexicon</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Audrey Tang &lt;cpan@audreyt.org&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright 2003-2013 by Audrey Tang &lt;cpan@audreyt.org&gt;.</p>
<p class="Pp">This software is released under the MIT license cited below.</p>
<section class="Ss">
<h2 class="Ss" id="The__"><a class="permalink" href="#The__">The &quot;MIT&quot;
  License</a></h2>
<p class="Pp">Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation files (the
    &quot;Software&quot;), to deal in the Software without restriction,
    including without limitation the rights to use, copy, modify, merge,
    publish, distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to the
    following conditions:</p>
<p class="Pp">The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.</p>
<p class="Pp">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF
    ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO
    EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
    DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
    OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
    USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS~2"><a class="permalink" href="#AUTHORS~2">AUTHORS</a></h1>
<ul class="Bl-bullet">
  <li>Clinton Gormley &lt;drtech@cpan.org&gt;</li>
  <li>Audrey Tang &lt;cpan@audreyt.org&gt;</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This software is Copyright (c) 2014 by Audrey Tang.</p>
<p class="Pp">This is free software, licensed under:</p>
<p class="Pp"></p>
<pre>  The MIT (X11) License
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-03-06</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
