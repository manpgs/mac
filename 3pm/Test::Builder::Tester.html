<!DOCTYPE html>
<html lang="en">
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Test::Builder::Tester(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test::Builder::Tester(3pm)</td>
    <td class="head-vol"><a href=".">Perl Programmers Reference Guide</a></td>
    <td class="head-rtitle">Test::Builder::Tester(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Test::Builder::Tester - test testsuites that have been built with
    Test::Builder</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    use Test::Builder::Tester tests =&gt; 1;
    use Test::More;
    test_out(&quot;not ok 1 - foo&quot;);
    test_fail(+1);
    fail(&quot;foo&quot;);
    test_test(&quot;fail works&quot;);
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">A module that helps you test testing modules that are built with
    Test::Builder.</p>
<p class="Pp">The testing system is designed to be used by performing a three
    step process for each test you wish to test. This process starts with using
    <span class="Li">&quot;test_out&quot;</span> and
    <span class="Li">&quot;test_err&quot;</span> in advance to declare what the
    testsuite you are testing will output with Test::Builder to stdout and
    stderr.</p>
<p class="Pp">You then can run the test(s) from your test suite that call
    Test::Builder. At this point the output of Test::Builder is safely captured
    by Test::Builder::Tester rather than being interpreted as real test
  output.</p>
<p class="Pp">The final stage is to call
    <span class="Li">&quot;test_test&quot;</span> that will simply compare what
    you predeclared to what Test::Builder actually outputted, and report the
    results back with a &quot;ok&quot; or &quot;not ok&quot; (with debugging) to
    the normal output.</p>
<section class="Ss">
<h2 class="Ss" id="Functions"><a class="permalink" href="#Functions">Functions</a></h2>
<p class="Pp">These are the six methods that are exported as default.</p>
<dl class="Bl-tag">
  <dt id="test_out"><a class="permalink" href="#test_out">test_out</a></dt>
  <dd></dd>
  <dt id="test_err"><a class="permalink" href="#test_err">test_err</a></dt>
  <dd>Procedures for predeclaring the output that your test suite is expected to
      produce until <span class="Li">&quot;test_test&quot;</span> is called.
      These procedures automatically assume that each line terminates with
      &quot;\n&quot;. So
    <p class="Pp"></p>
    <pre>   test_out(&quot;ok 1&quot;,&quot;ok 2&quot;);
    </pre>
    <p class="Pp">is the same as</p>
    <p class="Pp"></p>
    <pre>   test_out(&quot;ok 1\nok 2&quot;);
    </pre>
    <p class="Pp">which is even the same as</p>
    <p class="Pp"></p>
    <pre>   test_out(&quot;ok 1&quot;);
   test_out(&quot;ok 2&quot;);
    </pre>
    <p class="Pp">Once <span class="Li">&quot;test_out&quot;</span> or
        <span class="Li">&quot;test_err&quot;</span> (or
        <span class="Li">&quot;test_fail&quot;</span> or
        <span class="Li">&quot;test_diag&quot;</span>) have been called, all
        further output from Test::Builder will be captured by
        Test::Builder::Tester. This means that you will not be able perform
        further tests to the normal output in the normal way until you call
        <span class="Li">&quot;test_test&quot;</span> (well, unless you manually
        meddle with the output filehandles)</p>
  </dd>
  <dt id="test_fail"><a class="permalink" href="#test_fail">test_fail</a></dt>
  <dd>Because the standard failure message that Test::Builder produces whenever
      a test fails will be a common occurrence in your test error output, and
      because it has changed between Test::Builder versions, rather than forcing
      you to call <span class="Li">&quot;test_err&quot;</span> with the string
      all the time like so
    <p class="Pp"></p>
    <pre>    test_err(&quot;# Failed test ($0 at line &quot;.line_num(+1).&quot;)&quot;);
    </pre>
    <p class="Pp"><span class="Li">&quot;test_fail&quot;</span> exists as a
        convenience function that can be called instead. It takes one argument,
        the offset from the current line that the line that causes the fail is
        on.</p>
    <p class="Pp"></p>
    <pre>    test_fail(+1);
    </pre>
    <p class="Pp">This means that the example in the synopsis could be rewritten
        more simply as:</p>
    <p class="Pp"></p>
    <pre>   test_out(&quot;not ok 1 - foo&quot;);
   test_fail(+1);
   fail(&quot;foo&quot;);
   test_test(&quot;fail works&quot;);
    </pre>
  </dd>
  <dt id="test_diag"><a class="permalink" href="#test_diag">test_diag</a></dt>
  <dd>As most of the remaining expected output to the error stream will be
      created by Test::Builder's <span class="Li">&quot;diag&quot;</span>
      function, Test::Builder::Tester provides a convenience function
      <span class="Li">&quot;test_diag&quot;</span> that you can use instead of
      <span class="Li">&quot;test_err&quot;</span>.
    <p class="Pp">The <span class="Li">&quot;test_diag&quot;</span> function
        prepends comment hashes and spacing to the start and newlines to the end
        of the expected output passed to it and adds it to the list of expected
        error output. So, instead of writing</p>
    <p class="Pp"></p>
    <pre>   test_err(&quot;# Couldn't open file&quot;);
    </pre>
    <p class="Pp">you can write</p>
    <p class="Pp"></p>
    <pre>   test_diag(&quot;Couldn't open file&quot;);
    </pre>
    <p class="Pp">Remember that Test::Builder's diag function will not add
        newlines to the end of output and test_diag will. So to check</p>
    <p class="Pp"></p>
    <pre>   Test::Builder-&gt;new-&gt;diag(&quot;foo\n&quot;,&quot;bar\n&quot;);
    </pre>
    <p class="Pp">You would do</p>
    <p class="Pp"></p>
    <pre>  test_diag(&quot;foo&quot;,&quot;bar&quot;)
    </pre>
    <p class="Pp">without the newlines.</p>
  </dd>
  <dt id="test_test"><a class="permalink" href="#test_test">test_test</a></dt>
  <dd>Actually performs the output check testing the tests, comparing the data
      (with <span class="Li">&quot;eq&quot;</span>) that we have captured from
      Test::Builder against what was declared with
      <span class="Li">&quot;test_out&quot;</span> and
      <span class="Li">&quot;test_err&quot;</span>.
    <p class="Pp">This takes name/value pairs that effect how the test is
      run.</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="title"><a class="permalink" href="#title">title (synonym 'name',
    'label')</a></dt>
  <dd>The name of the test that will be displayed after the
      <span class="Li">&quot;ok&quot;</span> or
      <span class="Li">&quot;not</span> <span class="Li">ok&quot;</span>.</dd>
  <dt id="skip_out"><a class="permalink" href="#skip_out">skip_out</a></dt>
  <dd>Setting this to a true value will cause the test to ignore if the output
      sent by the test to the output stream does not match that declared with
      <span class="Li">&quot;test_out&quot;</span>.</dd>
  <dt id="skip_err"><a class="permalink" href="#skip_err">skip_err</a></dt>
  <dd>Setting this to a true value will cause the test to ignore if the output
      sent by the test to the error stream does not match that declared with
      <span class="Li">&quot;test_err&quot;</span>.</dd>
</dl>
</div>
<div class="Bd-indent">
<p class="Pp">As a convenience, if only one argument is passed then this
    argument is assumed to be the name of the test (as in the above
  examples.)</p>
<p class="Pp">Once <span class="Li">&quot;test_test&quot;</span> has been run
    test output will be redirected back to the original filehandles that
    Test::Builder was connected to (probably STDOUT and STDERR,) meaning any
    further tests you run will function normally and cause success/errors for
    Test::Harness.</p>
</div>
<dl class="Bl-tag">
  <dt id="line_num"><a class="permalink" href="#line_num">line_num</a></dt>
  <dd>A utility function that returns the line number that the function was
      called on. You can pass it an offset which will be added to the result.
      This is very useful for working out the correct text of diagnostic
      functions that contain line numbers.
    <p class="Pp">Essentially this is the same as the
        <span class="Li">&quot;__LINE__&quot;</span> macro, but the
        <span class="Li">&quot;line_num(+3)&quot;</span> idiom is arguably
        nicer.</p>
  </dd>
</dl>
<p class="Pp">In addition to the six exported functions there exists one
    function that can only be accessed with a fully qualified function call.</p>
<dl class="Bl-tag">
  <dt id="color"><a class="permalink" href="#color">color</a></dt>
  <dd>When <span class="Li">&quot;test_test&quot;</span> is called and the
      output that your tests generate does not match that which you declared,
      <span class="Li">&quot;test_test&quot;</span> will print out debug
      information showing the two conflicting versions. As this output itself is
      debug information it can be confusing which part of the output is from
      <span class="Li">&quot;test_test&quot;</span> and which was the original
      output from your original tests. Also, it may be hard to spot things like
      extraneous whitespace at the end of lines that may cause your test to fail
      even though the output looks similar.
    <p class="Pp">To assist you <span class="Li">&quot;test_test&quot;</span>
        can colour the background of the debug information to disambiguate the
        different types of output. The debug output will have its background
        coloured green and red. The green part represents the text which is the
        same between the executed and actual output, the red shows which part
        differs.</p>
    <p class="Pp">The <span class="Li">&quot;color&quot;</span> function
        determines if colouring should occur or not. Passing it a true or false
        value will enable or disable colouring respectively, and the function
        called with no argument will return the current setting.</p>
    <p class="Pp">To enable colouring from the command line, you can use the
        Text::Builder::Tester::Color module like so:</p>
    <p class="Pp"></p>
    <pre>   perl -Mlib=Text::Builder::Tester::Color test.t
    </pre>
    <p class="Pp">Or by including the Test::Builder::Tester::Color module
        directly in the PERL5LIB.</p>
  </dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Test::Builder::Tester does not handle plans well. It has never
    done anything special with plans. This means that plans from outside
    Test::Builder::Tester will effect Test::Builder::Tester, worse plans when
    using Test::Builder::Tester will effect overall testing. At this point there
    are no plans to fix this bug as people have come to depend on it, and
    Test::Builder::Tester is now discouraged in favor of
    <span class="Li">&quot;Test2::API::intercept()&quot;</span>. See
    &lt;https://github.com/Test-More/test-more/issues/667&gt;</p>
<p class="Pp">Calls
    <span class="Li">&quot;Test::Builder-&gt;no_ending&quot;</span> turning off
    the ending tests. This is needed as otherwise it will trip out because we've
    run more tests than we strictly should have and it'll register any failures
    we had that we were testing for as real failures.</p>
<p class="Pp">The color function doesn't work unless Term::ANSIColor is
    compatible with your terminal. Additionally, Win32::Console::ANSI must be
    installed on windows platforms for color output.</p>
<p class="Pp">Bugs (and requests for new features) can be reported to the author
    though GitHub: &lt;https://github.com/Test-More/test-more/issues&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Copyright Mark Fowler &lt;mark@twoshortplanks.com&gt; 2002,
  2004.</p>
<p class="Pp">Some code taken from Test::More and Test::Catch, written by
    Michael G Schwern &lt;schwern@pobox.com&gt;. Hence, those parts Copyright
    Micheal G Schwern 2001. Used and distributed with permission.</p>
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="MAINTAINERS"><a class="permalink" href="#MAINTAINERS">MAINTAINERS</a></h1>
<dl class="Bl-tag">
  <dt id="Chad"><a class="permalink" href="#Chad">Chad Granum
    &lt;exodist@cpan.org&gt;</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES"><a class="permalink" href="#NOTES">NOTES</a></h1>
<p class="Pp">Thanks to Richard Clamp &lt;richardc@unixbeard.net&gt; for letting
    me use his testing system to try this module out on.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Test::Builder, Test::Builder::Tester::Color, Test::More.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-02-19</td>
    <td class="foot-os"><a href="..">perl v5.34.1</a></td>
  </tr>
</table>
</body>
</html>
