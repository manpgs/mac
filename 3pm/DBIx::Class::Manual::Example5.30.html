<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>DBIx::Class::Manual::Example(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DBIx::Class::Manual::Example(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">DBIx::Class::Manual::Example(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">DBIx::Class::Manual::Example - Simple CD database example</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This tutorial will guide you through the process of setting up and
    testing a very basic CD database using SQLite, with DBIx::Class::Schema as
    the database frontend.</p>
<p class="Pp">The database structure is based on the following rules:</p>
<p class="Pp"></p>
<pre>  An artist can have many cds, and each cd belongs to just one artist.
  A cd can have many tracks, and each track belongs to just one cd.
</pre>
<p class="Pp">The database is implemented with the following:</p>
<p class="Pp"></p>
<pre>  table 'artist' with columns:  artistid, name
  table 'cd'     with columns:  cdid, artistid, title, year
  table 'track'  with columns:  trackid, cdid, title
</pre>
<p class="Pp">Each of the table's first columns is the primary key; any
    subsequent keys are foreign keys.</p>
<section class="Ss">
<h2 class="Ss" id="Installation"><a class="permalink" href="#Installation">Installation</a></h2>
<p class="Pp">You'll need to install DBIx::Class via CPAN, and you'll also need
    to install sqlite3 (not sqlite) if it's not already intalled.</p>
<p class="Pp"><i>The database/tables/data</i></p>
<p class="Pp">Your distribution already comes with a pre-filled SQLite database
    <i>examples/Schema/db/example.db</i>. You can see it by e.g.</p>
<p class="Pp"></p>
<pre>  cpanm --look DBIx::Class
</pre>
<p class="Pp">If for some reason the file is unreadable on your system, you can
    recreate it as follows:</p>
<p class="Pp"></p>
<pre>  cp -a &lt;unpacked-DBIC-tarball&gt;/examples/Schema dbicapp
  cd dbicapp
  rm db/example.db
  sqlite3 db/example.db &lt; db/example.sql
  perl insertdb.pl
</pre>
<p class="Pp"><i>Testing the database</i></p>
<p class="Pp">Enter the example Schema directory</p>
<p class="Pp"></p>
<pre>  cd &lt;unpacked-DBIC-tarball&gt;/examples/Schema
</pre>
<p class="Pp">Run the script testdb.pl, which will test that the database has
    successfully been filled.</p>
<p class="Pp">When this script is run, it should output the following:</p>
<p class="Pp"></p>
<pre> get_tracks_by_cd(Bad):
 Leave Me Alone
 Smooth Criminal
 Dirty Diana
 get_tracks_by_artist(Michael Jackson):
 Billie Jean (from the CD 'Thriller')
 Beat It (from the CD 'Thriller')
 Leave Me Alone (from the CD 'Bad')
 Smooth Criminal (from the CD 'Bad')
 Dirty Diana (from the CD 'Bad')
 get_cd_by_track(Stan):
 The Marshall Mathers LP has the track 'Stan'.
 get_cds_by_artist(Michael Jackson):
 Thriller
 Bad
 get_artist_by_track(Dirty Diana):
 Michael Jackson recorded the track 'Dirty Diana'.
 get_artist_by_cd(The Marshall Mathers LP):
 Eminem recorded the CD 'The Marshall Mathers LP'.
</pre>
<p class="Pp"><i>Discussion about the results</i></p>
<p class="Pp">The data model defined in this example has an artist with multiple
    CDs, and a CD with multiple tracks; thus, it's simple to traverse from a
    track back to a CD, and from there back to an artist. This is demonstrated
    in the get_tracks_by_artist routine, where we easily walk from the
    individual track back to the title of the CD that the track came from
    ($track-&gt;cd-&gt;title).</p>
<p class="Pp">Note also that in the get_tracks_by_cd and get_tracks_by_artist
    routines, the result set is called multiple times with the 'next' iterator.
    In contrast, get_cd_by_track uses the 'first' result set method, since only
    one CD is expected to have a specific track.</p>
<p class="Pp">This example uses &quot;load_namespaces&quot; in
    DBIx::Class::Schema to load in the appropriate Result classes from the
    <span class="Li">&quot;MyApp::Schema::Result&quot;</span> namespace, and any
    required ResultSet classes from the
    <span class="Li">&quot;MyApp::Schema::ResultSet&quot;</span> namespace
    (although we did not add, nor needed any such classes in this example).</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="FURTHER_QUESTIONS?"><a class="permalink" href="#FURTHER_QUESTIONS?">FURTHER
  QUESTIONS?</a></h1>
<p class="Pp">Check the list of additional DBIC resources.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This module is free software copyright by the DBIx::Class (DBIC)
    authors. You can redistribute it and/or modify it under the same terms as
    the DBIx::Class library.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-12-08</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
