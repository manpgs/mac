<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Net::LDAP::FAQ(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Net::LDAP::FAQ(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Net::LDAP::FAQ(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Net::LDAP::FAQ - Frequently Asked Questions about Net::LDAP</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
 perldoc Net::LDAP::FAQ
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This document serves to answer the most frequently asked questions
    on both the perl-ldap Mailing List and those sent to Graham Barr.</p>
<p class="Pp">The latest version of this FAQ can be found at</p>
<p class="Pp"></p>
<pre>
 http://ldap.perl.org/FAQ.html
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="GENERAL"><a class="permalink" href="#GENERAL">GENERAL</a></h1>
<section class="Ss">
<h2 class="Ss" id="What_is_perl-ldap?"><a class="permalink" href="#What_is_perl-ldap?">What
  is perl-ldap?</a></h2>
<p class="Pp">perl-ldap is the distribution name. The perl-ldap distribution
    contains the Net::LDAP modules.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Why_another_Perl_"><a class="permalink" href="#Why_another_Perl_">Why
  another Perl LDAP implementation?</a></h2>
<p class="Pp">perl-ldap's goal is to be as portable as possible. It does this by
    being implemented completely in Perl. So basically anywhere that Perl runs
    perl-ldap will run. This is not true for other implementations which require
    a C compiler.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Where_can_I_get_it?"><a class="permalink" href="#Where_can_I_get_it?">Where
  can I get it?</a></h2>
<p class="Pp">Perl-ldap is available from CPAN. You can find the released
    versions at:</p>
<p class="Pp"></p>
<pre>
 http://search.cpan.org/dist/perl-ldap/
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Is_there_a_web_page_for_perl-ldap?"><a class="permalink" href="#Is_there_a_web_page_for_perl-ldap?">Is
  there a web page for perl-ldap?</a></h2>
<p class="Pp">Yes there is at http://ldap.perl.org/</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Is_there_a_mailing_list?"><a class="permalink" href="#Is_there_a_mailing_list?">Is
  there a mailing list?</a></h2>
<p class="Pp">Yes there is at perl-ldap@perl.org</p>
<p class="Pp">You can subscribe to this list by mailing
    perl-ldap-subscribe@perl.org</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Is_the_mailing_list_archived?"><a class="permalink" href="#Is_the_mailing_list_archived?">Is
  the mailing list archived?</a></h2>
<p class="Pp">Yes, at http://nntp.perl.org/group/perl.ldap</p>
<p class="Pp">Archives with messages before we switched to using perl.org can be
    found at</p>
<p class="Pp"></p>
<pre>
 http://marc.theaimsgroup.com/?l=perl-ldap-dev
</pre>
<p class="Pp">There is also an archive of the perl-ldap mailing list at</p>
<p class="Pp"></p>
<pre>
 http://www.xray.mpe.mpg.de/mailing-lists/perl-ldap/
</pre>
<p class="Pp">which also has messages from before the move.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Is_there_any_online_documentation?"><a class="permalink" href="#Is_there_any_online_documentation?">Is
  there any online documentation?</a></h2>
<p class="Pp">Yes. perl-ldap has online documentation at</p>
<p class="Pp"></p>
<pre>
 http://ldap.perl.org/
</pre>
<p class="Pp">which will have the latest documentation available.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Is_there_a_public_repository?"><a class="permalink" href="#Is_there_a_public_repository?">Is
  there a public repository?</a></h2>
<p class="Pp">Yes, there is a public Git repository at</p>
<p class="Pp"></p>
<pre>
 https://github.com/perl-ldap/perl-ldap
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Can_I_get_perl-ldap_from_the_public_Git_repository?"><a class="permalink" href="#Can_I_get_perl-ldap_from_the_public_Git_repository?">Can
  I get perl-ldap from the public Git repository?</a></h2>
<p class="Pp">Yes, anyone can pull perl-ldap from the public Git repository on
    GitHub.</p>
<p class="Pp">There are several ways this can be done - see below.</p>
<dl class="Bl-tag">
  <dt id="CPAN"><a class="permalink" href="#CPAN">CPAN</a></dt>
  <dd>You can download it from CPAN by following the &quot;Download&quot; link
      on:
    <p class="Pp"></p>
    <pre>
 http://search.cpan.org/dist/perl-ldap/
    </pre>
    <p class="Pp">Example;</p>
    <p class="Pp"></p>
    <pre>
 http://search.cpan.org/CPAN/authors/id/M/MA/MARSCHAP/perl-ldap-0.54.tar.gz
    </pre>
  </dd>
  <dt id="Git"><a class="permalink" href="#Git">Git - fork on GitHub</a></dt>
  <dd>If you have an account on GitHub (there's a free variant), you can easily
      fork the perl-ldap repository on GitHub. When logged on to GitHub,
      navigate to the perl-ldap repository
    <p class="Pp"></p>
    <pre>
 https://github.com/perl-ldap/perl-ldap
    </pre>
    <p class="Pp">and simply click on the &quot;Fork&quot; button near the
        top-right corner.</p>
  </dd>
  <dt id="Git~2"><a class="permalink" href="#Git~2">Git - clone
    repository</a></dt>
  <dd>You can download latest development version of perl-ldap from GitHub by
      cloning the repository using the command:
    <p class="Pp"></p>
    <pre>
 git clone https://github.com/perl-ldap/perl-ldap.git
    </pre>
    <p class="Pp">This command will create a directory named 'perl-ldap' in your
        current directory containing a local clone of the repository.</p>
    <p class="Pp">Keeping your local repository in sync with perl-ldap's GitHub
        repository is easy:</p>
    <p class="Pp"></p>
    <pre>
  cd perl-ldap
  git pull
    </pre>
  </dd>
  <dt id="Web"><a class="permalink" href="#Web">Web page</a></dt>
  <dd>Most of the time there is a URL link on the perl-ldap home page on
      ldap.perl.org that points to the latest released version of perl-ldap. Due
      to the fact that humans must update the web page to point to a new release
      it sometimes does not get updated as quickly as it should.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_Git?"><a class="permalink" href="#What_is_Git?">What
  is Git?</a></h2>
<p class="Pp">Git (see http://git-scm.com) is a distributed version control
    system designed to keep track of source changes made by groups of developers
    working on the same files, allowing them to stay in sync with each other as
    each individual chooses.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="LDAP_AND_DIRECTORY_TERMINOLOGY."><a class="permalink" href="#LDAP_AND_DIRECTORY_TERMINOLOGY.">LDAP
  AND DIRECTORY TERMINOLOGY.</a></h1>
<p class="Pp">In order to help the user understand the perl-ldap module better
    some key LDAP terminology is defined here.</p>
<section class="Ss">
<h2 class="Ss" id="What_is_a_directory?"><a class="permalink" href="#What_is_a_directory?">What
  is a directory?</a></h2>
<p class="Pp">A directory is a special purpose hierarchical database that
    usually contains typed information such as text strings, binary data, or
    X.509 certificates.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_"><a class="permalink" href="#What_is_">What is
  LDAP?</a></h2>
<p class="Pp">LDAP stands for Lightweight Directory Access Protocol. The word
    <i>Protocol</i> is the key word in the definition given in the preceding
    sentence, LDAP is <i>NOT</i> hardware or software. It is a protocol that
    defines how a client and server will communicate with one another.</p>
<p class="Pp">The Lightweight Directory Access Protocol is defined in a series
    of Requests For Comments, better known as RFCs. The RFCs can be found on the
    Internet at http://www.ietf.org/ (the master repository) and many other
    places. There's a link to all the LDAP-related RFCs at perl-ldap's web site,
    http://ldap.perl.org/rfc.html. Some of the more important RFC numbers are
    RFC 4510 - 4519 for LDAP (previously called LDAPv3) and the historic RFC
    1777 for LDAPv2.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_a_"><a class="permalink" href="#What_is_a_">What is a
  LDAP Directory?</a></h2>
<p class="Pp">In the strictest terms of the definition there is no such thing as
    a LDAP directory. To be practical about this situation every day directory
    professionals refer to their directory as &quot; a LDAP directory&quot;
    because it is easy to say and it does convey the type of protocol used to
    communicate with their directory. Using this definition a LDAP directory is
    a directory whose server software conforms to the Lightweight Directory
    Access Protocol when communicating with a client.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_an_Entry?"><a class="permalink" href="#What_is_an_Entry?">What
  is an Entry?</a></h2>
<p class="Pp">The traditional directory definition of a directory object is
    called an Entry. Entries are composed of attributes that contain the
    information to be recorded about the object.</p>
<p class="Pp">(An entry in LDAP is somewhat analogous to a record in a table in
    an SQL database, but don't get too hung up about this analogy!)</p>
<p class="Pp">Entries are held in an upside-down tree structure. Entries can
    therefore contain subordinate entries, and entries <b>must</b> have one
    direct superior entry.</p>
<p class="Pp">Entries with subordinate entries are called 'non-leaf'
  entries.</p>
<p class="Pp">Entries without subordinate entries are called 'leaf' entries.</p>
<p class="Pp">An entry's direct superior entry is called the entry's
  'parent'.</p>
<p class="Pp">'Non-leaf' entries are also said to have 'child' entries.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_an_attribute?"><a class="permalink" href="#What_is_an_attribute?">What
  is an attribute?</a></h2>
<p class="Pp">The entry(s) in a directory are composed of attributes that
    contain information about the object. Each attribute has a type and can
    contain one or more values.</p>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>
  cn=Road Runner
</pre>
<p class="Pp">is an attribute with a type named &quot;cn&quot;, and one
  value.</p>
<p class="Pp">Each attribute is described by a 'syntax' which defines what kind
    of information can be stored in the attributes values. Trying to store a
    value that doesn't conform to the attribute's syntax will result in an
    error.</p>
<p class="Pp">For example:</p>
<p class="Pp"></p>
<pre>
  jpegPhoto=unknown
</pre>
<p class="Pp">is not permitted by the directory, because jpegPhotos may only
    contain JPEG-formatted images.</p>
<p class="Pp">Most syntaxes used in LDAP however describe text strings rather
    than binary objects (like JPEGs or certificates.)</p>
<p class="Pp">In LDAPv3 most of these syntaxes support Unicode encoded using
    UTF-8. Because the Net::LDAP modules do not change the strings that you pass
    in as attribute values (they get sent to the LDAP server as-is) to use
    accented characters you simply need to encode your strings in UTF-8. There
    are modules on CPAN that will help you here.</p>
<p class="Pp">Note that LDAPv2 servers used something called T.61 instead of
    Unicode and UTF-8. Most servers do not implement T.61 correctly, and it is
    recommended that you use LDAPv3 instead.</p>
<p class="Pp">Attributes may also be searched. The algorithms used to perform
    different kinds of searches are described by the attribute's 'matching
    rules'. Some matching rules are case-sensitive and some are
    case-insensitive, for example. Sometimes matching rules aren't defined for a
    particular attribute: there's no way to search for jpegPhotos that contain a
    substring!</p>
<p class="Pp">You can examine all of a server's attribute definitions by reading
    the schema from the server.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_an_object_class?"><a class="permalink" href="#What_is_an_object_class?">What
  is an object class?</a></h2>
<p class="Pp">An object class is the name associated with a group of attributes
    that <b>must</b> be present in an entry, and the group of attributes that
    <b>may</b> also be present in an entry.</p>
<p class="Pp">Object classes may be derived (subclassed) from other object
    classes. For example the widely used 'inetOrgPerson' object class is derived
    from 'organizationalPerson', which is itself derived from 'person' which is
    itself derived from 'top'.</p>
<p class="Pp">Every entry has an attribute called 'objectClass' that lists all
    the names of object classes (and their superclasses) being used with the
    entry.</p>
<p class="Pp">You can examine all of a server's objectclass definitions by
    reading the schema from the server.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_a_Distinguished_Name_("><a class="permalink" href="#What_is_a_Distinguished_Name_(">What
  is a Distinguished Name (DN)?</a></h2>
<p class="Pp">Every entry in a directory has a Distinguished Name, or DN. It is
    a unique Entry identifier throughout the complete directory. No two Entries
    can have the same DN within the same directory.</p>
<p class="Pp">Examples of DNs:</p>
<p class="Pp"></p>
<pre>
 cn=Road Runner, ou=bird, dc=cartoon, dc=com
 ou=bird, dc=cartoon, dc=com
 dc=cartoon, dc=com
 dc=com
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_a_Relative_Distinguished_Name?"><a class="permalink" href="#What_is_a_Relative_Distinguished_Name?">What
  is a Relative Distinguished Name?</a></h2>
<p class="Pp">Every DN is made up of a sequence of Relative Distinguished Names,
    or RDNs. The sequences of RDNs are separated by commas (,). In LDAPv2
    semi-colons (;) were also allowed. There can be more than one identical RDN
    in a directory, but they must have different parent entries.</p>
<p class="Pp">Technically, an RDN contains attribute-value assertions, or AVAs.
    When an AVA is written down, the attribute name is separated from the
    attribute value with an equals (=) sign.</p>
<p class="Pp">Example of a DN:</p>
<p class="Pp"></p>
<pre>
 cn=Road Runner,ou=bird,dc=cartoon,dc=com

 RDNs of the proceeding DN:
 RDN =&gt; cn=Road Runner
 RDN =&gt; ou=bird
 RDN =&gt; dc=cartoon
 RDN =&gt; dc=com
</pre>
<p class="Pp">RDNs can contain multiple attributes, though this is somewhat
    unusual. They are called multi-AVA RDNs, and each AVA is separated in the
    RDN from the others with a plus sign (+).</p>
<p class="Pp">Example of a DN with a multi-AVA RDN:</p>
<p class="Pp"></p>
<pre>
 cn=Road Runner+l=Arizona,ou=bird,dc=cartoon,dc=com
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Where_is_an_entry's_name_held?"><a class="permalink" href="#Where_is_an_entry's_name_held?">Where
  is an entry's name held?</a></h2>
<p class="Pp">Entries do <b>not</b> contain their DN. When you retrieve an entry
    from a search, the server will tell you the DN of each entry.</p>
<p class="Pp">On the other hand, entries <b>do</b> contain their RDN. Recall
    that the RDN is formed from one or more attribute-value assertions (AVAs);
    each entry must contain all the attributes and values in the RDN.</p>
<p class="Pp">For example the entry:</p>
<p class="Pp"></p>
<pre>
 cn=Road Runner+l=Arizona,ou=bird,dc=cartoon,dc=com
</pre>
<p class="Pp"><b>must</b> contain a 'cn' attribute containing at least the value
    &quot;Road Runner&quot;, <b>and</b> an 'l' attribute containing at least the
    value &quot;Arizona&quot;.</p>
<p class="Pp">The attributes used in the RDN may contain additional values, but
    the entry still only has one DN.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_a_search_base?"><a class="permalink" href="#What_is_a_search_base?">What
  is a search base?</a></h2>
<p class="Pp">A search base is a Distinguished Name that is the starting point
    of search queries.</p>
<p class="Pp">Example of a DN:</p>
<p class="Pp"></p>
<pre>
 cn=Road Runner,ou=bird,dc=cartoon,dc=com
</pre>
<p class="Pp">Possible search base(s) for the proceeding DN:</p>
<p class="Pp"></p>
<pre>
 Base =&gt; cn=Road Runner,ou=bird,dc=cartoon,dc=com
 Base =&gt; ou=bird,dc=cartoon,dc=com
 Base =&gt; dc=cartoon,dc=com
 Base =&gt; dc=com
</pre>
<p class="Pp">Setting the search base to the lowest possible branch of the
    directory will speed up searches considerably.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_the_difference_between_a_"><a class="permalink" href="#What_is_the_difference_between_a_">What
  is the difference between a LDAP server and a relational database?</a></h2>
<p class="Pp">The most basic difference is that a directory server is a
    specialized database designed to provide fast searches. While a relational
    database is optimized for transactions (where a series of operations is
    counted as 1, thus if one of the steps fails, the RDBMS can roll-back to the
    state it was in before you started).</p>
<p class="Pp">Directories also typically are hierarchical in nature (RDBMS is
    typically flat, but you can implement a hierarchy using tables and queries),
    networkable, distributed and replicated.</p>
<p class="Pp">LDAP provides an open-standard to a directory service.</p>
<p class="Pp">Typically we use LDAP for email directories (all popular email
    clients provide an LDAP client now) and authorization services
    (authentication and access control).</p>
<p class="Pp">You could use a RDBMS for these types of queries but there's no
    set standard, in particular over TCP/IP to connect to databases over the
    network. There's language specific protocols (like Perl's DBI and Java's
    JDBC) that hide this problem behind an API abstraction, but that's not a
    replacement for a standard access protocol.</p>
<p class="Pp">LDAP is starting to be used on roles traditionally played by RDBMS
    in terms of general data management because it's easier to setup a LDAP
    server (once you understand the basic nomenclature) and you don't need a DBA
    to write your queries and more importantly all LDAP servers speak the same
    essential protocol, thus you don't have to fuss with a database driver
    trying to connect it to the Internet. Once you have an LDAP server up and
    running, it's automatically available over the 'net. It's possible to
    connect to a LDAP server from a variety of mechanisms, including just about
    every possible programming language.</p>
<p class="Pp">More information on this topic can be found on the following
  URLs;</p>
<p class="Pp"></p>
<pre>
 http://www.openldap.org/faq/data/cache/378.html

 http://www.isode.com/whitepapers/ic-6055.html
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_the_difference_between_a_ldap_reference_and_a_ldap_referral?"><a class="permalink" href="#What_is_the_difference_between_a_ldap_reference_and_a_ldap_referral?">What
  is the difference between a ldap reference and a ldap referral?</a></h2>
<p class="Pp">A referral is returned when the <b>entire</b> operation must be
    resent to another server.</p>
<p class="Pp">A continuation reference is returned when <b>part</b> of the
    operation must be resent to another server.</p>
<p class="Pp">See RFC 4511 section 4.5.3 for more details.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="perl-ldap_INSTALLATION"><a class="permalink" href="#perl-ldap_INSTALLATION">perl-ldap
  INSTALLATION</a></h1>
<section class="Ss">
<h2 class="Ss" id="How_do_I_install_perl-ldap?"><a class="permalink" href="#How_do_I_install_perl-ldap?">How
  do I install perl-ldap?</a></h2>
<p class="Pp">To install the modules that are in the perl-ldap distribution
    follow the same steps that you would for most other distributions found on
    CPAN, that is</p>
<p class="Pp"></p>
<pre>
   # replace 0.62 with the version you have

   gunzip perl-ldap-0.62.tar.gz
   tar xvf perl-ldap-0.62.tar
   cd perl-ldap-0.62

   perl Makefile.PL
   make
   make test
   make install
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="But_I_do_not_have_make,_how_can_I_install_perl-ldap?"><a class="permalink" href="#But_I_do_not_have_make,_how_can_I_install_perl-ldap?">But
  I do not have make, how can I install perl-ldap?</a></h2>
<p class="Pp">Well as luck would have it the modules in perl-ldap do not do
    anything complex, so a simple copy is enough to install. First run</p>
<p class="Pp"></p>
<pre>
  perl -V
</pre>
<p class="Pp">This will output information about the version of Perl you have
    installed. Near the bottom you will find something like</p>
<p class="Pp"></p>
<pre>
  @INC:
    /usr/local/lib/perl/5.18.2
    /usr/local/share/perl/5.18.2
    /usr/lib/perl5
    /usr/share/perl5
    /usr/lib/perl/5.18
    /usr/share/perl/5.18
    /usr/local/lib/site_per
</pre>
<p class="Pp">This is a list of directories that Perl searches when it is
    looking for a module. The directory you need is the site_perl directory, but
    without the system architecture name, in this case it is
    <span class="Li">&quot;/usr/local/lib/site_perl&quot;</span>. The files
    required can then be installed with</p>
<p class="Pp"></p>
<pre>
   # replace 0.62 with the version you have

   gunzip perl-ldap-0.62.tar.gz
   tar xvf perl-ldap-0.62.tar
   cd perl-ldap-0.62/lib

   cp -r * /usr/local/lib/site_perl
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_can_I_load_perl-ldap_into_an_ActiveState_Perl_installation?"><a class="permalink" href="#How_can_I_load_perl-ldap_into_an_ActiveState_Perl_installation?">How
  can I load perl-ldap into an ActiveState Perl installation?</a></h2>
<p class="Pp">There are several ways that perl-ldap can be installed into an
    ActiveState Perl tree.</p>
<dl class="Bl-tag">
  <dt>1.</dt>
  <dd>The ActiveState ppm command can be used to install perl-ldap. When a new
      version of perl-ldap is released, it takes ActiveState a period of time to
      get the new release into the ActiveState ppm system.</dd>
  <dt>2.</dt>
  <dd>If the user has nmake installed, the user can do a normal Perl module
      install using nmake instead of make.</dd>
  <dt>3.</dt>
  <dd>If the user does not have nmake or make, the user can install perl-ldap
      using the install-nomake script by issuing the following command.
    <p class="Pp"></p>
    <pre>
 perl install-nomake
    </pre>
    <p class="Pp">The install-nomake script can be used on any system that does
        not have make installed.</p>
  </dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="What_other_modules_will_I_need?"><a class="permalink" href="#What_other_modules_will_I_need?">What
  other modules will I need?</a></h2>
<p class="Pp">perl-ldap uses other Perl modules. Some are required, but some are
    optional (i.e. required to use certain features only).</p>
<p class="Pp">If you are using a Linux system, many of the distributions have
    packages that you can install using the distribution's package management
    tools (e.g. apt, rpm, ...).</p>
<p class="Pp">Alternatively, you may use your favorite web search engine to find
    the package that you need.</p>
<dl class="Bl-tag">
  <dt id="Convert::ASN1"><a class="permalink" href="#Convert::ASN1">Convert::ASN1</a></dt>
  <dd>This module converts between Perl data structures and ASN.1, and is
      required for perl-ldap to work.
    <p class="Pp">You can obtain the latest release from
      <br/>
       http://search.cpan.org/search?module=Convert::ASN1</p>
  </dd>
  <dt id="OpenSSL"><a class="permalink" href="#OpenSSL">OpenSSL and
    IO::Socket::SSL</a></dt>
  <dd>If you want to use encrypted connections, either via start_tls or LDAPS
      connections, you will need this module and the OpenSSL software package.
    <p class="Pp">You can obtain the latest release of IO::Socket::SSL from
      <br/>
       http://search.cpan.org/search?module=IO::Socket::SSL</p>
    <p class="Pp">You can obtain the latest release of OpenSSL from
      <br/>
       http://www.openssl.org/</p>
  </dd>
  <dt id="IO::Socket::INET6"><a class="permalink" href="#IO::Socket::INET6">IO::Socket::INET6</a></dt>
  <dd>For connecting to LDAP servers via IPv6, IO::Socket::INET6 is required.
      Its presence is detected at runtime, so that perl-ldap can be installed
      without it, and automatically gains IPv6 support as soon as
      IO::Socket::INET6 gets installed.
    <p class="Pp">You can obtain the latest releases from
      <br/>
       http://search.cpan.org/search?module=IO::Socket::INET6</p>
  </dd>
  <dt id="IO::Socket::IP"><a class="permalink" href="#IO::Socket::IP">IO::Socket::IP</a></dt>
  <dd>This is an alternative to using IO::Socket::INET6. Like that module, it
      gets detected automatically at runtime. If version 0.20 or higher is
      installed, is is preferred over IO::Socket::INET6 and IO::Socket::INET for
      all IP connections.
    <p class="Pp">You can obtain the latest releases from
      <br/>
       http://search.cpan.org/search?module=IO::Socket::IP</p>
  </dd>
  <dt id="Authen::SASL"><a class="permalink" href="#Authen::SASL">Authen::SASL</a></dt>
  <dd>This module is optional. You only need to install Authen::SASL if you want
      to use the SASL authentication methods.
    <p class="Pp">You can obtain the latest release from
      <br/>
       http://search.cpan.org/search?module=Authen::SASL</p>
  </dd>
  <dt id="Digest::MD5"><a class="permalink" href="#Digest::MD5">Digest::MD5</a></dt>
  <dd>This module is optional. It also requires a C compiler when installing.
      You only need to install Digest::MD5 if you want to use the SASL
      DIGEST-MD5 authentication mechanism.
    <p class="Pp">You can obtain the latest release from
      <br/>
       http://search.cpan.org/search?module=Digest::MD5</p>
    <p class="Pp">As Digest::MD5 is part of the Perl core modules since Perl
        5.7.3, you only need a C compiler if you want to install a version that
        is newer than the version distributed with your Perl installation.</p>
  </dd>
  <dt id="Digest::HMAC_MD5"><a class="permalink" href="#Digest::HMAC_MD5">Digest::HMAC_MD5</a></dt>
  <dd>This optional module is required only if you want to use the SASL CRAM-MD5
      authentication mechanism.
    <p class="Pp">You can obtain the latest release from
      <br/>
       http://search.cpan.org/search?module=Digest::HMAC_MD5</p>
  </dd>
  <dt id="GSSAPI"><a class="permalink" href="#GSSAPI">GSSAPI</a></dt>
  <dd>This optional module is required only if you want to use the SASL GSSAPI
      authentication mechanism (e.g. for Kerberos authentication).
    <p class="Pp">You can obtain the latest release from
      <br/>
       http://search.cpan.org/search?module=GSSAPI</p>
  </dd>
  <dt id="URI::ldap,"><a class="permalink" href="#URI::ldap,">URI::ldap,
    URI::ldaps, and URI::ldapi</a></dt>
  <dd>These modules are optional. You only need to install them if you want to
      parse ldap://, ldaps:// or ldapi:// URIs using ldap_parse_uri in
      Net::LDAP::Util. or use LWP::Protocol::ldap, LWP::Protocol::ldaps, or
      LWP::Protocol::ldapi.
    <p class="Pp">You can obtain the latest releases from
      <br/>
       http://search.cpan.org/search?module=URI::ldap
      <br/>
       http://search.cpan.org/search?module=URI::ldaps
      <br/>
       http://search.cpan.org/search?module=URI::ldapi</p>
  </dd>
  <dt id="LWP::Protocol,"><a class="permalink" href="#LWP::Protocol,">LWP::Protocol,
    LWP::MediaTypes, HTTP::Negotiate, and HTTP::Response</a></dt>
  <dd>These optional modules are needed if you want to use perl-ldap's
      LWP::Protocol::ldap, LWP::Protocol::ldaps, or LWP::Protocol::ldapi
      modules.
    <p class="Pp">You can obtain the latest releases from
      <br/>
       http://search.cpan.org/search?module=LWP::Protocol
      <br/>
       http://search.cpan.org/search?module=LWP::MediaTypes
      <br/>
       http://search.cpan.org/search?module=HTTP::Negotiate
      <br/>
       http://search.cpan.org/search?module=HTTP::Response</p>
  </dd>
  <dt id="JSON"><a class="permalink" href="#JSON">JSON</a></dt>
  <dd>This optional module is required for JSON-formatted output of perl-ldap's
      LWP::Protocol::ldap, LWP::Protocol::ldaps, or LWP::Protocol::ldapi
      modules.
    <p class="Pp">If you need it, you can obtain the latest releases from
      <br/>
       http://search.cpan.org/search?module=JSON</p>
  </dd>
  <dt id="Time::Local"><a class="permalink" href="#Time::Local">Time::Local</a></dt>
  <dd>This module is optional, and only required if you want to convert between
      UNIX time and generalizedTime using the functions provided in
      Net::LDAP::Util.</dd>
  <dt id="XML::SAX"><a class="permalink" href="#XML::SAX">XML::SAX and
    XML::SAX::Writer</a></dt>
  <dd>If you want to parse or write DSMLv1 documents with Net::LDAP::DSML to you
      will need these optional modules.
    <p class="Pp">You can obtain the latest releases from
      <br/>
       http://search.cpan.org/search?module=XML::SAX
      <br/>
       http://search.cpan.org/search?module=XML::SAX::Writer</p>
  </dd>
  <dt id="ResourcePool::Factory::Net::LDAP"><a class="permalink" href="#ResourcePool::Factory::Net::LDAP">ResourcePool::Factory::Net::LDAP</a></dt>
  <dd>If you want to use failover the ResourcePool::Factory::Net::LDAP Perl
      module provides methods to do this.
    <p class="Pp">You can obtain the latest release from
      <br/>
       http://search.cpan.org/search?module=ResourcePool::Factory::Net::LDAP</p>
  </dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="USING_NET::LDAP"><a class="permalink" href="#USING_NET::LDAP">USING
  NET::LDAP</a></h1>
<section class="Ss">
<h2 class="Ss" id="How_do_I_connect_to_my_server?"><a class="permalink" href="#How_do_I_connect_to_my_server?">How
  do I connect to my server?</a></h2>
<p class="Pp">The connection to the server is created when you create a new
    Net::LDAP object, e.g.</p>
<p class="Pp"></p>
<pre>
  $ldap = Net::LDAP-&gt;new($server);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Net::LDAP"><a class="permalink" href="#Net::LDAP">Net::LDAP-&gt;new
  sometimes returns undef, why?</a></h2>
<p class="Pp">The constructor will return undef if there was a problem
    connecting to the specified server. Any error message will be available in
    $@</p>
</section>
<section class="Ss">
<h2 class="Ss" id="What_is_the_proper_format_of_the_bind_"><a class="permalink" href="#What_is_the_proper_format_of_the_bind_">What
  is the proper format of the bind DN?</a></h2>
<p class="Pp">The DN used to bind to a directory is a FULLY QUALIFIED DN. The
    exact structure of the DN will depend on what data has been stored in the
    server.</p>
<p class="Pp">The following are valid examples.</p>
<p class="Pp"></p>
<pre>
  uid=clif,ou=People,dc=umich,dc=edu

  cn=directory manager,ou=admins,dc=umich,dc=edu
</pre>
<p class="Pp">In some servers the following would be a valid fully qualified DN
    of the directory manager.</p>
<p class="Pp"></p>
<pre>
  cn=directory manager
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_can_I_tell_when_the_server_returns_an_error,_"><a class="permalink" href="#How_can_I_tell_when_the_server_returns_an_error,_">How
  can I tell when the server returns an error, <b>bind()</b> always returns
  true?</a></h2>
<p class="Pp">Most methods in Net::LDAP return a Net::LDAP::Message object, or a
    sub-class of that. This object will hold the results from the server,
    including the result code.</p>
<p class="Pp">So, for example, to determine the result of the bind
  operation.</p>
<p class="Pp"></p>
<pre>
  $mesg = $ldap-&gt;bind( $dn, password =&gt; $passwd );

  if ( $mesg-&gt;code ) {
    # Handle error codes here
  }
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_can_I_set_the_"><a class="permalink" href="#How_can_I_set_the_">How
  can I set the LDAP version of a connection to my LDAP server?</a></h2>
<p class="Pp">This is done by adding the version option when connecting or
    binding to the LDAP server.</p>
<p class="Pp">For example;</p>
<p class="Pp"></p>
<pre>
  $ldap = Net::LDAP-&gt;new( $server, version =&gt; 3 );
</pre>
<p class="Pp">or</p>
<p class="Pp"></p>
<pre>
  $mesg = $ldap-&gt;bind( $dn, password =&gt; $passwd, version =&gt; 3 );
</pre>
<p class="Pp">Valid version numbers are 2 and 3. As of perl-ldap 0.27 the
    default LDAP version is 3.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="I_did_a_search_on_my_directory_using_the_'search'_method._Where_did_the_results_go?"><a class="permalink" href="#I_did_a_search_on_my_directory_using_the_'search'_method._Where_did_the_results_go?">I
  did a search on my directory using the 'search' method. Where did the results
  go?</a></h2>
<p class="Pp">Your search results are stored in a 'search object'. Consider the
    following:</p>
<p class="Pp"></p>
<pre>
 use Net::LDAP;

 $ldap = Net::LDAP-&gt;new('ldap.acme.com') or die &quot;$@&quot;;
 $mesg = $ldap-&gt;search(
                       base   =&gt; &quot;o=acme.com&quot;,
                       filter =&gt; &quot;uid=jsmith&quot;,
                      );
</pre>
<p class="Pp"><span class="Li">$mesg</span> is a search object. It is a
    reference blessed into the Net::LDAP::Search package. By calling methods on
    this object you can obtain information about the result and also the
    individual entries.</p>
<p class="Pp">The first thing to check is if the search was successful. This is
    done with the method <span class="Li">$mesg</span>-&gt;code. This method
    will return the status code that the server returned. A success will yield a
    zero value, but there are other values, some of which could also be
    considered a success. See Net::LDAP::Constant</p>
<p class="Pp"></p>
<pre>
  use Net::LDAP::Util qw(ldap_error_text);

  die ldap_error_text($mesg-&gt;code)
    if $mesg-&gt;code;
</pre>
<p class="Pp">There are two ways in which you can access the entries. You can
    access then with an index or you can treat the container like a stack and
    shift each entry in turn. For example</p>
<p class="Pp"></p>
<pre>
  # as an array

  # How many entries were returned from the search
  my $max = $mesg-&gt;count;

  for (my $index = 0 ; $index &lt; $max ; $index++) {
    my $entry = $mesg-&gt;entry($index);
    # ...
  }

  # or as a stack

  while (my $entry = $mesg-&gt;shift_entry) {
    # ...
  }
</pre>
<p class="Pp">In each case <span class="Li">$entry</span> is an entry object. It
    is a reference blessed into the Net::LDAP::Entry package. By calling methods
    on this object you can obtain information about the entry.</p>
<p class="Pp">For example, to obtain the DN for the entry</p>
<p class="Pp"></p>
<pre>
  $dn = $entry-&gt;dn;
</pre>
<p class="Pp">To obtain the attributes that a given entry has</p>
<p class="Pp"></p>
<pre>
  @attrs = $entry-&gt;attributes;
</pre>
<p class="Pp">And to get the list of values for a given attribute</p>
<p class="Pp"></p>
<pre>
  @values = $entry-&gt;get( 'sn' );
</pre>
<p class="Pp">And to get the first of the values for a given attribute</p>
<p class="Pp"></p>
<pre>
  $values = $entry-&gt;get( 'cn' );
</pre>
<p class="Pp">One thing to remember is that attribute names are case
    insensitive, so 'sn', 'Sn', 'sN' and 'SN' are all the same.</p>
<p class="Pp">So, if you want to print all the values for the attribute
    <span class="Li">'ou'</span> then this is as simple as</p>
<p class="Pp"></p>
<pre>
  foreach ($entry-&gt;get_value( 'ou' )) {
      print $_,&quot;\n&quot;;
    }
</pre>
<p class="Pp">Now if you just want to print all the values for all the
    attributes you can do</p>
<p class="Pp"></p>
<pre>
  foreach my $attr ($entry-&gt;attributes) {
    foreach my $value ($entry-&gt;get_value($attr)) {
      print $attr, &quot;: &quot;, $value, &quot;\n&quot;;
    }
  }
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_limit_the_scope_of_a_directory_search?"><a class="permalink" href="#How_do_I_limit_the_scope_of_a_directory_search?">How
  do I limit the scope of a directory search?</a></h2>
<p class="Pp">You limit the scope of a directory search by setting the scope
    parameter of search request. Consider the following:</p>
<p class="Pp"></p>
<pre>
 use Net::LDAP;

 $ldap = Net::LDAP-&gt;new('ldap.acme.com') or die &quot;$@&quot;;
 $mesg = $ldap-&gt;search(
                       base   =&gt; &quot;o=acme.com&quot;,
                       scope  =&gt; 'sub',
                       filter =&gt; &quot;uid=jsmith&quot;,
                      );
</pre>
<p class="Pp">Values for the scope parameter are as follows.</p>
<dl class="Bl-tag">
  <dt id="base"><a class="permalink" href="#base">base</a></dt>
  <dd>Search only the base object.</dd>
  <dt id="one"><a class="permalink" href="#one">one</a></dt>
  <dd>Search the entries immediately below the base object.</dd>
  <dt id="sub"><a class="permalink" href="#sub">sub</a></dt>
  <dd></dd>
  <dt id="subtree"><a class="permalink" href="#subtree">subtree</a></dt>
  <dd>Search the whole tree below (and including) the base object. This is the
      default.</dd>
  <dt id="children"><a class="permalink" href="#children">children</a></dt>
  <dd>Search the whole subtree below the base object, excluding the base object
      itself.
    <p class="Pp">Note: <i>children</i> scope requires LDAPv3 subordinate
        feature extension.</p>
  </dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="GETTING_SEARCH_RESULTS"><a class="permalink" href="#GETTING_SEARCH_RESULTS">GETTING
  SEARCH RESULTS</a></h1>
<p class="Pp">There are two ways of retrieving the results of a requested LDAP
    search; inline and by using a callback subroutine.</p>
<section class="Ss">
<h2 class="Ss">USING THE INLINE APPROACH</h2>
<p class="Pp">Using the inline approach involves requesting the data and then
    waiting for all of the data to be returned before the user starts processing
    the data.</p>
<p class="Pp">Example:</p>
<p class="Pp"></p>
<pre>
 use Net::LDAP;

 $ldap = Net::LDAP-&gt;new('ldap.acme.com') or die &quot;$@&quot;;
 $mesg = $ldap-&gt;search(
                       base   =&gt; &quot;o=acme.com&quot;,
                       scope  =&gt; 'sub',
                       filter =&gt; &quot;sn=smith&quot;,
                      );
 #
 # At this point the user can get the returned data as an array
 # or as a stack.
 # In this example we will use an array

 # How many entries were returned from the search
 my $max = $mesg-&gt;count;

 for (my $index = 0 ; $index &lt; $max ; $index++)
 {
   my $entry = $mesg-&gt;entry($index);
   my $dn = $entry-&gt;dn; # Obtain DN of this entry

   @attrs = $entry-&gt;attributes; # Obtain attributes for this entry.
   foreach my $var (@attrs)
   {
     #get a list of values for a given attribute
     $attr = $entry-&gt;get_value( $var, asref =&gt; 1 );
     if ( defined($attr) )
     {
       foreach my $value ( @$attr )
       {
         print &quot;$var: $value\n&quot;;  # Print each value for the attribute.
       }
     }
   }
 }
</pre>
<p class="Pp">As you can see the example is straightforward, but there is one
    drawback to this approach. You must wait until all entries for the request
    search to be returned before you can process the data. If there several
    thousand entries that match the search filter this could take quite a long
    time period.</p>
</section>
<section class="Ss">
<h2 class="Ss">USING THE CALLBACK SUBROUTINE APPROACH</h2>
<p class="Pp">Using the callback approach involves requesting the data be sent
    to a callback subroutine as each entry arrives at the client.</p>
<p class="Pp">A callback is just a subroutine that is passed two parameters when
    it is called, the mesg and entry objects.</p>
<p class="Pp">Example:</p>
<p class="Pp"></p>
<pre>
 use Net::LDAP;

 $ldap = Net::LDAP-&gt;new('ldap.acme.com') or die &quot;$@&quot;;
 $mesg = $ldap-&gt;search(
                       base   =&gt; &quot;o=acme.com&quot;,
                       scope  =&gt; 'sub',
                       filter =&gt; &quot;sn=smith&quot;,
                       callback =&gt; \&amp;callback,
                      );
 #
 # At this point the user needs to check the status of the
 # ldap search.
 #

 if ( $mesg-&gt;code )
 {
    $errstr = $mesg-&gt;code;
    print &quot;Error code:  $errstr\n&quot;;
    $errstr = ldap_error_text($errstr);
    print &quot;$errstr\n&quot;;
 }


 sub callback
 {
 my ( $mesg, $entry) = @_;

   #
   # First you must check to see if something was returned.
   # Last execution of callback subroutine will have no
   # defined entry and mesg object
   #
   if ( !defined($entry) )
   {
     print &quot;No records found matching filter $match.\n&quot;
     if ($mesg-&gt;count == 0) ; # if mesg is not defined nothing will print.
     return;
   }

   my $dn = $entry-&gt;dn; # Obtain DN of this entry

   @attrs = $entry-&gt;attributes; # Obtain attributes for this entry.
   foreach my $var (@attrs)
   {
    #get a list of values for a given attribute
    $attr = $entry-&gt;get_value( $var, asref =&gt; 1 );
    if ( defined($attr) )
    {
      foreach my $value ( @$attr )
      {
        print &quot;$var: $value\n&quot;;  # Print each value for the attribute.
      }
    }
   }
   #
   # For large search requests the following line of code
   # may be very important, it will reduce the amount of memory
   # used by the search results.
   #
   # If the user is not worried about memory usage then the line
   # of code can be omitted.
   #
   $mesg-&gt;pop_entry;

 }  # End of callback subroutine
</pre>
<p class="Pp">As you can see the example is straightforward and it does not
    waste time waiting for all of the entries to be returned. However if the
    pop_entry method is not used the callback approach can allocate a lot of
    memory to the search request.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="USING_NET::LDAPS"><a class="permalink" href="#USING_NET::LDAPS">USING
  NET::LDAPS</a></h1>
<section class="Ss">
<h2 class="Ss" id="Using_an_"><a class="permalink" href="#Using_an_">Using an
  SSL network connection, how do I connect to my server?</a></h2>
<p class="Pp">This class is a subclass of Net::LDAP so all the normal Net::LDAP
    methods can be used with a Net::LDAPS object; see the documentation for
    Net::LDAP to find out how to query a directory server using the LDAP
    protocol.</p>
<p class="Pp">The connection to the server is created when you create a new
    Net::LDAPS object, e.g.</p>
<p class="Pp"></p>
<pre>
  $ldaps = Net::LDAPS-&gt;new($server,
                           port =&gt; '10000',
                           verify =&gt; 'require',
                           capath =&gt; '/usr/local/cacerts/',
                           );
</pre>
<p class="Pp">Starting with version 0.28 perl-ldap also supports URIs in the new
    method. So, the above can also be expressed as:</p>
<p class="Pp"></p>
<pre>
  $ldaps = Net::LDAP-&gt;new(&quot;ldaps://$server&quot;,
                           port =&gt; '10000',
                           verify =&gt; 'require',
                           capath =&gt; '/usr/local/cacerts/',
                           );
</pre>
<p class="Pp">There are additional options to the new method with LDAPS URIs and
    the LDAPS new method and several additional methods are included in the
    LDAPS object class.</p>
<p class="Pp">For further information and code examples read the LDAPS module
    documentation; perldoc Net::LDAPS</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="USING_LDAP_GROUPS."><a class="permalink" href="#USING_LDAP_GROUPS.">USING
  LDAP GROUPS.</a></h1>
<section class="Ss">
<h2 class="Ss" id="What_are_"><a class="permalink" href="#What_are_">What are
  LDAP groups?</a></h2>
<p class="Pp">LDAP groups are object classes that contain an attribute that can
    store multiple DN values. Two standard object classes are 'groupOfNames'
    (which has a 'member' attribute) and 'groupOfUniqueNames' (which has a
    'uniqueMember' attribute.)</p>
<p class="Pp">According to the RFCs a group can be a member of another group,
    but some LDAP server vendors restrict this flexibility by not allowing
    nested groups in their servers.</p>
<p class="Pp">Two scripts for working with groups are available in the contrib
    directory. They are isMember.pl and printMembers.pl.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_you_format_a_filter_to_search_for_entries_whose_'member'_attribute_has_a_particular_value?"><a class="permalink" href="#How_do_you_format_a_filter_to_search_for_entries_whose_'member'_attribute_has_a_particular_value?">How
  do you format a filter to search for entries whose 'member' attribute has a
  particular value?</a></h2>
<p class="Pp">Asking for (member=*) is OK - the directory uses the equality
    matching rule which is defined for the member attribute.</p>
<p class="Pp">Asking for (member=c*) is not OK - there is no defined substring
    matching rule for the member attribute. That's because the member values are
    *not* strings, but distinguished names. There is no substring matching rule
    for DNs, see RFC 4519 section 2.7.</p>
<p class="Pp">What you have to do is get the results of (member=*) and then
    select the required results from the returned values. You need to do this
    using knowledge of the string representation of DNs defined in RFC 4514,
    which is important because the same DN can have different string
    representations. So you need to perform some canonicalization if you want to
    be correct.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="USING_DSML."><a class="permalink" href="#USING_DSML.">USING
  DSML.</a></h1>
<section class="Ss">
<h2 class="Ss" id="How_can_I_access_"><a class="permalink" href="#How_can_I_access_">How
  can I access DSML features from perl-ldap?</a></h2>
<p class="Pp">Directory Service Markup Language (DSML) is the XML standard for
    representing directory service information in XML.</p>
<p class="Pp">Support for DSML is included in perl-ldap starting with version
    .20.</p>
<p class="Pp">At the moment this module only reads and writes DSML entry
    entities. It cannot process any schema entities because schema entities are
    processed differently than elements.</p>
<p class="Pp">Eventually this module will be a full level 2 consumer and
    producer enabling you to give you full DSML conformance.</p>
<p class="Pp">The specification for DSML is at
  http://www.oasis-open.org/specs/</p>
<p class="Pp">For further information and code examples read the DSML module
    documentation; perldoc Net::LDAP::DSML</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="USING_CONTROLS_AND_VIRTUAL_LISTS."><a class="permalink" href="#USING_CONTROLS_AND_VIRTUAL_LISTS.">USING
  CONTROLS AND VIRTUAL LISTS.</a></h1>
<section class="Ss">
<h2 class="Ss" id="How_do_I_access_the_Control_features?"><a class="permalink" href="#How_do_I_access_the_Control_features?">How
  do I access the Control features?</a></h2>
<p class="Pp">Support for LDAP version 3 Control objects is included in
    perl-ldap starting with version .20.</p>
<p class="Pp">For further information and code examples read the Control module
    documentation; perldoc Net::LDAP::Control</p>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_access_the_Virtual_List_features?"><a class="permalink" href="#How_do_I_access_the_Virtual_List_features?">How
  do I access the Virtual List features?</a></h2>
<p class="Pp">Support for Virtual Lists is included in perl-ldap starting with
    version .20.</p>
<p class="Pp">For further information and code examples read the Control module
    documentation; perldoc Net::LDAP::Control</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="GENERAL_QUESTIONS."><a class="permalink" href="#GENERAL_QUESTIONS.">GENERAL
  QUESTIONS.</a></h1>
<section class="Ss">
<h2 class="Ss" id="Are_there_any_other_code_examples."><a class="permalink" href="#Are_there_any_other_code_examples.">Are
  there any other code examples.</a></h2>
<p class="Pp">Yes, there is an Examples pod file. To view the pod do the
    following command; perldoc Net::LDAP::Examples</p>
<p class="Pp">There is user contributed software in the contrib directory that
    is supplied with the perl-ldap distribution. This is an excellent source of
    information on how to use the perl-ldap module.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Are_there_any_performance_issues_with_perl-ldap?"><a class="permalink" href="#Are_there_any_performance_issues_with_perl-ldap?">Are
  there any performance issues with perl-ldap?</a></h2>
<p class="Pp">In the vast majority of use cases (one user has suggested 9 out of
    10) there are no performance issues with perl-ldap.</p>
<p class="Pp">Where you may wish to use perl-ldap to perform, for example, a
    very large number of queries (e.g. 10,000) in succession you may find a
    noticeable performance difference between perl-ldap and non pure-Perl
    modules. This is not because of perl-ldap itself but because of the
    pure-Perl Convert::ASN1 module that it depends on.</p>
<p class="Pp">You should make up your own mind, based upon your own situation
    (performance requirements, hardware etc.) as to whether you should use
    perl-ldap or not. The figures quoted in this answer are only indicative, and
    will differ for different people.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Can_I_contribute_Perl_scripts_that_use_perl-ldap_to_the_contrib_section?"><a class="permalink" href="#Can_I_contribute_Perl_scripts_that_use_perl-ldap_to_the_contrib_section?">Can
  I contribute Perl scripts that use perl-ldap to the contrib section?</a></h2>
<p class="Pp">Any one can submit a Perl script that uses perl-ldap for inclusion
    in the contrib section. The perl-ldap maintainers will determiner if the
    script will be included and will do the initial check in of the script to
    the Git repository at https://github.com/perl-ldap/perl-ldap.</p>
<p class="Pp">There are a couple of requirements for consideration.</p>
<p class="Pp">You must supply a one line description of your script to be
    included in the contrib README file.</p>
<p class="Pp">Inside the script will be the pod documentation for the script. No
    auxiliary documentation will be allowed. For examples of how to do this see
    the tklkup script currently in the contrib section.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Is_it_possible_to_get_a_complete_entry,_"><a class="permalink" href="#Is_it_possible_to_get_a_complete_entry,_">Is
  it possible to get a complete entry, DN and attributes without specifying the
  attributes name?</a></h2>
<p class="Pp">Yes, just specify you want a list of no attributes back. The RFC
    says that this tells the server to return all readable attributes back
    (there may be access controls to prevent some from being returned.)</p>
<p class="Pp">So in the search method, just set (for LDAPv2):</p>
<p class="Pp"></p>
<pre>
                attrs =&gt; [ ]
</pre>
<p class="Pp">If you are using LDAPv3, you can specify an attribute called
    &quot;*&quot; instead, which lets you ask for additional (i.g. operational)
    attributes in the same search.</p>
<p class="Pp"></p>
<pre>
                attrs =&gt; [ &quot;*&quot; ]
</pre>
<p class="Pp">To get all operational attributes in a search, some servers allow
    the use of the &quot;+&quot; pseudo attribute. So that with these
  servers</p>
<p class="Pp"></p>
<pre>
                attrs =&gt; [ &quot;*&quot;, &quot;+&quot; ]
</pre>
<p class="Pp">will return the most information from the server.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_put_a_"><a class="permalink" href="#How_do_I_put_a_">How
  do I put a JPEG photo into a entry in the directory?</a></h2>
<p class="Pp">Follow the following code example, replacing the (...) with
    whatever is relevant to your setup.</p>
<p class="Pp"></p>
<pre>
  use Net::LDAP;
  use Net::LDAP::Util qw(ldap_error_text);
  use CGI;

  local $/ = undef;
  my $jpeg = &lt;$filename&gt;;

  my $ldap = Net::LDAP-&gt;new(...);
  my $res = $ldap-&gt;bind(...);
     $res = $ldap-&gt;modify(...,
                   add =&gt; [ 'jpegPhoto' =&gt; [ $jpeg ] ]);
     $res = $ldap-&gt;unbind();
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_add_a_jpeg_photo_into_a_entry_in_the_directory_via_html-forms?"><a class="permalink" href="#How_do_I_add_a_jpeg_photo_into_a_entry_in_the_directory_via_html-forms?">How
  do I add a jpeg photo into a entry in the directory via html-forms?</a></h2>
<p class="Pp">Follow the following code example, replacing the (...) with
    whatever is relevant to your setup.</p>
<p class="Pp"></p>
<pre>
  use Net::LDAP;
  use Net::LDAP::Util qw(ldap_error_text);
  use CGI;

  my $q = new CGI;

  print $q-&gt;header;
  print $q-&gt;start_html(-title =&gt; 'Change JPEG photo');

  if ($q-&gt;param('Update')) {
          my $filename = $q-&gt;param('jpeg');
          local $/ = undef;
          my $jpeg = &lt;$filename&gt;;

          my $ldap = Net::LDAP-&gt;new(...);
          my $res = $ldap-&gt;bind(...);
          $res = $ldap-&gt;modify(...,
                          add =&gt; [ 'jpegPhoto' =&gt; [ $jpeg ] ]);
          $res = $ldap-&gt;unbind();
  } else {
          print $q-&gt;start_multipart_form();
          print $q-&gt;filefield(-name =&gt; 'jpeg', -size =&gt; 50);
          print $q-&gt;submit('Update');
          print $q-&gt;end_form();
  }

  print $q-&gt;end_html();
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="What_happens_when_you_delete_an_attribute_that_does_not_exist?"><a class="permalink" href="#What_happens_when_you_delete_an_attribute_that_does_not_exist?">What
  happens when you delete an attribute that does not exist?</a></h2>
<p class="Pp">It is an error to delete an attribute that doesn't exist. When you
    get the error back the server ignores the entire modify operation you sent
    it, so you need to make sure the error doesn't happen.</p>
<p class="Pp">Another approach, if you are using LDAPv3 (note beginning with
    version .27 Net::LDAP uses LDAPv3 by default) is to use a 'replace' with
    your attribute name and no values. In LDAPv3, this is defined to always work
    even if that attribute doesn't exist in the entry.</p>
<p class="Pp">I.e.:</p>
<p class="Pp"></p>
<pre>
  my $mesg = $ldap-&gt;modify( $entry, replace =&gt; { %qv_del_arry } );
</pre>
<p class="Pp">But make sure you are using LDAPv3, because that is defined to
    <b>not</b> work in LDAPv2. (A nice incompatibility between LDAPv2 and
    LDAPv3.)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="How_can_I_delete_a_referral_from_an_"><a class="permalink" href="#How_can_I_delete_a_referral_from_an_">How
  can I delete a referral from an LDAP tree?</a></h2>
<p class="Pp">Since this is a proprietary feature, you will have to check your
    server's documentation. You might find that you need to use a control. If
    there is a control called something like ManageDsaIT, that's the one you
    should probably use. For proper operation you will need the oid number for
    ManageDsaIT; 2.16.840.1.113730.3.4.2 and do not specify a value for
  type.</p>
<p class="Pp">The code required will look similar to the following code
  snippet.</p>
<p class="Pp"></p>
<pre>
  $mesg =  $ldap-&gt;delete(&quot;ref=\&quot;ldap://acme/c=us,o=bricks\&quot;,o=clay&quot;,
                  control =&gt; {type =&gt; &quot;2.16.840.1.113730.3.4.2&quot;} );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_add_an_"><a class="permalink" href="#How_do_I_add_an_">How
  do I add an ACI/ACL entry to a directory server with perl-ldap?</a></h2>
<p class="Pp">ACIs and ACLs are proprietary features in LDAP. The following code
    snippet works with a Netscape directory server. You will need the specify
    the correct DN (-DN-) and correct attribute(s) (-ATTRNAMEs-).</p>
<p class="Pp"></p>
<pre>
  my $aci = '(target=&quot;ldap:///-DN-&quot;)(targetattr=&quot;-ATTRNAMEs-&quot;)(version 3.0;
              acl &quot;-ACLNAME-&quot;; deny(all) userdn = &quot;ldap:///self&quot;;)' ;

  $ldap-&gt;modify($dn_modif, add =&gt; {'aci' =&gt; $aci });
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_avoid_file_type_and_data_type_mis-matching_when_loading_data_from_a_Win32_system?"><a class="permalink" href="#How_do_I_avoid_file_type_and_data_type_mis-matching_when_loading_data_from_a_Win32_system?">How
  do I avoid file type and data type mis-matching when loading data from a Win32
  system?</a></h2>
<p class="Pp">When loading a binary attribute with data read from a file on a
    Win32 system, it has been noted that you should set &quot;binmode&quot; on
    the file before reading the file contents into the data array.</p>
<p class="Pp">Another possible solution to this problem is to convert the binary
    data into a base64 encoded string and then store the encoded string in the
    file. Then when reading the file, decode the base64 encoded string back to
    binary and then use perl-ldap to store the data in the directory.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_create_an_account_in_Active_Directory?"><a class="permalink" href="#How_do_I_create_an_account_in_Active_Directory?">How
  do I create an account in Active Directory?</a></h2>
<p class="Pp">Active Directory accounts need some AD-specific attributes (only
    the method we're interested in, no error checking):</p>
<p class="Pp"></p>
<pre>
  $mesg = $ldap-&gt;add( 'cn=John Doe,cn=Users,dc=your,dc=ads,dc=domain',
                      attrs =&gt; [
                        objectClass =&gt; [ qw/top user/ ],
                        cn =&gt; 'John Doe',
                        sn =&gt; 'Doe',
                        givenName =&gt; 'John',
                        displayName =&gt; 'John &quot;the one&quot; Doe',
                        userAccountControl =&gt; 514,      # disabled regular user
                        sAMAccountName =&gt; 'JohnDoe',
                        userPrincipalName =&gt; 'JohnDoe@your.ads.domain'
                      ]
                    );
</pre>
<p class="Pp">In order to find out what other attributes can be set,
    interactively edit the user in the Active Directory Users and Computers MCC
    plugin, perform an LDAP search operation to find out what changed, and
    update your &quot;add&quot; routine accordingly.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="How_can_I_create_a_group_in_Active_Directory?"><a class="permalink" href="#How_can_I_create_a_group_in_Active_Directory?">How
  can I create a group in Active Directory?</a></h2>
<p class="Pp">Similar to accounts, groups need some AD-specific attributes
  too:</p>
<p class="Pp"></p>
<pre>
  $mesg = $ldap-&gt;add( 'cn=NewGroup,cn=Users,dc=your,dc=ads,dc=domain',
                      attrs =&gt; [
                        objectClass =&gt; [ qw/top group/ ],
                        cn =&gt; 'NewGroup',
                        sAMAccountName =&gt; 'NewGroup',
                        groupType =&gt; 0x80000002         # global, security enabled group
                      ]
                    );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_search_for_disabled_accounts_in_Active_Directory"><a class="permalink" href="#How_do_I_search_for_disabled_accounts_in_Active_Directory">How
  do I search for disabled accounts in Active Directory</a></h2>
<p class="Pp">The bit values in
    <span class="Li">&quot;userAccountControl&quot;</span> require the
    LDAP_MATCHING_RULE_BIT_AND matching rule's OID to be used in an extensible
    filter term:</p>
<p class="Pp"></p>
<pre>
  $mesg = $ldap-&gt;search( base   =&gt; 'cn=Users,dc=your,dc=ads,dc=domain',
                         filter =&gt; '(&amp;(objectclass=user)' .
                                      (userAccountControl:1.2.840.113556.1.4.803:=2))',
                         attrs  =&gt; [ '1.1' ]
                       );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_can_I_search_for_security_groups_in_Active_Directory"><a class="permalink" href="#How_can_I_search_for_security_groups_in_Active_Directory">How
  can I search for security groups in Active Directory</a></h2>
<p class="Pp">With groups, the same applies to the
    <span class="Li">&quot;groupType&quot;</span> bit-field:</p>
<p class="Pp"></p>
<pre>
  $mesg = $ldap-&gt;search( base   =&gt; 'cn=Users,dc=your,dc=ads,dc=domain',
                         filter =&gt; '(&amp;(objectclass=group)' .
                                      (groupType:1.2.840.113556.1.4.803:=2147483648))',
                                      # 2147483648 = 0x80000000
                         attrs  =&gt; [ '1.1' ]
                       );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_can_I_search_for_all_members_of_a_group_in_"><a class="permalink" href="#How_can_I_search_for_all_members_of_a_group_in_">How
  can I search for all members of a group in AD (including group
  nesting)?</a></h2>
<p class="Pp">AD allows you to find all members of a specified group, the direct
    members plus those that are member of the group via group nesting.</p>
<p class="Pp">The trick to this is the special
    <span class="Li">&quot;LDAP_MATCHING_RULE_IN_CHAIN&quot;</span> matching
    rule:</p>
<p class="Pp"></p>
<pre>
  $mesg = $ldap-&gt;search( base   =&gt; 'cn=Users,dc=your,dc=ads,dc=domain',
                         filter =&gt; '(memberOf:1.2.840.113556.1.4.1941:=cn=Testgroup,dc=your,dc=ads,dc=domain)',
                         attrs  =&gt; [ '1.1' ]
                       );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_can_I_search_for_all_groups_one_user_is_a_member_of_in_"><a class="permalink" href="#How_can_I_search_for_all_groups_one_user_is_a_member_of_in_">How
  can I search for all groups one user is a member of in AD (including group
  nesting)?</a></h2>
<p class="Pp">Similarly you can search for all the groups one user is member of,
    either directly or via group nesting.</p>
<p class="Pp"></p>
<pre>
  $mesg = $ldap-&gt;search( base   =&gt; 'dc=your,dc=ads,dc=domain',
                         filter =&gt; '(member:1.2.840.113556.1.4.1941:=cn=TestUser,ou=Users,dc=your,dc=ads,dc=domain)',
                         attrs  =&gt; [ '1.1' ]
                       );
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_search_for_all_members_of_a_large_group_in_"><a class="permalink" href="#How_do_I_search_for_all_members_of_a_large_group_in_">How
  do I search for all members of a large group in AD?</a></h2>
<p class="Pp">AD normally restricts the number of attribute values returned in
    one query. The exact number depends on the AD server version: it was ~1000
    in Win2000, 1500 in Win2003 and is 5000 in Win2008 &amp; Win2008R2.</p>
<p class="Pp">Performing the same standard search again will yield the same
    values again.</p>
<p class="Pp">So, how can you get all members of a really large AD group?</p>
<p class="Pp">The trick to use here is to use Microsoft's <i>range option</i>
    when searching, i.e instead of doing one search for plain
    <span class="Li">&quot;member&quot;</span>, perform multiple searches for
    e.g. <span class="Li">&quot;member;range=1000-*&quot;</span> where the range
    starting index increases accordingly:</p>
<p class="Pp"></p>
<pre>
  my $mesg;
  my @members;
  my $index = 0;

  while ($index ne '*') {
    $mesg = $ldap-&gt;search( base   =&gt; 'cn=Testgroup,dc=your,dc=ads,dc=domain',
                           filter =&gt; '(objectclass=group)',
                           scope  =&gt; 'base',
                           attrs  =&gt; [ ($index &gt; 0) ? &quot;member;range=$index-*&quot; : 'member' ]
                         );
    if ($mesg-&gt;code == LDAP_SUCCESS) {
      my $entry = $mesg-&gt;entry(0);
      my $attr;

      # large group: let's do the range option dance
      if (($attr) = grep(/^member;range=/, $entry-&gt;attributes)) {
        push(@members, $entry-&gt;get_value($attr));

        if ($attr =~ /^member;range=\d+-(.*)$/) {
          $index = $1;
          $index++  if ($index ne '*');
        }
      }
      # small group: no need for the range dance
      else {
        @members = $entry-&gt;get_value('member');
        last;
      }
    }
    # failure
    else {
      last;
    }
  }

  if ($mesg-&gt;code == LDAP_SUCCESS) {
    # success: @members contains the members of the group
  }
  else {
    # failure: deal with the error in $mesg
  }
</pre>
<p class="Pp">See
    &lt;http://msdn.microsoft.com/en-us/library/windows/desktop/aa367017.aspx&gt;
    for more details.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_create_a_Microsoft_Exchange_5.x_user?"><a class="permalink" href="#How_do_I_create_a_Microsoft_Exchange_5.x_user?">How
  do I create a Microsoft Exchange 5.x user?</a></h2>
<p class="Pp">This is a solution provided by a perl-ldap user.</p>
<p class="Pp">This code works with ActiveState Perl running on WinNT 4. Please
    note that this requires the Win32::Perms module, and needs valid NT account
    info to replace the placeholders.</p>
<p class="Pp"></p>
<pre>
  use Net::LDAP;
  use Net::LDAP::Util;
  use Win32::Perms;

  #Constants taken from ADSI Type Library
  $ADS_RIGHT_EXCH_ADD_CHILD = 1;
  $ADS_RIGHT_EXCH_DELETE = 0x10000;
  $ADS_RIGHT_EXCH_DS_REPLICATION = 64;
  $ADS_RIGHT_EXCH_DS_SEARCH = 256;
  $ADS_RIGHT_EXCH_MAIL_ADMIN_AS = 32;
  $ADS_RIGHT_EXCH_MAIL_RECEIVE_AS = 16;
  $ADS_RIGHT_EXCH_MAIL_SEND_AS = 8;
  $ADS_RIGHT_EXCH_MODIFY_ADMIN_ATT = 4;
  $ADS_RIGHT_EXCH_MODIFY_SEC_ATT = 128;
  $ADS_RIGHT_EXCH_MODIFY_USER_ATT = 2;

  $EXCH_USER_RIGHTS = $ADS_RIGHT_EXCH_MAIL_RECEIVE_AS |
  $ADS_RIGHT_EXCH_MAIL_SEND_AS |
  $ADS_RIGHT_EXCH_MODIFY_USER_ATT;

  $exch = Net::LDAP-&gt;new('server', debug =&gt;0) || die $@;

  $exch-&gt;bind( 'cn=admin_user,cn=nt_domain,cn=admin', version =&gt;3,
  password=&gt;'password');

  $myObj = Win32::Perms-&gt;new();
  $Result = $myObj-&gt;Owner('nt_domain\user_name');
  $myObj-&gt;Group('nt_domain\Everyone');
  $myObj-&gt;Allow('nt_domain\user_name',
  $EXCH_USER_RIGHTS,OBJECT_INHERIT_ACE);
  $BinarySD = $myObj-&gt;GetSD(SD_RELATIVE);
  $TextSD = uc(unpack( &quot;H*&quot;, $BinarySD ));
  Win32::Perms::ResolveSid('nt_domain\user_name', $sid);
  $mysid = uc(unpack(&quot;H*&quot;,$sid));

  $result = $exch-&gt;add ( dn   =&gt;
                'cn=user_name,cn=container,ou=site,o=organisation',
                attr =&gt; [ 'objectClass' =&gt; ['organizationalPerson'],
                          'cn'   =&gt; 'directory_name',
                          'uid' =&gt; 'mail_nickname',
                          'mail' =&gt; 'smtp_address',
                        'assoc-nt-account' =&gt; [ $mysid ],
                        'nt-security-descriptor' =&gt; [ $TextSD ],
                        'mailPreferenceOption'  =&gt; 0
                        ]
              );


  print ldap_error_name($result-&gt;code);
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_reset_a_user's_password_..."><a class="permalink" href="#How_do_I_reset_a_user's_password_...">How
  do I reset a user's password ...</a></h2>
<p class="Pp"><i>... in most LDAP servers?</i></p>
<p class="Pp">Most LDAP servers use the standard userPassword attribute as the
    attribute to set when you want to change a user's password.</p>
<p class="Pp">They usually allow to set the password either using the regular
    modify operation on the userPassword attribute or using the extended LDAP
    Password Modify operation defined in RFC3062.</p>
<p class="Pp">The recommended method is the extended Password Modify operation,
    which offers a standardized way to set user passwords but unfortunately is
    not available on all LDAP servers.</p>
<p class="Pp">Whether the extended Password Modify operation is available can be
    found out by searching the attribute supportedExtension for the value
    1.3.6.1.4.1.4203.1.11.1 in the RootDSE object.</p>
<p class="Pp">If the extended Password Modify operation is not available the
    alternative is the regular modification of the userPassword attribute.</p>
<p class="Pp">But this method has some drawbacks:</p>
<ul class="Bl-bullet">
  <li>Depending on the type of the server the arguments to the modify operations
      may vary. Some want the modify done with replace, some want it done by
      explicitly deleting the old password and add of the new one. This may even
      depend on whether you change the password for the bound user or as an
      administrator for another user.</li>
  <li>With the modify operation some servers expect the client to do the hashing
      of the password on the client side. I.e. all clients that set passwords
      need to agree on the algorithm and the format of the hashed password.</li>
  <li>Some LDAP servers do not allow setting the password if the connection is
      not sufficiently secured. I.e. require SSL or TLS support to set the
      password (which is heavily recommended anyway ;-)</li>
</ul>
<p class="Pp">Here is an example of how to change your own password (for
    brevity's sake error checking is left out):</p>
<p class="Pp"></p>
<pre>
  use Net::LDAP;

  my $ldap = Net::LDAP-&gt;new('ldaps://server.domain')  or  die &quot;$@&quot;;
  my $mesg = $ldap-&gt;bind('cn=Joe User,dc=perl,dc=ldap,dc=org',
                         password =&gt; 'oldPW');

  my $rootdse = $ldap-&gt;root_dse();

  if ($rootdse-&gt;supported_extension('1.3.6.1.4.1.4203.1.11.1') {

      require Net::LDAP::Extension::SetPassword;

      $mesg = $ldap-&gt;set_password(user =&gt; 'cn=Joe User,dc=perl,dc=ldap,dc=org',
                                  oldpasswd =&gt; 'oldPW',
                                  newpasswd =&gt; 'newPW');
  }
  else {
      $mesg = $ldap-&gt;modify('cn=Joe User,dc=perl,dc=ldap,dc=org',
                            changes =&gt; [
                                delete =&gt; [ userPassword =&gt; $oldPW ]
                                add    =&gt; [ userPassword =&gt; $newPW ] ]);
  }

  $ldap-&gt;unbind();
</pre>
<p class="Pp"><i>... in MS Active Directory?</i></p>
<p class="Pp">With Active Directory a user's password is stored in the
    unicodePwd attribute and changed using the regular modify operation.</p>
<p class="Pp">ADS expects this password to be encoded in Unicode - UTF-16 to be
    exact. Before the Unicode conversion is done the password needs to be
    surrounded by double quotes which do not belong to the user's password.</p>
<p class="Pp">For the password modify operation to succeed SSL is required.</p>
<p class="Pp">When changing the password for the user bound to the directory ADS
    expects it to be done by deleting the old password and adding the new one.
    When doing it as a user with administrative privileges replacing the
    unicodePwd's value with a new one is allowed too.</p>
<p class="Pp">Perl-ldap contains convenience methods for Active Directory that
    allow one to perform this task very easily.</p>
<p class="Pp">Here's an example that demonstrates setting your own password from
    <span class="Li">$oldPW</span> to <span class="Li">$newPW</span> (again
    almost no error checking):</p>
<p class="Pp"></p>
<pre>
  use Net::LDAP;
  use Net::LDAP::Extra qw(AD);

  my $ldap = Net::LDAP-&gt;new('ldaps://ads.domain.controller')  or  die &quot;$@&quot;;

  my $mesg = $ldap-&gt;bind('cn=Joe User,dc=your,dc=ads,dc=domain',
                         password =&gt; $oldPW);

  $mesg = $ldap-&gt;change_ADpassword('cn=Joe User,dc=your,dc=ads,dc=domain',
                                   $oldPW, $newPW);

  $ldap-&gt;unbind();
</pre>
<p class="Pp">And the same for perl-ldap versions before 0.49, where everything
    needs to be done by hand:</p>
<p class="Pp"></p>
<pre>
  use Net::LDAP;
  use Unicode::Map8;
  use Unicode::String qw(utf16);

  # build the conversion map from your local character set to Unicode
  my $charmap = Unicode::Map8-&gt;new('latin1')  or  die;

  # surround the PW with double quotes and convert it to UTF-16
  # byteswap() was necessary in experiments on i386 Linux, YMMV
  my $oldUniPW = $charmap-&gt;tou('&quot;'.$oldPW.'&quot;')-&gt;byteswap()-&gt;utf16();
  my $newUniPW = $charmap-&gt;tou('&quot;'.$newPW.'&quot;')-&gt;byteswap()-&gt;utf16();

  my $ldap = Net::LDAP-&gt;new('ldaps://ads.domain.controller')  or  die &quot;$@&quot;;

  my $mesg = $ldap-&gt;bind('cn=Joe User,dc=your,dc=ads,dc=domain',
                         password =&gt; $oldPW);

  $mesg = $ldap-&gt;modify('cn=Joe User,dc=your,dc=ads,dc=domain',
                        changes =&gt; [
                            delete =&gt; [ unicodePwd =&gt; $oldUniPW ]
                            add    =&gt; [ unicodePwd =&gt; $newUniPW ] ]);

  $ldap-&gt;unbind();
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="How_can_I_simulate_server_failover?"><a class="permalink" href="#How_can_I_simulate_server_failover?">How
  can I simulate server failover?</a></h2>
<p class="Pp">Perl-ldap does not do server failover, however there are several
    programming options for getting around this situation.</p>
<p class="Pp">Here is one possible solution:</p>
<p class="Pp"></p>
<pre>
  $ldaps = Net::LDAPS-&gt;new([ $ldapserverone, $ldapservertwo ],
                           port=&gt;636, timeout=&gt;5)  or  die &quot;$@&quot;;
</pre>
<p class="Pp">For perl-ldap versions before 0.27, the same goal can be achieved
    using:</p>
<p class="Pp"></p>
<pre>
  unless ( $ldaps =
            Net::LDAPS-&gt;new($ldapserverone,
                            port=&gt;636,timeout=&gt;5) )
          {
              $ldaps = Net::LDAPS-&gt;new($ldapservertwo,
                                       port=&gt;636,timeout=&gt;20) ||
              return
              &quot;Can't connect to $ldapserverone or $ldapservertwo via LDAPS: $@&quot;;
          }
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Using_X.509_certificates."><a class="permalink" href="#Using_X.509_certificates.">Using
  X.509 certificates.</a></h1>
<section class="Ss">
<h2 class="Ss" id="How_do_I_store_X.509_certificates_in_the_directory?"><a class="permalink" href="#How_do_I_store_X.509_certificates_in_the_directory?">How
  do I store X.509 certificates in the directory?</a></h2>
<p class="Pp">The first problem here is that there are many different formats to
    hold certificates in, for example PEM, DER, PKCS#7 and PKCS#12. The
    directory <b>only</b> uses the DER format (more correctly, it only uses the
    BER format) which is a binary format.</p>
<p class="Pp">Your first job is to ensure that your certificates are therefore
    in DER/BER format. You could use OpenSSL to convert from PEM like this:</p>
<p class="Pp"></p>
<pre>
  openssl x509 -inform PEM -in cert.pem -outform DER -out cert.der
</pre>
<p class="Pp">Consult the OpenSSL documentation to find out how to perform other
    conversions.</p>
<p class="Pp">To add a certificate to the directory, just slurp in the DER/BER
    certificate into a scalar variable, and add it to the entry's
    userCertificate attribute. How you do that will depend on which version of
    LDAP you are using.</p>
<p class="Pp">To slurp in the certificate try something like this:</p>
<p class="Pp"></p>
<pre>
  my $cert;
  {
      local $/ = undef; # Slurp mode
      open CERT, &quot;cert.der&quot; or die;
      binmode CERT;     # for Windows e.a.
      $cert = &lt;CERT&gt;;
      close CERT;
  }
  # The certificate is now in $cert
</pre>
<p class="Pp">For LDAPv2, because most directory vendors ignore the string
    representation of certificates defined in RFC 1778, you should add this
    value to the directory like this:</p>
<p class="Pp"></p>
<pre>
  $res = $ldap-&gt;modify(&quot;cn=My User, o=My Company,c=XY&quot;,
                       add =&gt; [
                               'userCertificate' =&gt; [ $cert ]
                              ]);
  die &quot;Modify failed (&quot; . ldap_error_name($res-&gt;code) . &quot;)\n&quot;
      if $res-&gt;code;
</pre>
<p class="Pp">For LDAPv3, you must do this instead:</p>
<p class="Pp"></p>
<pre>
  $res = $ldap-&gt;modify(&quot;cn=My User, o=My Company, c=XY&quot;,
                       add =&gt; [
                               'userCertificate;binary' =&gt; [ $cert ]
                              ]);
  die &quot;Modify failed (&quot; . ldap_error_name($res-&gt;code) . &quot;)\n&quot;
      if $res-&gt;code;
</pre>
<p class="Pp">Of course, the entry you are trying to add the certificate to must
    use object classes that permit the userCertificate attribute, otherwise the
    modify will fail with an object class violation error. The inetOrgPerson
    structural object class permits userCertificates, as does the
    strongAuthenticationUser auxiliary object class. Others might also.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="How_do_I_search_objects_by_the_contents_of_certificates."><a class="permalink" href="#How_do_I_search_objects_by_the_contents_of_certificates.">How
  do I search objects by the contents of certificates.</a></h2>
<p class="Pp">The directory needs to support one or more of the
    certificate*Match matching rules.</p>
<p class="Pp">Then using the filter (for certificateExactMatch)</p>
<p class="Pp"></p>
<pre>
  (userCertificate={ serialNumber 1234, issuer &quot;cn=CA,o=TrustCenter&quot; })
</pre>
<p class="Pp">allows searching for the objects containing the attribute
    userCertificate with a certificate matching these criteria.</p>
<p class="Pp">Please note that the exact syntax of the values for the
    serialNumber and the issuer above may depend on the LDAP server. In any case
    the example above works with OpenLDAP 2.4.33.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="ADDITIONAL_DIRECTORY_AND_LDAP_RESOURCES."><a class="permalink" href="#ADDITIONAL_DIRECTORY_AND_LDAP_RESOURCES.">ADDITIONAL
  DIRECTORY AND LDAP RESOURCES.</a></h1>
<section class="Ss">
<h2 class="Ss" id="URLs."><a class="permalink" href="#URLs.">URLs.</a></h2>
<p class="Pp">Net::LDAP::Server - LDAP server framework in Perl
    http://search.cpan.org/search?module=Net::LDAP::Server
    https://github.com/alexrj/Net-LDAP-Server</p>
<p class="Pp">Net::LDAP::SimpleServer - LDAP server in Perl
    http://search.cpan.org/search?module=Net::LDAP::SimpleServer
    https://github.com/russoz/Net-LDAP-SimpleServer</p>
<p class="Pp">LemonLDAP::NG - Web SingleSignOn solution &amp; SAML IdP in Perl
    http://lemonldap-ng.org/</p>
<p class="Pp">Dancer::Plugin::LDAP - LDAP plugin for Dancer micro framework
    http://search.cpan.org/search?module=Dancer::Plugin::LDAP
    https://github.com/racke/Dancer-Plugin-LDAP</p>
<p class="Pp">Directory Services Mark Language (DSML)
    http://www.oasis-open.org/specs/</p>
<p class="Pp">eMailman LDAP information http://www.emailman.com/ldap/</p>
<p class="Pp">Rafael Corvalan's LDAP shell http://sf.net/projects/ldapsh</p>
<p class="Pp">Jeff Hodges's Kings Mountain LDAP
    http://www.kingsmountain.com/ldapRoadmap.shtml (outdated: last update was in
    2004)</p>
<p class="Pp">willeke.com's LDAP Wiki http://ldapwiki.willeke.com/wiki/LDAP</p>
<p class="Pp">OpenLDAP Directory Server - open source LDAP server.
    http://www.openldap.org/</p>
<p class="Pp">389 Directory Server - open source LDAP server
  http://port389.org/</p>
<p class="Pp">ApacheDS - open source LDAP server in Java
    http://directory.apache.org/</p>
<p class="Pp">CriticalPath http://www.cp.net/</p>
<p class="Pp">ForgeRock's OpenDS - LDAPv3 server with additional REST APIs
    http://www.forgerock.com/opendj.html</p>
<p class="Pp">IBM Tivoli Directory Server
    http://www-01.ibm.com/software/tivoli/products/directory-server/</p>
<p class="Pp">Isode (was MessagingDirect) http://www.isode.com/</p>
<p class="Pp">Nexor's X.500 and Internet Directories
    http://www.nexor.com/info/directory.htm/</p>
<p class="Pp">Novell's eDirectory http://www.novell.com/</p>
<p class="Pp">Octet String http://www.octetstring.com/</p>
<p class="Pp">SUN JAVA JNDI (Java Naming and Directory Interface)
    http://java.sun.com/products/jndi/overview.html</p>
<p class="Pp">Oracle Directory Server Enterprise Edition, formerly Sun One,
    formerly iPlanet.
    http://www.oracle.com/technetwork/middleware/id-mgmt/index-085178.html</p>
<p class="Pp">OptimalIDM - Virtual Identity Server - .NET LDAP virtual directory
    http://www.optimalidm.com/products/vis/Virtual-Directory-Server-VDS.aspx</p>
<p class="Pp">Quest One Quick Connect Virtual Directory Server - LDAP virtual
    directory
    http://www.quest.com/quest-one-quick-connect-virtual-directory-server/</p>
<p class="Pp">UnboundID's Identity data platform https://www.unboundid.com/</p>
<p class="Pp">Virtual Directory Blogger
  https://virtualdirectory.wordpress.com/</p>
<p class="Pp">eldapo - a directory manager's blog http://eldapo.blogspot.de/</p>
<p class="Pp">Eine deutsche LDAP Website A German LDAP Website
    http://verzeichnisdienst.de/ldap/Perl/index.html</p>
<p class="Pp">(non-exhaustive) list of LDAP software on Wikipedia
    http://en.wikipedia.org/wiki/List_of_LDAP_software</p>
<p class="Pp">&quot;RFC Sourcebook&quot; on LDAP
    http://www.networksorcery.com/enp/protocol/ldap.htm</p>
<p class="Pp">web2ldap - WWW gateway to LDAP server in Python
    http://www.web2ldap.de/</p>
<p class="Pp">Softerra LDAP Browser / Administrator
  http://www.ldapbrowser.com/</p>
<p class="Pp">The 2 following URLs deal mainly with Microsoft's Active
    Directory.</p>
<p class="Pp">Directory Works http://directoryworks.com/</p>
<p class="Pp">LDAP Client .Net &amp; ActiveX LDAP Client
    http://www.ldapservices.com/Products/Default.aspx</p>
</section>
<section class="Ss">
<h2 class="Ss">BOOKS</h2>
<p class="Pp">Developing LDAP and ADSI Clients for Microsoft(R) Exchange. By
    Sven B. Schreiber. ISBN: 0201657775</p>
<p class="Pp">Implementing LDAP. By Mark Wilcox. ISBN: 1861002211</p>
<p class="Pp">LDAP: Programming Directory-Enabled Applications With Lightweight
    Directory Access Protocol. By Tim Howes, Mark Smith. ISBN: 1578700000</p>
<p class="Pp">LDAP Programming; Directory Management and Integration. By Clayton
    Donley. ISBN: 1884777910</p>
<p class="Pp">LDAP Programming with Java. By Rob Weltman, Tony Dahbura. ISBN:
    0201657589</p>
<p class="Pp">LDAP System Administration. By Gerald Carter. ISBN: 1565924916</p>
<p class="Pp">Managing Enterprise Active Directory Services. By Robbie Allen,
    Richard Puckett. ISBN: 0672321254</p>
<p class="Pp">Solaris and LDAP Naming Services. By Tom Bialaski, Michael Haines.
    ISBN: 0-13-030678-9</p>
<p class="Pp">Understanding and Deploying LDAP Directory Services (2ed). By Tim
    Howes, Mark Smith, Gordon Good. ISBN: 0672323168</p>
<p class="Pp">LDAP Directories Explained. By Brian Arkills. ISBN
  0-201-78792-X</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Any good FAQ is made up of many authors, everyone that contributes
    information to the perl-ldap mail list is a potential author.</p>
<p class="Pp">An attempt to maintain this FAQ is being done by Chris Ridd
    &lt;chris.ridd@isode.com&gt; and Peter Marschall &lt;peter@adpm.de&gt;. It
    was previously updated by Clif Harden &lt;charden@pobox.com&gt;.</p>
<p class="Pp">The original author of this FAQ was Graham Barr
    &lt;gbarr@pobox.com&gt;</p>
<p class="Pp">Please report any bugs, or post any suggestions, to the perl-ldap
    mailing list &lt;perl-ldap@perl.org&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright (c) 1999-2004 Graham Barr, (c) 2012 Peter Marschall. All
    rights reserved. This document is distributed, and may be redistributed,
    under the same terms as Perl itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2018-09-06</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
