<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Net::DNS::Resolver::Programmable(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Net::DNS::Resolver::Programmable(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Net::DNS::Resolver::Programmable(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Net::DNS::Resolver::Programmable - programmable DNS resolver class
    for offline emulation of DNS</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">0.003</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    use Net::DNS::Resolver::Programmable;
    use Net::DNS::RR;
    
    my $resolver = Net::DNS::Resolver::Programmable-&gt;new(
        records         =&gt; {
            'example.com'     =&gt; [
                Net::DNS::RR-&gt;new('example.com.     NS  ns.example.org.'),
                Net::DNS::RR-&gt;new('example.com.     A   192.168.0.1')
            ],
            'ns.example.org'  =&gt; [
                Net::DNS::RR-&gt;new('ns.example.org.  A   192.168.1.1')
            ]
        },
        
        resolver_code   =&gt; sub {
            my ($domain, $rr_type, $class) = @_;
            ...
            return ($result, $aa, @rrs);
        }
    );
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>Net::DNS::Resolver::Programmable</b> is a
    <b>Net::DNS::Resolver</b> descendant class that allows a virtual DNS to be
    emulated instead of querying the real DNS. A set of static DNS records may
    be supplied, or arbitrary code may be specified as a means for retrieving
    DNS records, or even generating them on the fly.</p>
<section class="Ss">
<h2 class="Ss" id="Constructor"><a class="permalink" href="#Constructor">Constructor</a></h2>
<p class="Pp">The following constructor is provided:</p>
<dl class="Bl-tag">
  <dt id="new(_options)"><a class="permalink" href="#new(_options)"><b>new(%options)</b>:
    returns <i>Net::DNS::Resolver::Programmable</i></a></dt>
  <dd>Creates a new programmed DNS resolver object.
    <p class="Pp"><span class="Li">%options</span> is a list of key/value pairs
        representing any of the following options:</p>
  </dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="records"><a class="permalink" href="#records"><b>records</b></a></dt>
  <dd>A reference to a hash of arrays containing a static set of
      <i>Net::DNS::RR</i> objects. The hash entries must be indexed by fully
      qualified domain names (lower-case, without any trailing dots), and the
      entries themselves must be arrays of the RR objects pertaining to these
      domain names. For example:
    <p class="Pp"></p>
    <pre>
    records =&gt; {
        'example.com'     =&gt; [
            Net::DNS::RR-&gt;new('example.com.     NS  ns.example.org.'),
            Net::DNS::RR-&gt;new('example.com.     A   192.168.0.1')
        ],
        'www.example.com' =&gt; [
            Net::DNS::RR-&gt;new('www.example.com. A   192.168.0.2')
        ],
        'ns.example.org'  =&gt; [
            Net::DNS::RR-&gt;new('ns.example.org.  A   192.168.1.1')
        ]
    }
    </pre>
    <p class="Pp">If this option is specified, the resolver retrieves requested
        RRs from this data structure.</p>
  </dd>
  <dt id="resolver_code"><a class="permalink" href="#resolver_code"><b>resolver_code</b></a></dt>
  <dd>A code reference used as a call-back for dynamically retrieving requested
      RRs.
    <p class="Pp">The code must take the following query parameters as
        arguments: the <i>domain</i>, <i>RR type</i>, and <i>class</i>.</p>
    <p class="Pp">It must return a list composed of: the response's <i>RCODE</i>
        (by name, as returned by Net::DNS::Header-&gt;rcode), the
        <i></i><i>&quot;aa&quot;</i><i> (authoritative answer) flag</i>
        (<i>boolean</i>, use <b>undef</b> if you don't care), and the
        <i>Net::DNS::RR answer objects</i>. If an error string is returned
        instead of a valid RCODE, a <i>Net::DNS::Packet</i> object is not
        constructed but an error condition for the resolver is signaled
      instead.</p>
    <p class="Pp">For example:</p>
    <p class="Pp"></p>
    <pre>
    resolver_code =&gt; sub {
        my ($domain, $rr_type, $class) = @_;
        ...
        return ($result, $aa, @rrs);
    }
    </pre>
    <p class="Pp">If both this and the
        <span class="Li">&quot;records&quot;</span> option are specified, then
        statically programmed records are used in addition to any that are
        returned by the configured resolver code.</p>
  </dd>
  <dt id="defnames"><a class="permalink" href="#defnames"><b>defnames</b></a></dt>
  <dd></dd>
  <dt id="dnsrch"><a class="permalink" href="#dnsrch"><b>dnsrch</b></a></dt>
  <dd></dd>
  <dt id="domain"><a class="permalink" href="#domain"><b>domain</b></a></dt>
  <dd></dd>
  <dt id="searchlist"><a class="permalink" href="#searchlist"><b>searchlist</b></a></dt>
  <dd></dd>
  <dt id="debug"><a class="permalink" href="#debug"><b>debug</b></a></dt>
  <dd>These Net::DNS::Resolver options are also meaningful with
      Net::DNS::Resolver::Programmable. See Net::DNS::Resolver for their
      descriptions.</dd>
</dl>
</div>
<div class="Bd-indent"></div>
</section>
<section class="Ss">
<h2 class="Ss" id="Instance_methods"><a class="permalink" href="#Instance_methods">Instance
  methods</a></h2>
<p class="Pp">The following instance methods of <i>Net::DNS::Resolver</i> are
    also supported by <i>Net::DNS::Resolver::Programmable</i>:</p>
<dl class="Bl-tag">
  <dt id="search"><a class="permalink" href="#search"><b>search</b>: returns
    <i>Net::DNS::Packet</i></a></dt>
  <dd></dd>
  <dt id="query"><a class="permalink" href="#query"><b>query</b>: returns
    <i>Net::DNS::Packet</i></a></dt>
  <dd></dd>
  <dt id="send"><a class="permalink" href="#send"><b>send</b>: returns
    <i>Net::DNS::Packet</i></a></dt>
  <dd>Performs an offline DNS query, using the statically programmed DNS RRs
      and/or the configured dynamic resolver code. See the &quot;new&quot;
      constructor's <span class="Li">&quot;records&quot;</span> and
      <span class="Li">&quot;resolver_code&quot;</span> options. See the
      descriptions of search, query, and send for details about the calling
      syntax of these methods.</dd>
  <dt id="print"><a class="permalink" href="#print"><b>print</b></a></dt>
  <dd></dd>
  <dt id="string"><a class="permalink" href="#string"><b>string</b>: returns
    <i>string</i></a></dt>
  <dd></dd>
  <dt id="searchlist~2"><a class="permalink" href="#searchlist~2"><b>searchlist</b>:
    returns <i>list</i> of <i>string</i></a></dt>
  <dd></dd>
  <dt id="defnames~2"><a class="permalink" href="#defnames~2"><b>defnames</b>:
    returns <i>boolean</i></a></dt>
  <dd></dd>
  <dt id="dnsrch~2"><a class="permalink" href="#dnsrch~2"><b>dnsrch</b>: returns
    <i>boolean</i></a></dt>
  <dd></dd>
  <dt id="debug~2"><a class="permalink" href="#debug~2"><b>debug</b>: returns
    <i>boolean</i></a></dt>
  <dd></dd>
  <dt id="errorstring"><a class="permalink" href="#errorstring"><b>errorstring</b>:
    returns <i>string</i></a></dt>
  <dd></dd>
  <dt id="answerfrom"><a class="permalink" href="#answerfrom"><b>answerfrom</b>:
    returns <i>string</i></a></dt>
  <dd></dd>
  <dt id="answersize"><a class="permalink" href="#answersize"><b>answersize</b>:
    returns <i>integer</i></a></dt>
  <dd>See &quot;METHODS&quot; in Net::DNS::Resolver.</dd>
</dl>
<p class="Pp">Currently the following methods of <i>Net::DNS::Resolver</i> are
    <b>not</b> supported: <b>axfr</b>, <b>axfr_start</b>, <b>axfr_next</b>,
    <b>nameservers</b>, <b>port</b>, <b>srcport</b>, <b>srcaddr</b>,
    <b>bgsend</b>, <b>bgread</b>, <b>bgisready</b>, <b>tsig</b>, <b>retrans</b>,
    <b>retry</b>, <b>recurse</b>, <b>usevc</b>, <b>tcp_timeout</b>,
    <b>udp_timeout</b>, <b>persistent_tcp</b>, <b>persistent_udp</b>,
    <b>igntc</b>, <b>dnssec</b>, <b>cdflag</b>, <b>udppacketsize</b>. The
    effects of using these on <i>Net::DNS::Resolver::Programmable</i> objects
    are undefined.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Net::DNS::Resolver</p>
<p class="Pp">For availability, support, and license information, see the README
    file included with Net::DNS::Resolver::Programmable.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Julian Mehnle &lt;julian@mehnle.net&gt;</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-02-12</td>
    <td class="foot-os">perl v5.18.4</td>
  </tr>
</table>
</body>
</html>
