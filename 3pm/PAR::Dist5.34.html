<!DOCTYPE html>
<html lang="en">
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>PAR::Dist(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">PAR::Dist(3)</td>
    <td class="head-vol"><a href=".">User Contributed Perl Documentation</a></td>
    <td class="head-rtitle">PAR::Dist(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">PAR::Dist - Create and manipulate PAR distributions</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">This document describes version 0.47 of PAR::Dist, released
    November 29, 2009.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">As a shell command:</p>
<p class="Pp"></p>
<pre>    % perl -MPAR::Dist -eblib_to_par
</pre>
<p class="Pp">In programs:</p>
<p class="Pp"></p>
<pre>    use PAR::Dist;
    my $dist = blib_to_par(); # make a PAR file using ./blib/
    install_par($dist);       # install it into the system
    uninstall_par($dist);     # uninstall it from the system
    sign_par($dist);          # sign it using Module::Signature
    verify_par($dist);        # verify it using Module::Signature
    install_par(&quot;http://foo.com/DBI-1.37-MSWin32-5.8.0.par&quot;); # works too
    install_par(&quot;http://foo.com/DBI-1.37&quot;); # auto-appends archname + perlver
    install_par(&quot;cpan://SMUELLER/PAR-Packer-0.975&quot;); # uses CPAN author directory
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This module creates and manipulates <i>PAR distributions</i>. They
    are architecture-specific <b>PAR</b> files, containing everything under
    <i>blib/</i> of CPAN distributions after their
    <span class="Li">&quot;make&quot;</span> or
    <span class="Li">&quot;Build&quot;</span> stage, a <i>META.yml</i>
    describing metadata of the original CPAN distribution, and a <i>MANIFEST</i>
    detailing all files within it. Digitally signed PAR distributions will also
    contain a <i>SIGNATURE</i> file.</p>
<p class="Pp">The naming convention for such distributions is:</p>
<p class="Pp"></p>
<pre>    $NAME-$VERSION-$ARCH-$PERL_VERSION.par
</pre>
<p class="Pp">For example,
    <span class="Li">&quot;PAR-Dist-0.01-i386-freebsd-5.8.0.par&quot;</span>
    corresponds to the 0.01 release of
    <span class="Li">&quot;PAR-Dist&quot;</span> on CPAN, built for perl 5.8.0
    running on <span class="Li">&quot;i386-freebsd&quot;</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FUNCTIONS"><a class="permalink" href="#FUNCTIONS">FUNCTIONS</a></h1>
<p class="Pp">Several functions are exported by default. Unless otherwise noted,
    they can take either a hash of named arguments, a single argument (taken as
    <span class="Li">$path</span> by
    <span class="Li">&quot;blib_to_par&quot;</span> and
    <span class="Li">$dist</span> by other functions), or no arguments (in which
    case the first PAR file in the current directory is used).</p>
<p class="Pp">Therefore, under a directory containing only a single
    <i>test.par</i>, all invocations below are equivalent:</p>
<p class="Pp"></p>
<pre>    % perl -MPAR::Dist -e&quot;install_par( dist =&gt; 'test.par' )&quot;
    % perl -MPAR::Dist -e&quot;install_par( 'test.par' )&quot;
    % perl -MPAR::Dist -einstall_par;
</pre>
<p class="Pp">If <span class="Li">$dist</span> resembles a URL,
    <span class="Li">&quot;LWP::Simple::mirror&quot;</span> is called to mirror
    it locally under <span class="Li">$ENV{PAR_TEMP}</span> (or
    <span class="Li">&quot;$TEMP/par/&quot;</span> if unspecified), and the
    function will act on the fetched local file instead. If the URL begins with
    <span class="Li">&quot;cpan://AUTHOR/&quot;</span>, it will be expanded
    automatically to the author's CPAN directory (e.g.
    <span class="Li">&quot;http://www.cpan.org/modules/by-authors/id/A/AU/AUTHOR/&quot;</span>).</p>
<p class="Pp">If <span class="Li">$dist</span> does not have a file extension
    beginning with a letter or underscore, a dash and
    <span class="Li">$suffix</span> ($ARCH-$PERL_VERSION.par by default) will be
    appended to it.</p>
<section class="Ss">
<h2 class="Ss" id="blib_to_par"><a class="permalink" href="#blib_to_par">blib_to_par</a></h2>
<p class="Pp">Takes key/value pairs as parameters or a single parameter
    indicating the path that contains the <i>blib/</i> subdirectory.</p>
<p class="Pp">Builds a PAR distribution from the <i>blib/</i> subdirectory under
    <span class="Li">&quot;path&quot;</span>, or under the current directory if
    unspecified. If <i>blib/</i> does not exist, it automatically runs
    <i>Build</i>, <i>make</i>, <i>Build.PL</i> or <i>Makefile.PL</i> to create
    it.</p>
<p class="Pp">Returns the filename of the generated PAR distribution.</p>
<p class="Pp">Valid parameters are:</p>
<dl class="Bl-tag">
  <dt id="path"><a class="permalink" href="#path">path</a></dt>
  <dd>Sets the path which contains the <i>blib/</i> subdirectory from which the
      PAR distribution will be generated.</dd>
  <dt id="name,"><a class="permalink" href="#name,">name, version,
    suffix</a></dt>
  <dd>These attributes set the name, version and platform specific suffix of the
      distribution. Name and version can be automatically determined from the
      distributions <i>META.yml</i> or <i>Makefile.PL</i> files.
    <p class="Pp">The suffix is generated from your architecture name and your
        version of perl by default.</p>
  </dd>
  <dt id="dist"><a class="permalink" href="#dist">dist</a></dt>
  <dd>The output filename for the PAR distribution.</dd>
  <dt id="quiet"><a class="permalink" href="#quiet">quiet</a></dt>
  <dd>Set to true to suppress as much output as possible.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="install_par"><a class="permalink" href="#install_par">install_par</a></h2>
<p class="Pp">Installs a PAR distribution into the system, using
    <span class="Li">&quot;ExtUtils::Install::install_default&quot;</span>.</p>
<p class="Pp">If only a single parameter is given, it is treated as the value
    for the <span class="Li">&quot;dist&quot;</span> parameter.</p>
<p class="Pp">Valid named parameters are:</p>
<dl class="Bl-tag">
  <dt id="dist~2"><a class="permalink" href="#dist~2">dist</a></dt>
  <dd>The .par file to install. The heuristics outlined in the <b>FUNCTIONS</b>
      section above apply.</dd>
  <dt id="prefix"><a class="permalink" href="#prefix">prefix</a></dt>
  <dd>This string will be prepended to all installation paths. If it isn't
      specified, the environment variable
      <span class="Li">&quot;PERL_INSTALL_ROOT&quot;</span> is used as a
    prefix.</dd>
  <dt id="uninstall_shadows"><a class="permalink" href="#uninstall_shadows">uninstall_shadows</a></dt>
  <dd>This corresponds to the
      <span class="Li">&quot;uninstall_shadows&quot;</span> option of
      ExtUtils::Install. Quoting its manual: If
      <span class="Li">&quot;uninstall_shadows&quot;</span> is set to true, any
      differing versions throughout <span class="Li">@INC</span> will be
      uninstalled. This is <span class="Li">&quot;make install
      UNINST=1&quot;</span>.</dd>
  <dt id="verbose"><a class="permalink" href="#verbose">verbose</a></dt>
  <dd>This corresponds to the <span class="Li">&quot;verbose&quot;</span> option
      of ExtUtils::Install. According to its manual: If
      <span class="Li">&quot;verbose&quot;</span> is true, will print out each
      file removed. This is <span class="Li">&quot;make install
      VERBINST=1&quot;</span>. <span class="Li">&quot;verbose&quot;</span>
      values going up to 5 show increasingly more diagnostics output.
    <p class="Pp">Default verbosity for PAR::Dist is 1.</p>
  </dd>
</dl>
<p class="Pp">If you're just going to install into the running perl like
    everything else, you can stop reading the rest of this section now.</p>
<p class="Pp">Additionally, you can use several parameters to change the default
    installation destinations. You don't usually have to worry about this unless
    you are installing into a user-local directory. The following section
    outlines the parameter names and default settings:</p>
<p class="Pp"></p>
<pre>  Parameter         From          To
  inst_lib          blib/lib      $Config{installsitelib} (*)
  inst_archlib      blib/arch     $Config{installsitearch}
  inst_script       blib/script   $Config{installscript}
  inst_bin          blib/bin      $Config{installbin}
  inst_man1dir      blib/man1     $Config{installman1dir}
  inst_man3dir      blib/man3     $Config{installman3dir}
  packlist_read                   $Config{sitearchexp}/auto/$name/.packlist
  packlist_write                  $Config{installsitearch}/auto/$name/.packlist
</pre>
<p class="Pp">The <span class="Li">&quot;packlist_write&quot;</span> parameter
    is used to control where the <i>.packlist</i> file is written to. (Necessary
    for uninstallation.) The <span class="Li">&quot;packlist_read&quot;</span>
    parameter specifies a .packlist file to merge in if it exists. By setting
    any of the above installation targets to
    <span class="Li">&quot;undef&quot;</span>, you can remove that target
    altogether. For example, passing <span class="Li">&quot;inst_man1dir =&gt;
    undef, inst_man3dir =&gt; undef&quot;</span> means that the contained manual
    pages won't be installed. This is not available for the packlists.</p>
<p class="Pp">Again, the defaults will be the normal <i>site</i> paths from
    <span class="Li">%Config</span>.</p>
<p class="Pp">(*) If the <span class="Li">&quot;.par&quot;</span>'s
    <i>inst_archlib</i> section (normally
    <span class="Li">&quot;blib/arch&quot;</span>) isn't empty, the code in
    <i>inst_lib</i> (normally <span class="Li">&quot;blib/lib&quot;</span>) is
    also installed into the <i>inst_archlib</i> path. This makes sense for XS
    modules. If, however, you override
    <span class="Li">&quot;inst_lib&quot;</span>, this automatic conversion is
    also overridden! You can use the named parameter
    <span class="Li">&quot;auto_inst_lib_conversion =&gt; 1&quot;</span> to
    re-enable the conversion for custom <i>inst_lib</i>'s.</p>
<p class="Pp">Finally, you may specify a
    <span class="Li">&quot;custom_targets&quot;</span> parameter. Its value
    should be a reference to a hash of custom installation targets such as</p>
<p class="Pp"></p>
<pre>  custom_targets =&gt; { 'blib/my_data' =&gt; '/some/path/my_data' }
</pre>
<p class="Pp">You can use this to install the <i>.par</i> archives contents to
    arbitrary locations.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="uninstall_par"><a class="permalink" href="#uninstall_par">uninstall_par</a></h2>
<p class="Pp">Uninstalls all previously installed contents of a PAR
    distribution, using
    <span class="Li">&quot;ExtUtils::Install::uninstall&quot;</span>.</p>
<p class="Pp">Takes almost the same parameters as
    <span class="Li">&quot;install_par&quot;</span>, but naturally, the
    installation target parameters do not apply. The only exception to this is
    the <span class="Li">&quot;packlist_read&quot;</span> parameter which
    specifies the <i>.packlist</i> file to read the list of installed files
    from. It defaults to
    <span class="Li">&quot;$Config::Config{installsitearch}/auto/$name/.packlist&quot;</span>.</p>
<p class="Pp">Additionally, the
    <span class="Li">&quot;uninstall_shadows&quot;</span> parameter of
    <span class="Li">&quot;install_par&quot;</span> isn't available.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="sign_par"><a class="permalink" href="#sign_par">sign_par</a></h2>
<p class="Pp">Digitally sign a PAR distribution using
    <span class="Li">&quot;gpg&quot;</span> or <b>Crypt::OpenPGP</b>, via
    <b>Module::Signature</b>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="verify_par"><a class="permalink" href="#verify_par">verify_par</a></h2>
<p class="Pp">Verify the digital signature of a PAR distribution using
    <span class="Li">&quot;gpg&quot;</span> or <b>Crypt::OpenPGP</b>, via
    <b>Module::Signature</b>.</p>
<p class="Pp">Returns a boolean value indicating whether verification passed;
    <span class="Li">$!</span> is set to the return code of
    <span class="Li">&quot;Module::Signature::verify&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="merge_par"><a class="permalink" href="#merge_par">merge_par</a></h2>
<p class="Pp"><i>Note:</i> Since version 0.32 of PAR::Dist, this function
    requires a YAML reader. The order of precedence is:</p>
<p class="Pp"></p>
<pre>  YAML:XS YAML YAML::Syck YAML::Tiny
</pre>
<p class="Pp">Merges two or more PAR distributions into one. First argument must
    be the name of the distribution you want to merge all others into. Any
    following arguments will be interpreted as the file names of further PAR
    distributions to merge into the first one.</p>
<p class="Pp"></p>
<pre>  merge_par('foo.par', 'bar.par', 'baz.par')
</pre>
<p class="Pp">This will merge the distributions
    <span class="Li">&quot;foo.par&quot;</span>,
    <span class="Li">&quot;bar.par&quot;</span> and
    <span class="Li">&quot;baz.par&quot;</span> into the distribution
    <span class="Li">&quot;foo.par&quot;</span>.
    <span class="Li">&quot;foo.par&quot;</span> will be overwritten!</p>
<p class="Pp">The original META.yml of
    <span class="Li">&quot;foo.par&quot;</span> is retained, but augmented with
    any <span class="Li">&quot;provides&quot;</span>,
    <span class="Li">&quot;requires&quot;</span>,
    <span class="Li">&quot;recommends&quot;</span>,
    <span class="Li">&quot;build_requires&quot;</span>, and
    <span class="Li">&quot;configure_requires&quot;</span> sections from the
    other <span class="Li">&quot;.par&quot;</span> files.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="remove_man"><a class="permalink" href="#remove_man">remove_man</a></h2>
<p class="Pp">Remove the man pages from a PAR distribution. Takes one named
    parameter: <i>dist</i> which should be the name (and path) of the PAR
    distribution file. The calling conventions outlined in the
    <span class="Li">&quot;FUNCTIONS&quot;</span> section above apply.</p>
<p class="Pp">The PAR archive will be extracted, stripped of all
    <span class="Li">&quot;man\d?&quot;</span> and
    <span class="Li">&quot;html&quot;</span> subdirectories and then repackaged
    into the original file.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="get_meta"><a class="permalink" href="#get_meta">get_meta</a></h2>
<p class="Pp">Opens a PAR archive and extracts the contained META.yml file.
    Returns the META.yml file as a string.</p>
<p class="Pp">Takes one named parameter: <i>dist</i>. If only one parameter is
    passed, it is treated as the <i>dist</i> parameter. (Have a look at the
    description in the <span class="Li">&quot;FUNCTIONS&quot;</span> section
    above.)</p>
<p class="Pp">Returns undef if no PAR archive or no META.yml within the archive
    were found.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="parse_dist_name"><a class="permalink" href="#parse_dist_name">parse_dist_name</a></h2>
<p class="Pp">First argument must be a distribution file name. The file name is
    parsed into <i>distribution name</i>, <i>distribution version</i>,
    <i>architecture name</i>, and <i>perl version</i>.</p>
<p class="Pp">Returns the results as a list in the above order. If any or all of
    the above cannot be determined, returns undef instead of the undetermined
    elements.</p>
<p class="Pp">Supported formats are:</p>
<p class="Pp">Math-Symbolic-0.502-x86_64-linux-gnu-thread-multi-5.8.7</p>
<p class="Pp">Math-Symbolic-0.502</p>
<p class="Pp">The &quot;.tar.gz&quot; or &quot;.par&quot; extensions as well as
    any preceding paths are stripped before parsing. Starting with
    <span class="Li">&quot;PAR::Dist&quot;</span> 0.22, versions containing a
    preceding <span class="Li">&quot;v&quot;</span> are parsed correctly.</p>
<p class="Pp">This function is not exported by default.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="generate_blib_stub"><a class="permalink" href="#generate_blib_stub">generate_blib_stub</a></h2>
<p class="Pp">Creates a <i>blib/lib</i> subdirectory in the current directory
    and prepares a <i>META.yml</i> with meta information for a new PAR
    distribution. First argument should be the name of the PAR distribution in a
    format understood by <span class="Li">&quot;parse_dist_name()&quot;</span>.
    Alternatively, named arguments resembling those of
    <span class="Li">&quot;blib_to_par&quot;</span> are accepted.</p>
<p class="Pp">After running
    <span class="Li">&quot;generate_blib_stub&quot;</span> and injecting files
    into the <i>blib</i> directory, you can create a PAR distribution using
    <span class="Li">&quot;blib_to_par&quot;</span>. This function is useful for
    creating custom PAR distributions from scratch. (I.e. not from an unpacked
    CPAN distribution) Example:</p>
<p class="Pp"></p>
<pre>  use PAR::Dist;
  use File::Copy 'copy';
  
  generate_blib_stub(
    name =&gt; 'MyApp', version =&gt; '1.00'
  );
  copy('MyApp.pm', 'blib/lib/MyApp.pm');
  blib_to_par(); # generates the .par file!
</pre>
<p class="Pp"><span class="Li">&quot;generate_blib_stub&quot;</span> will not
    overwrite existing files.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="contains_binaries"><a class="permalink" href="#contains_binaries">contains_binaries</a></h2>
<p class="Pp">This function is not exported by default.</p>
<p class="Pp">Opens a PAR archive tries to determine whether that archive
    contains platform-specific binary code.</p>
<p class="Pp">Takes one named parameter: <i>dist</i>. If only one parameter is
    passed, it is treated as the <i>dist</i> parameter. (Have a look at the
    description in the <span class="Li">&quot;FUNCTIONS&quot;</span> section
    above.)</p>
<p class="Pp">Throws a fatal error if the PAR archive could not be found.</p>
<p class="Pp">Returns one if the PAR was found to contain binary code and zero
    otherwise.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">PAR, ExtUtils::Install, Module::Signature, LWP::Simple</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Audrey Tang &lt;cpan@audreyt.org&gt; 2003-2007</p>
<p class="Pp">Steffen Mueller &lt;smueller@cpan.org&gt; 2005-2011</p>
<p class="Pp">PAR has a mailing list, &lt;par@perl.org&gt;, that you can write
    to; send an empty mail to &lt;par-subscribe@perl.org&gt; to join the list
    and participate in the discussion.</p>
<p class="Pp">Please send bug reports to &lt;bug-par@rt.cpan.org&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright 2003-2011 by Audrey Tang
  &lt;autrijus@autrijus.org&gt;.</p>
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
<p class="Pp">See &lt;http://www.perl.com/perl/misc/Artistic.html&gt;</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2012-10-14</td>
    <td class="foot-os"><a href="..">perl v5.34.0</a></td>
  </tr>
</table>
</body>
</html>
