<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Test::Number::Delta(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test::Number::Delta(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test::Number::Delta(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Test::Number::Delta - Compare the difference between numbers
    against a given tolerance</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">version 1.06</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>  # Import test functions
  use Test::Number::Delta;
  # Equality test with default tolerance
  delta_ok( 1e-5, 2e-5, 'values within 1e-6');
  # Inequality test with default tolerance
  delta_not_ok( 1e-5, 2e-5, 'values not within 1e-6');
  # Provide specific tolerance
  delta_within( 1e-3, 2e-3, 1e-4, 'values within 1e-4');
  delta_not_within( 1e-3, 2e-3, 1e-4, 'values not within 1e-4');
  # Compare arrays or matrices
  @a = ( 3.14, 1.41 );
  @b = ( 3.15, 1.41 );
  delta_ok( \@a, \@b, 'compare @a and @b' );
  # Set a different default tolerance
  use Test::Number::Delta within =&gt; 1e-5;
  delta_ok( 1.1e-5, 2e-5, 'values within 1e-5'); # ok
  # Set a relative tolerance
  use Test::Number::Delta relative =&gt; 1e-3;
  delta_ok( 1.01, 1.0099, 'values within 1.01e-3');
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">At some point or another, most programmers find they need to
    compare floating-point numbers for equality. The typical idiom is to test if
    the absolute value of the difference of the numbers is within a desired
    tolerance, usually called epsilon. This module provides such a function for
    use with Test::More. Usage is similar to other test functions described in
    Test::More. Semantically, the
    <span class="Li">&quot;delta_within&quot;</span> function replaces this kind
    of construct:</p>
<p class="Pp"></p>
<pre> ok ( abs($p - $q) &lt; $epsilon, '$p is equal to $q' ) or
     diag &quot;$p is not equal to $q to within $epsilon&quot;;
</pre>
<p class="Pp">While there's nothing wrong with that construct, it's painful to
    type it repeatedly in a test script. This module does the same thing with a
    single function call. The <span class="Li">&quot;delta_ok&quot;</span>
    function is similar, but either uses a global default value for epsilon or
    else calculates a 'relative' epsilon on the fly so that epsilon is scaled
    automatically to the size of the arguments to
    <span class="Li">&quot;delta_ok&quot;</span>. Both functions are exported
    automatically.</p>
<p class="Pp">Because checking floating-point equality is not always reliable,
    it is not possible to check the 'equal to' boundary of 'less than or equal
    to epsilon'. Therefore, Test::Number::Delta only compares if the absolute
    value of the difference is <b>less than</b> epsilon (for equality tests) or
    <b>greater than</b> epsilon (for inequality tests).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="USAGE"><a class="permalink" href="#USAGE">USAGE</a></h1>
<section class="Ss">
<h2 class="Ss" id="use_Test::Number::Delta;"><a class="permalink" href="#use_Test::Number::Delta;">use
  Test::Number::Delta;</a></h2>
<p class="Pp">With no arguments, epsilon defaults to 1e-6. (An arbitrary choice
    on the author's part.)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="use_Test::Number::Delta_within_=__1e"><a class="permalink" href="#use_Test::Number::Delta_within_=__1e">use
  Test::Number::Delta within =&gt; 1e-9;</a></h2>
<p class="Pp">To specify a different default value for epsilon, provide a
    <span class="Li">&quot;within&quot;</span> parameter when importing the
    module. The value must be non-zero.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="use_Test::Number::Delta_relative_=__1e"><a class="permalink" href="#use_Test::Number::Delta_relative_=__1e">use
  Test::Number::Delta relative =&gt; 1e-3;</a></h2>
<p class="Pp">As an alternative to using a fixed value for epsilon, provide a
    <span class="Li">&quot;relative&quot;</span> parameter when importing the
    module. This signals that <span class="Li">&quot;delta_ok&quot;</span>
    should test equality with an epsilon that is scaled to the size of the
    arguments. Epsilon is calculated as the relative value times the absolute
    value of the argument with the greatest magnitude. Mathematically, for
    arguments 'x' and 'y':</p>
<p class="Pp"></p>
<pre> epsilon = relative * max( abs(x), abs(y) )
</pre>
<p class="Pp">For example, a relative value of &quot;0.01&quot; would mean that
    the arguments are equal if they differ by less than 1% of the larger of the
    two values. A relative value of 1e-6 means that the arguments must differ by
    less than 1 millionth of the larger value. The relative value must be
    non-zero.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Combining_with_a_test_plan"><a class="permalink" href="#Combining_with_a_test_plan">Combining
  with a test plan</a></h2>
<pre> use Test::Number::Delta 'no_plan';
 # or
 use Test::Number::Delta within =&gt; 1e-9, tests =&gt; 1;
</pre>
<p class="Pp">If a test plan has not already been specified, the optional
    parameter for Test::Number::Delta may be followed with a test plan (see
    Test::More for details). If a parameter for Test::Number::Delta is given, it
    must come first.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="FUNCTIONS"><a class="permalink" href="#FUNCTIONS">FUNCTIONS</a></h1>
<section class="Ss">
<h2 class="Ss" id="delta_within"><a class="permalink" href="#delta_within">delta_within</a></h2>
<pre> delta_within(  $p,  $q, $epsilon, '$p and $q are equal within $epsilon' );
 delta_within( \@p, \@q, $epsilon, '@p and @q are equal within $epsilon' );
</pre>
<p class="Pp">This function tests for equality within a given value of epsilon.
    The test is true if the absolute value of the difference between
    <span class="Li">$p</span> and <span class="Li">$q</span> is <b>less
    than</b> epsilon. If the test is true, it prints an &quot;OK&quot; statement
    for use in testing. If the test is not true, this function prints a failure
    report and diagnostic. Epsilon must be non-zero.</p>
<p class="Pp">The values to compare may be scalars or references to arrays. If
    the values are references to arrays, the comparison is done pairwise for
    each index value of the array. The pairwise comparison is recursive, so
    matrices may be compared as well.</p>
<p class="Pp">For example, this code sample compares two matrices:</p>
<p class="Pp"></p>
<pre>    my @a = (   [ 3.14, 6.28 ],
                [ 1.41, 2.84 ]   );
    my @b = (   [ 3.14, 6.28 ],
                [ 1.42, 2.84 ]   );
    delta_within( \@a, \@b, 1e-6, 'compare @a and @b' );
</pre>
<p class="Pp">The sample prints the following:</p>
<p class="Pp"></p>
<pre>    not ok 1 - compare @a and @b
    # At [1][0]: 1.4100000 and 1.4200000 are not equal to within 0.000001
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="delta_ok"><a class="permalink" href="#delta_ok">delta_ok</a></h2>
<pre> delta_ok(  $p,  $q, '$p and $q are close enough to equal' );
 delta_ok( \@p, \@q, '@p and @q are close enough to equal' );
</pre>
<p class="Pp">This function tests for equality within a default epsilon value.
    See &quot;USAGE&quot; for details on changing the default. Otherwise, this
    function works the same as
  <span class="Li">&quot;delta_within&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="delta_not_within"><a class="permalink" href="#delta_not_within">delta_not_within</a></h2>
<pre> delta_not_within(  $p,  $q, '$p and $q are different' );
 delta_not_within( \@p, \@q, $epsilon, '@p and @q are different' );
</pre>
<p class="Pp">This test compares inequality in excess of a given value of
    epsilon. The test is true if the absolute value of the difference between
    <span class="Li">$p</span> and <span class="Li">$q</span> is <b>greater</b>
    <b>than</b> epsilon. For array or matrix comparisons, the test is true if
    <i>any</i> pair of values differs by more than epsilon. Otherwise, this
    function works the same as
  <span class="Li">&quot;delta_within&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="delta_not_ok"><a class="permalink" href="#delta_not_ok">delta_not_ok</a></h2>
<pre> delta_not_ok(  $p,  $q, '$p and $q are different' );
 delta_not_ok( \@p, \@q, '@p and @q are different' );
</pre>
<p class="Pp">This function tests for inequality in excess of a default epsilon
    value. See &quot;USAGE&quot; for details on changing the default. Otherwise,
    this function works the same as
    <span class="Li">&quot;delta_not_within&quot;</span>.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<ul class="Bl-bullet">
  <li>Number::Tolerant</li>
  <li>Test::Deep::NumberTolerant</li>
</ul>
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORT"><a class="permalink" href="#SUPPORT">SUPPORT</a></h1>
<section class="Ss">
<h2 class="Ss" id="Bugs_/_Feature_Requests"><a class="permalink" href="#Bugs_/_Feature_Requests">Bugs
  / Feature Requests</a></h2>
<p class="Pp">Please report any bugs or feature requests through the issue
    tracker at &lt;https://github.com/dagolden/Test-Number-Delta/issues&gt;. You
    will be notified automatically of any progress on your issue.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Source_Code"><a class="permalink" href="#Source_Code">Source
  Code</a></h2>
<p class="Pp">This is open source software. The code repository is available for
    public review and contribution under the terms of the license.</p>
<p class="Pp">&lt;https://github.com/dagolden/Test-Number-Delta&gt;</p>
<p class="Pp"></p>
<pre>  git clone https://github.com/dagolden/Test-Number-Delta.git
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">David Golden &lt;dagolden@cpan.org&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">This software is Copyright (c) 2014 by David Golden.</p>
<p class="Pp">This is free software, licensed under:</p>
<p class="Pp"></p>
<pre>  The Apache License, Version 2.0, January 2004
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2014-11-25</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
