<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Mail::SPF::Result(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Mail::SPF::Result(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Mail::SPF::Result(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Mail::SPF::Result - SPF result class</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp">For the general usage of <i>Mail::SPF::Result</i> objects in code
    that calls Mail::SPF, see Mail::SPF. For the detailed interface of
    <i>Mail::SPF::Result</i> and its derivatives, see below.</p>
<section class="Ss">
<h2 class="Ss" id="Throwing_results"><a class="permalink" href="#Throwing_results">Throwing
  results</a></h2>
<pre>    package Mail::SPF::Foo;
    use Error ':try';
    use Mail::SPF::Result;
    sub foo {
        if (...) {
            $server-&gt;throw_result('pass', $request)
        }
        else {
            $server-&gt;throw_result('permerror', $request, 'Invalid foo');
        }
    }
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Catching_results"><a class="permalink" href="#Catching_results">Catching
  results</a></h2>
<pre>    package Mail::SPF::Bar;
    use Error ':try';
    use Mail::SPF::Foo;
    try {
        Mail::SPF::Foo-&gt;foo();
    }
    catch Mail::SPF::Result with {
        my ($result) = @_;
        ...
    };
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="Using_results"><a class="permalink" href="#Using_results">Using
  results</a></h2>
<pre>    my $result_name     = $result-&gt;name;
    my $result_code     = $result-&gt;code;
    my $request         = $result-&gt;request;
    my $local_exp       = $result-&gt;local_explanation;
    my $authority_exp   = $result-&gt;authority_explanation
        if $result-&gt;can('authority_explanation');
    my $spf_header      = $result-&gt;received_spf_header;
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">An object of class <b>Mail::SPF::Result</b> represents the result
    of an SPF request.</p>
<p class="Pp">There is usually no need to construct an SPF result object
    directly using the <span class="Li">&quot;new&quot;</span> constructor.
    Instead, use the <span class="Li">&quot;throw&quot;</span> class method to
    signal to the calling code that a definite SPF result has been determined.
    In other words, use Mail::SPF::Result and its derivatives just like
    exceptions. See Error or &quot;eval&quot; in perlfunc for how to handle
    exceptions in Perl.</p>
<section class="Ss">
<h2 class="Ss" id="Constructor"><a class="permalink" href="#Constructor">Constructor</a></h2>
<p class="Pp">The following constructor is provided:</p>
<dl class="Bl-tag">
  <dt id="new($server,"><a class="permalink" href="#new($server,"><b>new($server,
    </b><span class="Li"><b>$request</b></span><b>)</b>: returns
    <i>Mail::SPF::Result</i></a></dt>
  <dd></dd>
  <dt id="new($server,~2"><a class="permalink" href="#new($server,~2"><b>new($server,
    </b><span class="Li"><b>$request</b></span><b>,
    </b><span class="Li"><b>$text</b></span><b>)</b>: returns
    <i>Mail::SPF::Result</i></a></dt>
  <dd>Creates a new SPF result object and associates the given
      <i>Mail::SPF::Server</i> and <i>Mail::SPF::Request</i> objects with it. An
      optional result text may be specified.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Class_methods"><a class="permalink" href="#Class_methods">Class
  methods</a></h2>
<p class="Pp">The following class methods are provided:</p>
<dl class="Bl-tag">
  <dt id="throw($server,"><a class="permalink" href="#throw($server,"><b>throw($server,
    </b><span class="Li"><b>$request</b></span><b>)</b>: throws
    <i>Mail::SPF::Result</i></a></dt>
  <dd></dd>
  <dt id="throw($server,~2"><a class="permalink" href="#throw($server,~2"><b>throw($server,
    </b><span class="Li"><b>$request</b></span><b>,
    </b><span class="Li"><b>$text</b></span><b>)</b>: throws
    <i>Mail::SPF::Result</i></a></dt>
  <dd>Throws a new SPF result object, associating the given
      <i>Mail::SPF::Server</i> and <i>Mail::SPF::Request</i> objects with it. An
      optional result text may be specified.
    <p class="Pp"><i>Note</i>: Do not write code invoking
        <span class="Li">&quot;throw&quot;</span> on <i>literal</i> result class
        names as this would ignore any derivative result classes provided by
        <b>Mail::SPF</b> extension modules. Invoke the
        <span class="Li">&quot;throw_result&quot;</span> method on a
        <i>Mail::SPF::Server</i> object instead.</p>
  </dd>
  <dt id="name"><a class="permalink" href="#name"><b>name</b>: returns
    <i>string</i></a></dt>
  <dd><i>Abstract</i>. Returns the result name of the result class (or object).
      For classes of the <i>Mail::SPF::Result::*</i> hierarchy, this roughly
      corresponds to the trailing part of the class name. For example, returns
      <span class="Li">&quot;neutral-by-default&quot;</span> if invoked on
      <i>Mail::SPF::Result::NeutralByDefault</i>. Also see the &quot;code&quot;
      method. This method may also be used as an instance method.
    <p class="Pp">This method must be implemented by sub-classes of
        Mail::SPF::Result for which the result <i>name</i> differs from the
        result <i>code</i>.</p>
  </dd>
  <dt id="class"><a class="permalink" href="#class"><b>class</b>: returns
    <i>class</i></a></dt>
  <dd></dd>
  <dt id="class($name)"><a class="permalink" href="#class($name)"><b>class($name)</b>:
    returns <i>class</i></a></dt>
  <dd>Maps the given result name to the corresponding
      <i>Mail::SPF::Result::*</i> class, or returns the result base class (the
      class on which it is invoked) if no result name is given. If an unknown
      result name is specified, returns <b>undef</b>.</dd>
  <dt id="isa_by_name($name)"><a class="permalink" href="#isa_by_name($name)"><b>isa_by_name($name)</b>:
    returns <i>boolean</i></a></dt>
  <dd>If the class (or object) on which this method is invoked represents the
      given result name (or a derivative name), returns <b>true</b>. Returns
      <b>false</b> otherwise. This method may also be used as an instance
      method.
    <p class="Pp">For example,
        <span class="Li">&quot;Mail::SPF::Result::NeutralByDefault-&gt;isa_by_name('neutral')&quot;</span>
        returns <b>true</b>.</p>
  </dd>
  <dt id="code"><a class="permalink" href="#code"><b>code</b>: returns
    <i>string</i></a></dt>
  <dd><i>Abstract</i>. Returns the basic SPF result code
      (<span class="Li">&quot;pass&quot;</span>,
      <span class="Li">&quot;fail&quot;</span>,
      <span class="Li">&quot;softfail&quot;</span>,
      <span class="Li">&quot;neutral&quot;</span>,
      <span class="Li">&quot;none&quot;</span>,
      <span class="Li">&quot;error&quot;</span>,
      <span class="Li">&quot;permerror&quot;</span>,
      <span class="Li">&quot;temperror&quot;</span>) of the result class on
      which it is invoked. All valid result codes are valid result names as
      well, the reverse however does not apply. This method may also be used as
      an instance method.
    <p class="Pp">This method is abstract and must be implemented by sub-classes
        of Mail::SPF::Result.</p>
  </dd>
  <dt id="is_code($code)"><a class="permalink" href="#is_code($code)"><b>is_code($code)</b>:
    returns <i>boolean</i></a></dt>
  <dd>If the class (or object) on which this method is invoked represents the
      given result code, returns <b>true</b>. Returns <b>false</b> otherwise.
      This method may also be used as an instance method.
    <p class="Pp"><i>Note</i>: The &quot;isa_by_name&quot; method provides a
        superset of this method's functionality.</p>
  </dd>
  <dt id="received_spf_header_name"><a class="permalink" href="#received_spf_header_name"><b>received_spf_header_name</b>:
    returns <i>string</i></a></dt>
  <dd>Returns <b>'Received-SPF'</b> as the field name for
      <span class="Li">&quot;Received-SPF&quot;</span> header fields. This
      method should be overridden by <b>Mail::SPF</b> extension modules that
      provide non-standard features (such as local policy) with the capacity to
      dilute the purity of SPF results, in order not to deceive users of the
      header field into mistaking it as an indication of a natural SPF
    result.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Instance_methods"><a class="permalink" href="#Instance_methods">Instance
  methods</a></h2>
<p class="Pp">The following instance methods are provided:</p>
<dl class="Bl-tag">
  <dt id="throw"><a class="permalink" href="#throw"><b>throw</b>: throws
    <i>Mail::SPF::Result</i></a></dt>
  <dd></dd>
  <dt id="throw($server,~3"><a class="permalink" href="#throw($server,~3"><b>throw($server,
    </b><span class="Li"><b>$request</b></span><b>)</b>: throws
    <i>Mail::SPF::Result</i></a></dt>
  <dd></dd>
  <dt id="throw($server,~4"><a class="permalink" href="#throw($server,~4"><b>throw($server,
    </b><span class="Li"><b>$request</b></span><b>,
    </b><span class="Li"><b>$text</b></span><b>)</b>: throws
    <i>Mail::SPF::Result</i></a></dt>
  <dd>Re-throws an existing SPF result object. If <i>Mail::SPF::Server</i> and
      <i>Mail::SPF::Request</i> objects are specified, associates them with the
      result object, replacing the prior server and request objects. If a result
      text is specified as well, overrides the prior result text.</dd>
  <dt id="server"><a class="permalink" href="#server"><b>server</b>: returns
    <i>Mail::SPF::Server</i></a></dt>
  <dd>Returns the Mail::SPF server object that produced the result at hand.</dd>
  <dt id="request"><a class="permalink" href="#request"><b>request</b>: returns
    <i>Mail::SPF::Request</i></a></dt>
  <dd>Returns the SPF request that led to the result at hand.</dd>
  <dt id="text"><a class="permalink" href="#text"><b>text</b>: returns
    <i>string</i></a></dt>
  <dd>Returns the text message of the result object.</dd>
  <dt id="stringify"><a class="permalink" href="#stringify"><b>stringify</b>:
    returns <i>string</i></a></dt>
  <dd>Returns the result's name and text message formatted as a string. You can
      simply use a Mail::SPF::Result object as a string for the same effect, see
      &quot;OVERLOADING&quot;.</dd>
  <dt id="local_explanation"><a class="permalink" href="#local_explanation"><b>local_explanation</b>:
    returns <i>string</i>; throws <i>Mail::SPF::EDNSError</i>,
    <i>Mail::SPF::EInvalidMacroString</i></a></dt>
  <dd>Returns a locally generated explanation for the result.
    <p class="Pp">The local explanation is prefixed with the authority domain
        whose sender policy is responsible for the result. If the responsible
        sender policy referred to another domain's policy (using the
        <span class="Li">&quot;include&quot;</span> mechanism or the
        <span class="Li">&quot;redirect&quot;</span> modifier), that other
        domain which is <i>directly</i> responsible for the result is also
        included in the local explanation's head. For example:</p>
    <p class="Pp"></p>
    <pre>    example.com: &lt;local-explanation&gt;
    </pre>
    <p class="Pp">The authority domain
        <span class="Li">&quot;example.com&quot;</span>'s sender policy is
        directly responsible for the result.</p>
    <p class="Pp"></p>
    <pre>    example.com ... other.example.org: &lt;local-explanation&gt;
    </pre>
    <p class="Pp">The authority domain
        <span class="Li">&quot;example.com&quot;</span> (directly or indirectly)
        referred to the domain
        <span class="Li">&quot;other.example.org&quot;</span>, whose sender
        policy then led to the result.</p>
  </dd>
  <dt id="received_spf_header"><a class="permalink" href="#received_spf_header"><b>received_spf_header</b>:
    returns <i>string</i></a></dt>
  <dd>Returns a string containing an appropriate
      <span class="Li">&quot;Received-SPF&quot;</span> header field for the
      result object. The header field is not line-wrapped and contains no
      trailing newline character.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="OVERLOADING"><a class="permalink" href="#OVERLOADING">OVERLOADING</a></h1>
<p class="Pp">If a Mail::SPF::Result object is used as a <i>string</i>, the
    &quot;stringify&quot; method is used to convert the object into a
  string.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="RESULT_CLASSES"><a class="permalink" href="#RESULT_CLASSES">RESULT
  CLASSES</a></h1>
<p class="Pp">The following result classes are provided:</p>
<ul class="Bl-bullet">
  <li><i>Mail::SPF::Result::Pass</i></li>
  <li><i>Mail::SPF::Result::Fail</i></li>
  <li><i>Mail::SPF::Result::SoftFail</i></li>
  <li><i>Mail::SPF::Result::Neutral</i></li>
</ul>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd><i>Mail::SPF::Result::NeutralByDefault</i>
    <p class="Pp">This is a special case of the
        <span class="Li">&quot;neutral&quot;</span> result that is thrown as a
        default when &quot;falling off&quot; the end of the record during
        evaluation. See RFC 4408, 4.7.</p>
  </dd>
</dl>
</div>
<div class="Bd-indent"></div>
<ul class="Bl-bullet">
  <li><i>Mail::SPF::Result::None</i></li>
  <li><i>Mail::SPF::Result::Error</i></li>
</ul>
<div class="Bd-indent">
<ul class="Bl-bullet">
  <li><i>Mail::SPF::Result::PermError</i></li>
  <li><i>Mail::SPF::Result::TempError</i></li>
</ul>
</div>
<div class="Bd-indent"></div>
<p class="Pp">The following result classes have additional functionality:</p>
<dl class="Bl-tag">
  <dt id="Mail::SPF::Result::Fail"><a class="permalink" href="#Mail::SPF::Result::Fail"><i>Mail::SPF::Result::Fail</i></a></dt>
  <dd>The following additional instance method is provided:</dd>
</dl>
<div class="Bd-indent">
<dl class="Bl-tag">
  <dt id="authority_explanation"><a class="permalink" href="#authority_explanation"><b>authority_explanation</b>:
    returns <i>string</i>; throws <i>Mail::SPF::EDNSError</i>,
    <i>Mail::SPF::EInvalidMacroString</i></a></dt>
  <dd>Returns the authority domain's explanation for the result. Be aware that
      the authority domain may be a malicious party and thus the authority
      explanation should not be trusted blindly. See RFC 4408, 10.5, for a
      detailed discussion of this issue.</dd>
</dl>
</div>
<div class="Bd-indent"></div>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Mail::SPF, Mail::SPF::Server, Error, &quot;eval&quot; in
  perlfunc</p>
<p class="Pp">&lt;http://tools.ietf.org/html/rfc4408&gt;</p>
<p class="Pp">For availability, support, and license information, see the README
    file included with Mail::SPF.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Julian Mehnle &lt;julian@mehnle.net&gt;</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2023-11-12</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
