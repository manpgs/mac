<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Net::Server::SIG(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Net::Server::SIG(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Net::Server::SIG(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Net::Server::SIG - adpf - Safer signal handling</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    use Net::Server::SIG qw(register_sig check_sigs);
    use IO::Select ();
    use POSIX qw(WNOHANG);
    my $select = IO::Select-&gt;new();
    register_sig(PIPE =&gt; 'IGNORE',
                 HUP  =&gt; 'DEFAULT',
                 USR1 =&gt; sub { print &quot;I got a SIG $_[0]\n&quot;; },
                 USR2 =&gt; sub { print &quot;I got a SIG $_[0]\n&quot;; },
                 CHLD =&gt; sub { 1 while waitpid(-1, WNOHANG) &gt; 0; },
                 );
    # add some handles to the select
    $select-&gt;add(\*STDIN);
    # loop forever trying to stay alive
    while (1) {
        # do a timeout to see if any signals got passed us
        # while we were processing another signal
        my @fh = $select-&gt;can_read(10);
        my $key;
        my $val;
        # this is the handler for safe (fine under unsafe also)
        if (check_sigs()) {
          # or my @sigs = check_sigs();
          next unless @fh;
        }
        my $handle = $fh[@fh];
        # do something with the handle
    }
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Signals prior in Perl prior to 5.7 were unsafe. Since then signals
    have been implemented in a more safe algorithm. Net::Server::SIG provides
    backwards compatibility, while still working reliably with newer
  releases.</p>
<p class="Pp">Using a property of the <b>select()</b> function, Net::Server::SIG
    attempts to fix the unsafe problem. If a process is blocking on
    <b>select()</b> any signal will short circuit the select. Using this
    concept, Net::Server::SIG does the least work possible (changing one bit
    from 0 to 1). And depends upon the actual processing of the signals to take
    place immediately after the the select call via the &quot;check_sigs&quot;
    function. See the example shown above and also see the sigtest.pl script
    located in the examples directory of this distribution.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FUNCTIONS"><a class="permalink" href="#FUNCTIONS">FUNCTIONS</a></h1>
<dl class="Bl-tag">
  <dt>&quot;register_sig($SIG =&gt; \&amp;code_ref)&quot;</dt>
  <dd>Takes key/value pairs where the key is the signal name, and the argument
      is either a code ref, or the words 'DEFAULT' or 'IGNORE'. The function
      register_sig must be used in conjunction with check_sigs, and with a
      blocking <b>select()</b> function call -- otherwise, you will observe the
      registered signal mysteriously vanish.</dd>
  <dt>&quot;unregister_sig($SIG)&quot;</dt>
  <dd>Takes the name of a signal as an argument. Calls register_sig with a this
      signal name and 'DEFAULT' as arguments (same as
      register_sig(SIG,'DEFAULT')</dd>
  <dt>&quot;check_sigs()&quot;</dt>
  <dd>Checks to see if any registered signals have occured. If so, it will play
      the registered code ref for that signal. Return value is array containing
      any SIGNAL names that had occured.</dd>
  <dt>&quot;sig_is_registered($SIG)&quot;</dt>
  <dd>Takes a signal name and returns any registered code_ref for that
    signal.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Paul Seamons (paul@seamons.com)</p>
<p class="Pp">Rob B Brown (rob@roobik.com) - Provided a sounding board and
    feedback in creating Net::Server::SIG and sigtest.pl.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LICENSE"><a class="permalink" href="#LICENSE">LICENSE</a></h1>
<pre>  This package may be distributed under the terms of either the
  GNU General Public License
    or the
  Perl Artistic License
  All rights reserved.
</pre>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-08-10</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
