<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Encode::MIME::Header(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Encode::MIME::Header(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">Encode::MIME::Header(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Encode::MIME::Header -- MIME encoding for an unstructured email
    header</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    use Encode qw(encode decode);
    my $mime_str = encode(&quot;MIME-Header&quot;, &quot;Sample:Text \N{U+263A}&quot;);
    # $mime_str is &quot;=?UTF-8?B?U2FtcGxlOlRleHQg4pi6?=&quot;
    my $mime_q_str = encode(&quot;MIME-Q&quot;, &quot;Sample:Text \N{U+263A}&quot;);
    # $mime_q_str is &quot;=?UTF-8?Q?Sample=3AText_=E2=98=BA?=&quot;
    my $str = decode(&quot;MIME-Header&quot;,
        &quot;=?ISO-8859-1?B?SWYgeW91IGNhbiByZWFkIHRoaXMgeW8=?=\r\n &quot; .
        &quot;=?ISO-8859-2?B?dSB1bmRlcnN0YW5kIHRoZSBleGFtcGxlLg==?=&quot;
    );
    # $str is &quot;If you can read this you understand the example.&quot;
    use Encode qw(decode :fallbacks);
    use Encode::MIME::Header;
    local $Encode::MIME::Header::STRICT_DECODE = 1;
    my $strict_string = decode(&quot;MIME-Header&quot;, $mime_string, FB_CROAK);
    # use strict decoding and croak on errors
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="ABSTRACT"><a class="permalink" href="#ABSTRACT">ABSTRACT</a></h1>
<p class="Pp">This module implements RFC 2047
    &lt;https://tools.ietf.org/html/rfc2047&gt; MIME encoding for an
    unstructured field body of the email header. It can also be used for RFC 822
    &lt;https://tools.ietf.org/html/rfc822&gt; 'text' token. However, it cannot
    be used directly for the whole header with the field name or for the
    structured header fields like From, To, Cc, Message-Id, etc... There are 3
    encoding names supported by this module:
    <span class="Li">&quot;MIME-Header&quot;</span>,
    <span class="Li">&quot;MIME-B&quot;</span> and
    <span class="Li">&quot;MIME-Q&quot;</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">Decode method takes an unstructured field body of the email header
    (or RFC 822 &lt;https://tools.ietf.org/html/rfc822&gt; 'text' token) as its
    input and decodes each MIME encoded-word from input string to a sequence of
    bytes according to RFC 2047 &lt;https://tools.ietf.org/html/rfc2047&gt; and
    RFC 2231 &lt;https://tools.ietf.org/html/rfc2231&gt;. Subsequently, each
    sequence of bytes with the corresponding MIME charset is decoded with the
    Encode module and finally, one output string is returned. Text parts of the
    input string which do not contain MIME encoded-word stay unmodified in the
    output string. Folded newlines between two consecutive MIME encoded-words
    are discarded, others are preserved in the output string.
    <span class="Li">&quot;MIME-B&quot;</span> can decode Base64 variant,
    <span class="Li">&quot;MIME-Q&quot;</span> can decode Quoted-Printable
    variant and <span class="Li">&quot;MIME-Header&quot;</span> can decode both
    of them. If Encode module does not support particular MIME charset or chosen
    variant then an action based on CHECK flags is performed (by default, the
    MIME encoded-word is not decoded).</p>
<p class="Pp">Encode method takes a scalar string as its input and uses strict
    UTF-8 encoder for encoding it to UTF-8 bytes. Then a sequence of UTF-8 bytes
    is encoded into MIME encoded-words
    (<span class="Li">&quot;MIME-Header&quot;</span> and
    <span class="Li">&quot;MIME-B&quot;</span> use a Base64 variant while
    <span class="Li">&quot;MIME-Q&quot;</span> uses a Quoted-Printable variant)
    where each MIME encoded-word is limited to 75 characters. MIME encoded-words
    are separated by <span class="Li">&quot;CRLF SPACE&quot;</span> and joined
    to one output string. Output string is suitable for unstructured field body
    of the email header.</p>
<p class="Pp">Both encode and decode methods propagate CHECK flags when encoding
    and decoding the MIME charset.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Versions prior to 2.22 (part of Encode 2.83) have a malfunctioning
    decoder and encoder. The MIME encoder infamously inserted additional spaces
    or discarded white spaces between consecutive MIME encoded-words, which led
    to invalid MIME headers produced by this module. The MIME decoder had a
    tendency to discard white spaces, incorrectly interpret data or attempt to
    decode Base64 MIME encoded-words as Quoted-Printable. These problems were
    fixed in version 2.22. It is highly recommended not to use any version prior
    2.22!</p>
<p class="Pp">Versions prior to 2.24 (part of Encode 2.87) ignored CHECK flags.
    The MIME encoder used not strict utf8 encoder for input Unicode strings
    which could lead to invalid UTF-8 sequences. MIME decoder used also not
    strict utf8 decoder and additionally called the decode method with a
    <span class="Li">&quot;Encode::FB_PERLQQ&quot;</span> flag (thus
    user-specified CHECK flags were ignored). Moreover, it automatically croaked
    when a MIME encoded-word contained unknown encoding. Since version 2.24,
    this module uses strict UTF-8 encoder and decoder. And CHECK flags are
    correctly propagated.</p>
<p class="Pp">Since version 2.22 (part of Encode 2.83), the MIME encoder should
    be fully compliant to RFC 2047 &lt;https://tools.ietf.org/html/rfc2047&gt;
    and RFC 2231 &lt;https://tools.ietf.org/html/rfc2231&gt;. Due to the
    aforementioned bugs in previous versions of the MIME encoder, there is a
    <i>less strict</i> compatible mode for the MIME decoder which is used by
    default. It should be able to decode MIME encoded-words encoded by pre 2.22
    versions of this module. However, note that this is not correct according to
    RFC 2047 &lt;https://tools.ietf.org/html/rfc2047&gt;.</p>
<p class="Pp">In default <i>not strict</i> mode the MIME decoder attempts to
    decode every substring which looks like a MIME encoded-word. Therefore, the
    MIME encoded-words do not need to be separated by white space. To enforce a
    correct <i>strict</i> mode, set variable
    <span class="Li">$Encode::MIME::Header::STRICT_DECODE</span> to 1 e.g. by
    localizing:</p>
<p class="Pp"></p>
<pre>  use Encode::MIME::Header;
  local $Encode::MIME::Header::STRICT_DECODE = 1;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Pali &lt;pali@cpan.org&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Encode, RFC 822 &lt;https://tools.ietf.org/html/rfc822&gt;, RFC
    2047 &lt;https://tools.ietf.org/html/rfc2047&gt;, RFC 2231
    &lt;https://tools.ietf.org/html/rfc2231&gt;</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2022-02-19</td>
    <td class="foot-os">perl v5.34.1</td>
  </tr>
</table>
</body>
</html>
