<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Test::File(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test::File(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test::File(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Test::File -- test file attributes</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
  use Test::File;
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This modules provides a collection of test utilities for file
    attributes.</p>
<p class="Pp">Some file attributes depend on the owner of the process testing
    the file in the same way the file test operators do. For instance, root (or
    super-user or Administrator) may always be able to read files no matter the
    permissions.</p>
<p class="Pp">Some attributes don't make sense outside of Unix, either, so some
    tests automatically skip if they think they won't work on the platform. If
    you have a way to make these functions work on Windows, for instance, please
    send me a patch. :) IF you want to pretend to be Windows on a non-Windows
    machine (for instance, to test <span class="Li">&quot;skip()&quot;</span>),
    you can set the <span class="Li">&quot;PRETEND_TO_BE_WINDOWS&quot;</span>
    environment variable.</p>
<p class="Pp">The optional NAME parameter for every function allows you to
    specify a name for the test. If not supplied, a reasonable default will be
    generated.</p>
<section class="Ss">
<h2 class="Ss" id="Functions"><a class="permalink" href="#Functions">Functions</a></h2>
<dl class="Bl-tag">
  <dt id="file_exists_ok("><a class="permalink" href="#file_exists_ok(">file_exists_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists, and not ok otherwise.</dd>
  <dt id="file_not_exists_ok("><a class="permalink" href="#file_not_exists_ok(">file_not_exists_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file does not exist, and not okay if it does exist.</dd>
  <dt id="file_empty_ok("><a class="permalink" href="#file_empty_ok(">file_empty_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists and has empty size, not ok if the file does not
      exist or exists with non-zero size.</dd>
  <dt id="file_not_empty_ok("><a class="permalink" href="#file_not_empty_ok(">file_not_empty_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists and has non-zero size, not ok if the file does not
      exist or exists with zero size.</dd>
  <dt id="file_size_ok("><a class="permalink" href="#file_size_ok(">file_size_ok(
    FILENAME, SIZE [, NAME ] )</a></dt>
  <dd>Ok if the file exists and has SIZE size in bytes (exactly), not ok if the
      file does not exist or exists with size other than SIZE.</dd>
  <dt id="file_max_size_ok("><a class="permalink" href="#file_max_size_ok(">file_max_size_ok(
    FILENAME, MAX [, NAME ] )</a></dt>
  <dd>Ok if the file exists and has size less than or equal to MAX bytes, not ok
      if the file does not exist or exists with size greater than MAX
    bytes.</dd>
  <dt id="file_min_size_ok("><a class="permalink" href="#file_min_size_ok(">file_min_size_ok(
    FILENAME, MIN [, NAME ] )</a></dt>
  <dd>Ok if the file exists and has size greater than or equal to MIN bytes, not
      ok if the file does not exist or exists with size less than MIN
    bytes.</dd>
  <dt id="file_line_count_is("><a class="permalink" href="#file_line_count_is(">file_line_count_is(
    FILENAME, COUNT [, NAME ] )</a></dt>
  <dd>Ok if the file exists and has COUNT lines (exactly), not ok if the file
      does not exist or exists with a line count other than COUNT.
    <p class="Pp">This function uses the current value of
        <span class="Li">$/</span> as the line ending and counts the lines by
        reading them and counting how many it read.</p>
  </dd>
  <dt id="file_line_count_isnt("><a class="permalink" href="#file_line_count_isnt(">file_line_count_isnt(
    FILENAME, COUNT [, NAME ] )</a></dt>
  <dd>Ok if the file exists and doesn't have exactly COUNT lines, not ok if the
      file does not exist or exists with a line count of COUNT. Read that
      carefully: the file must exist for this test to pass!
    <p class="Pp">This function uses the current value of
        <span class="Li">$/</span> as the line ending and counts the lines by
        reading them and counting how many it read.</p>
  </dd>
  <dt id="file_line_count_between("><a class="permalink" href="#file_line_count_between(">file_line_count_between(
    FILENAME, MIN, MAX, [, NAME ] )</a></dt>
  <dd>Ok if the file exists and has a line count between MIN and MAX,
      inclusively.
    <p class="Pp">This function uses the current value of
        <span class="Li">$/</span> as the line ending and counts the lines by
        reading them and counting how many it read.</p>
  </dd>
  <dt id="file_contains_like"><a class="permalink" href="#file_contains_like">file_contains_like
    ( FILENAME, PATTERN [, NAME ] )</a></dt>
  <dd>Ok if the file exists and its contents (as one big string) match PATTERN,
      not ok if the file does not exist, is not readable, or exists but doesn't
      match PATTERN.
    <p class="Pp">Since the file contents are read into memory, you should not
        use this for large files. Besides memory consumption, test diagnostics
        for failing tests might be difficult to decipher. However, for short
        files this works very well.</p>
    <p class="Pp">Because the entire contents are treated as one large string,
        you can make a pattern that tests multiple lines. Don't forget that you
        may need to use the /s modifier for such patterns:</p>
    <p class="Pp"></p>
    <pre>
        # make sure file has one or more paragraphs with CSS class X
        file_contains_like($html_file, qr{&lt;p class=&quot;X&quot;&gt;.*?&lt;/p&gt;}s);
    </pre>
    <p class="Pp">Contrariwise, if you need to match at the beginning or end of
        a line inside the file, use the /m modifier:</p>
    <p class="Pp"></p>
    <pre>
        # make sure file has a setting for foo
        file_contains_like($config_file, qr/^ foo \s* = \s* \w+ $/mx);
    </pre>
    <p class="Pp">If you want to test your file contents against multiple
        patterns, but don't want to have the file read in repeatedly, you can
        pass an arrayref of patterns instead of a single pattern, like so:</p>
    <p class="Pp"></p>
    <pre>
        # make sure our template has rendered correctly
        file_contains_like($template_out,
                [
                qr/^ $title_line $/mx,
                map { qr/^ $_ $/mx } @chapter_headings,
                qr/^ $footer_line $/mx,
                ]);
    </pre>
    <p class="Pp">Please note that if you do this, and your file does not exist
        or is not readable, you'll only get one test failure instead of a
        failure for each pattern. This could cause your test plan to be off,
        although you may not care at that point because your test failed anyway.
        If you do care, either skip the test plan altogether by employing
        Test::More's <span class="Li">&quot;done_testing()&quot;</span>
        function, or use &quot;file_readable_ok&quot; in conjunction with a
        <span class="Li">&quot;SKIP&quot;</span> block.</p>
    <p class="Pp">Contributed by Buddy Burden
        <span class="Li">&quot;&lt;barefoot@cpan.org&gt;&quot;</span>.</p>
  </dd>
  <dt id="file_contains_unlike"><a class="permalink" href="#file_contains_unlike">file_contains_unlike
    ( FILENAME, PATTERN [, NAME ] )</a></dt>
  <dd>Ok if the file exists and its contents (as one big string) do <b>not</b>
      match PATTERN, not ok if the file does not exist, is not readable, or
      exists but matches PATTERN.
    <p class="Pp">All notes and caveats for &quot;file_contains_like&quot; apply
        to this function as well.</p>
    <p class="Pp">Contributed by Buddy Burden
        <span class="Li">&quot;&lt;barefoot@cpan.org&gt;&quot;</span>.</p>
  </dd>
  <dt id="file_contains_utf8_like"><a class="permalink" href="#file_contains_utf8_like">file_contains_utf8_like
    ( FILENAME, PATTERN [, NAME ] )</a></dt>
  <dd>The same as <span class="Li">&quot;file_contains_like&quot;</span>, except
      the file is opened as UTF-8.</dd>
  <dt id="file_contains_utf8_unlike"><a class="permalink" href="#file_contains_utf8_unlike">file_contains_utf8_unlike
    ( FILENAME, PATTERN [, NAME ] )</a></dt>
  <dd>The same as <span class="Li">&quot;file_contains_unlike&quot;</span>,
      except the file is opened as UTF-8.</dd>
  <dt id="file_contains_encoded_like"><a class="permalink" href="#file_contains_encoded_like">file_contains_encoded_like
    ( FILENAME, ENCODING, PATTERN [, NAME ] )</a></dt>
  <dd>The same as <span class="Li">&quot;file_contains_like&quot;</span>, except
      the file is opened with ENCODING</dd>
  <dt id="file_contains_encoded_unlike"><a class="permalink" href="#file_contains_encoded_unlike">file_contains_encoded_unlike
    ( FILENAME, ENCODING, PATTERN [, NAME ] )</a></dt>
  <dd>The same as <span class="Li">&quot;file_contains_unlike&quot;</span>,
      except the file is opened with ENCODING.</dd>
  <dt id="file_readable_ok("><a class="permalink" href="#file_readable_ok(">file_readable_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists and is readable, not ok if the file does not exist
      or is not readable.</dd>
  <dt id="file_not_readable_ok("><a class="permalink" href="#file_not_readable_ok(">file_not_readable_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists and is not readable, not ok if the file does not
      exist or is readable.</dd>
  <dt id="file_writeable_ok("><a class="permalink" href="#file_writeable_ok(">file_writeable_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists and is writeable, not ok if the file does not exist
      or is not writeable.</dd>
  <dt id="file_not_writeable_ok("><a class="permalink" href="#file_not_writeable_ok(">file_not_writeable_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists and is not writeable, not ok if the file does not
      exist or is writeable.</dd>
  <dt id="file_executable_ok("><a class="permalink" href="#file_executable_ok(">file_executable_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists and is executable, not ok if the file does not exist
      or is not executable.
    <p class="Pp">This test automatically skips if it thinks it is on a Windows
        platform.</p>
  </dd>
  <dt id="file_not_executable_ok("><a class="permalink" href="#file_not_executable_ok(">file_not_executable_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists and is not executable, not ok if the file does not
      exist or is executable.
    <p class="Pp">This test automatically skips if it thinks it is on a Windows
        platform.</p>
  </dd>
  <dt id="file_mode_is("><a class="permalink" href="#file_mode_is(">file_mode_is(
    FILENAME, MODE [, NAME ] )</a></dt>
  <dd>Ok if the file exists and the mode matches, not ok if the file does not
      exist or the mode does not match.
    <p class="Pp">This test automatically skips if it thinks it is on a Windows
        platform.</p>
    <p class="Pp">Contributed by Shawn Sorichetti
        <span class="Li">&quot;&lt;ssoriche@coloredblocks.net&gt;&quot;</span></p>
  </dd>
  <dt id="file_mode_isnt("><a class="permalink" href="#file_mode_isnt(">file_mode_isnt(
    FILENAME, MODE [, NAME ] )</a></dt>
  <dd>Ok if the file exists and mode does not match, not ok if the file does not
      exist or mode does match.
    <p class="Pp">This test automatically skips if it thinks it is on a Windows
        platform.</p>
    <p class="Pp">Contributed by Shawn Sorichetti
        <span class="Li">&quot;&lt;ssoriche@coloredblocks.net&gt;&quot;</span></p>
  </dd>
  <dt id="file_mode_has("><a class="permalink" href="#file_mode_has(">file_mode_has(
    FILENAME, MODE [, NAME ] )</a></dt>
  <dd>Ok if the file exists and has all the bits in mode turned on, not ok if
      the file does not exist or the mode does not match. That is,
      <span class="Li">&quot;FILEMODE &amp; MODE == MODE&quot;</span> must be
      true.
    <p class="Pp">This test automatically skips if it thinks it is on a Windows
        platform.</p>
    <p class="Pp">Contributed by Ricardo Signes
        <span class="Li">&quot;&lt;rjbs@cpan.org&gt;&quot;</span></p>
  </dd>
  <dt id="file_mode_hasnt("><a class="permalink" href="#file_mode_hasnt(">file_mode_hasnt(
    FILENAME, MODE [, NAME ] )</a></dt>
  <dd>Ok if the file exists and has all the bits in mode turned off, not ok if
      the file does not exist or the mode does not match. That is,
      <span class="Li">&quot;FILEMODE &amp; MODE == 0&quot;</span> must be true.
    <p class="Pp">This test automatically skips if it thinks it is on a Windows
        platform.</p>
    <p class="Pp">Contributed by Ricardo Signes
        <span class="Li">&quot;&lt;rjbs@cpan.org&gt;&quot;</span></p>
  </dd>
  <dt id="file_is_symlink_ok("><a class="permalink" href="#file_is_symlink_ok(">file_is_symlink_ok(
    FILENAME [, NAME ] )</a></dt>
  <dd>Ok if FILENAME is a symlink, even if it points to a non-existent file.
      This test automatically skips if the operating system does not support
      symlinks. If the file does not exist, the test fails.</dd>
  <dt id="symlink_target_exists_ok("><a class="permalink" href="#symlink_target_exists_ok(">symlink_target_exists_ok(
    SYMLINK [, TARGET] [, NAME ] )</a></dt>
  <dd>Ok if FILENAME is a symlink and it points to a existing file. With the
      optional TARGET argument, the test fails if SYMLINK's target is not
      TARGET. This test automatically skips if the operating system does not
      support symlinks. If the file does not exist, the test fails.</dd>
  <dt id="symlink_target_dangles_ok("><a class="permalink" href="#symlink_target_dangles_ok(">symlink_target_dangles_ok(
    SYMLINK [, NAME ] )</a></dt>
  <dd>Ok if FILENAME is a symlink and if it doesn't point to a existing file.
      This test automatically skips if the operating system does not support
      symlinks. If the file does not exist, the test fails.</dd>
  <dt id="symlink_target_is("><a class="permalink" href="#symlink_target_is(">symlink_target_is(
    SYMLINK, TARGET [, NAME ] )</a></dt>
  <dd>Ok if FILENAME is a symlink and if points to TARGET. This test
      automatically skips if the operating system does not support symlinks. If
      the file does not exist, the test fails.</dd>
  <dt id="symlink_target_is_absolute_ok("><a class="permalink" href="#symlink_target_is_absolute_ok(">symlink_target_is_absolute_ok(
    SYMLINK [, NAME ] )</a></dt>
  <dd>Ok if FILENAME is a symlink and if its target is an absolute path. This
      test automatically skips if the operating system does not support
      symlinks. If the file does not exist, the test fails.</dd>
  <dt id="dir_exists_ok("><a class="permalink" href="#dir_exists_ok(">dir_exists_ok(
    DIRECTORYNAME [, NAME ] )</a></dt>
  <dd>Ok if the file exists and is a directory, not ok if the file doesn't
      exist, or exists but isn't a directory.
    <p class="Pp">Contributed by Buddy Burden
        <span class="Li">&quot;&lt;barefoot@cpan.org&gt;&quot;</span>.</p>
  </dd>
  <dt id="dir_contains_ok("><a class="permalink" href="#dir_contains_ok(">dir_contains_ok(
    DIRECTORYNAME, FILENAME [, NAME ] )</a></dt>
  <dd>Ok if the directory exists and contains the file, not ok if the directory
      doesn't exist, or exists but doesn't contain the file.
    <p class="Pp">Contributed by Buddy Burden
        <span class="Li">&quot;&lt;barefoot@cpan.org&gt;&quot;</span>.</p>
  </dd>
  <dt id="link_count_is_ok("><a class="permalink" href="#link_count_is_ok(">link_count_is_ok(
    FILE, LINK_COUNT [, NAME ] )</a></dt>
  <dd>Ok if the link count to FILE is LINK_COUNT. LINK_COUNT is interpreted as
      an integer. A LINK_COUNT that evaluates to 0 returns Ok if the file does
      not exist.</dd>
  <dt id="link_count_gt_ok("><a class="permalink" href="#link_count_gt_ok(">link_count_gt_ok(
    FILE, LINK_COUNT [, NAME ] )</a></dt>
  <dd>Ok if the link count to FILE is greater than LINK_COUNT. LINK_COUNT is
      interpreted as an integer. A LINK_COUNT that evaluates to 0 returns Ok if
      the file has at least one link.</dd>
  <dt id="link_count_lt_ok("><a class="permalink" href="#link_count_lt_ok(">link_count_lt_ok(
    FILE, LINK_COUNT [, NAME ] )</a></dt>
  <dd>Ok if the link count to FILE is less than LINK_COUNT. LINK_COUNT is
      interpreted as an integer. A LINK_COUNT that evaluates to 0 returns Ok if
      the file has at least one link.</dd>
  <dt id="owner_is("><a class="permalink" href="#owner_is(">owner_is( FILE ,
    OWNER [, NAME ] )</a></dt>
  <dd>Ok if FILE's owner is the same as OWNER. OWNER may be a text user name or
      a numeric userid. Test skips on Dos, and Mac OS &lt;= 9. If the file does
      not exist, the test fails.
    <p class="Pp">Contributed by Dylan Martin</p>
  </dd>
  <dt id="owner_isnt("><a class="permalink" href="#owner_isnt(">owner_isnt(
    FILE, OWNER [, NAME ] )</a></dt>
  <dd>Ok if FILE's owner is not the same as OWNER. OWNER may be a text user name
      or a numeric userid. Test skips on Dos and Mac OS &lt;= 9. If the file
      does not exist, the test fails.
    <p class="Pp">Contributed by Dylan Martin</p>
  </dd>
  <dt id="group_is("><a class="permalink" href="#group_is(">group_is( FILE ,
    GROUP [, NAME ] )</a></dt>
  <dd>Ok if FILE's group is the same as GROUP. GROUP may be a text group name or
      a numeric group id. Test skips on Dos, Mac OS &lt;= 9 and any other
      operating systems that do not support <b>getpwuid()</b> and friends. If
      the file does not exist, the test fails.
    <p class="Pp">Contributed by Dylan Martin</p>
  </dd>
  <dt id="group_isnt("><a class="permalink" href="#group_isnt(">group_isnt( FILE
    , GROUP [, NAME ] )</a></dt>
  <dd>Ok if FILE's group is not the same as GROUP. GROUP may be a text group
      name or a numeric group id. Test skips on Dos, Mac OS &lt;= 9 and any
      other operating systems that do not support <b>getpwuid()</b> and friends.
      If the file does not exist, the test fails.
    <p class="Pp">Contributed by Dylan Martin</p>
  </dd>
  <dt id="file_mtime_age_ok("><a class="permalink" href="#file_mtime_age_ok(">file_mtime_age_ok(
    FILE [, WITHIN_SECONDS ] [, NAME ] )</a></dt>
  <dd>Ok if FILE's modified time is WITHIN_SECONDS inclusive of the system's
      current time. This test uses <b>stat()</b> to obtain the mtime. If the
      file does not exist the test returns failure. If <b>stat()</b> fails, the
      test is skipped.</dd>
  <dt id="file_mtime_gt_ok("><a class="permalink" href="#file_mtime_gt_ok(">file_mtime_gt_ok(
    FILE, UNIXTIME [, NAME ] )</a></dt>
  <dd>Ok if FILE's mtime is &gt; UNIXTIME. This test uses <b>stat()</b> to get
      the mtime. If <b>stat()</b> fails this test is skipped. If FILE does not
      exist, this test fails.</dd>
  <dt id="file_mtime_lt_ok("><a class="permalink" href="#file_mtime_lt_ok(">file_mtime_lt_ok(
    FILE, UNIXTIME, [, NAME ] )</a></dt>
  <dd>Ok if FILE's modified time is &lt; UNIXTIME. This test uses <b>stat()</b>
      to get the mtime. If <b>stat()</b> fails this test is skipped. If FILE
      does not exist, this test fails.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="TO_DO"><a class="permalink" href="#TO_DO">TO DO</a></h1>
<p class="Pp">* check properties for other users (readable_by_root, for
    instance)</p>
<p class="Pp">* check times</p>
<p class="Pp">* check number of links to file</p>
<p class="Pp">* check path parts (directory, filename, extension)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">Test::Builder, Test::More</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SOURCE_AVAILABILITY"><a class="permalink" href="#SOURCE_AVAILABILITY">SOURCE
  AVAILABILITY</a></h1>
<p class="Pp">This module is in Github:</p>
<p class="Pp"></p>
<pre>
        git://github.com/briandfoy/test-file.git
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">brian d foy,
    <span class="Li">&quot;&lt;bdfoy@cpan.org&gt;&quot;</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="CREDITS"><a class="permalink" href="#CREDITS">CREDITS</a></h1>
<p class="Pp">Shawn Sorichetti
    <span class="Li">&quot;&lt;ssoriche@coloredblocks.net&gt;&quot;</span>
    provided some functions.</p>
<p class="Pp">Tom Metro helped me figure out some Windows capabilities.</p>
<p class="Pp">Dylan Martin added <span class="Li">&quot;owner_is&quot;</span>
    and <span class="Li">&quot;owner_isnt&quot;</span>.</p>
<p class="Pp">David Wheeler added
    <span class="Li">&quot;file_line_count_is&quot;</span>.</p>
<p class="Pp">Buddy Burden
    <span class="Li">&quot;&lt;barefoot@cpan.org&gt;&quot;</span> provided
    <span class="Li">&quot;dir_exists_ok&quot;</span>,
    <span class="Li">&quot;dir_contains_ok&quot;</span>,
    <span class="Li">&quot;file_contains_like&quot;</span>, and
    <span class="Li">&quot;file_contains_unlike&quot;</span>.</p>
<p class="Pp">xmikew
    <span class="Li">&quot;&lt;https://github.com/xmikew&gt;&quot;</span>
    provided the <span class="Li">&quot;mtime_age&quot;</span> stuff.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">Copyright &#x00A9; 2002-2016, brian d foy &lt;bdfoy@cpan.org&gt;.
    All rights reserved.</p>
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2017-04-17</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
