<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>XSLoader(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">XSLoader(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">XSLoader(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">XSLoader - Dynamically load C libraries into Perl code</p>
</section>
<section class="Sh">
<h1 class="Sh" id="VERSION"><a class="permalink" href="#VERSION">VERSION</a></h1>
<p class="Pp">Version 0.30</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    package YourPackage;
    require XSLoader;
    XSLoader::load(__PACKAGE__, $VERSION);
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">This module defines a standard <i>simplified</i> interface to the
    dynamic linking mechanisms available on many platforms. Its primary purpose
    is to implement cheap automatic dynamic loading of Perl modules.</p>
<p class="Pp">For a more complicated interface, see DynaLoader. Many (most)
    features of <span class="Li">&quot;DynaLoader&quot;</span> are not
    implemented in <span class="Li">&quot;XSLoader&quot;</span>, like for
    example the <span class="Li">&quot;dl_load_flags&quot;</span>, not honored
    by <span class="Li">&quot;XSLoader&quot;</span>.</p>
<section class="Ss">
<h2 class="Ss" id="Migration_from__DynaLoader_"><a class="permalink" href="#Migration_from__DynaLoader_">Migration
  from &quot;DynaLoader&quot;</a></h2>
<p class="Pp">A typical module using DynaLoader starts like this:</p>
<p class="Pp"></p>
<pre>    package YourPackage;
    require DynaLoader;
    our @ISA = qw( OnePackage OtherPackage DynaLoader );
    our $VERSION = '0.01';
    __PACKAGE__-&gt;bootstrap($VERSION);
</pre>
<p class="Pp">Change this to</p>
<p class="Pp"></p>
<pre>    package YourPackage;
    use XSLoader;
    our @ISA = qw( OnePackage OtherPackage );
    our $VERSION = '0.01';
    XSLoader::load(__PACKAGE__, $VERSION);
</pre>
<p class="Pp">In other words: replace <span class="Li">&quot;require
    DynaLoader&quot;</span> by <span class="Li">&quot;use XSLoader&quot;</span>,
    remove <span class="Li">&quot;DynaLoader&quot;</span> from
    <span class="Li">@ISA</span>, change
    <span class="Li">&quot;bootstrap&quot;</span> by
    <span class="Li">&quot;XSLoader::load&quot;</span>. Do not forget to quote
    the name of your package on the
    <span class="Li">&quot;XSLoader::load&quot;</span> line, and add comma
    (<span class="Li">&quot;,&quot;</span>) before the arguments
    (<span class="Li">$VERSION</span> above).</p>
<p class="Pp">Of course, if <span class="Li">@ISA</span> contained only
    <span class="Li">&quot;DynaLoader&quot;</span>, there is no need to have the
    <span class="Li">@ISA</span> assignment at all; moreover, if instead of
    <span class="Li">&quot;our&quot;</span> one uses the more
    backward-compatible</p>
<p class="Pp"></p>
<pre>    use vars qw($VERSION @ISA);
</pre>
<p class="Pp">one can remove this reference to <span class="Li">@ISA</span>
    together with the <span class="Li">@ISA</span> assignment.</p>
<p class="Pp">If no <span class="Li">$VERSION</span> was specified on the
    <span class="Li">&quot;bootstrap&quot;</span> line, the last line
  becomes</p>
<p class="Pp"></p>
<pre>    XSLoader::load(__PACKAGE__);
</pre>
<p class="Pp">in which case it can be further simplified to</p>
<p class="Pp"></p>
<pre>    XSLoader::load();
</pre>
<p class="Pp">as <span class="Li">&quot;load&quot;</span> will use
    <span class="Li">&quot;caller&quot;</span> to determine the package.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Backward_compatible_boilerplate"><a class="permalink" href="#Backward_compatible_boilerplate">Backward
  compatible boilerplate</a></h2>
<p class="Pp">If you want to have your cake and eat it too, you need a more
    complicated boilerplate.</p>
<p class="Pp"></p>
<pre>    package YourPackage;
    our @ISA = qw( OnePackage OtherPackage );
    our $VERSION = '0.01';
    eval {
       require XSLoader;
        XSLoader::load(__PACKAGE__, $VERSION);
       1;
    } or do {
       require DynaLoader;
       push @ISA, 'DynaLoader';
       __PACKAGE__-&gt;bootstrap($VERSION);
    };
</pre>
<p class="Pp">The parentheses about
    <span class="Li">&quot;XSLoader::load()&quot;</span> arguments are needed
    since we replaced <span class="Li">&quot;use XSLoader&quot;</span> by
    <span class="Li">&quot;require&quot;</span>, so the compiler does not know
    that a function <span class="Li">&quot;XSLoader::load()&quot;</span> is
    present.</p>
<p class="Pp">This boilerplate uses the low-overhead
    <span class="Li">&quot;XSLoader&quot;</span> if present; if used with an
    antique Perl which has no <span class="Li">&quot;XSLoader&quot;</span>, it
    falls back to using <span class="Li">&quot;DynaLoader&quot;</span>.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="Order_of_initialization:_early_"><a class="permalink" href="#Order_of_initialization:_early_">Order
  of initialization: early <b>load()</b></a></h1>
<p class="Pp"><i>Skip this section if the XSUB functions are supposed to be
    called from other</i> <i>modules only; read it only if you call your XSUBs
    from the code in your module,</i> <i>or have a
    </i><span class="Li"><i>&quot;BOOT:&quot;</i></span><i> section in your XS
    file (see &quot;The BOOT: Keyword&quot; in perlxs).</i> <i>What is described
    here is equally applicable to the DynaLoader</i> <i>interface.</i></p>
<p class="Pp">A sufficiently complicated module using XS would have both Perl
    code (defined in <i>YourPackage.pm</i>) and XS code (defined in
    <i>YourPackage.xs</i>). If this Perl code makes calls into this XS code,
    and/or this XS code makes calls to the Perl code, one should be careful with
    the order of initialization.</p>
<p class="Pp">The call to <span class="Li">&quot;XSLoader::load()&quot;</span>
    (or <span class="Li">&quot;bootstrap()&quot;</span>) calls the module's
    bootstrap code. For modules build by <i>xsubpp</i> (nearly all modules) this
    has three side effects:</p>
<ul class="Bl-bullet">
  <li>A sanity check is done to ensure that the versions of the <i>.pm</i> and
      the (compiled) <i>.xs</i> parts are compatible. If
      <span class="Li">$VERSION</span> was specified, this is used for the
      check. If not specified, it defaults to <span class="Li">&quot;$XS_VERSION
      // $VERSION&quot;</span> (in the module's namespace)</li>
  <li>the XSUBs are made accessible from Perl</li>
  <li>if a <span class="Li">&quot;BOOT:&quot;</span> section was present in the
      <i>.xs</i> file, the code there is called.</li>
</ul>
<p class="Pp">Consequently, if the code in the <i>.pm</i> file makes calls to
    these XSUBs, it is convenient to have XSUBs installed before the Perl code
    is defined; for example, this makes prototypes for XSUBs visible to this
    Perl code. Alternatively, if the <span class="Li">&quot;BOOT:&quot;</span>
    section makes calls to Perl functions (or uses Perl variables) defined in
    the <i>.pm</i> file, they must be defined prior to the call to
    <span class="Li">&quot;XSLoader::load()&quot;</span> (or
    <span class="Li">&quot;bootstrap()&quot;</span>).</p>
<p class="Pp">The first situation being much more frequent, it makes sense to
    rewrite the boilerplate as</p>
<p class="Pp"></p>
<pre>    package YourPackage;
    use XSLoader;
    our ($VERSION, @ISA);
    BEGIN {
       @ISA = qw( OnePackage OtherPackage );
       $VERSION = '0.01';
       # Put Perl code used in the BOOT: section here
       XSLoader::load(__PACKAGE__, $VERSION);
    }
    # Put Perl code making calls into XSUBs here
</pre>
<section class="Ss">
<h2 class="Ss" id="The_most_hairy_case"><a class="permalink" href="#The_most_hairy_case">The
  most hairy case</a></h2>
<p class="Pp">If the interdependence of your
    <span class="Li">&quot;BOOT:&quot;</span> section and Perl code is more
    complicated than this (e.g., the <span class="Li">&quot;BOOT:&quot;</span>
    section makes calls to Perl functions which make calls to XSUBs with
    prototypes), get rid of the <span class="Li">&quot;BOOT:&quot;</span>
    section altogether. Replace it with a function
    <span class="Li">&quot;onBOOT()&quot;</span>, and call it like this:</p>
<p class="Pp"></p>
<pre>    package YourPackage;
    use XSLoader;
    our ($VERSION, @ISA);
    BEGIN {
       @ISA = qw( OnePackage OtherPackage );
       $VERSION = '0.01';
       XSLoader::load(__PACKAGE__, $VERSION);
    }
    # Put Perl code used in onBOOT() function here; calls to XSUBs are
    # prototype-checked.
    onBOOT;
    # Put Perl initialization code assuming that XS is initialized here
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<dl class="Bl-tag">
  <dt>&quot;Can't find '%s' symbol in %s&quot;</dt>
  <dd><b>(F)</b> The bootstrap symbol could not be found in the extension
      module.</dd>
  <dt>&quot;Can't load '%s' for module %s: %s&quot;</dt>
  <dd><b>(F)</b> The loading or initialisation of the extension module failed.
      The detailed error follows.</dd>
  <dt>&quot;Undefined symbols present after loading %s: %s&quot;</dt>
  <dd><b>(W)</b> As the message says, some symbols stay undefined although the
      extension module was correctly loaded and initialised. The list of
      undefined symbols follows.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="LIMITATIONS"><a class="permalink" href="#LIMITATIONS">LIMITATIONS</a></h1>
<p class="Pp">To reduce the overhead as much as possible, only one possible
    location is checked to find the extension DLL (this location is where
    <span class="Li">&quot;make install&quot;</span> would put the DLL). If not
    found, the search for the DLL is transparently delegated to
    <span class="Li">&quot;DynaLoader&quot;</span>, which looks for the DLL
    along the <span class="Li">@INC</span> list.</p>
<p class="Pp">In particular, this is applicable to the structure of
    <span class="Li">@INC</span> used for testing not-yet-installed extensions.
    This means that running uninstalled extensions may have much more overhead
    than running the same extensions after <span class="Li">&quot;make
    install&quot;</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="KNOWN_BUGS"><a class="permalink" href="#KNOWN_BUGS">KNOWN
  BUGS</a></h1>
<p class="Pp">The new simpler way to call
    <span class="Li">&quot;XSLoader::load()&quot;</span> with no arguments at
    all does not work on Perl 5.8.4 and 5.8.5.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">Please report any bugs or feature requests via the
    <b>perlbug</b>(1) utility.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp">DynaLoader</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Ilya Zakharevich originally extracted
    <span class="Li">&quot;XSLoader&quot;</span> from
    <span class="Li">&quot;DynaLoader&quot;</span>.</p>
<p class="Pp">CPAN version is currently maintained by Sebastien Aperghis-Tramoni
    &lt;sebastien@aperghis.net&gt;.</p>
<p class="Pp">Previous maintainer was Michael G Schwern
    &lt;schwern@pobox.com&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_&amp;_LICENSE"><a class="permalink" href="#COPYRIGHT_&amp;_LICENSE">COPYRIGHT
  &amp; LICENSE</a></h1>
<p class="Pp">Copyright (C) 1990-2011 by Larry Wall and others.</p>
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2024-08-03</td>
    <td class="foot-os">perl v5.34.1</td>
  </tr>
</table>
</body>
</html>
