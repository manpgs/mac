<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Test2::Workflow(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Test2::Workflow(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Test2::Workflow(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Test2::Workflow - A test workflow is a way of structuring tests
    using composable units.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">A test workflow is a way of structuring tests using composable
    units. A well known example of a test workflow is RSPEC
    &lt;http://rspec.info/&gt;. RSPEC is implemented using Test2::Workflow in
    Test2::Tools::Spec along with several extensions.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="IMPORTANT_CONCEPTS"><a class="permalink" href="#IMPORTANT_CONCEPTS">IMPORTANT
  CONCEPTS</a></h1>
<section class="Ss">
<h2 class="Ss">BUILD</h2>
<p class="Pp">Test2::Workflow::Build</p>
<p class="Pp">A Build is used to compose tasks. Usually a build object is pushed
    to the stack before running code that adds tasks to the build. Once the
    build sub is complete the build is popped and returned. Usually a build is
    converted into a root task or task group.</p>
</section>
<section class="Ss">
<h2 class="Ss">RUNNER</h2>
<p class="Pp">Test2::Workflow::Runner</p>
<p class="Pp">A runner takes the composed tasks and executes them in the proper
    order.</p>
</section>
<section class="Ss">
<h2 class="Ss">TASK</h2>
<p class="Pp">Test2::Workflow::Task</p>
<p class="Pp">A task is a unit of work to accomplish. There are 2 main types of
    task.</p>
<p class="Pp"><i>ACTION</i></p>
<p class="Pp">An action is the most simple unit used in composition. An action
    is essentially a name and a codeblock to run.</p>
<p class="Pp"><i>GROUP</i></p>
<p class="Pp">A group is a task that is composed of other tasks.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXPORTS"><a class="permalink" href="#EXPORTS">EXPORTS</a></h1>
<p class="Pp">All exports are optional, you must request the ones you want.</p>
<dl class="Bl-tag">
  <dt>$parsed = parse_args(args =&gt; \@args)</dt>
  <dd></dd>
  <dt>$parsed = parse_args(args =&gt; \@args, level =&gt; $L)</dt>
  <dd></dd>
  <dt>$parsed = parse_args(args =&gt; \@args, caller =&gt; [caller($L)])</dt>
  <dd>This will parse a &quot;typical&quot; task builders arguments. The
      <span class="Li">@args</span> array MUST contain a name (plain scalar
      containing text) and also a single CODE reference. The
      <span class="Li">@args</span> array MAY also contain any quantity of line
      numbers or hashrefs. The resulting data structure will be a single hashref
      with all the provided hashrefs squashed together, and the 'name', 'code',
      'lines' and 'frame' keys set from other arguments.
    <p class="Pp"></p>
    <pre>    {
        # All hashrefs from @args get squashed together:
        %squashed_input_hashref_data,
        # @args must have exactly 1 plaintext scalar that is not a number, it
        # is considered the name:
        name =&gt; 'name from input args'
        # Integer values are treated as line numbers
        lines =&gt; [ 35, 44 ],
        # Exactly 1 coderef must be provided in @args:
        code =&gt; \&amp;some_code,
        # 'frame' contains the 'caller' data. This may be passed in directly,
        # obtained from the 'level' parameter, or automatically deduced.
        frame =&gt; ['A::Package', 'a_file.pm', 42, ...],
    }
    </pre>
  </dd>
  <dt>$build = init_root($pkg, %args)</dt>
  <dd>This will initialize (or return the existing) a build for the specified
      package. <span class="Li">%args</span> get passed into the
      Test2::Workflow::Build constructor. This uses the following defaults
      (which can be overridden using <span class="Li">%args</span>):
    <p class="Pp"></p>
    <pre>    name    =&gt; $pkg,
    flat    =&gt; 1,
    iso     =&gt; 0,
    async   =&gt; 0,
    is_root =&gt; 1,
    </pre>
    <p class="Pp">Note that <span class="Li">%args</span> is completely ignored
        if the package build has already been initialized.</p>
  </dd>
  <dt>$build = root_build($pkg)</dt>
  <dd>This will return the root build for the specified package.</dd>
  <dt>$build = <b>current_build()</b></dt>
  <dd>This will return the build currently at the top of the build stack (or
      undef).</dd>
  <dt>$build = build($name, \%params, sub { ... })</dt>
  <dd>This will push a new build object onto the build stash then run the
      provided codeblock. Once the codeblock has finished running the build will
      be popped off the stack and returned.
    <p class="Pp">See <span class="Li">&quot;parse_args()&quot;</span> for
        details about argument processing.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<dl class="Bl-tag">
  <dt id="Test2::Tools::Spec"><a class="permalink" href="#Test2::Tools::Spec">Test2::Tools::Spec</a></dt>
  <dd>Test2::Tools::Spec is an implementation of RSPEC using this library.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SOURCE"><a class="permalink" href="#SOURCE">SOURCE</a></h1>
<p class="Pp">The source code repository for Test2-Workflow can be found at
    <i>https://github.com/Test-More/Test2-Suite/</i>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="MAINTAINERS"><a class="permalink" href="#MAINTAINERS">MAINTAINERS</a></h1>
<dl class="Bl-tag">
  <dt id="Chad"><a class="permalink" href="#Chad">Chad Granum
    &lt;exodist@cpan.org&gt;</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<dl class="Bl-tag">
  <dt id="Chad~2"><a class="permalink" href="#Chad~2">Chad Granum
    &lt;exodist@cpan.org&gt;</a></dt>
  <dd></dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright 2018 Chad Granum &lt;exodist7@gmail.com&gt;.</p>
<p class="Pp">This program is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself.</p>
<p class="Pp">See <i>http://dev.perl.org/licenses/</i></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2020-10-22</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
