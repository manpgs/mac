<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Net::Cmd(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Net::Cmd(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">Net::Cmd(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Net::Cmd - Network Command class (as used by FTP, SMTP etc)</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>
    use Net::Cmd;

    @ISA = qw(Net::Cmd);
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><span class="Li">&quot;Net::Cmd&quot;</span> is a collection of
    methods that can be inherited by a sub-class of
    <span class="Li">&quot;IO::Socket::INET&quot;</span>. These methods
    implement the functionality required for a command based protocol, for
    example FTP and SMTP.</p>
<p class="Pp">If your sub-class does not also derive from
    <span class="Li">&quot;IO::Socket::INET&quot;</span> or similar (e.g.
    <span class="Li">&quot;IO::Socket::IP&quot;</span>,
    <span class="Li">&quot;IO::Socket::INET6&quot;</span> or
    <span class="Li">&quot;IO::Socket::SSL&quot;</span>) then you must provide
    the following methods by other means yourself:
    <span class="Li">&quot;close()&quot;</span> and
    <span class="Li">&quot;timeout()&quot;</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="USER_METHODS"><a class="permalink" href="#USER_METHODS">USER
  METHODS</a></h1>
<p class="Pp">These methods provide a user interface to the
    <span class="Li">&quot;Net::Cmd&quot;</span> object.</p>
<dl class="Bl-tag">
  <dt id="debug"><a class="permalink" href="#debug">debug ( VALUE )</a></dt>
  <dd>Set the level of debug information for this object. If
      <span class="Li">&quot;VALUE&quot;</span> is not given then the current
      state is returned. Otherwise the state is changed to
      <span class="Li">&quot;VALUE&quot;</span> and the previous state returned.
    <p class="Pp">Different packages may implement different levels of debug but
        a non-zero value results in copies of all commands and responses also
        being sent to STDERR.</p>
    <p class="Pp">If <span class="Li">&quot;VALUE&quot;</span> is
        <span class="Li">&quot;undef&quot;</span> then the debug level will be
        set to the default debug level for the class.</p>
    <p class="Pp">This method can also be called as a <i>static</i> method to
        set/get the default debug level for a given class.</p>
  </dd>
  <dt id="message"><a class="permalink" href="#message">message ()</a></dt>
  <dd>Returns the text message returned from the last command. In a scalar
      context it returns a single string, in a list context it will return each
      line as a separate element. (See &quot;PSEUDO RESPONSES&quot; below.)</dd>
  <dt id="code"><a class="permalink" href="#code">code ()</a></dt>
  <dd>Returns the 3-digit code from the last command. If a command is pending
      then the value 0 is returned. (See &quot;PSEUDO RESPONSES&quot;
    below.)</dd>
  <dt id="ok"><a class="permalink" href="#ok">ok ()</a></dt>
  <dd>Returns non-zero if the last code value was greater than zero and less
      than 400. This holds true for most command servers. Servers where this
      does not hold may override this method.</dd>
  <dt id="status"><a class="permalink" href="#status">status ()</a></dt>
  <dd>Returns the most significant digit of the current status code. If a
      command is pending then <span class="Li">&quot;CMD_PENDING&quot;</span> is
      returned.</dd>
  <dt id="datasend"><a class="permalink" href="#datasend">datasend ( DATA
    )</a></dt>
  <dd>Send data to the remote server, converting LF to CRLF. Any line starting
      with a '.' will be prefixed with another '.'.
      <span class="Li">&quot;DATA&quot;</span> may be an array or a reference to
      an array. The <span class="Li">&quot;DATA&quot;</span> passed in must be
      encoded by the caller to octets of whatever encoding is required, e.g. by
      using the Encode module's <span class="Li">&quot;encode()&quot;</span>
      function.</dd>
  <dt id="dataend"><a class="permalink" href="#dataend">dataend ()</a></dt>
  <dd>End the sending of data to the remote server. This is done by ensuring
      that the data already sent ends with CRLF then sending '.CRLF' to end the
      transmission. Once this data has been sent
      <span class="Li">&quot;dataend&quot;</span> calls
      <span class="Li">&quot;response&quot;</span> and returns true if
      <span class="Li">&quot;response&quot;</span> returns CMD_OK.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="CLASS_METHODS"><a class="permalink" href="#CLASS_METHODS">CLASS
  METHODS</a></h1>
<p class="Pp">These methods are not intended to be called by the user, but used
    or over-ridden by a sub-class of
    <span class="Li">&quot;Net::Cmd&quot;</span></p>
<dl class="Bl-tag">
  <dt id="debug_print"><a class="permalink" href="#debug_print">debug_print (
    DIR, TEXT )</a></dt>
  <dd>Print debugging information. <span class="Li">&quot;DIR&quot;</span>
      denotes the direction <i>true</i> being data being sent to the server.
      Calls <span class="Li">&quot;debug_text&quot;</span> before printing to
      STDERR.</dd>
  <dt id="debug_text"><a class="permalink" href="#debug_text">debug_text ( DIR,
    TEXT )</a></dt>
  <dd>This method is called to print debugging information. TEXT is the text
      being sent. The method should return the text to be printed.
    <p class="Pp">This is primarily meant for the use of modules such as FTP
        where passwords are sent, but we do not want to display them in the
        debugging information.</p>
  </dd>
  <dt id="command"><a class="permalink" href="#command">command ( CMD [, ARGS,
    ... ])</a></dt>
  <dd>Send a command to the command server. All arguments are first joined with
      a space character and CRLF is appended, this string is then sent to the
      command server.
    <p class="Pp">Returns undef upon failure.</p>
  </dd>
  <dt id="unsupported"><a class="permalink" href="#unsupported">unsupported
    ()</a></dt>
  <dd>Sets the status code to 580 and the response text to 'Unsupported
      command'. Returns zero.</dd>
  <dt id="response"><a class="permalink" href="#response">response ()</a></dt>
  <dd>Obtain a response from the server. Upon success the most significant digit
      of the status code is returned. Upon failure, timeout etc.,
      <i>CMD_ERROR</i> is returned.</dd>
  <dt id="parse_response"><a class="permalink" href="#parse_response">parse_response
    ( TEXT )</a></dt>
  <dd>This method is called by <span class="Li">&quot;response&quot;</span> as a
      method with one argument. It should return an array of 2 values, the
      3-digit status code and a flag which is true when this is part of a
      multi-line response and this line is not the last.</dd>
  <dt id="getline"><a class="permalink" href="#getline">getline ()</a></dt>
  <dd>Retrieve one line, delimited by CRLF, from the remote server. Returns
      <i>undef</i> upon failure.
    <p class="Pp"><b>NOTE</b>: If you do use this method for any reason, please
        remember to add some <span class="Li">&quot;debug_print&quot;</span>
        calls into your method.</p>
  </dd>
  <dt id="ungetline"><a class="permalink" href="#ungetline">ungetline ( TEXT
    )</a></dt>
  <dd>Unget a line of text from the server.</dd>
  <dt id="rawdatasend"><a class="permalink" href="#rawdatasend">rawdatasend (
    DATA )</a></dt>
  <dd>Send data to the remote server without performing any conversions.
      <span class="Li">&quot;DATA&quot;</span> is a scalar. As with
      <span class="Li">&quot;datasend()&quot;</span>, the
      <span class="Li">&quot;DATA&quot;</span> passed in must be encoded by the
      caller to octets of whatever encoding is required, e.g. by using the
      Encode module's <span class="Li">&quot;encode()&quot;</span>
    function.</dd>
  <dt id="read_until_dot"><a class="permalink" href="#read_until_dot">read_until_dot
    ()</a></dt>
  <dd>Read data from the remote server until a line consisting of a single '.'.
      Any lines starting with '..' will have one of the '.'s removed.
    <p class="Pp">Returns a reference to a list containing the lines, or
        <i>undef</i> upon failure.</p>
  </dd>
  <dt id="tied_fh"><a class="permalink" href="#tied_fh">tied_fh ()</a></dt>
  <dd>Returns a filehandle tied to the Net::Cmd object. After issuing a command,
      you may read from this filehandle using <b>read()</b> or &lt;&gt;. The
      filehandle will return EOF when the final dot is encountered. Similarly,
      you may write to the filehandle in order to send data to the server after
      issuing a command that expects data to be written.
    <p class="Pp">See the Net::POP3 and Net::SMTP modules for examples of
      this.</p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="PSEUDO_RESPONSES"><a class="permalink" href="#PSEUDO_RESPONSES">PSEUDO
  RESPONSES</a></h1>
<p class="Pp">Normally the values returned by
    <span class="Li">&quot;message()&quot;</span> and
    <span class="Li">&quot;code()&quot;</span> are obtained from the remote
    server, but in a few circumstances, as detailed below,
    <span class="Li">&quot;Net::Cmd&quot;</span> will return values that it
    sets. You can alter this behavior by overriding <b>DEF_REPLY_CODE()</b> to
    specify a different default reply code, or overriding one of the specific
    error handling methods below.</p>
<dl class="Bl-tag">
  <dt id="Initial"><a class="permalink" href="#Initial">Initial value</a></dt>
  <dd>Before any command has executed or if an unexpected error occurs
      <span class="Li">&quot;code()&quot;</span> will return &quot;421&quot;
      (temporary connection failure) and
      <span class="Li">&quot;message()&quot;</span> will return undef.</dd>
  <dt id="Connection"><a class="permalink" href="#Connection">Connection
    closed</a></dt>
  <dd>If the underlying <span class="Li">&quot;IO::Handle&quot;</span> is
      closed, or if there are any read or write failures, the file handle will
      be forced closed, and <span class="Li">&quot;code()&quot;</span> will
      return &quot;421&quot; (temporary connection failure) and
      <span class="Li">&quot;message()&quot;</span> will return &quot;[$pkg]
      Connection closed&quot; (where <span class="Li">$pkg</span> is the name of
      the class that subclassed <span class="Li">&quot;Net::Cmd&quot;</span>).
      The <b>_set_status_closed()</b> method can be overridden to set a
      different message (by calling <b>set_status()</b>) or otherwise trap this
      error.</dd>
  <dt id="Timeout"><a class="permalink" href="#Timeout">Timeout</a></dt>
  <dd>If there is a read or write timeout
      <span class="Li">&quot;code()&quot;</span> will return &quot;421&quot;
      (temporary connection failure) and
      <span class="Li">&quot;message()&quot;</span> will return &quot;[$pkg]
      Timeout&quot; (where <span class="Li">$pkg</span> is the name of the class
      that subclassed <span class="Li">&quot;Net::Cmd&quot;</span>). The
      <b>_set_status_timeout()</b> method can be overridden to set a different
      message (by calling <b>set_status()</b>) or otherwise trap this
    error.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXPORTS"><a class="permalink" href="#EXPORTS">EXPORTS</a></h1>
<p class="Pp"><span class="Li">&quot;Net::Cmd&quot;</span> exports six
    subroutines, five of these, <span class="Li">&quot;CMD_INFO&quot;</span>,
    <span class="Li">&quot;CMD_OK&quot;</span>,
    <span class="Li">&quot;CMD_MORE&quot;</span>,
    <span class="Li">&quot;CMD_REJECT&quot;</span> and
    <span class="Li">&quot;CMD_ERROR&quot;</span>, correspond to possible
    results of <span class="Li">&quot;response&quot;</span> and
    <span class="Li">&quot;status&quot;</span>. The sixth is
    <span class="Li">&quot;CMD_PENDING&quot;</span>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Graham Barr &lt;<i>gbarr@pobox.com</i>&gt;.</p>
<p class="Pp">Steve Hay &lt;<i>shay@cpan.org</i>&gt; is now maintaining libnet
    as of version 1.22_02.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">COPYRIGHT</a></h1>
<p class="Pp">Copyright (C) 1995-2006 Graham Barr. All rights reserved.</p>
<p class="Pp">Copyright (C) 2013-2016 Steve Hay. All rights reserved.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LICENCE"><a class="permalink" href="#LICENCE">LICENCE</a></h1>
<p class="Pp">This module is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself, i.e. under the terms of
    either the GNU General Public License or the Artistic License, as specified
    in the <i>LICENCE</i> file.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-10-21</td>
    <td class="foot-os">perl v5.30.3</td>
  </tr>
</table>
</body>
</html>
