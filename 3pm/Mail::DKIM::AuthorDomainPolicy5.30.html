<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.11 (Pod::Simple 3.35)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>Mail::DKIM::AuthorDomainPolicy(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">Mail::DKIM::AuthorDomainPolicy(3)</td>
    <td class="head-vol">User Contributed Perl Documentation</td>
    <td class="head-rtitle">Mail::DKIM::AuthorDomainPolicy(3)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">Mail::DKIM::AuthorDomainPolicy - represents an Author Domain
    Signing Practices (ADSP) record</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The Author Domain Signing Policies (ADSP) record can be published
    by any domain to help a receiver know what to do when it encounters an
    unsigned message claiming to originate from that domain.</p>
<p class="Pp">The record is published as a DNS TXT record at
    _adsp._domainkey.DOMAIN where DOMAIN is the domain of the message's
    &quot;From&quot; address.</p>
<p class="Pp">More details about this record can be found by reading the
    specification itself at &lt;http://tools.ietf.org/html/rfc5617&gt;.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CONSTRUCTORS"><a class="permalink" href="#CONSTRUCTORS">CONSTRUCTORS</a></h1>
<section class="Ss">
<h2 class="Ss"><b>fetch()</b></h2>
<p class="Pp">Lookup an ADSP record in DNS.</p>
<p class="Pp"></p>
<pre>
  my $policy = Mail::DKIM::AuthorDomainPolicy-&gt;fetch(
            Protocol =&gt; 'dns',
            Author =&gt; 'jsmith@example.org',
          );
</pre>
<p class="Pp">If the ADSP record is found and appears to be valid, an object
    containing that record's information will be constructed and returned. If
    the ADSP record is blank or simply does not exist, an object representing
    the default policy will be returned instead. (See also
    &quot;<b>is_implied_default_policy()</b>&quot;.) If a DNS error occurs (e.g.
    SERVFAIL or time-out), this method will &quot;die&quot;.</p>
</section>
<section class="Ss">
<h2 class="Ss"><b>new()</b></h2>
<p class="Pp">Construct a default policy object.</p>
<p class="Pp"></p>
<pre>
  my $policy = Mail::DKIM::AuthorDomainPolicy-&gt;new;
</pre>
</section>
<section class="Ss">
<h2 class="Ss"><b>parse()</b></h2>
<p class="Pp">Construct an ADSP record from a string.</p>
<p class="Pp"></p>
<pre>
  my $policy = Mail::DKIM::AuthorDomainPolicy-&gt;parse(
          String =&gt; 'dkim=all',
          Domain =&gt; 'aaa.example',
      );
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="METHODS"><a class="permalink" href="#METHODS">METHODS</a></h1>
<section class="Ss">
<h2 class="Ss"><b>apply()</b></h2>
<p class="Pp">Apply the policy to the results of a DKIM verifier.</p>
<p class="Pp"></p>
<pre>
  my $result = $policy-&gt;apply($dkim_verifier);
</pre>
<p class="Pp">The caller must provide an instance of Mail::DKIM::Verifier, one
    which has already been fed the message being verified.</p>
<p class="Pp">Possible results are:</p>
<dl class="Bl-tag">
  <dt id="accept"><a class="permalink" href="#accept">accept</a></dt>
  <dd>The message is approved by the sender signing policy.</dd>
  <dt id="reject"><a class="permalink" href="#reject">reject</a></dt>
  <dd>The message is rejected by the sender signing policy. It can be considered
      very suspicious.</dd>
  <dt id="neutral"><a class="permalink" href="#neutral">neutral</a></dt>
  <dd>The message is neither approved nor rejected by the sender signing policy.
      It can be considered somewhat suspicious.</dd>
</dl>
<p class="Pp">Note: in the future, these values may become:
  <br/>
   none - no ADSP record is published
  <br/>
   pass - a passing signature is present
  <br/>
   fail - ADSP record is &quot;all&quot; and no passing signature is found
  <br/>
   discard - ADSP record is &quot;discardable&quot; and no passing signature is
    found
  <br/>
   nxdomain - the DNS domain does not exist
  <br/>
   temperror - transient error occurred
  <br/>
   permerror - non-transient error occurred</p>
</section>
<section class="Ss">
<h2 class="Ss"><b>is_implied_default_policy()</b></h2>
<p class="Pp">Tells whether this policy implied.</p>
<p class="Pp"></p>
<pre>
  my $is_implied = $policy-&gt;is_implied_default_policy;
</pre>
<p class="Pp">If you fetch the policy for a particular domain, but that domain
    does not have a policy published, then the &quot;default policy&quot; is in
    effect. Use this method to detect when that happens.</p>
</section>
<section class="Ss">
<h2 class="Ss"><b>location()</b></h2>
<p class="Pp">Tells where the policy was fetched from.</p>
<p class="Pp">If the policy is domain-wide, this will be domain where the policy
    was published.</p>
<p class="Pp">If the policy is user-specific, TBD.</p>
<p class="Pp">If nothing is published for the domain, and the default policy was
    returned instead, the location will be
    <span class="Li">&quot;undef&quot;</span>.</p>
</section>
<section class="Ss">
<h2 class="Ss"><b>policy()</b></h2>
<p class="Pp">Get or set the outbound signing policy (dkim=) tag.</p>
<p class="Pp"></p>
<pre>
  my $sp = $policy-&gt;policy;
</pre>
<p class="Pp">Outbound signing policy for the entity. Possible values are:</p>
<dl class="Bl-tag">
  <dt>&quot;unknown&quot;</dt>
  <dd>The default. The entity may sign some or all email.</dd>
  <dt>&quot;all&quot;</dt>
  <dd>All mail from the domain is expected to be signed, using a valid Author
      signature, but the author does not suggest discarding mail without a valid
      signature.</dd>
  <dt>&quot;discardable&quot;</dt>
  <dd>All mail from the domain is expected to be signed, using a valid Author
      signature, and the author is so confident that non-signed mail claiming to
      be from this domain can be automatically discarded by the recipient's mail
      server.</dd>
  <dt>&quot;NXDOMAIN&quot;</dt>
  <dd>The domain is out of scope, i.e., the domain does not exist in the
    DNS.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss"><b>signall()</b></h2>
<p class="Pp">True if policy is &quot;all&quot;.</p>
</section>
<section class="Ss">
<h2 class="Ss"><b>signall_discardable()</b></h2>
<p class="Pp">True if policy is &quot;strict&quot;.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<dl class="Bl-tag">
  <dt>&#x2022;</dt>
  <dd>Section 4.3 of the specification says to perform a query on the domain
      itself just to see if it exists. This class is not currently doing that,
      i.e. it might report NXDOMAIN because _adsp._domainkey.example.org is
      nonexistent, but it should not be treated the same as example.org being
      nonexistent.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Jason Long, &lt;jlong@messiah.edu&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COPYRIGHT_AND_LICENSE"><a class="permalink" href="#COPYRIGHT_AND_LICENSE">COPYRIGHT
  AND LICENSE</a></h1>
<p class="Pp">Copyright (C) 2006-2009 by Messiah College</p>
<p class="Pp">This library is free software; you can redistribute it and/or
    modify it under the same terms as Perl itself, either Perl version 5.8.6 or,
    at your option, any later version of Perl 5 you may have available.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2019-11-13</td>
    <td class="foot-os">perl v5.30.2</td>
  </tr>
</table>
</body>
</html>
