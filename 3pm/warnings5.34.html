<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated by Pod::Man 4.14 (Pod::Simple 3.42)
  
   Standard preamble:
   ========================================================================
   Vertical space (when we can't use .PP)
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>warnings(3pm)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">warnings(3pm)</td>
    <td class="head-vol">Perl Programmers Reference Guide</td>
    <td class="head-rtitle">warnings(3pm)</td>
  </tr>
</table>
<div class="manual-text">
<br/>
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">warnings - Perl pragma to control optional warnings</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<pre>    use warnings;
    no warnings;
    use warnings &quot;all&quot;;
    no warnings &quot;uninitialized&quot;;
    # or equivalent to those last two ...
    use warnings qw(all -uninitialized);
    use warnings::register;
    if (warnings::enabled()) {
        warnings::warn(&quot;some warning&quot;);
    }
    if (warnings::enabled(&quot;void&quot;)) {
        warnings::warn(&quot;void&quot;, &quot;some warning&quot;);
    }
    if (warnings::enabled($object)) {
        warnings::warn($object, &quot;some warning&quot;);
    }
    warnings::warnif(&quot;some warning&quot;);
    warnings::warnif(&quot;void&quot;, &quot;some warning&quot;);
    warnings::warnif($object, &quot;some warning&quot;);
</pre>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <span class="Li">&quot;warnings&quot;</span> pragma gives
    control over which warnings are enabled in which parts of a Perl program.
    It's a more flexible alternative for both the command line flag <b>-w</b>
    and the equivalent Perl variable, <span class="Li">$^W</span>.</p>
<p class="Pp">This pragma works just like the
    <span class="Li">&quot;strict&quot;</span> pragma. This means that the scope
    of the warning pragma is limited to the enclosing block. It also means that
    the pragma setting will not leak across files (via
    <span class="Li">&quot;use&quot;</span>,
    <span class="Li">&quot;require&quot;</span> or
    <span class="Li">&quot;do&quot;</span>). This allows authors to
    independently define the degree of warning checks that will be applied to
    their module.</p>
<p class="Pp">By default, optional warnings are disabled, so any legacy code
    that doesn't attempt to control the warnings will work unchanged.</p>
<p class="Pp">All warnings are enabled in a block by either of these:</p>
<p class="Pp"></p>
<pre>    use warnings;
    use warnings 'all';
</pre>
<p class="Pp">Similarly all warnings are disabled in a block by either of
  these:</p>
<p class="Pp"></p>
<pre>    no warnings;
    no warnings 'all';
</pre>
<p class="Pp">For example, consider the code below:</p>
<p class="Pp"></p>
<pre>    use warnings;
    my @x;
    {
        no warnings;
        my $y = @x[0];
    }
    my $z = @x[0];
</pre>
<p class="Pp">The code in the enclosing block has warnings enabled, but the
    inner block has them disabled. In this case that means the assignment to the
    scalar <span class="Li">$z</span> will trip the
    <span class="Li">&quot;Scalar value @x[0] better written as
    $x[0]&quot;</span> warning, but the assignment to the scalar
    <span class="Li">$y</span> will not.</p>
<section class="Ss">
<h2 class="Ss" id="Default_Warnings_and_Optional_Warnings"><a class="permalink" href="#Default_Warnings_and_Optional_Warnings">Default
  Warnings and Optional Warnings</a></h2>
<p class="Pp">Before the introduction of lexical warnings, Perl had two classes
    of warnings: mandatory and optional.</p>
<p class="Pp">As its name suggests, if your code tripped a mandatory warning,
    you would get a warning whether you wanted it or not. For example, the code
    below would always produce an <span class="Li">&quot;isn't
    numeric&quot;</span> warning about the &quot;2:&quot;.</p>
<p class="Pp"></p>
<pre>    my $x = &quot;2:&quot; + 3;
</pre>
<p class="Pp">With the introduction of lexical warnings, mandatory warnings now
    become <i>default</i> warnings. The difference is that although the
    previously mandatory warnings are still enabled by default, they can then be
    subsequently enabled or disabled with the lexical warning pragma. For
    example, in the code below, an <span class="Li">&quot;isn't
    numeric&quot;</span> warning will only be reported for the
    <span class="Li">$x</span> variable.</p>
<p class="Pp"></p>
<pre>    my $x = &quot;2:&quot; + 3;
    no warnings;
    my $y = &quot;2:&quot; + 3;
</pre>
<p class="Pp">Note that neither the <b>-w</b> flag or the
    <span class="Li">$^W</span> can be used to disable/enable default warnings.
    They are still mandatory in this case.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="_Negative_warnings_"><a class="permalink" href="#_Negative_warnings_">&quot;Negative
  warnings&quot;</a></h2>
<p class="Pp">As a convenience, you can (as of Perl 5.34) pass arguments to the
    <span class="Li">&quot;import()&quot;</span> method both positively and
    negatively. Negative warnings are those with a
    <span class="Li">&quot;-&quot;</span> sign prepended to their names;
    positive warnings are anything else. This lets you turn on some warnings and
    turn off others in one command. So, assuming that you've already turned on a
    bunch of warnings but want to tweak them a bit in some block, you can do
    this:</p>
<p class="Pp"></p>
<pre>    {
        use warnings qw(uninitialized -redefine);
        ...
    }
</pre>
<p class="Pp">which is equivalent to:</p>
<p class="Pp"></p>
<pre>    {
        use warnings qw(uninitialized);
        no warnings qw(redefine);
        ...
    }
</pre>
<p class="Pp">The argument list is processed in the order you specify. So, for
    example, if you don't want to be warned about use of experimental features,
    except for <span class="Li">&quot;somefeature&quot;</span> that you really
    dislike, you can say this:</p>
<p class="Pp"></p>
<pre>    use warnings qw(all -experimental experimental::somefeature);
</pre>
<p class="Pp">which is equivalent to:</p>
<p class="Pp"></p>
<pre>    use warnings 'all';
    no warnings  'experimental';
    use warnings 'experimental::somefeature';
</pre>
</section>
<section class="Ss">
<h2 class="Ss" id="What's_wrong_with_"><a class="permalink" href="#What's_wrong_with_">What's
  wrong with <b>-w</b> and $^W</a></h2>
<p class="Pp">Although very useful, the big problem with using <b>-w</b> on the
    command line to enable warnings is that it is all or nothing. Take the
    typical scenario when you are writing a Perl program. Parts of the code you
    will write yourself, but it's very likely that you will make use of
    pre-written Perl modules. If you use the <b>-w</b> flag in this case, you
    end up enabling warnings in pieces of code that you haven't written.</p>
<p class="Pp">Similarly, using <span class="Li">$^W</span> to either disable or
    enable blocks of code is fundamentally flawed. For a start, say you want to
    disable warnings in a block of code. You might expect this to be enough to
    do the trick:</p>
<p class="Pp"></p>
<pre>     {
         local ($^W) = 0;
         my $x =+ 2;
         my $y; chop $y;
     }
</pre>
<p class="Pp">When this code is run with the <b>-w</b> flag, a warning will be
    produced for the <span class="Li">$x</span> line:
    <span class="Li">&quot;Reversed += operator&quot;</span>.</p>
<p class="Pp">The problem is that Perl has both compile-time and run-time
    warnings. To disable compile-time warnings you need to rewrite the code like
    this:</p>
<p class="Pp"></p>
<pre>     {
         BEGIN { $^W = 0 }
         my $x =+ 2;
         my $y; chop $y;
     }
</pre>
<p class="Pp">And note that unlike the first example, this will permanently set
    <span class="Li">$^W</span> since it cannot both run during compile-time and
    be localized to a run-time block.</p>
<p class="Pp">The other big problem with <span class="Li">$^W</span> is the way
    you can inadvertently change the warning setting in unexpected places in
    your code. For example, when the code below is run (without the <b>-w</b>
    flag), the second call to <span class="Li">&quot;doit&quot;</span> will trip
    a <span class="Li">&quot;Use of uninitialized value&quot;</span> warning,
    whereas the first will not.</p>
<p class="Pp"></p>
<pre>    sub doit
    {
        my $y; chop $y;
    }
    doit();
    {
        local ($^W) = 1;
        doit()
    }
</pre>
<p class="Pp">This is a side-effect of <span class="Li">$^W</span> being
    dynamically scoped.</p>
<p class="Pp">Lexical warnings get around these limitations by allowing finer
    control over where warnings can or can't be tripped.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Controlling_Warnings_from_the_Command_Line"><a class="permalink" href="#Controlling_Warnings_from_the_Command_Line">Controlling
  Warnings from the Command Line</a></h2>
<p class="Pp">There are three Command Line flags that can be used to control
    when warnings are (or aren't) produced:</p>
<dl class="Bl-tag">
  <dt id="w"><a class="permalink" href="#w"><b>-w</b></a></dt>
  <dd>This is the existing flag. If the lexical warnings pragma is <b>not</b>
      used in any of your code, or any of the modules that you use, this flag
      will enable warnings everywhere. See &quot;Backward Compatibility&quot;
      for details of how this flag interacts with lexical warnings.</dd>
  <dt id="W"><a class="permalink" href="#W"><b>-W</b></a></dt>
  <dd>If the <b>-W</b> flag is used on the command line, it will enable all
      warnings throughout the program regardless of whether warnings were
      disabled locally using <span class="Li">&quot;no warnings&quot;</span> or
      <span class="Li">&quot;$^W =0&quot;</span>. This includes all files that
      get included via <span class="Li">&quot;use&quot;</span>,
      <span class="Li">&quot;require&quot;</span> or
      <span class="Li">&quot;do&quot;</span>. Think of it as the Perl equivalent
      of the &quot;lint&quot; command.</dd>
  <dt id="X"><a class="permalink" href="#X"><b>-X</b></a></dt>
  <dd>Does the exact opposite to the <b>-W</b> flag, i.e. it disables all
      warnings.</dd>
</dl>
</section>
<section class="Ss">
<h2 class="Ss" id="Backward_Compatibility"><a class="permalink" href="#Backward_Compatibility">Backward
  Compatibility</a></h2>
<p class="Pp">If you are used to working with a version of Perl prior to the
    introduction of lexically scoped warnings, or have code that uses both
    lexical warnings and <span class="Li">$^W</span>, this section will describe
    how they interact.</p>
<p class="Pp">How Lexical Warnings interact with
    <b>-w</b>/<span class="Li">$^W</span>:</p>
<dl class="Bl-tag">
  <dt>1.</dt>
  <dd>If none of the three command line flags (<b>-w</b>, <b>-W</b> or
      <b>-X</b>) that control warnings is used and neither
      <span class="Li">$^W</span> nor the
      <span class="Li">&quot;warnings&quot;</span> pragma are used, then default
      warnings will be enabled and optional warnings disabled. This means that
      legacy code that doesn't attempt to control the warnings will work
      unchanged.</dd>
  <dt>2.</dt>
  <dd>The <b>-w</b> flag just sets the global <span class="Li">$^W</span>
      variable as in 5.005. This means that any legacy code that currently
      relies on manipulating <span class="Li">$^W</span> to control warning
      behavior will still work as is.</dd>
  <dt>3.</dt>
  <dd>Apart from now being a boolean, the <span class="Li">$^W</span> variable
      operates in exactly the same horrible uncontrolled global way, except that
      it cannot disable/enable default warnings.</dd>
  <dt>4.</dt>
  <dd>If a piece of code is under the control of the
      <span class="Li">&quot;warnings&quot;</span> pragma, both the
      <span class="Li">$^W</span> variable and the <b>-w</b> flag will be
      ignored for the scope of the lexical warning.</dd>
  <dt>5.</dt>
  <dd>The only way to override a lexical warnings setting is with the <b>-W</b>
      or <b>-X</b> command line flags.</dd>
</dl>
<p class="Pp">The combined effect of 3 &amp; 4 is that it will allow code which
    uses the <span class="Li">&quot;warnings&quot;</span> pragma to control the
    warning behavior of $^W-type code (using a <span class="Li">&quot;local
    $^W=0&quot;</span>) if it really wants to, but not vice-versa.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Category_Hierarchy"><a class="permalink" href="#Category_Hierarchy">Category
  Hierarchy</a></h2>
<p class="Pp">A hierarchy of &quot;categories&quot; have been defined to allow
    groups of warnings to be enabled/disabled in isolation.</p>
<p class="Pp">The current hierarchy is:</p>
<p class="Pp"></p>
<pre>    all -+
         |
         +- closure
         |
         +- deprecated
         |
         +- exiting
         |
         +- experimental --+
         |                 |
         |                 +- experimental::alpha_assertions
         |                 |
         |                 +- experimental::bitwise
         |                 |
         |                 +- experimental::const_attr
         |                 |
         |                 +- experimental::declared_refs
         |                 |
         |                 +- experimental::isa
         |                 |
         |                 +- experimental::lexical_subs
         |                 |
         |                 +- experimental::postderef
         |                 |
         |                 +- experimental::private_use
         |                 |
         |                 +- experimental::re_strict
         |                 |
         |                 +- experimental::refaliasing
         |                 |
         |                 +- experimental::regex_sets
         |                 |
         |                 +- experimental::script_run
         |                 |
         |                 +- experimental::signatures
         |                 |
         |                 +- experimental::smartmatch
         |                 |
         |                 +- experimental::try
         |                 |
         |                 +- experimental::uniprop_wildcards
         |                 |
         |                 +- experimental::vlb
         |                 |
         |                 +- experimental::win32_perlio
         |
         +- glob
         |
         +- imprecision
         |
         +- io ------------+
         |                 |
         |                 +- closed
         |                 |
         |                 +- exec
         |                 |
         |                 +- layer
         |                 |
         |                 +- newline
         |                 |
         |                 +- pipe
         |                 |
         |                 +- syscalls
         |                 |
         |                 +- unopened
         |
         +- locale
         |
         +- misc
         |
         +- missing
         |
         +- numeric
         |
         +- once
         |
         +- overflow
         |
         +- pack
         |
         +- portable
         |
         +- recursion
         |
         +- redefine
         |
         +- redundant
         |
         +- regexp
         |
         +- severe --------+
         |                 |
         |                 +- debugging
         |                 |
         |                 +- inplace
         |                 |
         |                 +- internal
         |                 |
         |                 +- malloc
         |
         +- shadow
         |
         +- signal
         |
         +- substr
         |
         +- syntax --------+
         |                 |
         |                 +- ambiguous
         |                 |
         |                 +- bareword
         |                 |
         |                 +- digit
         |                 |
         |                 +- illegalproto
         |                 |
         |                 +- parenthesis
         |                 |
         |                 +- precedence
         |                 |
         |                 +- printf
         |                 |
         |                 +- prototype
         |                 |
         |                 +- qw
         |                 |
         |                 +- reserved
         |                 |
         |                 +- semicolon
         |
         +- taint
         |
         +- threads
         |
         +- uninitialized
         |
         +- unpack
         |
         +- untie
         |
         +- utf8 ----------+
         |                 |
         |                 +- non_unicode
         |                 |
         |                 +- nonchar
         |                 |
         |                 +- surrogate
         |
         +- void
</pre>
<p class="Pp">Just like the &quot;strict&quot; pragma any of these categories
    can be combined</p>
<p class="Pp"></p>
<pre>    use warnings qw(void redefine);
    no warnings qw(io syntax untie);
</pre>
<p class="Pp">Also like the &quot;strict&quot; pragma, if there is more than one
    instance of the <span class="Li">&quot;warnings&quot;</span> pragma in a
    given scope the cumulative effect is additive.</p>
<p class="Pp"></p>
<pre>    use warnings qw(void); # only &quot;void&quot; warnings enabled
    ...
    use warnings qw(io);   # only &quot;void&quot; &amp; &quot;io&quot; warnings enabled
    ...
    no warnings qw(void);  # only &quot;io&quot; warnings enabled
</pre>
<p class="Pp">To determine which category a specific warning has been assigned
    to see perldiag.</p>
<p class="Pp">Note: Before Perl 5.8.0, the lexical warnings category
    &quot;deprecated&quot; was a sub-category of the &quot;syntax&quot;
    category. It is now a top-level category in its own right.</p>
<p class="Pp">Note: Before 5.21.0, the &quot;missing&quot; lexical warnings
    category was internally defined to be the same as the
    &quot;uninitialized&quot; category. It is now a top-level category in its
    own right.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Fatal_Warnings"><a class="permalink" href="#Fatal_Warnings">Fatal
  Warnings</a></h2>
<p class="Pp">The presence of the word &quot;FATAL&quot; in the category list
    will escalate warnings in those categories into fatal errors in that lexical
    scope.</p>
<p class="Pp"><b>NOTE:</b> FATAL warnings should be used with care, particularly
    <span class="Li">&quot;FATAL =&gt; 'all'&quot;</span>.</p>
<p class="Pp">Libraries using warnings::warn for custom warning categories
    generally don't expect warnings::warn to be fatal and can wind up in an
    unexpected state as a result. For XS modules issuing categorized warnings,
    such unanticipated exceptions could also expose memory leak bugs.</p>
<p class="Pp">Moreover, the Perl interpreter itself has had serious bugs
    involving fatalized warnings. For a summary of resolved and unresolved
    problems as of January 2015, please see this perl5-porters post
    &lt;http://www.nntp.perl.org/group/perl.perl5.porters/2015/01/msg225235.html&gt;.</p>
<p class="Pp">While some developers find fatalizing some warnings to be a useful
    defensive programming technique, using <span class="Li">&quot;FATAL =&gt;
    'all'&quot;</span> to fatalize all possible warning categories -- including
    custom ones -- is particularly risky. Therefore, the use of
    <span class="Li">&quot;FATAL =&gt; 'all'&quot;</span> is discouraged.</p>
<p class="Pp">The strictures module on CPAN offers one example of a warnings
    subset that the module's authors believe is relatively safe to fatalize.</p>
<p class="Pp"><b>NOTE:</b> Users of FATAL warnings, especially those using
    <span class="Li">&quot;FATAL =&gt; 'all'&quot;</span>, should be fully aware
    that they are risking future portability of their programs by doing so. Perl
    makes absolutely no commitments to not introduce new warnings or warnings
    categories in the future; indeed, we explicitly reserve the right to do so.
    Code that may not warn now may warn in a future release of Perl if the Perl5
    development team deems it in the best interests of the community to do so.
    Should code using FATAL warnings break due to the introduction of a new
    warning we will NOT consider it an incompatible change. Users of FATAL
    warnings should take special caution during upgrades to check to see if
    their code triggers any new warnings and should pay particular attention to
    the fine print of the documentation of the features they use to ensure they
    do not exploit features that are documented as risky, deprecated, or
    unspecified, or where the documentation says &quot;so don't do that&quot;,
    or anything with the same sense and spirit. Use of such features in
    combination with FATAL warnings is ENTIRELY AT THE USER'S RISK.</p>
<p class="Pp">The following documentation describes how to use FATAL warnings
    but the perl5 porters strongly recommend that you understand the risks
    before doing so, especially for library code intended for use by others, as
    there is no way for downstream users to change the choice of fatal
    categories.</p>
<p class="Pp">In the code below, the use of
    <span class="Li">&quot;time&quot;</span>,
    <span class="Li">&quot;length&quot;</span> and
    <span class="Li">&quot;join&quot;</span> can all produce a
    <span class="Li">&quot;Useless use of xxx in void context&quot;</span>
    warning.</p>
<p class="Pp"></p>
<pre>    use warnings;
    time;
    {
        use warnings FATAL =&gt; qw(void);
        length &quot;abc&quot;;
    }
    join &quot;&quot;, 1,2,3;
    print &quot;done\n&quot;;
</pre>
<p class="Pp">When run it produces this output</p>
<p class="Pp"></p>
<pre>    Useless use of time in void context at fatal line 3.
    Useless use of length in void context at fatal line 7.
</pre>
<p class="Pp">The scope where <span class="Li">&quot;length&quot;</span> is used
    has escalated the <span class="Li">&quot;void&quot;</span> warnings category
    into a fatal error, so the program terminates immediately when it encounters
    the warning.</p>
<p class="Pp">To explicitly turn off a &quot;FATAL&quot; warning you just
    disable the warning it is associated with. So, for example, to disable the
    &quot;void&quot; warning in the example above, either of these will do the
    trick:</p>
<p class="Pp"></p>
<pre>    no warnings qw(void);
    no warnings FATAL =&gt; qw(void);
</pre>
<p class="Pp">If you want to downgrade a warning that has been escalated into a
    fatal error back to a normal warning, you can use the &quot;NONFATAL&quot;
    keyword. For example, the code below will promote all warnings into fatal
    errors, except for those in the &quot;syntax&quot; category.</p>
<p class="Pp"></p>
<pre>    use warnings FATAL =&gt; 'all', NONFATAL =&gt; 'syntax';
</pre>
<p class="Pp">As of Perl 5.20, instead of <span class="Li">&quot;use warnings
    FATAL =&gt; 'all';&quot;</span> you can use:</p>
<p class="Pp"></p>
<pre>   use v5.20;       # Perl 5.20 or greater is required for the following
   use warnings 'FATAL';  # short form of &quot;use warnings FATAL =&gt; 'all';&quot;
</pre>
<p class="Pp">However, you should still heed the guidance earlier in this
    section against using <span class="Li">&quot;use warnings FATAL
    =&quot;</span> 'all';&gt;.</p>
<p class="Pp">If you want your program to be compatible with versions of Perl
    before 5.20, you must use <span class="Li">&quot;use warnings FATAL =&gt;
    'all';&quot;</span> instead. (In previous versions of Perl, the behavior of
    the statements <span class="Li">&quot;use warnings 'FATAL';&quot;</span>,
    <span class="Li">&quot;use warnings 'NONFATAL';&quot;</span> and
    <span class="Li">&quot;no warnings 'FATAL';&quot;</span> was unspecified;
    they did not behave as if they included the <span class="Li">&quot;=&gt;
    'all'&quot;</span> portion. As of 5.20, they do.)</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Reporting_Warnings_from_a_Module"><a class="permalink" href="#Reporting_Warnings_from_a_Module">Reporting
  Warnings from a Module</a></h2>
<p class="Pp">The <span class="Li">&quot;warnings&quot;</span> pragma provides a
    number of functions that are useful for module authors. These are used when
    you want to report a module-specific warning to a calling module has enabled
    warnings via the <span class="Li">&quot;warnings&quot;</span> pragma.</p>
<p class="Pp">Consider the module <span class="Li">&quot;MyMod::Abc&quot;</span>
    below.</p>
<p class="Pp"></p>
<pre>    package MyMod::Abc;
    use warnings::register;
    sub open {
        my $path = shift;
        if ($path !~ m#^/#) {
            warnings::warn(&quot;changing relative path to /var/abc&quot;)
                if warnings::enabled();
            $path = &quot;/var/abc/$path&quot;;
        }
    }
    1;
</pre>
<p class="Pp">The call to <span class="Li">&quot;warnings::register&quot;</span>
    will create a new warnings category called &quot;MyMod::Abc&quot;, i.e. the
    new category name matches the current package name. The
    <span class="Li">&quot;open&quot;</span> function in the module will display
    a warning message if it gets given a relative path as a parameter. This
    warnings will only be displayed if the code that uses
    <span class="Li">&quot;MyMod::Abc&quot;</span> has actually enabled them
    with the <span class="Li">&quot;warnings&quot;</span> pragma like below.</p>
<p class="Pp"></p>
<pre>    use MyMod::Abc;
    use warnings 'MyMod::Abc';
    ...
    abc::open(&quot;../fred.txt&quot;);
</pre>
<p class="Pp">It is also possible to test whether the pre-defined warnings
    categories are set in the calling module with the
    <span class="Li">&quot;warnings::enabled&quot;</span> function. Consider
    this snippet of code:</p>
<p class="Pp"></p>
<pre>    package MyMod::Abc;
    sub open {
        if (warnings::enabled(&quot;deprecated&quot;)) {
            warnings::warn(&quot;deprecated&quot;,
                           &quot;open is deprecated, use new instead&quot;);
        }
        new(@_);
    }
    sub new
    ...
    1;
</pre>
<p class="Pp">The function <span class="Li">&quot;open&quot;</span> has been
    deprecated, so code has been included to display a warning message whenever
    the calling module has (at least) the &quot;deprecated&quot; warnings
    category enabled. Something like this, say.</p>
<p class="Pp"></p>
<pre>    use warnings 'deprecated';
    use MyMod::Abc;
    ...
    MyMod::Abc::open($filename);
</pre>
<p class="Pp">Either the <span class="Li">&quot;warnings::warn&quot;</span> or
    <span class="Li">&quot;warnings::warnif&quot;</span> function should be used
    to actually display the warnings message. This is because they can make use
    of the feature that allows warnings to be escalated into fatal errors. So in
    this case</p>
<p class="Pp"></p>
<pre>    use MyMod::Abc;
    use warnings FATAL =&gt; 'MyMod::Abc';
    ...
    MyMod::Abc::open('../fred.txt');
</pre>
<p class="Pp">the <span class="Li">&quot;warnings::warnif&quot;</span> function
    will detect this and die after displaying the warning message.</p>
<p class="Pp">The three warnings functions,
    <span class="Li">&quot;warnings::warn&quot;</span>,
    <span class="Li">&quot;warnings::warnif&quot;</span> and
    <span class="Li">&quot;warnings::enabled&quot;</span> can optionally take an
    object reference in place of a category name. In this case the functions
    will use the class name of the object as the warnings category.</p>
<p class="Pp">Consider this example:</p>
<p class="Pp"></p>
<pre>    package Original;
    no warnings;
    use warnings::register;
    sub new
    {
        my $class = shift;
        bless [], $class;
    }
    sub check
    {
        my $self = shift;
        my $value = shift;
        if ($value % 2 &amp;&amp; warnings::enabled($self))
          { warnings::warn($self, &quot;Odd numbers are unsafe&quot;) }
    }
    sub doit
    {
        my $self = shift;
        my $value = shift;
        $self-&gt;check($value);
        # ...
    }
    1;
    package Derived;
    use warnings::register;
    use Original;
    our @ISA = qw( Original );
    sub new
    {
        my $class = shift;
        bless [], $class;
    }
    1;
</pre>
<p class="Pp">The code below makes use of both modules, but it only enables
    warnings from <span class="Li">&quot;Derived&quot;</span>.</p>
<p class="Pp"></p>
<pre>    use Original;
    use Derived;
    use warnings 'Derived';
    my $x = Original-&gt;new();
    $x-&gt;doit(1);
    my $y = Derived-&gt;new();
    $x-&gt;doit(1);
</pre>
<p class="Pp">When this code is run only the
    <span class="Li">&quot;Derived&quot;</span> object,
    <span class="Li">$y</span>, will generate a warning.</p>
<p class="Pp"></p>
<pre>    Odd numbers are unsafe at main.pl line 7
</pre>
<p class="Pp">Notice also that the warning is reported at the line where the
    object is first used.</p>
<p class="Pp">When registering new categories of warning, you can supply more
    names to warnings::register like this:</p>
<p class="Pp"></p>
<pre>    package MyModule;
    use warnings::register qw(format precision);
    ...
    warnings::warnif('MyModule::format', '...');
</pre>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="FUNCTIONS"><a class="permalink" href="#FUNCTIONS">FUNCTIONS</a></h1>
<p class="Pp">Note: The functions with names ending in
    <span class="Li">&quot;_at_level&quot;</span> were added in Perl 5.28.</p>
<dl class="Bl-tag">
  <dt id="use"><a class="permalink" href="#use">use warnings::register</a></dt>
  <dd>Creates a new warnings category with the same name as the package where
      the call to the pragma is used.</dd>
  <dt id="warnings::enabled()"><a class="permalink" href="#warnings::enabled()"><b>warnings::enabled()</b></a></dt>
  <dd>Use the warnings category with the same name as the current package.
    <p class="Pp">Return TRUE if that warnings category is enabled in the
        calling module. Otherwise returns FALSE.</p>
  </dd>
  <dt id="warnings::enabled($category)"><a class="permalink" href="#warnings::enabled($category)">warnings::enabled($category)</a></dt>
  <dd>Return TRUE if the warnings category, <span class="Li">$category</span>,
      is enabled in the calling module. Otherwise returns FALSE.</dd>
  <dt id="warnings::enabled($object)"><a class="permalink" href="#warnings::enabled($object)">warnings::enabled($object)</a></dt>
  <dd>Use the name of the class for the object reference,
      <span class="Li">$object</span>, as the warnings category.
    <p class="Pp">Return TRUE if that warnings category is enabled in the first
        scope where the object is used. Otherwise returns FALSE.</p>
  </dd>
  <dt id="warnings::enabled_at_level($category,"><a class="permalink" href="#warnings::enabled_at_level($category,">warnings::enabled_at_level($category,
    $level)</a></dt>
  <dd>Like <span class="Li">&quot;warnings::enabled&quot;</span>, but
      <span class="Li">$level</span> specifies the exact call frame, 0 being the
      immediate caller.</dd>
  <dt id="warnings::fatal_enabled()"><a class="permalink" href="#warnings::fatal_enabled()"><b>warnings::fatal_enabled()</b></a></dt>
  <dd>Return TRUE if the warnings category with the same name as the current
      package has been set to FATAL in the calling module. Otherwise returns
      FALSE.</dd>
  <dt id="warnings::fatal_enabled($category)"><a class="permalink" href="#warnings::fatal_enabled($category)">warnings::fatal_enabled($category)</a></dt>
  <dd>Return TRUE if the warnings category <span class="Li">$category</span> has
      been set to FATAL in the calling module. Otherwise returns FALSE.</dd>
  <dt id="warnings::fatal_enabled($object)"><a class="permalink" href="#warnings::fatal_enabled($object)">warnings::fatal_enabled($object)</a></dt>
  <dd>Use the name of the class for the object reference,
      <span class="Li">$object</span>, as the warnings category.
    <p class="Pp">Return TRUE if that warnings category has been set to FATAL in
        the first scope where the object is used. Otherwise returns FALSE.</p>
  </dd>
  <dt id="warnings::fatal_enabled_at_level($category,"><a class="permalink" href="#warnings::fatal_enabled_at_level($category,">warnings::fatal_enabled_at_level($category,
    $level)</a></dt>
  <dd>Like <span class="Li">&quot;warnings::fatal_enabled&quot;</span>, but
      <span class="Li">$level</span> specifies the exact call frame, 0 being the
      immediate caller.</dd>
  <dt id="warnings::warn($message)"><a class="permalink" href="#warnings::warn($message)">warnings::warn($message)</a></dt>
  <dd>Print <span class="Li">$message</span> to STDERR.
    <p class="Pp">Use the warnings category with the same name as the current
        package.</p>
    <p class="Pp">If that warnings category has been set to &quot;FATAL&quot; in
        the calling module then die. Otherwise return.</p>
  </dd>
  <dt id="warnings::warn($category,"><a class="permalink" href="#warnings::warn($category,">warnings::warn($category,
    $message)</a></dt>
  <dd>Print <span class="Li">$message</span> to STDERR.
    <p class="Pp">If the warnings category, <span class="Li">$category</span>,
        has been set to &quot;FATAL&quot; in the calling module then die.
        Otherwise return.</p>
  </dd>
  <dt id="warnings::warn($object,"><a class="permalink" href="#warnings::warn($object,">warnings::warn($object,
    $message)</a></dt>
  <dd>Print <span class="Li">$message</span> to STDERR.
    <p class="Pp">Use the name of the class for the object reference,
        <span class="Li">$object</span>, as the warnings category.</p>
    <p class="Pp">If that warnings category has been set to &quot;FATAL&quot; in
        the scope where <span class="Li">$object</span> is first used then die.
        Otherwise return.</p>
  </dd>
  <dt id="warnings::warn_at_level($category,"><a class="permalink" href="#warnings::warn_at_level($category,">warnings::warn_at_level($category,
    $level, $message)</a></dt>
  <dd>Like <span class="Li">&quot;warnings::warn&quot;</span>, but
      <span class="Li">$level</span> specifies the exact call frame, 0 being the
      immediate caller.</dd>
  <dt id="warnings::warnif($message)"><a class="permalink" href="#warnings::warnif($message)">warnings::warnif($message)</a></dt>
  <dd>Equivalent to:
    <p class="Pp"></p>
    <pre>    if (warnings::enabled())
      { warnings::warn($message) }
    </pre>
  </dd>
  <dt id="warnings::warnif($category,"><a class="permalink" href="#warnings::warnif($category,">warnings::warnif($category,
    $message)</a></dt>
  <dd>Equivalent to:
    <p class="Pp"></p>
    <pre>    if (warnings::enabled($category))
      { warnings::warn($category, $message) }
    </pre>
  </dd>
  <dt id="warnings::warnif($object,"><a class="permalink" href="#warnings::warnif($object,">warnings::warnif($object,
    $message)</a></dt>
  <dd>Equivalent to:
    <p class="Pp"></p>
    <pre>    if (warnings::enabled($object))
      { warnings::warn($object, $message) }
    </pre>
  </dd>
  <dt id="warnings::warnif_at_level($category,"><a class="permalink" href="#warnings::warnif_at_level($category,">warnings::warnif_at_level($category,
    $level, $message)</a></dt>
  <dd>Like <span class="Li">&quot;warnings::warnif&quot;</span>, but
      <span class="Li">$level</span> specifies the exact call frame, 0 being the
      immediate caller.</dd>
  <dt id="warnings::register_categories(@names)"><a class="permalink" href="#warnings::register_categories(@names)">warnings::register_categories(@names)</a></dt>
  <dd>This registers warning categories for the given names and is primarily for
      use by the warnings::register pragma.</dd>
</dl>
<p class="Pp">See also &quot;Pragmatic Modules&quot; in perlmodlib and
  perldiag.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">2021-02-21</td>
    <td class="foot-os">perl v5.34.0</td>
  </tr>
</table>
</body>
</html>
